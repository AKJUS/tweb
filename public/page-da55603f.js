import{E as ue,h as z,D as O,p as me,M as q,a as _,c as he,j as F,k as ve,I as ge}from"./index-02c68fa9.js";const p=new ue,V="start",$="end";let W=!1,M=z(),D=0;M.resolve();const x=console.log.bind(console.log,"[HEAVY-ANIMATION]:");function J(e,t){W||(M=z(),p.dispatchEvent(V),W=!0,O&&x("start")),++D,O&&x("attach promise, length:",D,t);const n=[t!==void 0?me(t):void 0,e.finally(()=>{})].filter(Boolean),d=performance.now(),o=M;return Promise.race(n).then(()=>{M!==o||M.isFulfilled||(--D,O&&x("promise end, length:",D,performance.now()-d),D<=0&&te())}),M}window.dispatchHeavyAnimationEvent=J;function te(){M.isFulfilled||(W=!1,D=0,p.dispatchEvent($),M.resolve(),O&&x("end"))}function He(){te()}function Be(){return M}function Fe(e,t,n){W&&e();const d=n?n.add(p):p.addEventListener.bind(p),o=n?n.removeManual.bind(n,p):p.removeEventListener.bind(p);return d(V,e),d($,t),()=>{o($,t),o(V,e)}}function C(e,t){if(!e.parentNode)return-1;if(t)return Array.from(e.parentNode.childNodes).indexOf(e);let n=0;for(;(e=e.previousElementSibling)!==null;)++n;return n}class Ee{isEnabled(){return!!(_.settings&&_.settings.liteMode.all)}isAvailable(t){return!!(_.settings&&!_.settings.liteMode.all&&!_.settings.liteMode[t])}}const K=new Ee;q&&(q.liteMode=K);function U(e,t){return`translate3d(${e}px, ${t}px, 0)`}const ye={callback:(e,t,n)=>{const d=t.getBoundingClientRect().width,o=[e,t];return n&&o.reverse(),o[0].style.filter="brightness(80%)",o[0].style.transform=U(-d*.25,0),o[1].style.transform=U(d,0),e.classList.add("active"),e.offsetWidth,e.style.transform="",e.style.filter="",()=>{t.style.transform=t.style.filter=""}},animateFirst:!1},Te={callback:(e,t,n)=>{const d=t.getBoundingClientRect().width,o=[e,t];return n&&o.reverse(),o[0].style.transform=U(-d,0),o[1].style.transform=U(d,0),e.classList.add("active"),e.offsetWidth,e.style.transform="",()=>{t.style.transform=""}},animateFirst:!1},we={navigation:ye,tabs:Te},be=e=>{let{content:t,type:n,transitionTime:d,onTransitionEnd:o,onTransitionStart:w,isHeavy:h=!0,once:y=!1,withAnimationListener:A=!0,listenerSetter:L,animateFirst:T=!1}=e;const{callback:I,animateFirst:g}=we[n]||{};t.dataset.animation=n,g!==void 0&&(T=g);const i=new Map;let s,c=null;if(A){const a=I?"transitionend":"animationend",v=r=>{he(r),!(r.target.parentElement!==t||(i.get(r.target)?.(),r.target!==c))&&(!s&&h||(s&&(s.resolve(),s=void 0),o?.(m.prevId()),t.classList.remove("animating","backwards","disable-hover"),y&&(L?L.removeManual(t,a,v):t.removeEventListener(a,v),c=s=void 0,i.clear())))};L?L.add(t)(a,v):t.addEventListener(a,v)}function m(a,v=!0,r){r&&(c=r),a instanceof HTMLElement&&(a=C(a));const E=m.prevId();if(a===E)return!1;w?.(a);const f=t.children[a];if((!K.isAvailable("animations")||E===-1&&!T)&&(v=!1),!A){const u=t.dataset.timeout;u!==void 0&&clearTimeout(+u),delete t.dataset.timeout}if(!v){c?c.classList.remove("active","to","from"):f&&i.get(f)?.(),f&&(f.classList.remove("to","from"),f.classList.add("active")),t.classList.remove("animating","backwards","disable-hover"),c=f,o?.(a);return}A||(t.dataset.timeout=""+window.setTimeout(()=>{f.classList.remove("to"),c&&c.classList.remove("from"),t.classList.remove("animating","backwards","disable-hover"),delete t.dataset.timeout},d)),c&&(c.classList.remove("to"),c.classList.add("from")),t.classList.add("animating");const P=E<a;t.classList.toggle("backwards",!P);let N;if(f&&(I?N=I(f,c,P):f.classList.add("active"),f.classList.remove("from"),f.classList.add("to")),f){const u=f.dataset.transitionTimeout;u&&clearTimeout(+u),i.set(f,()=>{f.classList.remove("to"),i.delete(f)})}if(c){let u;const b=c,l=()=>{clearTimeout(u),b.classList.remove("active","from"),N?.(),i.delete(b)};f?(u=window.setTimeout(l,d+100),i.set(b,l)):(u=window.setTimeout(l,d),i.set(b,()=>{clearTimeout(u),i.delete(b)})),b.dataset.transitionTimeout=""+u,h&&(s||(s=z()),J(s,d*2))}c=f}return m.prevId=()=>c?C(c):-1,m.getFrom=()=>c,m.setFrom=a=>c=a,m},j=new Map;function Le(e){H(e);const t={isCancelled:!1,deferred:z()};return j.set(e,t),t.deferred.then(()=>{ne(e)===t&&j.delete(e)}),t}function ne(e){return j.get(e)}function H(e){const t=ne(e);t&&(t.isCancelled=!0,t.deferred.resolve())}function se(e,t,n){return n||(n=Le(t)),F(()=>{n.isCancelled||(e()?se(e,t,n):n.deferred.resolve())}),n.deferred}function Me(e){F(()=>{e()&&Me(e)})}function Se(e){return!!e?.isConnected}const ee=250,pe=600,ie=1500,Ae=500;var ae=(e=>(e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Static=2]="Static",e))(ae||{});function Ie(e){if(e.margin??(e.margin=0),e.maxDistance??(e.maxDistance=ie),e.axis??(e.axis="y"),(!K.isAvailable("animations")||e.forceDuration===0)&&(e.forceDirection=2),e.forceDirection===2)return e.forceDuration=0,G(e);const t=ve().then(()=>G(e));return e.axis==="y"?J(t):t}function G(e){const{element:t,container:n,getNormalSize:d,getElementPosition:o,transitionFunction:w,axis:h,margin:y,position:A,forceDirection:L,maxDistance:T,forceDuration:I}=e;if(!Se(t))return H(n),Promise.resolve();const g=h==="y"?"top":"left",i=h==="y"?"bottom":"right",s=h==="y"?"height":"width",c=h==="y"?"scrollHeight":"scrollWidth",m=h==="y"?"scrollHeight":"offsetWidth",a=h==="y"?"scrollTop":"scrollLeft",v=t.getBoundingClientRect(),r=n.getBoundingClientRect?n.getBoundingClientRect():document.body.getBoundingClientRect(),E=v[g]-r[g],f=o?o({elementRect:v,containerRect:r,elementPosition:E}):E,P=t[m],N=d?d({rect:r}):r[s];let u=n[a];const b=n[c];let l;switch(A){case"start":l=f-y;break;case"end":l=v[i]-r[i]+y;break;case"nearest":case"center":if(P<N)l=f+P/2-N/2;else{if(e.fallbackToElementStartWhenCentering&&e.fallbackToElementStartWhenCentering!==t)return e.element=e.fallbackToElementStartWhenCentering,e.position="start",G(e);l=f-y}break}if(Math.abs(l-(y||0))<1)return H(n),Promise.resolve();let k;if(h==="y"&&L===void 0&&(l>T?(k=u+=l-T,l=T):l<-T&&(k=u+=l+T,l=-T)),l<0){const S=-u;l=Math.max(l,S)}else if(l>0){const S=b-(u+N);l=Math.min(l,S)}const X=u+l,Q=Math.abs(l),R=I??ee+Q/ie*(pe-ee),le=Date.now(),ce=w??(Q<Ae?Ne:Pe),Y=()=>R?Math.min((Date.now()-le)/R,1):1,Z=()=>{k!==void 0&&(n[a]=k,k=void 0);const S=Y(),fe=ce(S),de=l*(1-fe);return n[a]=Math.round(X-de),S<1};if(!R||!l)return H(n),Z(),Promise.resolve();if(e.startCallback){const S=b-Math.round(X+n[h==="y"?"offsetHeight":"offsetWidth"]);e.startCallback({scrollSize:b,scrollPosition:u,distanceToEnd:S,path:l,duration:R,containerRect:r,elementRect:v,getProgress:Y})}return se(Z,n)}function Pe(e){return 1-(1-e)**5}function Ne(e){return 1-(1-e)**3.5}function De(e,t){if(!e)return null;if(e.parentElement===t)return e;for(;e.parentElement;)if(e=e.parentElement,e.parentElement===t)return e;return null}function ke(e,t){const n=new Event(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(n)}let re;document.addEventListener("mousedown",e=>{re=e.target});function _e(e){if(e.isTrusted&&e.type==="click"&&e.target!==re)return!0}const B=ge?"mousedown":"click";function Ce(e,t,n={}){const d=n.listenerSetter?n.listenerSetter.add(e):e.addEventListener.bind(e),o=n.listenerSetter?n.listenerSetter.removeManual.bind(n.listenerSetter,e):e.removeEventListener.bind(e);if(n.touchMouseDown=!0,B==="click"&&!n.ignoreMove){const w=t;t=h=>{_e(h)||w(h)}}return d(B,t,n),()=>o(B,t,n)}function We(e){ke(e,B)}function Re(e,t,n,d,o=200,w,h){const y=be({content:t,type:e||t.dataset.animation==="tabs"?"tabs":"navigation",transitionTime:o,onTransitionEnd:d,listenerSetter:h});if(!e)return y;const A=new Proxy(y,{apply:(g,i,s)=>{const c=s[1]!==void 0?s[1]:!0;let m,a;s[0]instanceof HTMLElement?(m=C(s[0]),a=s[0]):(m=+s[0],a=e.querySelector(`[data-tab="${m}"]`)||e.children[m]),L(a,m,c)}}),L=async(g,i,s=!0)=>{const c=t.children[i];if(n){const r=n(i,c,s),E=r instanceof Promise?await r:r;if(E!==void 0&&!E)return}w&&w.scrollIntoViewNew({element:g.parentElement.children[i],position:"center",forceDirection:s?void 0:ae.Static,forceDuration:o,axis:"x"}),K.isAvailable("animations")||(s=!1);const m=y.prevId();if(g.classList.contains("active")||i===m)return!1;const a=s?F:r=>r(),v=e.querySelector(I.toLowerCase()+".active");v&&a(()=>{v.classList.remove("active")}),T&&m!==-1&&s&&a(()=>{const r=g.querySelector("i"),E=g.parentElement.children[m].querySelector("i");E.classList.remove("animate"),r.classList.remove("animate");const f=E.parentElement.parentElement.offsetLeft-r.parentElement.parentElement.offsetLeft,P=E.clientWidth/r.clientWidth;r.style.transform=`translate3d(${f}px, 0, 0) scale3d(${P}, 1, 1)`,F(()=>{r.classList.add("animate"),r.style.transform="none"})}),a(()=>{g.classList.add("active")}),y(i,s)},T=!e.classList.contains("no-stripe"),I=e.firstElementChild.tagName;return Ce(e,g=>{let i=g.target;if(i=De(i,e),!i)return!1;let s;if(i.dataset.tab){if(s=+i.dataset.tab,s===-1)return!1}else s=C(i);L(i,s)},{listenerSetter:h}),A}class Oe{constructor(){this.pageId=-1,this.pagesDiv=document.getElementById("auth-pages"),this.scrollableDiv=this.pagesDiv.querySelector(".scrollable"),this.selectTab=Re(null,this.scrollableDiv.querySelector(".tabs-container"),null,()=>{this.page?.onShown&&this.page.onShown()})}setPage(t){if(t.isAuthPage){this.pagesDiv.style.display="";const n=C(t.pageEl);if(this.pageId===n)return;this.selectTab(n),this.pageId=n,this.scrollableDiv&&Ie({container:this.scrollableDiv,element:this.scrollableDiv.firstElementChild,position:"start"})}else this.pagesDiv.style.display="none",t.pageEl.style.display="",this.pageId=-1;this.page=t}}const oe=new Oe;q.pagesManager=oe;class Ue{constructor(t,n,d,o,w){this.isAuthPage=n,this.onFirstMount=d,this.onMount=o,this.onShown=w,this.installed=!1,this.pageEl=document.body.querySelector("."+t)}async mount(...t){if(this.onMount){const n=this.onMount(...t);n instanceof Promise&&await n}if(!this.installed){if(this.onFirstMount)try{const n=this.onFirstMount(...t);n instanceof Promise&&await n}catch(n){console.error("PAGE MOUNT ERROR:",n)}this.installed=!0}oe.setPage(this)}}export{B as C,ae as F,Ue as P,be as T,Ce as a,Me as b,We as c,se as d,Ie as e,De as f,Be as g,_e as h,Se as i,Re as j,H as k,K as l,He as m,J as n,ke as s,Fe as u,C as w};
//# sourceMappingURL=page-da55603f.js.map
