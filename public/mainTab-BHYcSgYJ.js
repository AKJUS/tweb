import{a5 as J,b$ as oe,i as k,a2 as A,w as W,a0 as R,a as b,a4 as V,b as n,t as M,bx as me,aB as _e,c as D,af as he,a6 as ge,a1 as Z,a7 as U,c0 as pe,a9 as ve,by as ee,ag as Se,b_ as fe,dt as te,ad as q,ev as N,a3 as X,h as _,bw as $e,aF as be}from"./index-4ugwRoSj.js";import{u as se}from"./actions-B89GEeGZ.js";import{G as Pe,H as ce,J as Y,R as $,v as ye}from"./appDialogsManager-D48wV3S5.js";import{S as ke}from"./staticSwitch-XQriVjUE.js";import{S as z}from"./space-C1PT3j0F.js";import{I as ne}from"./iconTsx-Btr9x9To.js";import{L as ae,c as Ce}from"./lottieAnimation-rgG8cAsV.js";import{T as Le}from"./chatBackground-BAnJmbIn.js";import"./page-BJ2GTZdy.js";import"./avatar-BnQyfmkq.js";import"./putPreloader-DHZpVoox.js";import"./classNames-CMCa94Lt.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-BKbl9wI1.js";import"./codeInputField-Cz10P9Mk.js";const we="_Container_1qplo_1",Te="_KeysContainer_1qplo_7",Ee="_KeyButton_1qplo_13",Be="_selected_1qplo_35",Re="_KeyButtonFirst_1qplo_53",Me="_KeyButtonLast_1qplo_57",xe="_PlusIcon_1qplo_62",Oe="_TargetKey_1qplo_67",E={Container:we,KeysContainer:Te,KeyButton:Ee,selected:Be,KeyButtonFirst:Re,KeyButtonLast:Me,PlusIcon:xe,TargetKey:Oe},Ke=M("<span>"),Ae=M("<div><div></div><div>"),De=M("<button>"),Q=["Ctrl","Alt","Shift","Meta"],He=o=>{const u=oe(()=>o.value,(c,l)=>l.includes(c)),P=c=>c==="Meta"?n(ne,{icon:me?"mac_command_key":"win_key"}):(()=>{const l=Ke();return k(l,c),l})(),C=c=>{if(o.value.includes(c)){const l=o.value.filter(h=>h!==c);if(!l.length){const h=[0,1,2,3].filter(e=>e!==Q.indexOf(c));l.push(Q[h[Math.floor(Math.random()*h.length)]])}o.onChange(l)}else o.onChange([...o.value,c])};return(()=>{const c=Ae(),l=c.firstChild,h=l.nextSibling;return k(l,()=>Q.map((e,i,v)=>(()=>{const p=De();return p.$$click=C,p.$$clickData=e,A(W,p,()=>!0),k(p,()=>P(e)),R(t=>{const d=E.KeyButton,m={[E.selected]:u(e),[E.KeyButtonFirst]:i===0,[E.KeyButtonLast]:i===v.length-1};return d!==t._v$5&&b(p,t._v$5=d),t._v$6=V(p,m,t._v$6),t},{_v$5:void 0,_v$6:void 0}),p})())),k(c,n(ne,{get class(){return E.PlusIcon},icon:"plus"}),h),k(h,()=>o.key),R(e=>{const i=E.Container,v={[o.class]:!!o.class},p=E.KeysContainer,t=E.TargetKey;return i!==e._v$&&b(c,e._v$=i),e._v$2=V(c,v,e._v$2),p!==e._v$3&&b(l,e._v$3=p),t!==e._v$4&&b(h,e._v$4=t),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),c})()};J(["click"]);const Ie="_Overlay_deagn_36",Fe="_Value_deagn_45",qe="_Select_deagn_52",Ne="_SelectClip_deagn_63",Ve="_Option_deagn_75",Ue="_selected_deagn_87",x={Overlay:Ie,Value:Fe,Select:qe,SelectClip:Ne,Option:Ve,selected:Ue},ze=M("<div>"),Ge=M("<div><div><div>"),Qe=M("<div><span>"),Xe=o=>{let u;const P=_e(()=>o.options.find(t=>t.value===o.value)?.label),[C,c]=D();he(()=>{c(P()())});const l=oe(()=>o.value),[h,e]=D();ge(()=>{const t=new ee;t.add(window)("resize",()=>{o.isOpen&&o.onClose?.()}),Z(()=>{t.removeAll()})});const i=(t,d)=>{const m=t.firstElementChild,r=m.querySelector(`.${x.selected}`);if(!r||!m)return;const a=u.getBoundingClientRect(),S=m.getBoundingClientRect(),g=r.getBoundingClientRect(),y=g.top-S.top,L=y+g.height,H=y+g.height/2,I=a.left+a.width/2;let w=a.top+a.height/2-H;const K=w+S.height>window.innerHeight||w<0;if(K&&(w+=Math.max(0,-w)+Math.min(0,window.innerHeight-(w+S.height))),m.style.setProperty("--x",""+I),m.style.setProperty("--y",""+w),m.animate({opacity:[0,1]},{duration:120}).finished.then(()=>{K&&d()}),K)return;const G=Math.max(y,S.height-L),F=T=>`polygon(0% ${y-T}px, 100% ${y-T}px, 100% ${L+T}px, 0px ${L+T}px)`;Se(0,G,400,T=>{m.style.setProperty("clip-path",F(T))},{easing:fe,onEnd:()=>{m.style.removeProperty("clip-path"),d()}})},v=async(t,d)=>{await t.firstElementChild.animate({opacity:[1,0]},{duration:120}).finished,d()},p=t=>{const d=[o.parent,h()];if(!d.every(Boolean))return;d.every(r=>{const a=r.getBoundingClientRect();return Math.max(a.left-t.clientX,t.clientX-a.right,a.top-t.clientY,t.clientY-a.bottom)>100})&&o.onClose?.()};return[(()=>{const t=ze(),d=u;return typeof d=="function"?A(d,t):u=t,k(t,C),R(()=>b(t,x.Value)),t})(),n(ve,{get children(){return n(Le,{appear:!0,onEnter:i,onExit:v,get children(){return U(()=>!!o.isOpen)()&&(()=>{const t=Ge(),d=t.firstChild,m=d.firstChild;return t.$$mousemove=p,t.$$click=r=>{r.stopPropagation(),o.onClose?.()},A(e,m),k(m,n(pe,{get each(){return o.options},children:r=>(()=>{const a=Qe(),S=a.firstChild;return a.$$click=o.onChange,a.$$clickData=r.value,A(W,a,()=>!0),k(S,()=>r.label()),R(g=>{const y=x.Option,L={[x.selected]:l(r.value)};return y!==g._v$4&&b(a,g._v$4=y),g._v$5=V(a,L,g._v$5),g},{_v$4:void 0,_v$5:void 0}),a})()})),R(r=>{const a=x.Overlay,S=x.SelectClip,g=x.Select;return a!==r._v$&&b(t,r._v$=a),S!==r._v$2&&b(d,r._v$2=S),g!==r._v$3&&b(m,r._v$3=g),r},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}})}})]};J(["click","mousemove"]);const Ye="_MainDescription_1pm2o_36",je="_FirstSection_1pm2o_44",Je="_Row_1pm2o_49",We="_ShortcutBuilderRow_1pm2o_54",Ze="_ShortcutBuilderRowChild_1pm2o_60",et="_collapsed_1pm2o_63",tt="_Hint_1pm2o_68",B={MainDescription:Ye,FirstSection:je,Row:Je,ShortcutBuilderRow:We,ShortcutBuilderRowChild:Ze,collapsed:et,Hint:tt},ie=M("<div>"),nt=M('<div><button class="btn-primary btn-color-primary btn-large">'),j=(o,u)=>({appendTo:o.scrollable.container,duration:2500,from:"bottom",textElement:_(u),icon:"premium_lock",class:B.Hint,canCloseOnPeerChange:!1}),yt=()=>{const{rootScope:o}=te(),u=Pe(),[P,{mutate:C}]=q(()=>{const e=o.managers.appStateManager.getState().then(i=>i.settings?.passcode?.enabled||!1);return u.collect(e),e}),[c,l]=D(!1),h=new ee;return h.add(o)("settings_updated",({key:e,value:i})=>{e===N("settings","passcode","enabled")&&C(i)}),Z(()=>{h.removeAll()}),n(X,{get when(){return P.state==="ready"},get children(){return U(()=>!!(P()||c()))()?n(st,{onDisable:()=>l(!0)}):n(ot,{})}})},ot=()=>{const[o,{AppPasscodeEnterPasswordTab:u,AppPasscodeLockTab:P}]=ce(),{enablePasscode:C}=se(),{setQuizHint:c}=te(),l=()=>{o.slider.createTab(u).open({onSubmit:e=>{h(e),e=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"})},h=e=>{o.slider.createTab(u).open({onSubmit:async(i,v)=>{if(i!==e)throw{};await C(i),i="",v.slider.sliceTabsUntilTab(P,v),v.close(),c(j(o,"PasscodeLock.PasscodeHasBeenSet"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"})};return n(Y,{caption:"PasscodeLock.Notice",get children(){return[n(ae,{name:"UtyanPasscode"}),(()=>{const e=ie();return k(e,()=>_("PasscodeLock.Description")),R(()=>b(e,B.MainDescription)),e})(),n(z,{amount:"0.5rem"}),(()=>{const e=nt(),i=e.firstChild;return i.$$click=l,A(W,i,()=>!0),k(i,()=>_("PasscodeLock.TurnOn")),R(()=>b(e,Ce.AdditionalPadding)),e})(),n(z,{amount:"1rem"})]}})},st=o=>{const[u,{AppPasscodeEnterPasswordTab:P,AppPasscodeLockTab:C,AppPrivacyAndSecurityTab:c}]=ce(),{disablePasscode:l,changePasscode:h}=se(),{rootScope:e,setQuizHint:i}=te(),[,v]=be(),p=[{value:0,label:()=>_("PasscodeLock.Disabled")},{value:1,label:()=>_("MinutesShort",[1])},{value:5,label:()=>_("MinutesShort",[5])},{value:10,label:()=>_("MinutesShort",[10])},{value:15,label:()=>_("MinutesShort",[15])},{value:30,label:()=>_("MinutesShort",[30])}],[t,d]=D(),[m,r]=D(!1),[a,{mutate:S}]=q(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.autoLockTimeoutMins||0)),[g,{mutate:y}]=q(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcutEnabled||!1)),[L,{mutate:H}]=q(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcut||[])),I=new ee;I.add(e)("settings_updated",({key:s,value:f})=>{s===N("settings","passcode","lockShortcut")?H(f):s===N("settings","passcode","lockShortcutEnabled")?y(f):s===N("settings","passcode","autoLockTimeoutMins")&&S(f)});function w(s){H(s),v("passcode","lockShortcut",s)}function K(s){y(s),v("passcode","lockShortcutEnabled",s)}function G(s){S(s),v("passcode","autoLockTimeoutMins",s)}Z(()=>{I.removeAll()});const F=()=>!$e&&L.state==="ready"&&g.state==="ready",T=()=>{u.slider.createTab(P).open({onSubmit:s=>{re(s),s=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"},"PasscodeLock.EnterANewPasscode")},re=s=>{u.slider.createTab(P).open({onSubmit:async(f,O)=>{if(f!==s)throw{};await h(f),f="",O.slider.sliceTabsUntilTab(C,O),O.close(),i(j(u,"PasscodeLock.PasscodeHasBeenChanged"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"},"PasscodeLock.ReEnterPasscode")},le=()=>{ye({title:_("PasscodeLock.TurnOff.Title"),description:_("PasscodeLock.TurnOff.Description"),button:{text:_("PasscodeLock.TurnOff"),isDanger:!0}}).then(async()=>{o.onDisable(),await l(),u.close(),i(j(u.slider.getTab(c),"PasscodeLock.PasscodeHasBeenDisabled"))}).catch(()=>{})},ue=[U(()=>_("PasscodeLock.Description")),n(z,{amount:"1rem"}),U(()=>_("PasscodeLock.Notice"))];return[n(Y,{get class(){return B.FirstSection},caption:ue,get children(){return[n(ae,{name:"UtyanPasscode"}),n(z,{amount:"1.125rem"}),n($,{clickable:le,get children(){return[n($.Icon,{icon:"lockoff"}),n($.Title,{get children(){return _("PasscodeLock.TurnOff.Title")}})]}}),n($,{clickable:T,get children(){return[n($.Icon,{icon:"key"}),n($.Title,{get children(){return _("PasscodeLock.ChangePasscode")}})]}})]}}),n(Y,{get caption(){return F()?"PasscodeLock.LockShortcutDescription":void 0},get children(){return[n(X,{get when(){return a.state==="ready"},get children(){return n($,{ref:d,get class(){return B.Row},clickable:()=>{r(!0)},get children(){return[n($.Title,{get children(){return _("PasscodeLock.AutoLock")}}),n($.RightContent,{get children(){return n(Xe,{get value(){return a()},onClose:()=>r(!1),options:p,onChange:G,get isOpen(){return m()},get parent(){return t()}})}})]}})}}),n(X,{get when(){return F()},get children(){return[n($,{get class(){return B.Row},clickable:s=>{K(!g())},get children(){return[n($.Title,{get children(){return _("PasscodeLock.EnableLockShortcut")}}),n($.RightContent,{get children(){return n(ke,{get checked(){return g()}})}})]}}),(()=>{const s=ie();return k(s,n(He,{get class(){return B.ShortcutBuilderRowChild},get value(){return L()||[]},onChange:w,key:"L"})),R(f=>{const O=B.ShortcutBuilderRow,de={[B.collapsed]:!g()};return O!==f._v$&&b(s,f._v$=O),f._v$2=V(s,de,f._v$2),f},{_v$:void 0,_v$2:void 0}),s})()]}})]}})]};J(["click"]);export{yt as default};
//# sourceMappingURL=mainTab-BHYcSgYJ.js.map
