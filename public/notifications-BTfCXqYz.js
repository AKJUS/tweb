import{a5 as tt,c as N,a6 as et,a1 as U,af as E,a2 as $,a as nt,bf as F,a0 as it,t as W,bB as R,z as ot,i as A,b as t,d as b,bT as st,bz as rt,h as v,eo as at,dt as X,aB as ct,a7 as D,eX as ut,ep as lt,aF as K,x as gt,Z as J}from"./index-4ugwRoSj.js";import{T as ft,U as dt,V as ht,R as s,W as w,J as _,X as mt,N as pt}from"./appDialogsManager-D48wV3S5.js";import"./page-BJ2GTZdy.js";import"./avatar-BnQyfmkq.js";import"./putPreloader-DHZpVoox.js";import"./classNames-CMCa94Lt.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./iconTsx-Btr9x9To.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-BKbl9wI1.js";import"./chatBackground-BAnJmbIn.js";import"./codeInputField-Cz10P9Mk.js";const St=W("<div><div class=progress-line__filled></div><input class=progress-line__seek type=range>");function Nt(e){const[a,r]=N(!1),[i,m]=N(),[u,p]=N(e.value||0);let c,f,n,l=null;const d=e.min??0,C=e.max??0,y=e.step,z=e.withTransition||!1,L=e.useTransform||!1,q=e.useProperty||!1,M=e.vertical||!1,k=e.offsetAxisValue||0,I=""+y,O=I.indexOf("."),H=O===-1?0:I.length-O-1,G=o=>{let S=(o-d)/(C-d);S=R(S,0,1),L?f.style.transform=`scaleX(${S})`:q?c.style.setProperty("--progress",""+S):f.style.width=S*100+"%"},P=o=>{n.value=""+o,G(+n.value),p(+n.value)},Z=()=>{const o=+n.value;G(o),p(o),e.onScrub?.(o)},j=o=>{B(o)},Q=o=>{m(c.getBoundingClientRect()),r(!0),B(o),c.classList.add("is-focused"),e.onMouseDown?.(o)},Y=o=>{r(!1),c.classList.remove("is-focused"),e.onMouseUp?.(o)},B=(o,S)=>{const g=i();if(!g)return 0;let x=M?g.height:g.width;k&&(x-=k);let T=R(M?-(o.y-g.bottom):o.x-g.left-k/2,0,x);!M&&ot.isRTL&&(T=x-T);let h=d+T/x*(C-d);return h-d<(C-d)/2&&(h-=y/10),h=+h.toFixed(H),h=R(h,d,C),P(h),e.onScrub?.(h),h};return et(()=>{e.value&&P(e.value),l=ft(c,Q,j,Y)}),U(()=>{l?.()}),E(()=>{e.value!==void 0&&P(e.value)}),(()=>{const o=St(),S=o.firstChild,g=S.nextSibling,x=c;typeof x=="function"?$(x,o):c=o,nt(o,`progress-line ${L?"use-transform":""} ${z?"with-transition":""}`);const T=f;typeof T=="function"?$(T,S):f=S,g.$$input=Z;const h=n;return typeof h=="function"?$(h,g):n=g,F(g,"step",y),F(g,"min",d),F(g,"max",C),it(()=>g.value=u()),o})()}tt(["input"]);const vt=W("<div class=range-setting-selector><div class=range-setting-selector-details><div class=range-setting-selector-name></div><div class=range-setting-selector-value>");function yt(e){const[a,r]=N(e.value);return E(()=>{r(e.value)}),(()=>{const i=vt(),m=i.firstChild,u=m.firstChild,p=u.nextSibling;return A(u,()=>e.textLeft),A(p,()=>e.textRight(a())),A(i,t(Nt,{get step(){return e.step},get min(){return e.minValue},get max(){return e.maxValue},get value(){return e.value},onScrub:c=>{e.onChange?.(c),r(c)},get onMouseUp(){return e.onMouseUp}}),null),i})()}const V=e=>{const[a,r]=N(!0),[i,m]=N(!0),[u,p]=N(),c={_:e.inputKey};E(async()=>{const n=u();if(!n)return;const l=await b.managers.appNotificationsManager.isMuted(n);return r(!l),m(!!n.show_previews),l}),U(async()=>{const n=!a(),l=i(),d=u(),C=await b.managers.appNotificationsManager.isMuted(d);if(n===C&&l===d.show_previews)return;const y=st(d);y._="inputPeerNotifySettings",y.mute_until=n?rt:0,y.show_previews=l,b.managers.appNotificationsManager.updateNotifySettings(c,y)}),dt(b)("notify_settings",n=>{const l=ht(n.peer._);e.inputKey===l&&p(n.notify_settings)});const f=b.managers.appNotificationsManager.getNotifySettings(c);return(f instanceof Promise?f:Promise.resolve(f)).then(n=>{u()||p(n)}),t(_,{get name(){return e.name},get children(){return[t(s,{get children(){return[t(s.Title,{get children(){return v(e.typeText)}}),t(s.CheckboxFieldToggle,{get children(){return t(w,{get checked(){return a()},onChange:r,toggle:!0})}})]}}),t(s,{get children(){return[t(s.Title,{get children(){return v("MessagePreview")}}),t(s.CheckboxFieldToggle,{get children(){return t(w,{get checked(){return i()},onChange:m,toggle:!0})}})]}})]}})},Ct=()=>{const[e,a]=N(!0),r=lt();return b.managers.appNotificationsManager.getContactSignUpNotification().then(i=>{a(i),at(r,()=>U(()=>{const m=e();m!==i&&b.managers.appNotificationsManager.setContactSignUpNotification(!m)}))}),t(_,{name:"NotificationsOther",get children(){return t(s,{get children(){return[t(s.Title,{get children(){return v("ContactJoined")}}),t(s.CheckboxFieldToggle,{get children(){return t(w,{get checked(){return e()},onChange:a,toggle:!0})}})]}})}})},xt=()=>{const{uiNotificationsManager:e}=X(),[a,r]=K(),[i,m]=N(Notification.permission),u=ct(()=>i()==="granted"),p=n=>{gt(n),Notification.requestPermission().then(l=>{if(m(l),l==="granted")e.onPushConditionsChange();else throw 1},()=>{pt({langPackKey:"Notifications.Restricted"})})},c=n=>t(s,J(n,{get fakeDisabled(){return!u()},get clickable(){return!u()&&p}})),f=n=>t(w,J(n,{get checked(){return u()&&n.checked}}));return t(_,{name:"Notifications.Web",get caption(){return u()?"MultiAccount.ShowNotificationsFromCaption":"Notifications.Default"},get children(){return[t(c,{get children(){return[t(s.Title,{get children(){return v("Notifications.Show")}}),t(s.CheckboxFieldToggle,{get children(){return t(f,{get checked(){return a.notifications.desktop},onChange:n=>r("notifications","desktop",n),toggle:!0})}})]}}),t(c,{get children(){return[t(s.Title,{get children(){return v("Notifications.Offline")}}),t(s.CheckboxFieldToggle,{get children(){return t(f,{get checked(){return a.notifications.push},onChange:n=>r("notifications","push",n),toggle:!0})}})]}}),t(c,{get children(){return[t(s.Title,{get children(){return v("MultiAccount.AllAccounts")}}),t(s.CheckboxFieldToggle,{get children(){return t(f,{get checked(){return a.notifyAllAccounts},onChange:n=>r("notifyAllAccounts",n),toggle:!0})}})]}}),D(()=>D(()=>!u())()&&t(mt,{text:"Notifications.Enable",class:"btn-primary primary btn-transparent",icon:"unmute",get disabled(){return u()},onClick:p}))]}})},bt=()=>{const{uiNotificationsManager:e}=X(),[a,r]=K();return t(_,{name:"Notifications.Sound.Section",caption:"Notifications.Sound.Caption",get children(){return[t(s,{get children(){return[t(s.Title,{get children(){return v("Notifications.Sound")}}),t(s.CheckboxFieldToggle,{get children(){return t(w,{get checked(){return a.notifications.sound},onChange:i=>{i&&!a.notifications.volume&&r("notifications","volume",ut.notifications.volume),r("notifications","sound",i)},toggle:!0})}})]}}),t(yt,{get textLeft(){return v("Notifications.Sound.Volume")},textRight:i=>""+Math.floor(i*100)+"%",step:.01,get value(){return a.notifications.volume},minValue:0,maxValue:1,onChange:i=>{i=+i.toFixed(2),i||r("notifications","sound",!1),r("notifications","volume",i)},onMouseUp:()=>{e.testSound(a.notifications.volume)}})]}})},Tt=()=>{const[e,a]=K();return t(_,{name:"Notifications.Sound.Effects",get children(){return t(s,{get children(){return[t(s.Title,{get children(){return v("Notifications.Sound.Sent")}}),t(s.CheckboxFieldToggle,{get children(){return t(w,{get checked(){return e.notifications.sentMessageSound},onChange:r=>a("notifications","sentMessageSound",r),toggle:!0})}})]}})}})},It=()=>[t(xt,{}),t(bt,{}),t(Tt,{}),t(V,{name:"NotificationsPrivateChats",typeText:"NotificationsForPrivateChats",inputKey:"inputNotifyUsers"}),t(V,{name:"NotificationsGroups",typeText:"NotificationsForGroups",inputKey:"inputNotifyChats"}),t(V,{name:"NotificationsChannels",typeText:"NotificationsForChannels",inputKey:"inputNotifyBroadcasts"}),t(Ct,{})];export{It as default};
//# sourceMappingURL=notifications-BTfCXqYz.js.map
