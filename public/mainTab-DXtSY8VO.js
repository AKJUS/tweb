import{a5 as J,b$ as oe,i as k,a2 as A,w as W,a0 as M,a as $,a4 as N,b as n,t as R,bx as de,aB as ge,c as H,af as me,a6 as _e,a1 as Z,a7 as V,c0 as he,a9 as pe,by as ee,ag as ve,b_ as Se,dr as te,ad as F,eu as x,a3 as X,h as m,bw as fe}from"./index-KPMK1N-c.js";import{u as se}from"./actions-4V2SqltU.js";import{G as $e,H as ae,J as Y,R as f,v as be}from"./appDialogsManager-DZwNlL7T.js";import{S as Pe}from"./staticSwitch-Bwa0g8Ql.js";import{S as U}from"./space-BF06fFIe.js";import{I as ne}from"./iconTsx-DY1Le2iB.js";import{L as ce,c as ye}from"./lottieAnimation-l8j5wtiI.js";import{T as ke}from"./chatBackground-CshRx65S.js";import"./page-CWWtMUGW.js";import"./avatar-Cfg84CnU.js";import"./putPreloader-DhRaCtmJ.js";import"./classNames-C4Mf0-DM.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-BK8hQSGD.js";import"./codeInputField-CXZjk-lA.js";const Ce="_Container_1qplo_1",Le="_KeysContainer_1qplo_7",we="_KeyButton_1qplo_13",Te="_selected_1qplo_35",Ee="_KeyButtonFirst_1qplo_53",Be="_KeyButtonLast_1qplo_57",Me="_PlusIcon_1qplo_62",Re="_TargetKey_1qplo_67",E={Container:Ce,KeysContainer:Le,KeyButton:we,selected:Te,KeyButtonFirst:Ee,KeyButtonLast:Be,PlusIcon:Me,TargetKey:Re},Ke=R("<span>"),xe=R("<div><div></div><div>"),Oe=R("<button>"),Q=["Ctrl","Alt","Shift","Meta"],De=o=>{const d=oe(()=>o.value,(a,l)=>l.includes(a)),b=a=>a==="Meta"?n(ne,{icon:de?"mac_command_key":"win_key"}):(()=>{const l=Ke();return k(l,a),l})(),C=a=>{if(o.value.includes(a)){const l=o.value.filter(_=>_!==a);if(!l.length){const _=[0,1,2,3].filter(e=>e!==Q.indexOf(a));l.push(Q[_[Math.floor(Math.random()*_.length)]])}o.onChange(l)}else o.onChange([...o.value,a])};return(()=>{const a=xe(),l=a.firstChild,_=l.nextSibling;return k(l,()=>Q.map((e,i,P)=>(()=>{const v=Oe();return v.$$click=C,v.$$clickData=e,A(W,v,()=>!0),k(v,()=>b(e)),M(t=>{const g=E.KeyButton,u={[E.selected]:d(e),[E.KeyButtonFirst]:i===0,[E.KeyButtonLast]:i===P.length-1};return g!==t._v$5&&$(v,t._v$5=g),t._v$6=N(v,u,t._v$6),t},{_v$5:void 0,_v$6:void 0}),v})())),k(a,n(ne,{get class(){return E.PlusIcon},icon:"plus"}),_),k(_,()=>o.key),M(e=>{const i=E.Container,P={[o.class]:!!o.class},v=E.KeysContainer,t=E.TargetKey;return i!==e._v$&&$(a,e._v$=i),e._v$2=N(a,P,e._v$2),v!==e._v$3&&$(l,e._v$3=v),t!==e._v$4&&$(_,e._v$4=t),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),a})()};J(["click"]);const Ae="_Overlay_deagn_36",He="_Value_deagn_45",Ie="_Select_deagn_52",qe="_SelectClip_deagn_63",Fe="_Option_deagn_75",Ne="_selected_deagn_87",K={Overlay:Ae,Value:He,Select:Ie,SelectClip:qe,Option:Fe,selected:Ne},Ve=R("<div>"),Ue=R("<div><div><div>"),ze=R("<div><span>"),Ge=o=>{let d;const b=ge(()=>o.options.find(t=>t.value===o.value)?.label),[C,a]=H();me(()=>{a(b()())});const l=oe(()=>o.value),[_,e]=H();_e(()=>{const t=new ee;t.add(window)("resize",()=>{o.isOpen&&o.onClose?.()}),Z(()=>{t.removeAll()})});const i=(t,g)=>{const u=t.firstElementChild,r=u.querySelector(`.${K.selected}`);if(!r||!u)return;const c=d.getBoundingClientRect(),h=u.getBoundingClientRect(),p=r.getBoundingClientRect(),y=p.top-h.top,L=y+p.height,I=y+p.height/2,z=c.left+c.width/2;let w=c.top+c.height/2-I;const D=w+h.height>window.innerHeight||w<0;if(D&&(w+=Math.max(0,-w)+Math.min(0,window.innerHeight-(w+h.height))),u.style.setProperty("--x",""+z),u.style.setProperty("--y",""+w),u.animate({opacity:[0,1]},{duration:120}).finished.then(()=>{D&&g()}),D)return;const q=Math.max(y,h.height-L),G=T=>`polygon(0% ${y-T}px, 100% ${y-T}px, 100% ${L+T}px, 0px ${L+T}px)`;ve(0,q,400,T=>{u.style.setProperty("clip-path",G(T))},{easing:Se,onEnd:()=>{u.style.removeProperty("clip-path"),g()}})},P=async(t,g)=>{await t.firstElementChild.animate({opacity:[1,0]},{duration:120}).finished,g()},v=t=>{const g=[o.parent,_()];if(!g.every(Boolean))return;g.every(r=>{const c=r.getBoundingClientRect();return Math.max(c.left-t.clientX,t.clientX-c.right,c.top-t.clientY,t.clientY-c.bottom)>100})&&o.onClose?.()};return[(()=>{const t=Ve(),g=d;return typeof g=="function"?A(g,t):d=t,k(t,C),M(()=>$(t,K.Value)),t})(),n(pe,{get children(){return n(ke,{appear:!0,onEnter:i,onExit:P,get children(){return V(()=>!!o.isOpen)()&&(()=>{const t=Ue(),g=t.firstChild,u=g.firstChild;return t.$$mousemove=v,t.$$click=r=>{r.stopPropagation(),o.onClose?.()},A(e,u),k(u,n(he,{get each(){return o.options},children:r=>(()=>{const c=ze(),h=c.firstChild;return c.$$click=o.onChange,c.$$clickData=r.value,A(W,c,()=>!0),k(h,()=>r.label()),M(p=>{const y=K.Option,L={[K.selected]:l(r.value)};return y!==p._v$4&&$(c,p._v$4=y),p._v$5=N(c,L,p._v$5),p},{_v$4:void 0,_v$5:void 0}),c})()})),M(r=>{const c=K.Overlay,h=K.SelectClip,p=K.Select;return c!==r._v$&&$(t,r._v$=c),h!==r._v$2&&$(g,r._v$2=h),p!==r._v$3&&$(u,r._v$3=p),r},{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()}})}})]};J(["click","mousemove"]);const Qe="_MainDescription_1pm2o_36",Xe="_FirstSection_1pm2o_44",Ye="_Row_1pm2o_49",je="_ShortcutBuilderRow_1pm2o_54",Je="_ShortcutBuilderRowChild_1pm2o_60",We="_collapsed_1pm2o_63",Ze="_Hint_1pm2o_68",B={MainDescription:Qe,FirstSection:Xe,Row:Ye,ShortcutBuilderRow:je,ShortcutBuilderRowChild:Je,collapsed:We,Hint:Ze},ie=R("<div>"),et=R('<div><button class="btn-primary btn-color-primary btn-large">'),j=(o,d)=>({appendTo:o.scrollable.container,duration:2500,from:"bottom",textElement:m(d),icon:"premium_lock",class:B.Hint,canCloseOnPeerChange:!1}),bt=()=>{const{rootScope:o}=te(),d=$e(),[b,{mutate:C}]=F(()=>{const e=o.managers.appStateManager.getState().then(i=>i.settings?.passcode?.enabled||!1);return d.collect(e),e}),[a,l]=H(!1),_=new ee;return _.add(o)("settings_updated",({key:e,value:i})=>{e===x("settings","passcode","enabled")&&C(i)}),Z(()=>{_.removeAll()}),n(X,{get when(){return b.state==="ready"},get children(){return V(()=>!!(b()||a()))()?n(nt,{onDisable:()=>l(!0)}):n(tt,{})}})},tt=()=>{const[o,{AppPasscodeEnterPasswordTab:d,AppPasscodeLockTab:b}]=ae(),{enablePasscode:C}=se(),{setQuizHint:a}=te(),l=()=>{o.slider.createTab(d).open({onSubmit:e=>{_(e),e=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"})},_=e=>{o.slider.createTab(d).open({onSubmit:async(i,P)=>{if(i!==e)throw{};await C(i),i="",P.slider.sliceTabsUntilTab(b,P),P.close(),a(j(o,"PasscodeLock.PasscodeHasBeenSet"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"})};return n(Y,{caption:"PasscodeLock.Notice",get children(){return[n(ce,{name:"UtyanPasscode"}),(()=>{const e=ie();return k(e,()=>m("PasscodeLock.Description")),M(()=>$(e,B.MainDescription)),e})(),n(U,{amount:"0.5rem"}),(()=>{const e=et(),i=e.firstChild;return i.$$click=l,A(W,i,()=>!0),k(i,()=>m("PasscodeLock.TurnOn")),M(()=>$(e,ye.AdditionalPadding)),e})(),n(U,{amount:"1rem"})]}})},nt=o=>{const[d,{AppPasscodeEnterPasswordTab:b,AppPasscodeLockTab:C,AppPrivacyAndSecurityTab:a}]=ae(),{disablePasscode:l,changePasscode:_}=se(),{rootScope:e,setQuizHint:i}=te(),P=[{value:0,label:()=>m("PasscodeLock.Disabled")},{value:1,label:()=>m("MinutesShort",[1])},{value:5,label:()=>m("MinutesShort",[5])},{value:10,label:()=>m("MinutesShort",[10])},{value:15,label:()=>m("MinutesShort",[15])},{value:30,label:()=>m("MinutesShort",[30])}],[v,t]=H(),[g,u]=H(!1),[r,{mutate:c}]=F(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.autoLockTimeoutMins||0)),[h,{mutate:p}]=F(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcutEnabled||!1)),[y,{mutate:L}]=F(()=>e.managers.appStateManager.getState().then(s=>s?.settings?.passcode?.lockShortcut||[])),I=new ee;I.add(e)("settings_updated",({key:s,value:S})=>{s===x("settings","passcode","lockShortcut")?L(S):s===x("settings","passcode","lockShortcutEnabled")?p(S):s===x("settings","passcode","autoLockTimeoutMins")&&c(S)});function z(s){L(s),e.managers.appStateManager.setByKey(x("settings","passcode","lockShortcut"),s)}function w(s){p(s),e.managers.appStateManager.setByKey(x("settings","passcode","lockShortcutEnabled"),s)}function D(s){c(s),e.managers.appStateManager.setByKey(x("settings","passcode","autoLockTimeoutMins"),s)}Z(()=>{I.removeAll()});const q=()=>!fe&&y.state==="ready"&&h.state==="ready",G=()=>{d.slider.createTab(b).open({onSubmit:s=>{T(s),s=""},buttonText:"PasscodeLock.Next",inputLabel:"PasscodeLock.EnterAPasscode"},"PasscodeLock.EnterANewPasscode")},T=s=>{d.slider.createTab(b).open({onSubmit:async(S,O)=>{if(S!==s)throw{};await _(S),S="",O.slider.sliceTabsUntilTab(C,O),O.close(),i(j(d,"PasscodeLock.PasscodeHasBeenChanged"))},buttonText:"PasscodeLock.SetPasscode",inputLabel:"PasscodeLock.ReEnterPasscode"},"PasscodeLock.ReEnterPasscode")},re=()=>{be({title:m("PasscodeLock.TurnOff.Title"),description:m("PasscodeLock.TurnOff.Description"),button:{text:m("PasscodeLock.TurnOff"),isDanger:!0}}).then(async()=>{o.onDisable(),await l(),d.close(),i(j(d.slider.getTab(a),"PasscodeLock.PasscodeHasBeenDisabled"))}).catch(()=>{})},le=[V(()=>m("PasscodeLock.Description")),n(U,{amount:"1rem"}),V(()=>m("PasscodeLock.Notice"))];return[n(Y,{get class(){return B.FirstSection},caption:le,get children(){return[n(ce,{name:"UtyanPasscode"}),n(U,{amount:"1.125rem"}),n(f,{clickable:re,get children(){return[n(f.Icon,{icon:"lockoff"}),n(f.Title,{get children(){return m("PasscodeLock.TurnOff.Title")}})]}}),n(f,{clickable:G,get children(){return[n(f.Icon,{icon:"key"}),n(f.Title,{get children(){return m("PasscodeLock.ChangePasscode")}})]}})]}}),n(Y,{get caption(){return q()?"PasscodeLock.LockShortcutDescription":void 0},get children(){return[n(X,{get when(){return r.state==="ready"},get children(){return n(f,{ref:t,get class(){return B.Row},clickable:()=>{u(!0)},get children(){return[n(f.Title,{get children(){return m("PasscodeLock.AutoLock")}}),n(f.RightContent,{get children(){return n(Ge,{get value(){return r()},onClose:()=>u(!1),options:P,onChange:D,get isOpen(){return g()},get parent(){return v()}})}})]}})}}),n(X,{get when(){return q()},get children(){return[n(f,{get class(){return B.Row},clickable:s=>{w(!h())},get children(){return[n(f.Title,{get children(){return m("PasscodeLock.EnableLockShortcut")}}),n(f.RightContent,{get children(){return n(Pe,{get checked(){return h()}})}})]}}),(()=>{const s=ie();return k(s,n(De,{get class(){return B.ShortcutBuilderRowChild},get value(){return y()||[]},onChange:z,key:"L"})),M(S=>{const O=B.ShortcutBuilderRow,ue={[B.collapsed]:!h()};return O!==S._v$&&$(s,S._v$=O),S._v$2=N(s,ue,S._v$2),S},{_v$:void 0,_v$2:void 0}),s})()]}})]}})]};J(["click"]);export{bt as default};
//# sourceMappingURL=mainTab-DXtSY8VO.js.map
