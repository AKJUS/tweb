{"version":3,"sources":["webpack:///./src/helpers/touchSupport.ts","webpack:///./src/components/ripple.ts","webpack:///./src/pages/pageSignUp.ts","webpack:///./src/helpers/dom/clickEvent.ts","webpack:///./src/components/button.ts","webpack:///./src/components/misc.ts","webpack:///./src/components/appNavigationController.ts","webpack:///./src/lib/appManagers/appDownloadManager.ts","webpack:///./src/components/popups/index.ts","webpack:///./src/helpers/sequentialDom.ts","webpack:///./src/countries.ts","webpack:///./src/lib/filemanager.ts","webpack:///./src/lib/cacheStorage.ts","webpack:///./src/pages/loginPage.ts","webpack:///./src/helpers/fileName.ts","webpack:///./src/lib/cropper.ts","webpack:///./src/components/popups/avatar.ts"],"names":["isTouchSupported","window","DocumentTouch","document","rippleClickId","ripple","elem","callback","Promise","resolve","onEnd","prepend","querySelector","classList","add","r","createElement","handler","contains","drawRipple","clientX","clientY","startTime","Date","now","clickId","duration","getComputedStyle","getPropertyValue","replace","elapsedTime","cb","mutate","remove","delay","Math","max","setTimeout","removeEventListener","touchStartFired","requestAnimationFrame","rect","getBoundingClientRect","clickX","left","clickY","top","size","sqrt","abs","height","width","x","y","style","append","isRippleUnneeded","e","target","includes","tagName","touchEnd","addEventListener","settings","animationsEnabled","touches","length","once","cancelBubble","stopPropagation","passive","button","dataset","authCode","page","then","imported","className","withInputWrapper","titleLangKey","subtitleLangKey","imageDiv","title","avatarPreview","id","addIco","appProfileManager","default","uploadAvatar","open","_uploadAvatar","handleInput","name","nameInputField","value","lastName","lastNameInputField","fullName","trim","wrapEmojiText","label","maxLength","btnSignUp","btnI18n","IntlElement","key","element","inputWrapper","container","input","this","disabled","params","phone_number","phone_code_hash","first_name","last_name","update","preloader","invokeApi","response","_","setUserAuth","user","reject","inputFile","uploadProfilePhoto","finally","m","mount","removeAttribute","catch","err","type","_authCode","pushToState","CLICK_EVENT_NAME","attachClickEvent","options","listenerSetter","bind","touchMouseDown","detachClickEvent","asDiv","icon","noRipple","rippleSquare","onlyMobile","setAttribute","text","putPreloader","returnDiv","html","div","innerHTML","appendChild","insertAdjacentHTML","lastElementChild","setButtonLoader","sortedCountries","formatPhoneNumber","str","phoneCode","slice","sort","a","b","country","find","c","split","indexOf","pattern","forEach","symbol","idx","formatted","onMouseMove","openedMenu","diffX","right","diffY","bottom","closeBtnMenu","onClick","parentElement","menuOverlay","openedMenuOnClose","removeByType","openBtnMenu","menuElement","onClose","pushItem","onPop","canAnimate","insertBefore","positionMenu","pageX","pageY","side","scrollWidth","menuWidth","scrollHeight","menuHeight","body","windowWidth","windowHeight","isMobile","verticalSide","sides","intermediateX","intermediateY","possibleSides","attachContextMenuListener","removeManual","timeout","capture","onCancel","clearTimeout","appNavigationController","navigations","manual","log","debug","currentHash","location","hash","isPossibleSwipe","onHashChange","replaceState","state","pushState","item","pop","handleItem","onEscape","back","detach","onTouchEnd","onTouchMove","moved","history","scrollRestoration","good","undefined","noBlurOnPop","i","index","ret","findItemByType","splice","push","noHistory","origin","pathname","findAndSplice","single","appDownloadManager","cacheStorage","downloads","progress","progressCallbacks","uploadId","thumbsCache","photo","details","fileName","callbacks","download","notifyAll","deferred","cancel","error","Error","cancelDownload","clearDownload","getNewDeferred","fetch","blob","hasOwnProperty","onError","worker","onlyCache","promise","getFile","downloadFile","tryDownload","file","mimeType","ext","uploadFile","url","onRemove","href","position","clickEvent","createEvent","initMouseEvent","dispatchEvent","console","click","discFileName","objectURL","URL","createObjectURL","createDownloadAnchor","revokeObjectURL","media","thumbSize","cache","downloaded","PopupElement","buttons","header","hide","destroy","btnClose","overlayIsActive","removeItem","navigationItem","onCloseAfterTimeout","checkAnimations","closable","overlayClosable","onOverlayClick","withConfirm","btnConfirm","buttonsDiv","buttonsElements","map","isDanger","langKey","langArgs","isCancel","offsetWidth","addCancelButton","sequentialDom","promises","raf","scheduled","kind","scheduleFlush","do","read","write","Countries","PhoneCodesMain","blobSupported","fileWriter","bytes","Blob","arr","saveFileCallback","blobParts","part","truncate","finalize","saveToStorage","dbName","useStorage","test","STORAGES","openDatabase","openDbPromise","caches","entryName","timeoutOperation","delete","match","put","method","get","Response","headers","save","rejected","res","fakeWriter","getFakeFileWriter","saveFile","enabled","all","storage","deleteAll","LoginPage","subtitle","getFileNameByLocation","thumb_size","filter","Boolean","join","photo_id","pFlags","big","stickerset","short_name","emoticon","thumb_version","volume_id","local_id","getFileURL","encodeURIComponent","JSON","stringify","originalImage","canvas","cropComponent","cropImage","event_state","cropLeft","cropTop","cropWidth","cropHeight","scaledRatio","init","draggable","Image","src","overlayColor","parentNode","maxWidth","naturalWidth","CROPWIDTH","offsetHeight","CROPHEIGHT","updateCropSize","updateCropImage","updateContainer","startMoving","resizing","keyHandler","imgZoom","zoom","PI","newWidth","floor","clientWidth","newHeight","clientHeight","w","h","offsetLeft","offsetTop","preventDefault","String","fromCharCode","charCode","deltaY","container_width","container_height","container_left","container_top","mouse_x","scrollX","mouse_y","scrollY","saveEventState","moving","endMoving","currentTouch","complete","onload","crop","getContext","drawImage","removeHandlers","super","image","cropper","h6","cropContainer","display","files","contents","show","btnSubmit","toBlob","darkenCanvas","onCrop","upload","postCanvas","ctx","fillStyle","fillRect"],"mappings":"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","file":"16.5710f0dafbe8c693bad6.chunk.js","sourcesContent":["/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// @ts-ignore\nexport const isTouchSupported = ('ontouchstart' in window) || (window.DocumentTouch && document instanceof DocumentTouch)/*  || true */;","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport findUpClassName from \"../helpers/dom/findUpClassName\";\nimport sequentialDom from \"../helpers/sequentialDom\";\nimport {isTouchSupported} from \"../helpers/touchSupport\";\nimport rootScope from \"../lib/rootScope\";\n\nlet rippleClickId = 0;\nexport function ripple(elem: HTMLElement, callback: (id: number) => Promise<boolean | void> = () => Promise.resolve(), onEnd: (id: number) => void = null, prepend = false) {\n  //return;\n  if(elem.querySelector('.c-ripple')) return;\n  elem.classList.add('rp');\n  \n  let r = document.createElement('div');\n  r.classList.add('c-ripple');\n\n  const isSquare = elem.classList.contains('rp-square');\n  if(isSquare) {\n    r.classList.add('is-square');\n  }\n\n  elem[prepend ? 'prepend' : 'append'](r);\n\n  let handler: () => void;\n  //let animationEndPromise: Promise<number>;\n  const drawRipple = (clientX: number, clientY: number) => {\n    const startTime = Date.now();\n    const elem = document.createElement('div');\n\n    const clickId = rippleClickId++;\n    \n    //console.log('ripple drawRipple');\n    \n    const duration = +window.getComputedStyle(r).getPropertyValue('--ripple-duration').replace('s', '') * 1000;\n    //console.log('ripple duration', duration);\n\n    handler = () => {\n    //handler = () => animationEndPromise.then((duration) => {\n      //console.log('ripple animation was:', duration);\n\n      //const duration = isSquare || mediaSizes.isMobile ? 200 : 700;\n      //return;\n      let elapsedTime = Date.now() - startTime;\n      const cb = () => {\n        //console.log('ripple elapsedTime total pre-remove:', Date.now() - startTime);\n        sequentialDom.mutate(() => {\n          elem.remove();\n        });\n        \n        if(onEnd) onEnd(clickId);\n      };\n      if(elapsedTime < duration) {\n        let delay = Math.max(duration - elapsedTime, duration / 2);\n        setTimeout(() => elem.classList.add('hiding'), Math.max(delay - duration / 2, 0));\n\n        setTimeout(cb, delay);\n      } else {\n        elem.classList.add('hiding');\n        setTimeout(cb, duration / 2);\n      }\n\n      if(!isTouchSupported) {\n        window.removeEventListener('contextmenu', handler);\n      }\n\n      handler = null;\n      touchStartFired = false;\n    };\n    //});\n\n    callback && callback(clickId);\n\n    /* callback().then((bad) => {\n      if(bad) {\n        span.remove();\n        return;\n      } */\n      \n      //console.log('ripple after promise', Date.now() - startTime);\n      //console.log('ripple tooSlow:', tooSlow);\n      /* if(tooSlow) {\n        span.remove();\n        return;\n      } */\n\n      window.requestAnimationFrame(() => {\n        const rect = r.getBoundingClientRect();\n        elem.classList.add('c-ripple__circle');\n\n        const clickX = clientX - rect.left;\n        const clickY = clientY - rect.top;\n\n        const radius = Math.sqrt((Math.abs(clickY - rect.height / 2) + rect.height / 2) ** 2 + (Math.abs(clickX - rect.width / 2) + rect.width / 2) ** 2);\n        const size = radius;\n\n        // center of circle\n        const x = clickX - size / 2;\n        const y = clickY - size / 2;\n\n        //console.log('ripple click', offsetFromCenter, size, clickX, clickY);\n\n        elem.style.width = elem.style.height = size + 'px';\n        elem.style.left = x + 'px';\n        elem.style.top = y + 'px';\n\n        // нижний код выполняется с задержкой\n        /* animationEndPromise = new Promise((resolve) => {\n          span.addEventListener('animationend', () => {\n            // 713 -> 700\n            resolve(((Date.now() - startTime) / 100 | 0) * 100);\n          }, {once: true});\n        }); */\n        \n        // нижний код не всегда включает анимацию ПРИ КЛИКЕ НА ТАЧПАД БЕЗ ТАПТИК ЭНЖИНА\n        /* span.style.display = 'none';\n        r.append(span);\n        duration = +window.getComputedStyle(span).getPropertyValue('animation-duration').replace('s', '') * 1000;\n        span.style.display = ''; */\n\n        r.append(elem);\n\n        //r.classList.add('active');\n        //handler();\n      });\n    //});\n  };\n\n  const isRippleUnneeded = (e: Event) => e.target !== elem && (\n      ['BUTTON', 'A'].includes((e.target as HTMLElement).tagName) \n      || findUpClassName(e.target as HTMLElement, 'c-ripple') !== r\n    );\n\n  // TODO: rename this variable\n  let touchStartFired = false;\n  if(isTouchSupported) {\n    let touchEnd = () => {\n      handler && handler();\n    };\n  \n    elem.addEventListener('touchstart', (e) => {\n      if(!rootScope.settings.animationsEnabled) {\n        return;\n      }\n\n      //console.log('ripple touchstart', e);\n      if(e.touches.length > 1 || touchStartFired || isRippleUnneeded(e)) {\n        return;\n      }\n      \n      //console.log('touchstart', e);\n      touchStartFired = true;\n  \n      let {clientX, clientY} = e.touches[0];\n      drawRipple(clientX, clientY);\n      elem.addEventListener('touchend', touchEnd, {once: true});\n  \n      window.addEventListener('touchmove', (e) => {\n        e.cancelBubble = true;\n        e.stopPropagation();\n        touchEnd();\n        elem.removeEventListener('touchend', touchEnd);\n      }, {once: true});\n    }, {passive: true});\n  } else {\n    elem.addEventListener('mousedown', (e) => {\n      if(![0, 2].includes(e.button)) { // only left and right buttons\n        return;\n      }\n\n      if(!rootScope.settings.animationsEnabled) {\n        return;\n      }\n      //console.log('ripple mousedown', e, e.target, findUpClassName(e.target as HTMLElement, 'c-ripple') === r);\n\n      if(elem.dataset.ripple === '0' || isRippleUnneeded(e)) {\n        return;\n      } else if(touchStartFired) {\n        touchStartFired = false;\n        return;\n      }\n  \n      let {clientX, clientY} = e;\n      drawRipple(clientX, clientY);\n      window.addEventListener('mouseup', handler, {once: true, passive: true});\n      window.addEventListener('contextmenu', handler, {once: true, passive: true});\n    }, {passive: true});\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type { CancellablePromise } from '../helpers/cancellablePromise';\nimport type { InputFile } from '../layer';\nimport type { AuthState } from '../types';\nimport Button from '../components/button';\nimport InputField from '../components/inputField';\nimport { putPreloader } from '../components/misc';\nimport PopupAvatar from '../components/popups/avatar';\nimport appStateManager from '../lib/appManagers/appStateManager';\nimport I18n, { i18n } from '../lib/langPack';\n//import apiManager from '../lib/mtproto/apiManager';\nimport apiManager from '../lib/mtproto/mtprotoworker';\nimport RichTextProcessor from '../lib/richtextprocessor';\nimport LoginPage from './loginPage';\nimport Page from './page';\nimport blurActiveElement from '../helpers/dom/blurActiveElement';\nimport replaceContent from '../helpers/dom/replaceContent';\n\nlet authCode: AuthState.signUp['authCode'] = null;\n\nconst onFirstMount = () => import('../lib/appManagers/appProfileManager').then(imported => {\n  const page = new LoginPage({\n    className: 'page-signUp',\n    withInputWrapper: true,\n    titleLangKey: 'YourName',\n    subtitleLangKey: 'Login.Register.Subtitle'\n  });\n\n  page.imageDiv.classList.add('avatar-edit');\n\n  page.title.classList.add('fullName');\n\n  const avatarPreview = document.createElement('canvas');\n  avatarPreview.id = 'canvas-avatar';\n  avatarPreview.className = 'avatar-edit-canvas';\n\n  const addIco = document.createElement('span');\n  addIco.className = 'tgico tgico-cameraadd';\n\n  page.imageDiv.append(avatarPreview, addIco);\n  \n  const appProfileManager = imported.default;\n\n  let uploadAvatar: () => CancellablePromise<InputFile>;\n  page.imageDiv.addEventListener('click', () => {\n    new PopupAvatar().open(avatarPreview, (_uploadAvatar) => {\n      uploadAvatar = _uploadAvatar;\n    });\n  });\n\n  const handleInput = (e: Event) => {\n    const name = nameInputField.value || '';\n    const lastName = lastNameInputField.value || '';\n\n    const fullName = name || lastName \n      ? (name + ' ' + lastName).trim() \n      : '';\n    \n    if(fullName) replaceContent(page.title, RichTextProcessor.wrapEmojiText(fullName));\n    else replaceContent(page.title, i18n('YourName'));\n  };\n\n  let sendAvatar = () => new Promise<void>((resolve, reject) => {\n    if(!uploadAvatar) {\n      //console.log('User has not selected avatar');\n      return resolve();\n    }\n\n    //console.log('invoking uploadFile...');\n    uploadAvatar().then((inputFile) => {\n      //console.log('uploaded smthn', inputFile);\n  \n      appProfileManager.uploadProfilePhoto(inputFile).then(resolve, reject);\n    }, reject);\n  });\n\n  const nameInputField = new InputField({\n    label: 'FirstName',\n    maxLength: 70\n  });\n\n  const lastNameInputField = new InputField({\n    label: 'LastName',\n    maxLength: 64\n  });\n\n  const btnSignUp = Button('btn-primary btn-color-primary');\n  const btnI18n = new I18n.IntlElement({key: 'StartMessaging'});\n  btnSignUp.append(btnI18n.element);\n\n  page.inputWrapper.append(nameInputField.container, lastNameInputField.container, btnSignUp);\n\n  nameInputField.input.addEventListener('input', handleInput);\n  lastNameInputField.input.addEventListener('input', handleInput);\n\n  btnSignUp.addEventListener('click', function(this: typeof btnSignUp, e) {\n    if(nameInputField.input.classList.contains('error') || lastNameInputField.input.classList.contains('error')) {\n      return false;\n    }\n\n    if(!nameInputField.value.length) {\n      nameInputField.input.classList.add('error');\n      return false;\n    }\n\n    this.disabled = true;\n\n    const name = nameInputField.value.trim();\n    const lastName = lastNameInputField.value.trim();\n\n    const params = {\n      phone_number: authCode.phone_number,\n      phone_code_hash: authCode.phone_code_hash,\n      first_name: name,\n      last_name: lastName\n    };\n\n    //console.log('invoking auth.signUp with params:', params);\n\n    btnI18n.update({key: 'PleaseWait'});\n    const preloader = putPreloader(this);\n\n    apiManager.invokeApi('auth.signUp', params)\n    .then((response) => {\n      //console.log('auth.signUp response:', response);\n      \n      switch(response._) {\n        case 'auth.authorization': // success\n          apiManager.setUserAuth(response.user.id);\n\n          sendAvatar().finally(() => {\n            import('./pageIm').then(m => {\n              m.default.mount();\n            });\n          });\n          \n          break;\n        default:\n          btnI18n.update({key: response._ as any});\n          this.removeAttribute('disabled');\n          preloader.remove();\n          break;\n      }\n\n      /* (document.body.getElementsByClassName('page-sign')[0] as HTMLDivElement).style.display = 'none';\n      pageAuthCode(Object.assign(code, {phoneNumber})); */\n    }).catch(err => {\n      this.removeAttribute('disabled');\n      preloader.remove();\n\n      switch(err.type) {\n        default:\n          btnI18n.update({key: err.type});\n          break;\n      }\n    });\n  });\n\n  blurActiveElement();\n  return new Promise((resolve) => {\n    window.requestAnimationFrame(resolve);\n  });\n});\n\nconst page = new Page('page-signUp', true, onFirstMount, (_authCode: typeof authCode) => {\n  authCode = _authCode;\n\n  appStateManager.pushToState('authState', {_: 'authStateSignUp', authCode: _authCode});\n});\n\nexport default page;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type ListenerSetter from \"../listenerSetter\";\nimport { isTouchSupported } from \"../touchSupport\";\n\nexport const CLICK_EVENT_NAME: 'mousedown' | 'touchend' | 'click' = (isTouchSupported ? 'mousedown' : 'click') as any;\nexport type AttachClickOptions = AddEventListenerOptions & Partial<{listenerSetter: ListenerSetter, touchMouseDown: true}>;\nexport function attachClickEvent(elem: HTMLElement, callback: (e: TouchEvent | MouseEvent) => void, options: AttachClickOptions = {}) {\n  const add = options.listenerSetter ? options.listenerSetter.add(elem) : elem.addEventListener.bind(elem);\n  // const remove = options.listenerSetter ? options.listenerSetter.removeManual.bind(options.listenerSetter, elem) : elem.removeEventListener.bind(elem);\n\n  options.touchMouseDown = true;\n  /* if(options.touchMouseDown && CLICK_EVENT_NAME === 'touchend') {\n    add('mousedown', callback, options);\n  } else if(CLICK_EVENT_NAME === 'touchend') {\n    const o = {...options, once: true};\n\n    const onTouchStart = (e: TouchEvent) => {\n      const onTouchMove = (e: TouchEvent) => {\n        remove('touchmove', onTouchMove, o);\n        remove('touchend', onTouchEnd, o);\n      };\n  \n      const onTouchEnd = (e: TouchEvent) => {\n        remove('touchmove', onTouchMove, o);\n        callback(e);\n        if(options.once) {\n          remove('touchstart', onTouchStart);\n        }\n      };\n  \n      add('touchend', onTouchEnd, o);\n      add('touchmove', onTouchMove, o);\n    };\n\n    add('touchstart', onTouchStart);\n  } else {\n    add(CLICK_EVENT_NAME, callback, options);\n  } */\n  add(CLICK_EVENT_NAME, callback, options);\n}\n\nexport function detachClickEvent(elem: HTMLElement, callback: (e: TouchEvent | MouseEvent) => void, options?: AddEventListenerOptions) {\n  if(CLICK_EVENT_NAME === 'touchend') {\n    elem.removeEventListener('touchstart', callback, options);\n  } else {\n    elem.removeEventListener(CLICK_EVENT_NAME, callback, options);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport { i18n, LangPackKey } from \"../lib/langPack\";\nimport { ripple } from \"./ripple\";\n\nconst Button = (className: string, options: Partial<{\n  noRipple: true, \n  onlyMobile: true, \n  icon: string, \n  rippleSquare: true, \n  text: LangPackKey, \n  disabled: boolean,\n  asDiv: boolean\n}> = {}) => {\n  const button: HTMLButtonElement = document.createElement(options.asDiv ? 'div' : 'button') as any;\n  button.className = className + (options.icon ? ' tgico-' + options.icon : '');\n\n  if(!options.noRipple) {\n    if(options.rippleSquare) {\n      button.classList.add('rp-square');\n    }\n\n    ripple(button);\n  }\n\n  if(options.onlyMobile) {\n    button.classList.add('only-handhelds');\n  }\n\n  if(options.disabled) {\n    button.setAttribute('disabled', 'true');\n  }\n\n  if(options.text) {\n    button.append(i18n(options.text));\n  }\n\n  return button;\n};\n\nexport default Button;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport { MOUNT_CLASS_TO } from \"../config/debug\";\nimport Countries, { Country, PhoneCodesMain } from \"../countries\";\nimport { cancelEvent } from \"../helpers/dom/cancelEvent\";\nimport { CLICK_EVENT_NAME } from \"../helpers/dom/clickEvent\";\nimport ListenerSetter from \"../helpers/listenerSetter\";\nimport mediaSizes from \"../helpers/mediaSizes\";\nimport { isTouchSupported } from \"../helpers/touchSupport\";\nimport { isApple, isMobileSafari } from \"../helpers/userAgent\";\nimport appNavigationController from \"./appNavigationController\";\n\nexport function putPreloader(elem: Element, returnDiv = false): HTMLElement {\n  const html = `\n  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"preloader-circular\" viewBox=\"25 25 50 50\">\n  <circle class=\"preloader-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n  </svg>`;\n\n  if(returnDiv) {\n    const div = document.createElement('div');\n    div.classList.add('preloader');\n    div.innerHTML = html;\n\n    if(elem) {\n      elem.appendChild(div);\n    }\n\n    return div;\n  }\n  \n  elem.insertAdjacentHTML('beforeend', html);\n  return elem.lastElementChild as HTMLElement;\n}\n\nMOUNT_CLASS_TO.putPreloader = putPreloader;\n\nexport function setButtonLoader(elem: HTMLButtonElement, icon = 'check') {\n  elem.classList.remove('tgico-' + icon);\n  elem.disabled = true;\n  putPreloader(elem);\n\n  return () => {\n    elem.innerHTML = '';\n    elem.classList.add('tgico-' + icon);\n    elem.removeAttribute('disabled');\n  };\n}\n\nlet sortedCountries: Country[];\nexport function formatPhoneNumber(str: string) {\n  str = str.replace(/\\D/g, '');\n  let phoneCode = str.slice(0, 6);\n  \n  ////console.log('str', str, phoneCode);\n  if(!sortedCountries) {\n    sortedCountries = Countries.slice().sort((a, b) => b.phoneCode.length - a.phoneCode.length);\n  }\n  \n  let country = sortedCountries.find((c) => {\n    return c.phoneCode.split(' and ').find((c) => phoneCode.indexOf(c.replace(/\\D/g, '')) === 0);\n  });\n\n  if(!country) return {formatted: str, country};\n\n  country = PhoneCodesMain[country.phoneCode] || country;\n  \n  let pattern = country.pattern || country.phoneCode;\n  pattern.split('').forEach((symbol, idx) => {\n    if(symbol === ' ' && str[idx] !== ' ' && str.length > idx) {\n      str = str.slice(0, idx) + ' ' + str.slice(idx);\n    }\n  });\n  \n  /* if(country.pattern) {\n    str = str.slice(0, country.pattern.length);\n  } */\n  \n  return {formatted: str, country};\n}\n\n/* export function parseMenuButtonsTo(to: {[name: string]: HTMLElement}, elements: HTMLCollection | NodeListOf<HTMLElement>) {\n  Array.from(elements).forEach(el => {\n    const match = el.className.match(/(?:^|\\s)menu-(.+?)(?:$|\\s)/);\n    if(!match) return;\n    to[match[1]] = el as HTMLElement;\n  });\n} */\n\nlet onMouseMove = (e: MouseEvent) => {\n  let rect = openedMenu.getBoundingClientRect();\n  let {clientX, clientY} = e;\n  \n  let diffX = clientX >= rect.right ? clientX - rect.right : rect.left - clientX;\n  let diffY = clientY >= rect.bottom ? clientY - rect.bottom : rect.top - clientY;\n  \n  if(diffX >= 100 || diffY >= 100) {\n    closeBtnMenu();\n    //openedMenu.parentElement.click();\n  }\n  //console.log('mousemove', diffX, diffY);\n};\n\nconst onClick = (e: MouseEvent | TouchEvent) => {\n  //cancelEvent(e);\n  closeBtnMenu();\n};\n\n// ! no need in this due to the same handler in appNavigationController\n/* const onKeyDown = (e: KeyboardEvent) => {\n  if(e.key === 'Escape') {\n    closeBtnMenu();\n    cancelEvent(e);\n  }\n}; */\n\nexport const closeBtnMenu = () => {\n  if(openedMenu) {\n    openedMenu.classList.remove('active');\n    openedMenu.parentElement.classList.remove('menu-open');\n    //openedMenu.previousElementSibling.remove(); // remove overlay\n    if(menuOverlay) menuOverlay.remove();\n    openedMenu = null;\n  }\n  \n  if(openedMenuOnClose) {\n    openedMenuOnClose();\n    openedMenuOnClose = null;\n  }\n\n  if(!isTouchSupported) {\n    window.removeEventListener('mousemove', onMouseMove);\n    //window.removeEventListener('keydown', onKeyDown, {capture: true});\n    window.removeEventListener('contextmenu', onClick);\n  }\n\n  document.removeEventListener(CLICK_EVENT_NAME, onClick);\n\n  if(!isMobileSafari) {\n    appNavigationController.removeByType('menu');\n  }\n};\n\nwindow.addEventListener('resize', () => {\n  if(openedMenu) {\n    closeBtnMenu();\n  }\n  \n  /* if(openedMenu && (openedMenu.style.top || openedMenu.style.left)) {\n    const rect = openedMenu.getBoundingClientRect();\n    const {innerWidth, innerHeight} = window;\n\n    console.log(innerWidth, innerHeight, rect);\n  } */\n});\n\nlet openedMenu: HTMLElement = null, openedMenuOnClose: () => void = null, menuOverlay: HTMLElement = null;\nexport function openBtnMenu(menuElement: HTMLElement, onClose?: () => void) {\n  closeBtnMenu();\n\n  if(!isMobileSafari) {\n    appNavigationController.pushItem({\n      type: 'menu',\n      onPop: (canAnimate) => {\n        closeBtnMenu();\n      }\n    });\n  }\n  \n  openedMenu = menuElement;\n  openedMenu.classList.add('active');\n  openedMenu.parentElement.classList.add('menu-open');\n\n  if(!menuOverlay) {\n    menuOverlay = document.createElement('div');\n    menuOverlay.classList.add('btn-menu-overlay');\n\n    // ! because this event must be canceled, and can't cancel on menu click (below)\n    menuOverlay.addEventListener(CLICK_EVENT_NAME, (e) => {\n      cancelEvent(e);\n      onClick(e);\n    });\n  }\n\n  openedMenu.parentElement.insertBefore(menuOverlay, openedMenu);\n\n  //document.body.classList.add('disable-hover');\n  \n  openedMenuOnClose = onClose;\n\n  if(!isTouchSupported) {\n    window.addEventListener('mousemove', onMouseMove);\n    //window.addEventListener('keydown', onKeyDown, {capture: true});\n    window.addEventListener('contextmenu', onClick, {once: true});\n  }\n\n  /* // ! because this event must be canceled, and can't cancel on menu click (below)\n  overlay.addEventListener(CLICK_EVENT_NAME, (e) => {\n    cancelEvent(e);\n    onClick(e);\n  }); */\n  \n  // ! safari iOS doesn't handle window click event on overlay, idk why\n  document.addEventListener(CLICK_EVENT_NAME, onClick);\n}\n\nconst PADDING_TOP = 8;\nconst PADDING_LEFT = 8;\nexport function positionMenu({pageX, pageY}: MouseEvent | Touch, elem: HTMLElement, side?: 'left' | 'right' | 'center') {\n  //let {clientX, clientY} = e;\n\n  // * side mean the OPEN side\n\n  let {scrollWidth: menuWidth, scrollHeight: menuHeight} = elem;\n  //let {innerWidth: windowWidth, innerHeight: windowHeight} = window;\n  const rect = document.body.getBoundingClientRect();\n  const windowWidth = rect.width;\n  const windowHeight = rect.height;\n\n  side = mediaSizes.isMobile ? 'right' : 'left';\n  let verticalSide: 'top' /* | 'bottom' */ | 'center' = 'top';\n\n  const getSides = () => {\n    return {\n      x: {\n        left: pageX,\n        right: pageX - menuWidth\n      },\n      intermediateX: side === 'right' ? PADDING_LEFT : windowWidth - menuWidth - PADDING_LEFT,\n      //intermediateX: clientX < windowWidth / 2 ? PADDING_LEFT : windowWidth - menuWidth - PADDING_LEFT,\n      y: {\n        top: pageY,\n        bottom: pageY - menuHeight\n      },\n      //intermediateY: verticalSide === 'top' ? PADDING_TOP : windowHeight - menuHeight - PADDING_TOP,\n      intermediateY: pageY < windowHeight / 2 ? PADDING_TOP : windowHeight - menuHeight - PADDING_TOP,\n    };\n  };\n\n  const sides = getSides();\n\n  const possibleSides = {\n    x: {\n      left: sides.x.left + menuWidth + PADDING_LEFT <= windowWidth,\n      right: sides.x.right >= PADDING_LEFT\n    },\n    y: {\n      top: sides.y.top + menuHeight + PADDING_TOP <= windowHeight,\n      bottom: sides.y.bottom - PADDING_TOP >= PADDING_TOP\n    }\n  };\n\n  /* if(side === undefined) {\n    if((clientX + menuWidth + PADDING_LEFT) > windowWidth) {\n      side = 'right';\n    }\n  } */\n\n  {\n    /* const x = sides.x;\n\n    const s = Object.keys(x) as (keyof typeof possibleSides.x)[];\n    if(side) {\n      s.findAndSplice(s => s === side);\n      s.unshift(side);\n    }\n\n    const possibleSide = s.find(s => possibleSides.x[s]); */\n    let left: number;\n    /* if(possibleSide) {\n      left = x[possibleSide];\n      side = possibleSide;\n    } else {\n      left = sides.intermediateX;\n      side = undefined;\n    } */\n    left = possibleSides.x[side] ? sides.x[side] : (side = 'center', sides.intermediateX);\n  \n    elem.style.left = left + 'px';\n  }\n\n  /* if((clientY + menuHeight + PADDING_TOP) > windowHeight) {\n    elem.style.top = clamp(clientY - menuHeight, PADDING_TOP, windowHeight - menuHeight - PADDING_TOP) + 'px';\n    // elem.style.top = (innerHeight - scrollHeight - PADDING_TOP) + 'px';\n    verticalSide = 'bottom';\n  } else {\n    elem.style.top = Math.max(PADDING_TOP, clientY) + 'px';\n    verticalSide = 'top';\n  } */\n\n  {\n    let top: number;\n\n    top = possibleSides.y[verticalSide] ? sides.y[verticalSide] : (verticalSide = 'center', sides.intermediateY);\n  \n    elem.style.top = top + 'px';\n  }\n  \n  elem.className = elem.className.replace(/(top|center|bottom)-(left|center|right)/g, '');\n  elem.classList.add(\n    //(verticalSide === 'center' ? verticalSide : (verticalSide === 'bottom' ? 'top' : 'bottom')) +\n    (verticalSide === 'center' ? verticalSide : 'bottom') +\n    '-' +\n    (side === 'center' ? side : (side === 'left' ? 'right' : 'left')));\n}\n\nexport function attachContextMenuListener(element: HTMLElement, callback: (e: Touch | MouseEvent) => void, listenerSetter?: ListenerSetter) {\n  const add = listenerSetter ? listenerSetter.add(element) : element.addEventListener.bind(element);\n  const remove = listenerSetter ? listenerSetter.removeManual.bind(listenerSetter, element) : element.removeEventListener.bind(element);\n\n  if(isApple && isTouchSupported) {\n    let timeout: number;\n\n    const options: EventListenerOptions = {capture: true};\n\n    const onCancel = () => {\n      clearTimeout(timeout);\n      // @ts-ignore\n      remove('touchmove', onCancel, options);\n      // @ts-ignore\n      remove('touchend', onCancel, options);\n      // @ts-ignore\n      remove('touchcancel', onCancel, options);\n    };\n\n    add('touchstart', (e: TouchEvent) => {\n      if(e.touches.length > 1) {\n        onCancel();\n        return;\n      }\n  \n      add('touchmove', onCancel, options);\n      add('touchend', onCancel, options);\n      add('touchcancel', onCancel, options);\n\n      timeout = window.setTimeout(() => {\n        callback(e.touches[0]);\n        onCancel();\n\n        if(openedMenu) {\n          element.addEventListener('touchend', cancelEvent, {once: true}); // * fix instant closing\n        }\n      }, .4e3);\n    });\n\n    /* if(!isSafari) {\n      add('contextmenu', (e: any) => {\n        cancelEvent(e);\n      }, {passive: false, capture: true});\n    } */\n  } else {\n    add('contextmenu', isTouchSupported ? (e: any) => {\n      callback(e);\n\n      if(openedMenu) {\n        element.addEventListener('touchend', cancelEvent, {once: true}); // * fix instant closing\n      }\n    } : callback);\n  }\n};\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport { MOUNT_CLASS_TO } from \"../config/debug\";\nimport { isMobileSafari } from \"../helpers/userAgent\";\nimport { logger } from \"../lib/logger\";\nimport { doubleRaf } from \"../helpers/schedulers\";\nimport blurActiveElement from \"../helpers/dom/blurActiveElement\";\nimport { cancelEvent } from \"../helpers/dom/cancelEvent\";\n\nexport type NavigationItem = {\n  type: 'left' | 'right' | 'im' | 'chat' | 'popup' | 'media' | 'menu' | \n    'esg' | 'multiselect' | 'input-helper' | 'autocomplete-helper' | 'markup' | 'global-search',\n  onPop: (canAnimate: boolean) => boolean | void,\n  onEscape?: () => boolean,\n  noHistory?: boolean,\n  noBlurOnPop?: boolean,\n};\n\nexport class AppNavigationController {\n  private navigations: Array<NavigationItem> = [];\n  private id = Date.now();\n  private manual = false;\n  private log = logger('NC');\n  private debug = true;\n  private currentHash = window.location.hash;\n  public onHashChange: () => void;\n\n  constructor() {\n    let isPossibleSwipe = false;\n    window.addEventListener('popstate', (e) => {\n      this.debug && this.log('popstate', e, isPossibleSwipe);\n\n      if(window.location.hash !== this.currentHash) {\n        this.onHashChange && this.onHashChange();\n        this.replaceState();\n        return;\n      }\n      this.currentHash = window.location.hash;\n\n      const id: number = e.state;\n      if(id !== this.id/*  && !this.navigations.length */) {\n        this.pushState();\n        return;\n      }\n\n      const item = this.navigations.pop();\n      if(!item) {\n        this.pushState();\n        return;\n      }\n\n      this.manual = !isPossibleSwipe;\n      this.handleItem(item);\n      //this.pushState(); // * prevent adding forward arrow\n    });\n\n    window.addEventListener('keydown', (e) => {\n      const item = this.navigations[this.navigations.length - 1];\n      if(!item) return;\n      if(e.key === 'Escape' && (item.onEscape ? item.onEscape() : true)) {\n        cancelEvent(e);\n        this.back(item.type);\n      }\n    }, {capture: true, passive: false});\n\n    if(isMobileSafari) {\n      const options = {passive: true};\n      window.addEventListener('touchstart', (e) => {\n        if(e.touches.length > 1) return;\n        this.debug && this.log('touchstart');\n\n        const detach = () => {\n          window.removeEventListener('touchend', onTouchEnd);\n          window.removeEventListener('touchmove', onTouchMove);\n        };\n\n        let moved = false;\n        const onTouchMove = (e: TouchEvent) => {\n          this.debug && this.log('touchmove');\n          if(e.touches.length > 1) {\n            detach();\n            return;\n          }\n\n          moved = true;\n        };\n\n        const onTouchEnd = (e: TouchEvent) => {\n          this.debug && this.log('touchend');\n          if(e.touches.length > 1 || !moved) {\n            detach();\n            return;\n          }\n\n          isPossibleSwipe = true;\n          doubleRaf().then(() => {\n            isPossibleSwipe = false;\n          });\n\n          detach();\n        };\n\n        window.addEventListener('touchend', onTouchEnd, options);\n        window.addEventListener('touchmove', onTouchMove, options);\n      }, options);\n    }\n\n    history.scrollRestoration = 'manual';\n\n    this.pushState(); // * push init state\n  }\n\n  private handleItem(item: NavigationItem) {\n    const good = item.onPop(!this.manual ? false : undefined);\n    this.debug && this.log('popstate, navigation:', item, this.navigations);\n    if(good === false) {\n      this.pushItem(item);\n    } else if(!item.noBlurOnPop) {\n      blurActiveElement(); // no better place for it\n    }\n\n    this.manual = false;\n  }\n\n  public findItemByType(type: NavigationItem['type']) {\n    for(let i = this.navigations.length - 1; i >= 0; --i) {\n      const item = this.navigations[i];\n      if(item.type === type) {\n        return {item, index: i};\n      }\n    }\n  }\n\n  public back(type?: NavigationItem['type']) {\n    if(type) {\n      const ret = this.findItemByType(type);\n      if(ret) {\n        this.manual = true;\n        // ! commented because 'popstate' event will be fired with delay\n        //if(ret.index !== (this.navigations.length - 1)) {\n          this.navigations.splice(ret.index, 1);\n          this.handleItem(ret.item);\n          return;\n        //}\n      }\n    }\n\n    history.back();\n  }\n\n  public pushItem(item: NavigationItem) {\n    this.navigations.push(item);\n    this.debug && this.log('pushstate', item, this.navigations);\n\n    if(!item.noHistory) {\n      this.pushState();\n    }\n  }\n\n  private pushState() {\n    this.manual = false;\n    history.pushState(this.id, '');\n  }\n\n  public replaceState() {\n    history.replaceState(this.id, '', location.origin + location.pathname);\n  }\n\n  public removeItem(item: NavigationItem) {\n    this.navigations.findAndSplice(i => i === item);\n  }\n\n  public removeByType(type: NavigationItem['type'], single = false) {\n    for(let i = this.navigations.length - 1; i >= 0; --i) {\n      const item = this.navigations[i];\n      if(item.type === type) {\n        this.navigations.splice(i, 1);\n\n        if(single) {\n          break;\n        }\n      }\n    }\n  }\n}\n\nconst appNavigationController = new AppNavigationController();\nMOUNT_CLASS_TO.appNavigationController = appNavigationController;\nexport default appNavigationController;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type { DownloadOptions } from \"../mtproto/apiFileManager\";\nimport type { ApiError } from \"../mtproto/apiManager\";\nimport type { MyDocument } from \"./appDocsManager\";\nimport type { MyPhoto } from \"./appPhotosManager\";\nimport rootScope from \"../rootScope\";\nimport apiManager from \"../mtproto/mtprotoworker\";\nimport { deferredPromise, CancellablePromise } from \"../../helpers/cancellablePromise\";\nimport { InputFile } from \"../../layer\";\nimport referenceDatabase, {ReferenceBytes} from \"../mtproto/referenceDatabase\";\nimport { getFileNameByLocation } from \"../../helpers/fileName\";\nimport CacheStorageController from \"../cacheStorage\";\nimport { MOUNT_CLASS_TO } from \"../../config/debug\";\n\nexport type ResponseMethodBlob = 'blob';\nexport type ResponseMethodJson = 'json';\nexport type ResponseMethod = ResponseMethodBlob | ResponseMethodJson;\n\n/* export type DownloadBlob = {promise: Promise<Blob>, controller: AbortController};\nexport type DownloadJson = {promise: Promise<any>, controller: AbortController}; */\nexport type DownloadBlob = CancellablePromise<Blob>;\nexport type DownloadJson = CancellablePromise<any>;\n//export type Download = DownloadBlob/*  | DownloadJson */;\nexport type Download = DownloadBlob/*  | DownloadJson */;\n\nexport type Progress = {done: number, fileName: string, total: number, offset: number};\nexport type ProgressCallback = (details: Progress) => void;\n\nexport type ThumbCache = {\n  downloaded: number, \n  url: string\n};\n\nexport type ThumbsCache = {\n  [id: string]: {\n    [size: string]: ThumbCache\n  }\n};\n\nexport class AppDownloadManager {\n  public cacheStorage = new CacheStorageController('cachedFiles');\n  private downloads: {[fileName: string]: Download} = {};\n  private progress: {[fileName: string]: Progress} = {};\n  private progressCallbacks: {[fileName: string]: Array<ProgressCallback>} = {};\n\n  private uploadId = 0;\n\n  private thumbsCache: {\n    photo: ThumbsCache,\n    document: ThumbsCache\n  } = {\n    photo: {},\n    document: {}\n  };\n\n  constructor() {\n    rootScope.addEventListener('download_progress', (e) => {\n      const details = e as {done: number, fileName: string, total: number, offset: number};\n      this.progress[details.fileName] = details;\n\n      const callbacks = this.progressCallbacks[details.fileName];\n      if(callbacks) {\n        callbacks.forEach(callback => callback(details));\n      }\n\n      const download = this.downloads[details.fileName];\n      if(download) {\n        download.notifyAll(details);\n      }\n    });\n  }\n\n  private getNewDeferred<T>(fileName: string) {\n    const deferred = deferredPromise<T>();\n\n    deferred.cancel = () => {\n      //try {\n        const error = new Error('Download canceled');\n        error.name = 'AbortError';\n        \n        apiManager.cancelDownload(fileName);\n        \n        deferred.reject(error);\n        deferred.cancel = () => {};\n      /* } catch(err) {\n\n      } */\n    };\n\n    deferred.finally(() => {\n      delete this.progress[fileName];\n      delete this.progressCallbacks[fileName];\n    });\n\n    deferred.catch(() => {\n      this.clearDownload(fileName);\n    });\n\n    return this.downloads[fileName] = deferred as any;\n  }\n\n  private clearDownload(fileName: string) {\n    delete this.downloads[fileName];\n  }\n\n  public fakeDownload(fileName: string, value: Blob | string) {\n    const deferred = this.getNewDeferred<Blob>(fileName);\n    if(typeof(value) === 'string') {\n      fetch(value)\n      .then(response => response.blob())\n      .then(blob => deferred.resolve(blob));\n    } else {\n      deferred.resolve(value);\n    }\n\n    return deferred;\n  }\n\n  public download(options: DownloadOptions): DownloadBlob {\n    const fileName = getFileNameByLocation(options.location, {fileName: options.fileName});\n    if(this.downloads.hasOwnProperty(fileName)) return this.downloads[fileName];\n\n    const deferred = this.getNewDeferred<Blob>(fileName);\n\n    const onError = (err: ApiError) => {\n      deferred.reject(err);\n    };\n\n    const tryDownload = (): Promise<unknown> => {\n      //return Promise.resolve();\n\n      if(!apiManager.worker || options.onlyCache) {\n        const promise = this.cacheStorage.getFile(fileName).then((blob) => {\n          if(blob.size < options.size) throw 'wrong size';\n          else deferred.resolve(blob);\n        });\n        \n        if(options.onlyCache) return promise.catch(onError);\n        return promise.catch(() => {\n          return apiManager.downloadFile(options).then(deferred.resolve, onError);\n        });\n      } else {\n        /* return apiManager.downloadFile(options).then(res => {\n          setTimeout(() => deferred.resolve(res), 5e3);\n        }, onError); */\n\n        return apiManager.downloadFile(options).then(deferred.resolve, onError);\n      }\n    };\n\n    tryDownload();\n\n    //console.log('Will download file:', fileName, url);\n    return deferred;\n  }\n\n  public upload(file: File | Blob, fileName?: string) {\n    if(!fileName) {\n      const mimeType = file?.type;\n      if(mimeType) { // the same like apiFileName in appMessagesManager for upload!\n        const ext = this.uploadId++ + '.' + mimeType.split('/')[1];\n  \n        if(['image/jpeg', 'image/png', 'image/bmp'].indexOf(mimeType) >= 0) {\n          fileName = 'photo' + ext;\n        } else if(mimeType.indexOf('audio/') === 0 || ['video/ogg'].indexOf(mimeType) >= 0) {\n          fileName = 'audio' + ext;\n        } else if(mimeType.indexOf('video/') === 0) {\n          fileName = 'video' + ext;\n        } else {\n          fileName = 'document' + ext;\n        }\n        \n      } else {\n        fileName = 'upload-' + this.uploadId++;\n      }\n    }\n\n    const deferred = this.getNewDeferred<InputFile>(fileName);\n    apiManager.uploadFile({file, fileName}).then(deferred.resolve, deferred.reject);\n\n    deferred.finally(() => {\n      this.clearDownload(fileName);\n    });\n\n    return deferred as any as CancellablePromise<InputFile>;\n  }\n\n  public getDownload(fileName: string) {\n    return this.downloads[fileName];\n  }\n\n  public addProgressCallback(fileName: string, callback: ProgressCallback) {\n    const progress = this.progress[fileName];\n    (this.progressCallbacks[fileName] ?? (this.progressCallbacks[fileName] = [])).push(callback);\n\n    if(progress) {\n      callback(progress);\n    }\n  }\n\n  public createDownloadAnchor(url: string, fileName: string, onRemove?: () => void) {\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = fileName;\n    a.target = '_blank';\n    \n    a.style.position = 'absolute';\n    a.style.top = '1px';\n    a.style.left = '1px';\n    \n    document.body.append(a);\n  \n    try {\n      var clickEvent = document.createEvent('MouseEvents');\n      clickEvent.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      a.dispatchEvent(clickEvent);\n    } catch (e) {\n      console.error('Download click error', e);\n      try {\n        a.click();\n      } catch (e) {\n        window.open(url as string, '_blank');\n      }\n    }\n    \n    setTimeout(() => {\n      a.remove();\n      onRemove && onRemove();\n    }, 100);\n  }\n\n  /* public downloadToDisc(fileName: string, url: string) {\n    this.createDownloadAnchor(url);\n  \n    return this.download(fileName, url);\n  } */\n\n  public downloadToDisc(options: DownloadOptions, discFileName: string) {\n    const download = this.download(options);\n    download/* .promise */.then(blob => {\n      const objectURL = URL.createObjectURL(blob);\n      this.createDownloadAnchor(objectURL, discFileName, () => {\n        URL.revokeObjectURL(objectURL);\n      });\n    });\n  \n    return download;\n  }\n\n  public getCacheContext(media: MyPhoto | MyDocument, thumbSize: string = 'full'): ThumbCache {\n    /* if(media._ === 'photo' && thumbSize !== 'i') {\n      thumbSize = 'full';\n    } */\n\n    const cache = this.thumbsCache[media._][media.id] ?? (this.thumbsCache[media._][media.id] = {});\n    return cache[thumbSize] ?? (cache[thumbSize] = {downloaded: 0, url: ''});\n  }\n}\n\nconst appDownloadManager = new AppDownloadManager();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.appDownloadManager = appDownloadManager);\nexport default appDownloadManager;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport rootScope from \"../../lib/rootScope\";\nimport { ripple } from \"../ripple\";\nimport animationIntersector from \"../animationIntersector\";\nimport appNavigationController, { NavigationItem } from \"../appNavigationController\";\nimport { i18n, LangPackKey } from \"../../lib/langPack\";\nimport findUpClassName from \"../../helpers/dom/findUpClassName\";\nimport blurActiveElement from \"../../helpers/dom/blurActiveElement\";\n\nexport type PopupButton = {\n  text?: string,\n  callback?: () => void,\n  langKey?: LangPackKey,\n  langArgs?: any[],\n  isDanger?: true,\n  isCancel?: true\n};\n\nexport type PopupOptions = Partial<{\n  closable: true, \n  overlayClosable: true, \n  withConfirm: LangPackKey | true, \n  body: true\n}>;\n\nexport default class PopupElement {\n  protected element = document.createElement('div');\n  protected container = document.createElement('div');\n  protected header = document.createElement('div');\n  protected title = document.createElement('div');\n  protected btnClose: HTMLElement;\n  protected btnConfirm: HTMLElement;\n  protected body: HTMLElement;\n\n  protected onClose: () => void;\n  protected onCloseAfterTimeout: () => void;\n  protected onEscape: () => boolean = () => true;\n\n  protected navigationItem: NavigationItem;\n\n  constructor(className: string, buttons?: Array<PopupButton>, options: PopupOptions = {}) {\n    this.element.classList.add('popup');\n    this.element.className = 'popup' + (className ? ' ' + className : '');\n    this.container.classList.add('popup-container', 'z-depth-1');\n\n    this.header.classList.add('popup-header');\n    this.title.classList.add('popup-title');\n\n    this.header.append(this.title);\n\n    if(options.closable) {\n      this.btnClose = document.createElement('span');\n      this.btnClose.classList.add('btn-icon', 'popup-close', 'tgico-close');\n      //ripple(this.closeBtn);\n      this.header.prepend(this.btnClose);\n\n      this.btnClose.addEventListener('click', this.hide, {once: true});\n    }\n\n    if(options.overlayClosable) {\n      const onOverlayClick = (e: MouseEvent) => {\n        if(!findUpClassName(e.target, 'popup-container')) {\n          this.hide();\n          this.element.removeEventListener('click', onOverlayClick);\n        }\n      };\n  \n      this.element.addEventListener('click', onOverlayClick);\n    }\n\n    if(options.withConfirm) {\n      this.btnConfirm = document.createElement('button');\n      this.btnConfirm.classList.add('btn-primary', 'btn-color-primary');\n      if(options.withConfirm !== true) {\n        this.btnConfirm.append(i18n(options.withConfirm));\n      }\n      this.header.append(this.btnConfirm);\n      ripple(this.btnConfirm);\n    }\n\n    this.container.append(this.header);\n    if(options.body) {\n      this.body = document.createElement('div');\n      this.body.classList.add('popup-body');\n      this.container.append(this.body);\n    }\n\n    if(buttons && buttons.length) {\n      const buttonsDiv = document.createElement('div');\n      buttonsDiv.classList.add('popup-buttons');\n\n      if(buttons.length === 2) {\n        buttonsDiv.classList.add('popup-buttons-row');\n      }\n  \n      const buttonsElements = buttons.map(b => {\n        const button = document.createElement('button');\n        button.className = 'btn' + (b.isDanger ? ' danger' : ' primary');\n\n        ripple(button);\n        \n        if(b.text) {\n          button.innerHTML =  b.text;\n        } else {\n          button.append(i18n(b.langKey, b.langArgs));\n        }\n  \n        if(b.callback) {\n          button.addEventListener('click', () => {\n            b.callback();\n            this.destroy();\n          }, {once: true});\n        } else if(b.isCancel) {\n          button.addEventListener('click', () => {\n            this.destroy();\n          }, {once: true});\n        }\n  \n        return button;\n      });\n  \n      buttonsDiv.append(...buttonsElements);\n      this.container.append(buttonsDiv);\n    }\n\n    this.element.append(this.container);\n  }\n\n  public show() {\n    this.navigationItem = {\n      type: 'popup',\n      onPop: this.destroy,\n      onEscape: this.onEscape\n    };\n\n    appNavigationController.pushItem(this.navigationItem);\n\n    blurActiveElement(); // * hide mobile keyboard\n    document.body.append(this.element);\n    void this.element.offsetWidth; // reflow\n    this.element.classList.add('active');\n    rootScope.overlayIsActive = true;\n    animationIntersector.checkAnimations(true);\n  }\n\n  public hide = () => {\n    appNavigationController.back('popup');\n  };\n\n  private destroy = () => {\n    this.onClose && this.onClose();\n    this.element.classList.add('hiding');\n    this.element.classList.remove('active');\n\n    if(this.btnClose) this.btnClose.removeEventListener('click', this.hide);\n    rootScope.overlayIsActive = false;\n\n    appNavigationController.removeItem(this.navigationItem);\n    this.navigationItem = undefined;\n\n    setTimeout(() => {\n      this.element.remove();\n      this.onCloseAfterTimeout && this.onCloseAfterTimeout();\n      animationIntersector.checkAnimations(false);\n    }, 150);\n  };\n}\n\nexport const addCancelButton = (buttons: PopupButton[]) => {\n  const button = buttons.find(b => b.isCancel);\n  if(!button) {\n    buttons.push({\n      langKey: 'Cancel',\n      isCancel: true\n    });\n  }\n\n  return buttons;\n};\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport { fastRaf } from \"./schedulers\";\nimport { CancellablePromise, deferredPromise } from \"./cancellablePromise\";\nimport { MOUNT_CLASS_TO } from \"../config/debug\";\nimport isInDOM from \"./dom/isInDOM\";\n\nclass SequentialDom {\n  private promises: Partial<{\n    read: CancellablePromise<void>,\n    write: CancellablePromise<void>\n  }> = {};\n  private raf = fastRaf.bind(null);\n  private scheduled = false;\n\n  private do(kind: keyof SequentialDom['promises'], callback?: VoidFunction) {\n    let promise = this.promises[kind];\n    if(!promise) {\n      this.scheduleFlush();\n      promise = this.promises[kind] = deferredPromise<void>();\n    }\n\n    if(callback !== undefined) {\n      promise.then(() => callback());\n    }\n    \n    return promise;\n  }\n\n  public measure(callback?: VoidFunction) {\n    return this.do('read', callback);\n  }\n\n  public mutate(callback?: VoidFunction) {\n    return this.do('write', callback);\n  }\n\n  /**\n   * Will fire instantly if element is not connected\n   * @param element \n   * @param callback \n   */\n  public mutateElement(element: HTMLElement, callback?: VoidFunction) {\n    const promise = isInDOM(element) ? this.mutate() : Promise.resolve();\n\n    if(callback !== undefined) {\n      promise.then(() => callback());\n    }\n\n    return promise;\n  }\n\n  private scheduleFlush() {\n    if(!this.scheduled) {\n      this.scheduled = true;\n\n      this.raf(() => {\n        this.promises.read && this.promises.read.resolve();\n        this.promises.write && this.promises.write.resolve();\n\n        this.scheduled = false;\n        this.promises = {};\n      });\n    }\n  }\n}\n\nconst sequentialDom = new SequentialDom();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.sequentialDom = sequentialDom);\nexport default sequentialDom;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport { MOUNT_CLASS_TO } from \"./config/debug\";\n\nexport type Country = {\n  phoneCode: string,\n  code: string,\n  name: string,\n  pattern: string,\n  emoji: string\n};\n\nconst Countries: Country[] = [{\"phoneCode\":\"7 840\",\"code\":\"AB\",\"name\":\"Abkhazia\",\"pattern\":\"\",\"emoji\":\"\"},{\"phoneCode\":\"93\",\"code\":\"AF\",\"name\":\"Afghanistan\",\"pattern\":\"93 XXX XXX XXX\",\"emoji\":\"🇦🇫\"},{\"phoneCode\":\"358 18\",\"code\":\"AX\",\"name\":\"Aland Islands\",\"pattern\":\"\",\"emoji\":\"🇦🇽\"},{\"phoneCode\":\"355\",\"code\":\"AL\",\"name\":\"Albania\",\"pattern\":\"355 XX XXX XXXX\",\"emoji\":\"🇦🇱\"},{\"phoneCode\":\"213\",\"code\":\"DZ\",\"name\":\"Algeria\",\"pattern\":\"213 XXX XX XX XX\",\"emoji\":\"🇩🇿\"},{\"phoneCode\":\"1 684\",\"code\":\"AS\",\"name\":\"American Samoa\",\"pattern\":\"1684 XXX XXXX\",\"emoji\":\"🇦🇸\"},{\"phoneCode\":\"376\",\"code\":\"AD\",\"name\":\"Andorra\",\"pattern\":\"376 XX XX XX\",\"emoji\":\"🇦🇩\"},{\"phoneCode\":\"244\",\"code\":\"AO\",\"name\":\"Angola\",\"pattern\":\"244 XXX XXX XXX\",\"emoji\":\"🇦🇴\"},{\"phoneCode\":\"1 264\",\"code\":\"AI\",\"name\":\"Anguilla\",\"pattern\":\"1264 XXX XXXX\",\"emoji\":\"🇦🇮\"},{\"phoneCode\":\"1 268\",\"code\":\"AG\",\"name\":\"Antigua & Barbuda\",\"pattern\":\"1268 XXX XXXX\",\"emoji\":\"🇦🇬\"},{\"phoneCode\":\"54\",\"code\":\"AR\",\"name\":\"Argentina\",\"pattern\":\"\",\"emoji\":\"🇦🇷\"},{\"phoneCode\":\"374\",\"code\":\"AM\",\"name\":\"Armenia\",\"pattern\":\"374 XX XXX XXX\",\"emoji\":\"🇦🇲\"},{\"phoneCode\":\"297\",\"code\":\"AW\",\"name\":\"Aruba\",\"pattern\":\"297 XXX XXXX\",\"emoji\":\"🇦🇼\"},{\"phoneCode\":\"247\",\"code\":\"SH\",\"name\":\"Ascension\",\"pattern\":\"290 XX XXX\",\"emoji\":\"🇸🇭\"},{\"phoneCode\":\"61\",\"code\":\"AU\",\"name\":\"Australia\",\"pattern\":\"61 XXX XXX XXX\",\"emoji\":\"🇦🇺\"},{\"phoneCode\":\"672\",\"code\":\"AU\",\"name\":\"Australian External Territories\",\"pattern\":\"61 XXX XXX XXX\",\"emoji\":\"🇦🇺\"},{\"phoneCode\":\"43\",\"code\":\"AT\",\"name\":\"Austria\",\"pattern\":\"\",\"emoji\":\"🇦🇹\"},{\"phoneCode\":\"994\",\"code\":\"AZ\",\"name\":\"Azerbaijan\",\"pattern\":\"994 XX XXX XX XX\",\"emoji\":\"🇦🇿\"},{\"phoneCode\":\"1 242\",\"code\":\"BS\",\"name\":\"Bahamas\",\"pattern\":\"1242 XXX XXXX\",\"emoji\":\"🇧🇸\"},{\"phoneCode\":\"973\",\"code\":\"BH\",\"name\":\"Bahrain\",\"pattern\":\"973 XXXX XXXX\",\"emoji\":\"🇧🇭\"},{\"phoneCode\":\"880\",\"code\":\"BD\",\"name\":\"Bangladesh\",\"pattern\":\"\",\"emoji\":\"🇧🇩\"},{\"phoneCode\":\"1 246\",\"code\":\"BB\",\"name\":\"Barbados\",\"pattern\":\"1246 XXX XXXX\",\"emoji\":\"🇧🇧\"},{\"phoneCode\":\"1 268\",\"code\":\"AG\",\"name\":\"Barbuda\",\"pattern\":\"1268 XXX XXXX\",\"emoji\":\"🇦🇬\"},{\"phoneCode\":\"375\",\"code\":\"BY\",\"name\":\"Belarus\",\"pattern\":\"375 XX XXX XXXX\",\"emoji\":\"🇧🇾\"},{\"phoneCode\":\"32\",\"code\":\"BE\",\"name\":\"Belgium\",\"pattern\":\"32 XXX XX XX XX\",\"emoji\":\"🇧🇪\"},{\"phoneCode\":\"501\",\"code\":\"BZ\",\"name\":\"Belize\",\"pattern\":\"\",\"emoji\":\"🇧🇿\"},{\"phoneCode\":\"229\",\"code\":\"BJ\",\"name\":\"Benin\",\"pattern\":\"229 XX XXX XXX\",\"emoji\":\"🇧🇯\"},{\"phoneCode\":\"1 441\",\"code\":\"BM\",\"name\":\"Bermuda\",\"pattern\":\"1441 XXX XXXX\",\"emoji\":\"🇧🇲\"},{\"phoneCode\":\"975\",\"code\":\"BT\",\"name\":\"Bhutan\",\"pattern\":\"\",\"emoji\":\"🇧🇹\"},{\"phoneCode\":\"591\",\"code\":\"BO\",\"name\":\"Bolivia\",\"pattern\":\"591 X XXX XXXX\",\"emoji\":\"🇧🇴\"},{\"phoneCode\":\"599 7\",\"code\":\"BQ\",\"name\":\"Caribbean Netherlands\",\"pattern\":\"\",\"emoji\":\"🇧🇶\"},{\"phoneCode\":\"387\",\"code\":\"BA\",\"name\":\"Bosnia & Herzegovina\",\"pattern\":\"\",\"emoji\":\"🇧🇦\"},{\"phoneCode\":\"267\",\"code\":\"BW\",\"name\":\"Botswana\",\"pattern\":\"267 XX XXX XXX\",\"emoji\":\"🇧🇼\"},{\"phoneCode\":\"55\",\"code\":\"BR\",\"name\":\"Brazil\",\"pattern\":\"55 XX XXXXX XXXX\",\"emoji\":\"🇧🇷\"},{\"phoneCode\":\"246\",\"code\":\"IO\",\"name\":\"British Indian Ocean Territory\",\"pattern\":\"246 XXX XXXX\",\"emoji\":\"🇮🇴\"},{\"phoneCode\":\"1 284\",\"code\":\"VG\",\"name\":\"British Virgin Islands\",\"pattern\":\"1284 XXX XXXX\",\"emoji\":\"🇻🇬\"},{\"phoneCode\":\"673\",\"code\":\"BN\",\"name\":\"Brunei\",\"pattern\":\"673 XXX XXXX\",\"emoji\":\"🇧🇳\"},{\"phoneCode\":\"359\",\"code\":\"BG\",\"name\":\"Bulgaria\",\"pattern\":\"\",\"emoji\":\"🇧🇬\"},{\"phoneCode\":\"226\",\"code\":\"BF\",\"name\":\"Burkina Faso\",\"pattern\":\"226 XX XX XX XX\",\"emoji\":\"🇧🇫\"},{\"phoneCode\":\"95\",\"code\":\"MM\",\"name\":\"Myanmar (Burma)\",\"pattern\":\"\",\"emoji\":\"🇲🇲\"},{\"phoneCode\":\"257\",\"code\":\"BI\",\"name\":\"Burundi\",\"pattern\":\"257 XX XX XXXX\",\"emoji\":\"🇧🇮\"},{\"phoneCode\":\"855\",\"code\":\"KH\",\"name\":\"Cambodia\",\"pattern\":\"\",\"emoji\":\"🇰🇭\"},{\"phoneCode\":\"237\",\"code\":\"CM\",\"name\":\"Cameroon\",\"pattern\":\"237 XXXX XXXX\",\"emoji\":\"🇨🇲\"},{\"phoneCode\":\"1\",\"code\":\"CA\",\"name\":\"Canada\",\"pattern\":\"1 XXX XXX XXXX\",\"emoji\":\"🇨🇦\"},{\"phoneCode\":\"238\",\"code\":\"CV\",\"name\":\"Cape Verde\",\"pattern\":\"238 XXX XXXX\",\"emoji\":\"🇨🇻\"},{\"phoneCode\":\"1 345\",\"code\":\"KY\",\"name\":\"Cayman Islands\",\"pattern\":\"1345 XXX XXXX\",\"emoji\":\"🇰🇾\"},{\"phoneCode\":\"236\",\"code\":\"CF\",\"name\":\"Central African Republic\",\"pattern\":\"236 XX XX XX XX\",\"emoji\":\"🇨🇫\"},{\"phoneCode\":\"235\",\"code\":\"TD\",\"name\":\"Chad\",\"pattern\":\"235 XX XX XX XX\",\"emoji\":\"🇹🇩\"},{\"phoneCode\":\"56\",\"code\":\"CL\",\"name\":\"Chile\",\"pattern\":\"56 X XXXX XXXX\",\"emoji\":\"🇨🇱\"},{\"phoneCode\":\"86\",\"code\":\"CN\",\"name\":\"China\",\"pattern\":\"86 XXX XXXX XXXX\",\"emoji\":\"🇨🇳\"},{\"phoneCode\":\"61\",\"code\":\"CX\",\"name\":\"Christmas Island\",\"pattern\":\"\",\"emoji\":\"🇨🇽\"},{\"phoneCode\":\"61\",\"code\":\"CC\",\"name\":\"Cocos (Keeling) Islands\",\"pattern\":\"\",\"emoji\":\"🇨🇨\"},{\"phoneCode\":\"57\",\"code\":\"CO\",\"name\":\"Colombia\",\"pattern\":\"57 XXX XXX XXXX\",\"emoji\":\"🇨🇴\"},{\"phoneCode\":\"269\",\"code\":\"KM\",\"name\":\"Comoros\",\"pattern\":\"269 XXX XXXX\",\"emoji\":\"🇰🇲\"},{\"phoneCode\":\"242\",\"code\":\"CG\",\"name\":\"Congo - Brazzaville\",\"pattern\":\"242 XX XXX XXXX\",\"emoji\":\"🇨🇬\"},{\"phoneCode\":\"243\",\"code\":\"CD\",\"name\":\"Congo - Kinshasa\",\"pattern\":\"243 XX XXX XXXX\",\"emoji\":\"🇨🇩\"},{\"phoneCode\":\"682\",\"code\":\"CK\",\"name\":\"Cook Islands\",\"pattern\":\"\",\"emoji\":\"🇨🇰\"},{\"phoneCode\":\"506\",\"code\":\"CR\",\"name\":\"Costa Rica\",\"pattern\":\"\",\"emoji\":\"🇨🇷\"},{\"phoneCode\":\"225\",\"code\":\"CI\",\"name\":\"Cote d’Ivoire\",\"pattern\":\"225 XX XXX XXX\",\"emoji\":\"🇨🇮\"},{\"phoneCode\":\"385\",\"code\":\"HR\",\"name\":\"Croatia\",\"pattern\":\"\",\"emoji\":\"🇭🇷\"},{\"phoneCode\":\"53\",\"code\":\"CU\",\"name\":\"Cuba\",\"pattern\":\"53 XXXX XXXX\",\"emoji\":\"🇨🇺\"},{\"phoneCode\":\"599 9\",\"code\":\"CW\",\"name\":\"Curacao\",\"pattern\":\"\",\"emoji\":\"🇨🇼\"},{\"phoneCode\":\"357\",\"code\":\"CY\",\"name\":\"Cyprus\",\"pattern\":\"357 XXXX XXXX\",\"emoji\":\"🇨🇾\"},{\"phoneCode\":\"420\",\"code\":\"CZ\",\"name\":\"Czech Republic\",\"pattern\":\"\",\"emoji\":\"🇨🇿\"},{\"phoneCode\":\"45\",\"code\":\"DK\",\"name\":\"Denmark\",\"pattern\":\"45 XXXX XXXX\",\"emoji\":\"🇩🇰\"},{\"phoneCode\":\"246\",\"code\":\"DG\",\"name\":\"Diego Garcia\",\"pattern\":\"\",\"emoji\":\"🇩🇬\"},{\"phoneCode\":\"253\",\"code\":\"DJ\",\"name\":\"Djibouti\",\"pattern\":\"253 XX XX XX XX\",\"emoji\":\"🇩🇯\"},{\"phoneCode\":\"1 767\",\"code\":\"DM\",\"name\":\"Dominica\",\"pattern\":\"1767 XXX XXXX\",\"emoji\":\"🇩🇲\"},{\"phoneCode\":\"1 809 and 1 829\",\"code\":\"DO\",\"name\":\"Dominican Republic\",\"pattern\":\"1 XXX XXX XXXX\",\"emoji\":\"🇩🇴\"},{\"phoneCode\":\"670\",\"code\":\"TL\",\"name\":\"Timor-Leste\",\"pattern\":\"\",\"emoji\":\"🇹🇱\"},{\"phoneCode\":\"593\",\"code\":\"EC\",\"name\":\"Ecuador\",\"pattern\":\"\",\"emoji\":\"🇪🇨\"},{\"phoneCode\":\"20\",\"code\":\"EG\",\"name\":\"Egypt\",\"pattern\":\"20 XX XXX XXXX\",\"emoji\":\"🇪🇬\"},{\"phoneCode\":\"503\",\"code\":\"SV\",\"name\":\"El Salvador\",\"pattern\":\"503 XXXX XXXX\",\"emoji\":\"🇸🇻\"},{\"phoneCode\":\"240\",\"code\":\"GQ\",\"name\":\"Equatorial Guinea\",\"pattern\":\"240 XXX XXX XXX\",\"emoji\":\"🇬🇶\"},{\"phoneCode\":\"291\",\"code\":\"ER\",\"name\":\"Eritrea\",\"pattern\":\"291 X XXX XXX\",\"emoji\":\"🇪🇷\"},{\"phoneCode\":\"372\",\"code\":\"EE\",\"name\":\"Estonia\",\"pattern\":\"\",\"emoji\":\"🇪🇪\"},{\"phoneCode\":\"251\",\"code\":\"ET\",\"name\":\"Ethiopia\",\"pattern\":\"251 XX XXX XXXX\",\"emoji\":\"🇪🇹\"},{\"phoneCode\":\"500\",\"code\":\"FK\",\"name\":\"Falkland Islands\",\"pattern\":\"\",\"emoji\":\"🇫🇰\"},{\"phoneCode\":\"298\",\"code\":\"FO\",\"name\":\"Faroe Islands\",\"pattern\":\"298 XXX XXX\",\"emoji\":\"🇫🇴\"},{\"phoneCode\":\"679\",\"code\":\"FJ\",\"name\":\"Fiji\",\"pattern\":\"\",\"emoji\":\"🇫🇯\"},{\"phoneCode\":\"358\",\"code\":\"FI\",\"name\":\"Finland\",\"pattern\":\"\",\"emoji\":\"🇫🇮\"},{\"phoneCode\":\"33\",\"code\":\"FR\",\"name\":\"France\",\"pattern\":\"33 X XX XX XX XX\",\"emoji\":\"🇫🇷\"},{\"phoneCode\":\"594\",\"code\":\"GF\",\"name\":\"French Guiana\",\"pattern\":\"\",\"emoji\":\"🇬🇫\"},{\"phoneCode\":\"689\",\"code\":\"PF\",\"name\":\"French Polynesia\",\"pattern\":\"\",\"emoji\":\"🇵🇫\"},{\"phoneCode\":\"241\",\"code\":\"GA\",\"name\":\"Gabon\",\"pattern\":\"241 X XX XX XX\",\"emoji\":\"🇬🇦\"},{\"phoneCode\":\"220\",\"code\":\"GM\",\"name\":\"Gambia\",\"pattern\":\"220 XXX XXXX\",\"emoji\":\"🇬🇲\"},{\"phoneCode\":\"995\",\"code\":\"GE\",\"name\":\"Georgia\",\"pattern\":\"\",\"emoji\":\"🇬🇪\"},{\"phoneCode\":\"49\",\"code\":\"DE\",\"name\":\"Germany\",\"pattern\":\"49 XXX XXXXXXXX\",\"emoji\":\"🇩🇪\"},{\"phoneCode\":\"233\",\"code\":\"GH\",\"name\":\"Ghana\",\"pattern\":\"\",\"emoji\":\"🇬🇭\"},{\"phoneCode\":\"350\",\"code\":\"GI\",\"name\":\"Gibraltar\",\"pattern\":\"350 XXXX XXXX\",\"emoji\":\"🇬🇮\"},{\"phoneCode\":\"30\",\"code\":\"GR\",\"name\":\"Greece\",\"pattern\":\"30 XX XXXX XXXX\",\"emoji\":\"🇬🇷\"},{\"phoneCode\":\"299\",\"code\":\"GL\",\"name\":\"Greenland\",\"pattern\":\"299 XXX XXX\",\"emoji\":\"🇬🇱\"},{\"phoneCode\":\"1 473\",\"code\":\"GD\",\"name\":\"Grenada\",\"pattern\":\"1473 XXX XXXX\",\"emoji\":\"🇬🇩\"},{\"phoneCode\":\"590\",\"code\":\"GP\",\"name\":\"Guadeloupe\",\"pattern\":\"\",\"emoji\":\"🇬🇵\"},{\"phoneCode\":\"1 671\",\"code\":\"GU\",\"name\":\"Guam\",\"pattern\":\"1671 XXX XXXX\",\"emoji\":\"🇬🇺\"},{\"phoneCode\":\"502\",\"code\":\"GT\",\"name\":\"Guatemala\",\"pattern\":\"502 X XXX XXXX\",\"emoji\":\"🇬🇹\"},{\"phoneCode\":\"44\",\"code\":\"GG\",\"name\":\"Guernsey\",\"pattern\":\"\",\"emoji\":\"🇬🇬\"},{\"phoneCode\":\"224\",\"code\":\"GN\",\"name\":\"Guinea\",\"pattern\":\"224 XXX XXX XXX\",\"emoji\":\"🇬🇳\"},{\"phoneCode\":\"245\",\"code\":\"GW\",\"name\":\"Guinea-Bissau\",\"pattern\":\"245 XXX XXXX\",\"emoji\":\"🇬🇼\"},{\"phoneCode\":\"592\",\"code\":\"GY\",\"name\":\"Guyana\",\"pattern\":\"\",\"emoji\":\"🇬🇾\"},{\"phoneCode\":\"509\",\"code\":\"HT\",\"name\":\"Haiti\",\"pattern\":\"\",\"emoji\":\"🇭🇹\"},{\"phoneCode\":\"504\",\"code\":\"HN\",\"name\":\"Honduras\",\"pattern\":\"504 XXXX XXXX\",\"emoji\":\"🇭🇳\"},{\"phoneCode\":\"852\",\"code\":\"HK\",\"name\":\"Hong Kong SAR China\",\"pattern\":\"\",\"emoji\":\"🇭🇰\"},{\"phoneCode\":\"36\",\"code\":\"HU\",\"name\":\"Hungary\",\"pattern\":\"36 XX XXX XXXX\",\"emoji\":\"🇭🇺\"},{\"phoneCode\":\"354\",\"code\":\"IS\",\"name\":\"Iceland\",\"pattern\":\"354 XXX XXXX\",\"emoji\":\"🇮🇸\"},{\"phoneCode\":\"91\",\"code\":\"IN\",\"name\":\"India\",\"pattern\":\"91 XXXXX XXXXX\",\"emoji\":\"🇮🇳\"},{\"phoneCode\":\"62\",\"code\":\"ID\",\"name\":\"Indonesia\",\"pattern\":\"\",\"emoji\":\"🇮🇩\"},{\"phoneCode\":\"98\",\"code\":\"IR\",\"name\":\"Iran\",\"pattern\":\"98 XXX XXX XXXX\",\"emoji\":\"🇮🇷\"},{\"phoneCode\":\"964\",\"code\":\"IQ\",\"name\":\"Iraq\",\"pattern\":\"964 XXX XXX XXXX\",\"emoji\":\"🇮🇶\"},{\"phoneCode\":\"353\",\"code\":\"IE\",\"name\":\"Ireland\",\"pattern\":\"353 XX XXX XXXX\",\"emoji\":\"🇮🇪\"},{\"phoneCode\":\"972\",\"code\":\"IL\",\"name\":\"Israel\",\"pattern\":\"972 XX XXX XXXX\",\"emoji\":\"🇮🇱\"},{\"phoneCode\":\"39\",\"code\":\"IT\",\"name\":\"Italy\",\"pattern\":\"39 XXX XXX XXXX\",\"emoji\":\"🇮🇹\"},{\"phoneCode\":\"1 876\",\"code\":\"JM\",\"name\":\"Jamaica\",\"pattern\":\"1876 XXX XXXX\",\"emoji\":\"🇯🇲\"},{\"phoneCode\":\"47 79\",\"code\":\"SJ\",\"name\":\"Svalbard & Jan Mayen\",\"pattern\":\"\",\"emoji\":\"🇸🇯\"},{\"phoneCode\":\"81\",\"code\":\"JP\",\"name\":\"Japan\",\"pattern\":\"81 XX XXXX XXXX\",\"emoji\":\"🇯🇵\"},{\"phoneCode\":\"44\",\"code\":\"JE\",\"name\":\"Jersey\",\"pattern\":\"\",\"emoji\":\"🇯🇪\"},{\"phoneCode\":\"962\",\"code\":\"JO\",\"name\":\"Jordan\",\"pattern\":\"962 X XXXX XXXX\",\"emoji\":\"🇯🇴\"},{\"phoneCode\":\"383\",\"code\":\"XK\",\"name\":\"Kosovo\",\"pattern\":\"383 XXXX XXXX\",\"emoji\":\"🇽🇰\"},{\"phoneCode\":\"7 7\",\"code\":\"KZ\",\"name\":\"Kazakhstan\",\"pattern\":\"7 XXX XXX XX XX\",\"emoji\":\"🇰🇿\"},{\"phoneCode\":\"254\",\"code\":\"KE\",\"name\":\"Kenya\",\"pattern\":\"254 XXX XXX XXX\",\"emoji\":\"🇰🇪\"},{\"phoneCode\":\"686\",\"code\":\"KI\",\"name\":\"Kiribati\",\"pattern\":\"\",\"emoji\":\"🇰🇮\"},{\"phoneCode\":\"850\",\"code\":\"KP\",\"name\":\"North Korea\",\"pattern\":\"\",\"emoji\":\"🇰🇵\"},{\"phoneCode\":\"82\",\"code\":\"KR\",\"name\":\"South Korea\",\"pattern\":\"\",\"emoji\":\"🇰🇷\"},{\"phoneCode\":\"965\",\"code\":\"KW\",\"name\":\"Kuwait\",\"pattern\":\"965 XXXX XXXX\",\"emoji\":\"🇰🇼\"},{\"phoneCode\":\"996\",\"code\":\"KG\",\"name\":\"Kyrgyzstan\",\"pattern\":\"\",\"emoji\":\"🇰🇬\"},{\"phoneCode\":\"856\",\"code\":\"LA\",\"name\":\"Laos\",\"pattern\":\"\",\"emoji\":\"🇱🇦\"},{\"phoneCode\":\"371\",\"code\":\"LV\",\"name\":\"Latvia\",\"pattern\":\"371 XXX XXXXX\",\"emoji\":\"🇱🇻\"},{\"phoneCode\":\"961\",\"code\":\"LB\",\"name\":\"Lebanon\",\"pattern\":\"\",\"emoji\":\"🇱🇧\"},{\"phoneCode\":\"266\",\"code\":\"LS\",\"name\":\"Lesotho\",\"pattern\":\"266 XX XXX XXX\",\"emoji\":\"🇱🇸\"},{\"phoneCode\":\"231\",\"code\":\"LR\",\"name\":\"Liberia\",\"pattern\":\"\",\"emoji\":\"🇱🇷\"},{\"phoneCode\":\"218\",\"code\":\"LY\",\"name\":\"Libya\",\"pattern\":\"218 XX XXX XXXX\",\"emoji\":\"🇱🇾\"},{\"phoneCode\":\"423\",\"code\":\"LI\",\"name\":\"Liechtenstein\",\"pattern\":\"\",\"emoji\":\"🇱🇮\"},{\"phoneCode\":\"370\",\"code\":\"LT\",\"name\":\"Lithuania\",\"pattern\":\"370 XXX XXXXX\",\"emoji\":\"🇱🇹\"},{\"phoneCode\":\"352\",\"code\":\"LU\",\"name\":\"Luxembourg\",\"pattern\":\"\",\"emoji\":\"🇱🇺\"},{\"phoneCode\":\"853\",\"code\":\"MO\",\"name\":\"Macau SAR China\",\"pattern\":\"\",\"emoji\":\"🇲🇴\"},{\"phoneCode\":\"389\",\"code\":\"MK\",\"name\":\"Macedonia\",\"pattern\":\"\",\"emoji\":\"🇲🇰\"},{\"phoneCode\":\"261\",\"code\":\"MG\",\"name\":\"Madagascar\",\"pattern\":\"261 XX XX XXX XX\",\"emoji\":\"🇲🇬\"},{\"phoneCode\":\"265\",\"code\":\"MW\",\"name\":\"Malawi\",\"pattern\":\"\",\"emoji\":\"🇲🇼\"},{\"phoneCode\":\"60\",\"code\":\"MY\",\"name\":\"Malaysia\",\"pattern\":\"\",\"emoji\":\"🇲🇾\"},{\"phoneCode\":\"960\",\"code\":\"MV\",\"name\":\"Maldives\",\"pattern\":\"\",\"emoji\":\"🇲🇻\"},{\"phoneCode\":\"223\",\"code\":\"ML\",\"name\":\"Mali\",\"pattern\":\"223 XXXX XXXX\",\"emoji\":\"🇲🇱\"},{\"phoneCode\":\"356\",\"code\":\"MT\",\"name\":\"Malta\",\"pattern\":\"356 XX XX XX XX\",\"emoji\":\"🇲🇹\"},{\"phoneCode\":\"692\",\"code\":\"MH\",\"name\":\"Marshall Islands\",\"pattern\":\"\",\"emoji\":\"🇲🇭\"},{\"phoneCode\":\"596\",\"code\":\"MQ\",\"name\":\"Martinique\",\"pattern\":\"\",\"emoji\":\"🇲🇶\"},{\"phoneCode\":\"222\",\"code\":\"MR\",\"name\":\"Mauritania\",\"pattern\":\"222 XXXX XXXX\",\"emoji\":\"🇲🇷\"},{\"phoneCode\":\"230\",\"code\":\"MU\",\"name\":\"Mauritius\",\"pattern\":\"\",\"emoji\":\"🇲🇺\"},{\"phoneCode\":\"262\",\"code\":\"YT\",\"name\":\"Mayotte\",\"pattern\":\"\",\"emoji\":\"🇾🇹\"},{\"phoneCode\":\"52\",\"code\":\"MX\",\"name\":\"Mexico\",\"pattern\":\"\",\"emoji\":\"🇲🇽\"},{\"phoneCode\":\"691\",\"code\":\"FM\",\"name\":\"Micronesia\",\"pattern\":\"\",\"emoji\":\"🇫🇲\"},{\"phoneCode\":\"373\",\"code\":\"MD\",\"name\":\"Moldova\",\"pattern\":\"373 XX XXX XXX\",\"emoji\":\"🇲🇩\"},{\"phoneCode\":\"377\",\"code\":\"MC\",\"name\":\"Monaco\",\"pattern\":\"377 XXXX XXXX\",\"emoji\":\"🇲🇨\"},{\"phoneCode\":\"976\",\"code\":\"MN\",\"name\":\"Mongolia\",\"pattern\":\"\",\"emoji\":\"🇲🇳\"},{\"phoneCode\":\"382\",\"code\":\"ME\",\"name\":\"Montenegro\",\"pattern\":\"\",\"emoji\":\"🇲🇪\"},{\"phoneCode\":\"1 664\",\"code\":\"MS\",\"name\":\"Montserrat\",\"pattern\":\"1664 XXX XXXX\",\"emoji\":\"🇲🇸\"},{\"phoneCode\":\"212\",\"code\":\"MA\",\"name\":\"Morocco\",\"pattern\":\"212 XX XXX XXXX\",\"emoji\":\"🇲🇦\"},{\"phoneCode\":\"258\",\"code\":\"MZ\",\"name\":\"Mozambique\",\"pattern\":\"258 XX XXX XXXX\",\"emoji\":\"🇲🇿\"},{\"phoneCode\":\"264\",\"code\":\"NA\",\"name\":\"Namibia\",\"pattern\":\"264 XX XXX XXXX\",\"emoji\":\"🇳🇦\"},{\"phoneCode\":\"674\",\"code\":\"NR\",\"name\":\"Nauru\",\"pattern\":\"\",\"emoji\":\"🇳🇷\"},{\"phoneCode\":\"977\",\"code\":\"NP\",\"name\":\"Nepal\",\"pattern\":\"\",\"emoji\":\"🇳🇵\"},{\"phoneCode\":\"31\",\"code\":\"NL\",\"name\":\"Netherlands\",\"pattern\":\"31 X XX XX XX XX\",\"emoji\":\"🇳🇱\"},{\"phoneCode\":\"687\",\"code\":\"NC\",\"name\":\"New Caledonia\",\"pattern\":\"\",\"emoji\":\"🇳🇨\"},{\"phoneCode\":\"64\",\"code\":\"NZ\",\"name\":\"New Zealand\",\"pattern\":\"\",\"emoji\":\"🇳🇿\"},{\"phoneCode\":\"505\",\"code\":\"NI\",\"name\":\"Nicaragua\",\"pattern\":\"505 XXXX XXXX\",\"emoji\":\"🇳🇮\"},{\"phoneCode\":\"227\",\"code\":\"NE\",\"name\":\"Niger\",\"pattern\":\"227 XX XX XX XX\",\"emoji\":\"🇳🇪\"},{\"phoneCode\":\"234\",\"code\":\"NG\",\"name\":\"Nigeria\",\"pattern\":\"\",\"emoji\":\"🇳🇬\"},{\"phoneCode\":\"683\",\"code\":\"NU\",\"name\":\"Niue\",\"pattern\":\"\",\"emoji\":\"🇳🇺\"},{\"phoneCode\":\"672\",\"code\":\"NF\",\"name\":\"Norfolk Island\",\"pattern\":\"\",\"emoji\":\"🇳🇫\"},{\"phoneCode\":\"1 670\",\"code\":\"MP\",\"name\":\"Northern Mariana Islands\",\"pattern\":\"1670 XXX XXXX\",\"emoji\":\"🇲🇵\"},{\"phoneCode\":\"47\",\"code\":\"NO\",\"name\":\"Norway\",\"pattern\":\"47 XXXX XXXX\",\"emoji\":\"🇳🇴\"},{\"phoneCode\":\"968\",\"code\":\"OM\",\"name\":\"Oman\",\"pattern\":\"968 XXXX XXXX\",\"emoji\":\"🇴🇲\"},{\"phoneCode\":\"92\",\"code\":\"PK\",\"name\":\"Pakistan\",\"pattern\":\"92 XXX XXX XXXX\",\"emoji\":\"🇵🇰\"},{\"phoneCode\":\"680\",\"code\":\"PW\",\"name\":\"Palau\",\"pattern\":\"\",\"emoji\":\"🇵🇼\"},{\"phoneCode\":\"970\",\"code\":\"PS\",\"name\":\"Palestinian Territories\",\"pattern\":\"970 XXX XX XXXX\",\"emoji\":\"🇵🇸\"},{\"phoneCode\":\"507\",\"code\":\"PA\",\"name\":\"Panama\",\"pattern\":\"507 XXXX XXXX\",\"emoji\":\"🇵🇦\"},{\"phoneCode\":\"675\",\"code\":\"PG\",\"name\":\"Papua New Guinea\",\"pattern\":\"\",\"emoji\":\"🇵🇬\"},{\"phoneCode\":\"595\",\"code\":\"PY\",\"name\":\"Paraguay\",\"pattern\":\"595 XXX XXX XXX\",\"emoji\":\"🇵🇾\"},{\"phoneCode\":\"51\",\"code\":\"PE\",\"name\":\"Peru\",\"pattern\":\"51 XXX XXX XXX\",\"emoji\":\"🇵🇪\"},{\"phoneCode\":\"63\",\"code\":\"PH\",\"name\":\"Philippines\",\"pattern\":\"63 XXX XXX XXXX\",\"emoji\":\"🇵🇭\"},{\"phoneCode\":\"64\",\"code\":\"PN\",\"name\":\"Pitcairn Islands\",\"pattern\":\"\",\"emoji\":\"🇵🇳\"},{\"phoneCode\":\"48\",\"code\":\"PL\",\"name\":\"Poland\",\"pattern\":\"48 XXX XXX XXX\",\"emoji\":\"🇵🇱\"},{\"phoneCode\":\"351\",\"code\":\"PT\",\"name\":\"Portugal\",\"pattern\":\"351 X XXXX XXXX\",\"emoji\":\"🇵🇹\"},{\"phoneCode\":\"1 787 and 1 939\",\"code\":\"PR\",\"name\":\"Puerto Rico\",\"pattern\":\"1 XXX XXX XXXX\",\"emoji\":\"🇵🇷\"},{\"phoneCode\":\"974\",\"code\":\"QA\",\"name\":\"Qatar\",\"pattern\":\"\",\"emoji\":\"🇶🇦\"},{\"phoneCode\":\"262\",\"code\":\"RE\",\"name\":\"Reunion\",\"pattern\":\"262 XXX XXX XXX\",\"emoji\":\"🇷🇪\"},{\"phoneCode\":\"40\",\"code\":\"RO\",\"name\":\"Romania\",\"pattern\":\"40 XXX XXX XXX\",\"emoji\":\"🇷🇴\"},{\"phoneCode\":\"7\",\"code\":\"RU\",\"name\":\"Russia\",\"pattern\":\"7 XXX XXX XX XX\",\"emoji\":\"🇷🇺\"},{\"phoneCode\":\"250\",\"code\":\"RW\",\"name\":\"Rwanda\",\"pattern\":\"250 XXX XXX XXX\",\"emoji\":\"🇷🇼\"},{\"phoneCode\":\"590\",\"code\":\"BL\",\"name\":\"St. Barthelemy\",\"pattern\":\"\",\"emoji\":\"🇧🇱\"},{\"phoneCode\":\"290\",\"code\":\"SH\",\"name\":\"St. Helena\",\"pattern\":\"290 XX XXX\",\"emoji\":\"🇸🇭\"},{\"phoneCode\":\"1 869\",\"code\":\"KN\",\"name\":\"St. Kitts & Nevis\",\"pattern\":\"1869 XXX XXXX\",\"emoji\":\"🇰🇳\"},{\"phoneCode\":\"1 758\",\"code\":\"LC\",\"name\":\"St. Lucia\",\"pattern\":\"1758 XXX XXXX\",\"emoji\":\"🇱🇨\"},{\"phoneCode\":\"590\",\"code\":\"MF\",\"name\":\"St. Martin (France)\",\"pattern\":\"\",\"emoji\":\"🇲🇫\"},{\"phoneCode\":\"508\",\"code\":\"PM\",\"name\":\"St. Pierre and Miquelon\",\"pattern\":\"\",\"emoji\":\"🇵🇲\"},{\"phoneCode\":\"1 784\",\"code\":\"VC\",\"name\":\"St. Vincent and the Grenadines\",\"pattern\":\"1784 XXX XXXX\",\"emoji\":\"🇻🇨\"},{\"phoneCode\":\"685\",\"code\":\"WS\",\"name\":\"Samoa\",\"pattern\":\"\",\"emoji\":\"🇼🇸\"},{\"phoneCode\":\"378\",\"code\":\"SM\",\"name\":\"San Marino\",\"pattern\":\"378 XXX XXX XXXX\",\"emoji\":\"🇸🇲\"},{\"phoneCode\":\"239\",\"code\":\"ST\",\"name\":\"São Tome & Principe\",\"pattern\":\"239 XX XXXXX\",\"emoji\":\"🇸🇹\"},{\"phoneCode\":\"966\",\"code\":\"SA\",\"name\":\"Saudi Arabia\",\"pattern\":\"\",\"emoji\":\"🇸🇦\"},{\"phoneCode\":\"221\",\"code\":\"SN\",\"name\":\"Senegal\",\"pattern\":\"221 XX XXX XXXX\",\"emoji\":\"🇸🇳\"},{\"phoneCode\":\"381\",\"code\":\"RS\",\"name\":\"Serbia\",\"pattern\":\"381 XX XXX XXXX\",\"emoji\":\"🇷🇸\"},{\"phoneCode\":\"248\",\"code\":\"SC\",\"name\":\"Seychelles\",\"pattern\":\"248 X XX XX XX\",\"emoji\":\"🇸🇨\"},{\"phoneCode\":\"232\",\"code\":\"SL\",\"name\":\"Sierra Leone\",\"pattern\":\"232 XX XXX XXX\",\"emoji\":\"🇸🇱\"},{\"phoneCode\":\"65\",\"code\":\"SG\",\"name\":\"Singapore\",\"pattern\":\"65 XXXX XXXX\",\"emoji\":\"🇸🇬\"},{\"phoneCode\":\"599 3\",\"code\":\"BQ\",\"name\":\"Sint Eustatius\",\"pattern\":\"\",\"emoji\":\"🇧🇶\"},{\"phoneCode\":\"1 721\",\"code\":\"SX\",\"name\":\"Sint Maarten\",\"pattern\":\"1721 XXX XXXX\",\"emoji\":\"🇸🇽\"},{\"phoneCode\":\"421\",\"code\":\"SK\",\"name\":\"Slovakia\",\"pattern\":\"\",\"emoji\":\"🇸🇰\"},{\"phoneCode\":\"386\",\"code\":\"SI\",\"name\":\"Slovenia\",\"pattern\":\"\",\"emoji\":\"🇸🇮\"},{\"phoneCode\":\"677\",\"code\":\"SB\",\"name\":\"Solomon Islands\",\"pattern\":\"\",\"emoji\":\"🇸🇧\"},{\"phoneCode\":\"252\",\"code\":\"SO\",\"name\":\"Somalia\",\"pattern\":\"252 XX XXX XXX\",\"emoji\":\"🇸🇴\"},{\"phoneCode\":\"27\",\"code\":\"ZA\",\"name\":\"South Africa\",\"pattern\":\"27 XX XXX XXXX\",\"emoji\":\"🇿🇦\"},{\"phoneCode\":\"500\",\"code\":\"GS\",\"name\":\"South Georgia & South Sandwich Islands\",\"pattern\":\"\",\"emoji\":\"🇬🇸\"},{\"phoneCode\":\"995 34\",\"code\":\"\",\"name\":\"South Ossetia\",\"pattern\":\"\",\"emoji\":\"\"},{\"phoneCode\":\"211\",\"code\":\"SS\",\"name\":\"South Sudan\",\"pattern\":\"211 XX XXX XXXX\",\"emoji\":\"🇸🇸\"},{\"phoneCode\":\"34\",\"code\":\"ES\",\"name\":\"Spain\",\"pattern\":\"34 XXX XXX XXX\",\"emoji\":\"🇪🇸\"},{\"phoneCode\":\"94\",\"code\":\"LK\",\"name\":\"Sri Lanka\",\"pattern\":\"94 XX XXX XXXX\",\"emoji\":\"🇱🇰\"},{\"phoneCode\":\"249\",\"code\":\"SD\",\"name\":\"Sudan\",\"pattern\":\"249 XX XXX XXXX\",\"emoji\":\"🇸🇩\"},{\"phoneCode\":\"597\",\"code\":\"SR\",\"name\":\"Suriname\",\"pattern\":\"597 XXX XXXX\",\"emoji\":\"🇸🇷\"},{\"phoneCode\":\"47 79\",\"code\":\"SJ\",\"name\":\"Svalbard\",\"pattern\":\"\",\"emoji\":\"🇸🇯\"},{\"phoneCode\":\"268\",\"code\":\"SZ\",\"name\":\"Swaziland\",\"pattern\":\"268 XXXX XXXX\",\"emoji\":\"🇸🇿\"},{\"phoneCode\":\"46\",\"code\":\"SE\",\"name\":\"Sweden\",\"pattern\":\"46 XX XXX XXXX\",\"emoji\":\"🇸🇪\"},{\"phoneCode\":\"41\",\"code\":\"CH\",\"name\":\"Switzerland\",\"pattern\":\"41 XX XXX XXXX\",\"emoji\":\"🇨🇭\"},{\"phoneCode\":\"963\",\"code\":\"SY\",\"name\":\"Syria\",\"pattern\":\"\",\"emoji\":\"🇸🇾\"},{\"phoneCode\":\"886\",\"code\":\"TW\",\"name\":\"Taiwan\",\"pattern\":\"\",\"emoji\":\"🇹🇼\"},{\"phoneCode\":\"992\",\"code\":\"TJ\",\"name\":\"Tajikistan\",\"pattern\":\"\",\"emoji\":\"🇹🇯\"},{\"phoneCode\":\"255\",\"code\":\"TZ\",\"name\":\"Tanzania\",\"pattern\":\"255 XX XXX XXXX\",\"emoji\":\"🇹🇿\"},{\"phoneCode\":\"66\",\"code\":\"TH\",\"name\":\"Thailand\",\"pattern\":\"66 X XXXX XXXX\",\"emoji\":\"🇹🇭\"},{\"phoneCode\":\"228\",\"code\":\"TG\",\"name\":\"Togo\",\"pattern\":\"228 XX XXX XXX\",\"emoji\":\"🇹🇬\"},{\"phoneCode\":\"690\",\"code\":\"TK\",\"name\":\"Tokelau\",\"pattern\":\"\",\"emoji\":\"🇹🇰\"},{\"phoneCode\":\"676\",\"code\":\"TO\",\"name\":\"Tonga\",\"pattern\":\"\",\"emoji\":\"🇹🇴\"},{\"phoneCode\":\"1 868\",\"code\":\"TT\",\"name\":\"Trinidad & Tobago\",\"pattern\":\"1868 XXX XXXX\",\"emoji\":\"🇹🇹\"},{\"phoneCode\":\"216\",\"code\":\"TN\",\"name\":\"Tunisia\",\"pattern\":\"216 XX XXX XXX\",\"emoji\":\"🇹🇳\"},{\"phoneCode\":\"90\",\"code\":\"TR\",\"name\":\"Turkey\",\"pattern\":\"90 XXX XXX XXXX\",\"emoji\":\"🇹🇷\"},{\"phoneCode\":\"993\",\"code\":\"TM\",\"name\":\"Turkmenistan\",\"pattern\":\"993 XX XXXXXX\",\"emoji\":\"🇹🇲\"},{\"phoneCode\":\"1 649\",\"code\":\"TC\",\"name\":\"Turks & Caicos Islands\",\"pattern\":\"1649 XXX XXXX\",\"emoji\":\"🇹🇨\"},{\"phoneCode\":\"688\",\"code\":\"TV\",\"name\":\"Tuvalu\",\"pattern\":\"\",\"emoji\":\"🇹🇻\"},{\"phoneCode\":\"256\",\"code\":\"UG\",\"name\":\"Uganda\",\"pattern\":\"256 XX XXX XXXX\",\"emoji\":\"🇺🇬\"},{\"phoneCode\":\"380\",\"code\":\"UA\",\"name\":\"Ukraine\",\"pattern\":\"380 XX XXX XX XX\",\"emoji\":\"🇺🇦\"},{\"phoneCode\":\"971\",\"code\":\"AE\",\"name\":\"United Arab Emirates\",\"pattern\":\"971 XX XXX XXXX\",\"emoji\":\"🇦🇪\"},{\"phoneCode\":\"44\",\"code\":\"GB\",\"name\":\"United Kingdom\",\"pattern\":\"44 XXXX XXXXXX\",\"emoji\":\"🇬🇧\"},{\"phoneCode\":\"1\",\"code\":\"US\",\"name\":\"United States\",\"pattern\":\"1 XXX XXX XXXX\",\"emoji\":\"🇺🇸\"},{\"phoneCode\":\"598\",\"code\":\"UY\",\"name\":\"Uruguay\",\"pattern\":\"598 XXXX XXXX\",\"emoji\":\"🇺🇾\"},{\"phoneCode\":\"1 340\",\"code\":\"VI\",\"name\":\"U.S. Virgin Islands\",\"pattern\":\"1340 XXX XXXX\",\"emoji\":\"🇻🇮\"},{\"phoneCode\":\"998\",\"code\":\"UZ\",\"name\":\"Uzbekistan\",\"pattern\":\"998 XX XXXXXXX\",\"emoji\":\"🇺🇿\"},{\"phoneCode\":\"678\",\"code\":\"VU\",\"name\":\"Vanuatu\",\"pattern\":\"\",\"emoji\":\"🇻🇺\"},{\"phoneCode\":\"58\",\"code\":\"VE\",\"name\":\"Venezuela\",\"pattern\":\"58 XXX XXX XXXX\",\"emoji\":\"🇻🇪\"},{\"phoneCode\":\"39 06 698\",\"code\":\"VA\",\"name\":\"Vatican City\",\"pattern\":\"\",\"emoji\":\"🇻🇦\"},{\"phoneCode\":\"84\",\"code\":\"VN\",\"name\":\"Vietnam\",\"pattern\":\"\",\"emoji\":\"🇻🇳\"},{\"phoneCode\":\"681\",\"code\":\"WF\",\"name\":\"Wallis & Futuna\",\"pattern\":\"\",\"emoji\":\"🇼🇫\"},{\"phoneCode\":\"967\",\"code\":\"YE\",\"name\":\"Yemen\",\"pattern\":\"967 XXX XXX XXX\",\"emoji\":\"🇾🇪\"},{\"phoneCode\":\"260\",\"code\":\"ZM\",\"name\":\"Zambia\",\"pattern\":\"260 XX XXX XXXX\",\"emoji\":\"🇿🇲\"},{\"phoneCode\":\"255\",\"code\":\"\",\"name\":\"Zanzibar\",\"pattern\":\"\",\"emoji\":\"\"},{\"phoneCode\":\"263\",\"code\":\"ZW\",\"name\":\"Zimbabwe\",\"pattern\":\"263 XX XXX XXXX\",\"emoji\":\"🇿🇼\"}];\nconst PhoneCodesMain: {[phoneCode: string]: Country} = {\n  '1': Countries.find(c => c.name === 'United States'),\n  '44': Countries.find(c => c.name === 'United Kingdom'),\n  '61': Countries.find(c => c.name === 'Australia'),\n  '64': Countries.find(c => c.name === 'New Zealand'),\n  '246': Countries.find(c => c.name === 'Diego Garcia'),\n  '255': Countries.find(c => c.name === 'Tanzania'),\n  '262': Countries.find(c => c.name === 'Reunion'),\n  '500': Countries.find(c => c.name === 'Falkland Islands'),\n  '590': Countries.find(c => c.name === 'Guadeloupe'),\n  '672': Countries.find(c => c.name === 'Norfolk Island'),\n  '1 268': Countries.find(c => c.name === 'Antigua & Barbuda'),\n};\n\n/* \nconst toInt = (str) => {\n  return parseInt(str.replace(/ /g, ''));\n};\nvar arr = window.Countries.sort((a, b) => toInt(a.phoneCode) - toInt(b.phoneCode));\narr.forEach((el, idx) => {\n  if(idx === (arr.length - 1)) {\n    return;\n  }\n\n  if(toInt(arr[idx + 1].phoneCode) === toInt(el.phoneCode)) {\n    console.log('duplicate', el, arr[idx + 1]);\n  }\n});\n*/\n\nMOUNT_CLASS_TO.Countries = Countries;\n\nexport default Countries;\nexport {PhoneCodesMain};","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n * \n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport { blobConstruct, readBlobAsUint8Array } from \"../helpers/blob\";\n\nexport class FileManager {\n  public blobSupported = true;\n  \n  constructor() {\n    try {\n      blobConstruct([], '');\n    } catch(e) {\n      this.blobSupported = false;\n    }\n  }\n  \n  public isAvailable() {\n    return this.blobSupported;\n  }\n  \n  public write(fileWriter: ReturnType<FileManager['getFakeFileWriter']>, bytes: Uint8Array | Blob | string): Promise<void> {\n    if(bytes instanceof Blob) { // is file bytes\n      return readBlobAsUint8Array(bytes).then(arr => {\n        return fileWriter.write(arr);\n      });\n    } else {\n      return fileWriter.write(bytes);\n    }\n  }\n\n  public getFakeFileWriter(mimeType: string, saveFileCallback?: (blob: Blob) => Promise<Blob>) {\n    const blobParts: Array<Uint8Array | string> = [];\n    const fakeFileWriter = {\n      write: async(part: Uint8Array | string) => {\n        if(!this.blobSupported) {\n          throw false;\n        }\n        \n        blobParts.push(part);\n      },\n      truncate: () => {\n        blobParts.length = 0;\n      },\n      finalize: (saveToStorage = true) => {\n        const blob = blobConstruct(blobParts, mimeType);\n\n        if(saveToStorage && saveFileCallback) {\n          saveFileCallback(blob);\n        }\n        \n        return blob;\n      }\n    };\n    \n    return fakeFileWriter;\n  }\n}\n\nexport default new FileManager();\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport Modes from '../config/modes';\nimport { blobConstruct } from '../helpers/blob';\nimport FileManager from './filemanager';\n//import { MOUNT_CLASS_TO } from './mtproto/mtproto_config';\n//import { logger } from './polyfill';\n\nexport type CacheStorageDbName = 'cachedFiles' | 'cachedStreamChunks' | 'cachedAssets';\n\nexport default class CacheStorageController {\n  private static STORAGES: CacheStorageController[] = [];\n  private openDbPromise: Promise<Cache>;\n\n  private useStorage = true;\n\n  //private log: ReturnType<typeof logger> = logger('CS');\n\n  constructor(private dbName: CacheStorageDbName) {\n    if(Modes.test) {\n      this.dbName += '_test';\n    }\n\n    if(CacheStorageController.STORAGES.length) {\n      this.useStorage = CacheStorageController.STORAGES[0].useStorage;\n    }\n    \n    this.openDatabase();\n    CacheStorageController.STORAGES.push(this);\n  }\n\n  private openDatabase(): Promise<Cache> {\n    return this.openDbPromise ?? (this.openDbPromise = caches.open(this.dbName));\n  }\n\n  public delete(entryName: string) {\n    return this.timeoutOperation((cache) => cache.delete('/' + entryName));\n  }\n\n  public deleteAll() {\n    return caches.delete(this.dbName);\n  }\n\n  public get(entryName: string) {\n    return this.timeoutOperation((cache) => cache.match('/' + entryName));\n  }\n\n  public save(entryName: string, response: Response) {\n    // return new Promise((resolve) => {}); // DEBUG\n    return this.timeoutOperation((cache) => cache.put('/' + entryName, response));\n  }\n\n  public getFile(fileName: string, method: 'blob' | 'json' | 'text' = 'blob'): Promise<any> {\n    /* if(method === 'blob') {\n      return Promise.reject();\n    } */\n\n    // const str = `get fileName: ${fileName}`;\n    // console.time(str);\n    return this.get(fileName).then((response) => {\n      if(!response) {\n        //console.warn('getFile:', response, fileName);\n        throw 'NO_ENTRY_FOUND';\n      }\n\n      const promise = response[method]();\n      // promise.then(() => {\n      //   console.timeEnd(str);\n      // });\n      return promise;\n    });\n  }\n\n  public saveFile(fileName: string, blob: Blob | Uint8Array) {\n    //return Promise.resolve(blobConstruct([blob]));\n    if(!(blob instanceof Blob)) {\n      blob = blobConstruct(blob) as Blob;\n    }\n\n    const response = new Response(blob, {\n      headers: {\n        'Content-Length': '' + blob.size\n      }\n    });\n    \n    return this.save(fileName, response).then(() => blob as Blob);\n  }\n\n  public timeoutOperation<T>(callback: (cache: Cache) => Promise<T>) {\n    if(!this.useStorage) {\n      return Promise.reject('STORAGE_OFFLINE');\n    }\n\n    return new Promise<T>(async(resolve, reject) => {\n      let rejected = false;\n      const timeout = setTimeout(() => {\n        reject();\n        //console.warn('CACHESTORAGE TIMEOUT');\n        rejected = true;\n      }, 15e3);\n\n      try {\n        const cache = await this.openDatabase();\n        if(!cache) {\n          this.useStorage = false;\n          this.openDbPromise = undefined;\n          throw 'no cache?';\n        }\n\n        const res = await callback(cache);\n\n        if(rejected) return;\n        resolve(res);\n      } catch(err) {\n        reject(err);\n      }\n\n      clearTimeout(timeout);\n    });\n  }\n\n  public getFileWriter(fileName: string, mimeType: string) {\n    const fakeWriter = FileManager.getFakeFileWriter(mimeType, (blob) => {\n      return this.saveFile(fileName, blob).catch(() => blob);\n    });\n\n    return Promise.resolve(fakeWriter);\n  }\n\n  public static toggleStorage(enabled: boolean) {\n    return Promise.all(this.STORAGES.map(storage => {\n      storage.useStorage = enabled;\n      \n      if(!enabled) {\n        return storage.deleteAll();\n      }\n    }));\n  }\n}\n\n//const cacheStorage = new CacheStorageController(); \n//MOUNT_CLASS_TO.cacheStorage = cacheStorage;\n//export default cacheStorage;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport { LangPackKey, i18n } from \"../lib/langPack\";\n\nexport default class LoginPage {\n  public element: HTMLElement;\n  public container: HTMLElement;\n  public imageDiv: HTMLElement;\n  public inputWrapper: HTMLElement;\n  public title: HTMLElement;\n  public subtitle: HTMLParagraphElement;\n\n  constructor(options: {\n    className: string,\n    withInputWrapper?: boolean,\n    titleLangKey?: LangPackKey,\n    subtitleLangKey?: LangPackKey,\n  }) {\n    this.element = document.body.querySelector('.' + options.className) as HTMLDivElement;\n    //this.element = document.createElement('div');\n    //this.element.className = 'page-' + options.className;\n\n    this.container = document.createElement('div');\n    this.container.className = 'container center-align';\n\n    this.imageDiv = document.createElement('div');\n    this.imageDiv.className = 'auth-image';\n\n    this.title = document.createElement('h4');\n    if(options.titleLangKey) {\n      this.title.append(i18n(options.titleLangKey));\n    }\n\n    this.subtitle = document.createElement('p');\n    this.subtitle.className = 'subtitle';\n    if(options.subtitleLangKey) {\n      this.subtitle.append(i18n(options.subtitleLangKey));\n    }\n    \n    this.container.append(this.imageDiv, this.title, this.subtitle);\n\n    if(options.withInputWrapper) {\n      this.inputWrapper = document.createElement('div');\n      this.inputWrapper.className = 'input-wrapper';\n      this.container.append(this.inputWrapper);\n    }\n\n    this.element.append(this.container);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type { InputFileLocation, InputStickerSet } from \"../layer\";\nimport type { DownloadOptions } from \"../lib/mtproto/apiFileManager\";\n\nconst FILENAME_JOINER = '_';\n\nexport function getFileNameByLocation(location: InputFileLocation, options?: Partial<{\n  fileName: string\n}>) {\n  const fileName = '';//(options?.fileName || '').split('.');\n  const ext = fileName[fileName.length - 1] || '';\n\n  let str: string;\n  switch(location._) {\n    case 'inputPhotoFileLocation': {\n      str = ['photo', fileName[0], location.id, location.thumb_size].filter(Boolean).join(FILENAME_JOINER);\n      break;\n    }\n\n    case 'inputDocumentFileLocation': {\n      str = ['document', fileName[0], location.id, location.thumb_size].filter(Boolean).join(FILENAME_JOINER);\n      break;\n    }\n\n    case 'inputPeerPhotoFileLocation':\n      str = ['peerPhoto', location.photo_id, location.pFlags.big ? 'big' : 'small'].join(FILENAME_JOINER);\n      break;\n    \n    case 'inputStickerSetThumb': {\n      const id = (location.stickerset as InputStickerSet.inputStickerSetID).id || \n        (location.stickerset as InputStickerSet.inputStickerSetShortName).short_name || \n        (location.stickerset as InputStickerSet.inputStickerSetDice).emoticon || \n        location.stickerset._;\n      str = ['stickerSetThumb', id, location.thumb_version].join(FILENAME_JOINER);\n      break;\n    }\n\n    case 'inputFileLocation': {\n      str = location.volume_id + '_' + location.local_id;\n      break;\n    }\n\n    default: {\n      console.error('Unrecognized location:', location);\n      str = '';\n      break;\n    }\n  }\n\n  return str + (ext ? '.' + ext : ext);\n}\n\nexport type FileURLType = 'photo' | 'thumb' | 'document' | 'stream' | 'download';\nexport function getFileURL(type: FileURLType, options: DownloadOptions) {\n  //console.log('getFileURL', location);\n  //const perf = performance.now();\n  const encoded = encodeURIComponent(JSON.stringify(options));\n  //console.log('getFileURL encode:', performance.now() - perf, encoded);\n\n  return '/' + type + '/' + encoded;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nfunction resizeableImage(originalImage: HTMLImageElement, canvas?: HTMLCanvasElement) {\n  let cropComponent: HTMLDivElement, \n    container: HTMLDivElement, \n    cropImage: HTMLImageElement, \n    event_state: Partial<{  \n      mouse_x: number,   \n      mouse_y: number,   \n      container_width: number,  \n      container_height: number,  \n      container_left: number,  \n      container_top: number\n    }> = {}, \n    keyZoomValue = 4.0, \n    MINWIDTH = 50, \n    MINHEIGHT = 50, \n    CROPWIDTH = 200, \n    CROPHEIGHT = 200, \n    cropLeft = 0, \n    cropTop = 0, \n    cropWidth = 0, \n    cropHeight = 0,\n    scaledRatio = 0;\n  \n  if(originalImage.complete) init();\n  else originalImage.onload = init;\n  \n  function removeHandlers() {\n    container.removeEventListener('mousedown', startMoving);\n    container.removeEventListener('touchstart', startMoving);\n    container.removeEventListener('wheel', resizing);\n    \n    document.removeEventListener('mouseup', endMoving);\n    document.removeEventListener('touchend', endMoving);\n    document.removeEventListener('mousemove', moving);\n    document.removeEventListener('touchmove', moving);\n    document.removeEventListener('keypress', keyHandler);\n\n    cropComponent.remove();\n    container.remove();\n    cropImage.remove();\n  }\n  \n  function addHandlers() {\n    container.addEventListener('mousedown', startMoving, false);\n    container.addEventListener('touchstart', startMoving, false);\n    container.addEventListener('wheel', resizing, false);\n    \n    document.addEventListener('keypress', keyHandler, false);\n    //document.querySelector('.btn-crop').addEventListener('click', openCropCanvasImg);\n  }\n  \n  function init() {\n    originalImage.classList.add('crop-blur');\n    originalImage.draggable = false;\n    \n    cropImage = new Image();\n    cropImage.src = originalImage.src;\n    cropImage.draggable = false;\n    cropImage.classList.add('crop-overlay-image');\n    \n    if(!canvas) {\n      canvas = document.createElement('canvas');\n    }\n    \n    cropComponent = document.createElement('div');\n    cropComponent.classList.add('crop-component');\n    \n    container = document.createElement('div');\n    container.classList.add('crop-overlay');\n    \n    const overlayColor = document.createElement('div');\n    overlayColor.classList.add('crop-overlay-color');\n    \n    cropComponent.appendChild(container);\n    const wrapper = originalImage.parentNode as HTMLElement;\n    wrapper.appendChild(cropComponent);\n    cropComponent.appendChild(cropImage);\n    cropComponent.appendChild(originalImage);\n    cropComponent.appendChild(overlayColor);\n    container.appendChild(cropImage);\n\n    cropImage.style.maxWidth = originalImage.width + 'px';\n\n    scaledRatio = originalImage.naturalWidth / originalImage.offsetWidth;\n    \n    const left = originalImage.offsetWidth / 2 - CROPWIDTH / 2;\n    const top = originalImage.offsetHeight / 2 - CROPHEIGHT / 2;\n    \n    updateCropSize(CROPWIDTH, CROPHEIGHT);\n    updateCropImage(left, top);\n    updateContainer(left, top);\n    addHandlers();\n    //crop();\n  }\n  \n  function updateCropSize(width: number, height: number) {\n    cropWidth = width * scaledRatio;\n    cropHeight = height * scaledRatio;\n\n    container.style.width = width + 'px';\n    container.style.height = height + 'px';\n  }\n  \n  function updateCropImage(left: number, top: number) {\n    cropTop = top * scaledRatio;\n    cropLeft = left * scaledRatio;\n\n    cropImage.style.top = -top + 'px';\n    cropImage.style.left = -left + 'px';\n  }\n  \n  function updateContainer(left: number, top: number) {\n    container.style.top = top + 'px';\n    container.style.left = left + 'px';\n  }\n  \n  // Save the initial event details and container state\n  function saveEventState(e: any) {\n    event_state.container_width = container.offsetWidth;\n    event_state.container_height = container.offsetHeight;\n    \n    event_state.container_left = container.offsetLeft;\n    event_state.container_top = container.offsetTop;\n    \n    event_state.mouse_x = (e.clientX || e.pageX || e.touches && e.touches[0].clientX) + window.scrollX;\n    event_state.mouse_y = (e.clientY || e.pageY || e.touches && e.touches[0].clientY) + window.scrollY;\n  }\n  \n  function imgZoom(zoom: number) {\n    zoom = zoom * Math.PI * 2\n    let newWidth = Math.floor(container.clientWidth + zoom), \n      newHeight = Math.floor(container.clientHeight + zoom), \n      w = cropImage.clientWidth, \n      h = cropImage.clientHeight, \n      left: number, \n      top: number, \n      right: number, \n      bottom: number;\n    \n    if(newWidth < MINWIDTH) {\n      return;\n    } else if(newWidth > w) {\n      return;\n    }\n    \n    left = container.offsetLeft - (zoom / 2);\n    top = container.offsetTop - (zoom / 2);\n    right = left + newWidth;\n    bottom = top + newHeight;\n    \n    if(left < 0) left = 0;\n    if(top < 0) top = 0;\n\n    if(right > w) return;\n    if(bottom > h) return;\n\n    updateCropSize(newWidth, newWidth);\n    updateCropImage(left, top);\n    updateContainer(left, top);\n    //crop();\n  }\n  \n  function keyHandler(e: KeyboardEvent) {\n    e.preventDefault();\n    \n    switch (String.fromCharCode(e.charCode)) {\n      case '+' :\n      imgZoom(keyZoomValue);\n      break;\n      case '-' :\n      imgZoom(-keyZoomValue);\n      break;\n    }\n  }\n  \n  function resizing(e: any) {\n    e.preventDefault();\n    imgZoom(e.deltaY > 0 ? 1 : -1);\n  }\n  \n  function startMoving(e: MouseEvent | TouchEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    saveEventState(e);\n    \n    document.addEventListener('mousemove', moving);\n    document.addEventListener('touchmove', moving);\n    document.addEventListener('mouseup', endMoving);\n    document.addEventListener('touchend', endMoving);\n  }\n  \n  function endMoving(e: MouseEvent | TouchEvent) {\n    e.preventDefault();\n    \n    document.removeEventListener('mouseup', endMoving);\n    document.removeEventListener('touchend', endMoving);\n    document.removeEventListener('mousemove', moving);\n    document.removeEventListener('touchmove', moving);\n  }\n  \n  function moving(e: any) {\n    let currentTouch = {x: 0, y: 0}, \n      left: number, \n      top: number, \n      w: number, \n      h: number;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    currentTouch.x = e.pageX || e.touches && e.touches[0].pageX;\n    currentTouch.y = e.pageY || e.touches && e.touches[0].pageY;\n    \n    left = currentTouch.x - (event_state.mouse_x - event_state.container_left);\n    top = currentTouch.y - (event_state.mouse_y - event_state.container_top);\n    w = container.offsetWidth;\n    h = container.offsetHeight;\n    \n    if(left < 0) left = 0;\n    else if(left > cropImage.offsetWidth - w) left = cropImage.offsetWidth - w;\n\n    if(top < 0) top = 0;\n    else if(top > cropImage.offsetHeight - h) top = cropImage.offsetHeight - h;\n    \n    updateCropImage(left, top);\n    updateContainer(left, top);\n    //crop();\n  }\n\n  function crop() {\n    canvas.width = cropWidth;\n    canvas.height = cropHeight;\n    \n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(originalImage,\n      cropLeft, cropTop,\n      cropWidth, cropHeight,\n      0, 0,\n      cropWidth, cropHeight\n    );\n  }\n  \n  return {crop, removeHandlers};\n}\n\nexport default resizeableImage;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport appDownloadManager from \"../../lib/appManagers/appDownloadManager\";\nimport resizeableImage from \"../../lib/cropper\";\nimport PopupElement from \".\";\nimport { ripple } from \"../ripple\";\nimport { _i18n } from \"../../lib/langPack\";\nimport { readBlobAsDataURL } from \"../../helpers/blob\";\n\nexport default class PopupAvatar extends PopupElement {\n  private cropContainer: HTMLElement;\n  private input: HTMLInputElement;\n  private btnSubmit: HTMLElement;\n  private h6: HTMLElement;\n\n  private image = new Image();\n\n  private canvas: HTMLCanvasElement;\n  private blob: Blob;\n  private cropper = {\n    crop: () => {},\n    removeHandlers: () => {}\n  };\n\n  private onCrop: (upload: () => ReturnType<typeof appDownloadManager.upload>) => void;\n\n  constructor() {\n    super('popup-avatar', null, {closable: true});\n\n    this.h6 = document.createElement('h6');\n    _i18n(this.h6, 'Popup.Avatar.Title');\n\n    this.btnClose.classList.remove('btn-icon');\n\n    this.header.append(this.h6);\n\n    this.cropContainer = document.createElement('div');\n    this.cropContainer.classList.add('crop');\n    this.cropContainer.append(this.image);\n\n    this.input = document.createElement('input');\n    this.input.type = 'file';\n    this.input.style.display = 'none';\n    this.input.addEventListener('change', (e: any) => {\n      const file = e.target.files[0];\n      if(!file) {\n        return;\n      }\n\n      readBlobAsDataURL(file).then(contents => {\n        this.image = new Image();\n        this.cropContainer.append(this.image);\n        this.image.src = contents;\n  \n        this.image.onload = () => {\n          /* let {w, h} = calcImageInBox(this.image.naturalWidth, this.image.naturalHeight, 460, 554);\n          cropContainer.style.width = w + 'px';\n          cropContainer.style.height = h + 'px'; */\n          this.show();\n  \n          this.cropper = resizeableImage(this.image, this.canvas);\n          this.input.value = '';\n        };\n      });\n    }, false);\n\n    this.btnSubmit = document.createElement('button');\n    this.btnSubmit.className = 'btn-primary btn-color-primary btn-circle btn-crop btn-icon tgico-check z-depth-1';\n    ripple(this.btnSubmit);\n    this.btnSubmit.addEventListener('click', () => {\n      this.cropper.crop();\n      this.btnClose.click();\n\n      this.canvas.toBlob(blob => {\n        this.blob = blob; // save blob to send after reg\n        this.darkenCanvas();\n        this.resolve();\n      }, 'image/jpeg', 1);\n    });\n\n    this.container.append(this.cropContainer, this.btnSubmit, this.input);\n\n    this.onCloseAfterTimeout = () => {\n      this.cropper.removeHandlers();\n      if(this.image) {\n        this.image.remove();\n      }\n    };\n  }\n\n  private resolve() {\n    this.onCrop(() => {\n      return appDownloadManager.upload(this.blob);\n    });\n  }\n\n  public open(postCanvas: HTMLCanvasElement, onCrop: PopupAvatar['onCrop']) {\n    this.canvas = postCanvas;\n    this.onCrop = onCrop;\n\n    this.input.click();\n  }\n\n  public darkenCanvas() {\n    let ctx = this.canvas.getContext('2d');\n    ctx.fillStyle = \"rgba(0, 0, 0, 0.3)\";\n    ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n}\n"],"sourceRoot":""}