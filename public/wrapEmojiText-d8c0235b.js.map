{"version":3,"mappings":"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,KAAM,KAAO,KAAM,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,IAAK,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,KAAM,KAAO,MAAO,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,KAAM,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,OAAO,MAAO,OAAO,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,MAAO,kBAAkB,MAAO,QAAQ,MAAO,kBAAkB,MAAO,4CAA4C,MAAO,4CAA4C,MAAO,4CAA4C,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,yCAAyC,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,6BAA6B,KAAM,wCAAwC,KAAM,QAAQ,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,yCAAyC,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,6BAA6B,KAAM,6BAA6B,KAAM,wCAAwC,KAAM,wCAAwC,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,mBAAmB,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,mBAAmB,IAAK,QAAQ,IAAK,mBAAmB,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,GAAI,QAAQ,IAAK,QAAQ,IAAK,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,GAAI,QAAQ,IAAK,QAAQ,IAAK,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,IAAK,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,IAAK,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,KAAM,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,iBAAiB,KAAM,iBAAiB,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,kBAAkB,KAAM,kBAAkB,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wB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O,MAAO,CACR,KAAK,SAIT,KAAK,OAAS,GAEX,KAAK,kBAAkB,mBACxB,KAAK,OAAO,YAAc,KAAK,SAAS,iBAAiB,aAAe,KAAK,OAAO,YACpFvjB,GAAS,KAAK,MAAM,GAGnB,KAAK,cAAgB,KAAK,aAAa,eAAe,IAAI,IAAI,IAC1D,kBAAa,eAAe,OAAO,IAAI,EAEzC,KAAK,aAAa,eAAe,OAAS,KAAK,aAAa,YAAY,MACzE,KAAK,OAAO,QAGlB,CAEO,QAAS,CACd,MAAM,OAAO,EACb,KAAK,MAAM,CAEb,CAEA,IAAW,UAAW,CACb,QACT,CAEA,IAAW,MAAO,CACT,QACT,CACF,CAEA,eAAe,OAAO,uBAAwBwqB,EAAkB,EC9LzD,MAAMG,GAA6C,CACxD,OAAU,CACR,SACA,OACA,MACA,MACA,SACA,OACA,OACA,KACF,EACA,IAAO,CACL,KACF,EACA,SAAU,CACR,OACF,EACA,MAAS,CACP,OACF,EACA,WAAc,CACZ,aACA,IACF,EACA,KAAQ,CACN,MACF,EACA,KAAQ,CACN,MACF,EACA,aAAgB,CACd,cACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,GAAM,CACJ,IACF,EACA,OAAU,CACR,SACA,IACF,EACA,uBAAwB,CACtB,YACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,IAAO,CACL,KACF,EACA,YAAe,CACb,aACF,EACA,IAAO,CACL,KACF,EACA,EAAK,CACH,GACF,EACA,MAAO,CACL,KACF,EACA,QAAW,CACT,UACA,KACF,EACA,KAAQ,CACN,MACF,EACA,eAAgB,CACd,SACA,SACF,EACA,KAAQ,CACN,OACA,KACA,OACF,EACA,KAAQ,CACN,OACA,KACF,EACA,SAAY,CACV,WACA,IACF,EACA,OAAU,CACR,SACA,KACF,EACA,SAAY,CACV,WACA,MACF,EACA,KAAM,CACJ,SACA,KACA,QACF,EACA,eAAgB,CACd,QACF,EACA,gBAAiB,CACf,SACF,EACA,qBAAsB,CACpB,UACF,EACA,WAAc,CACZ,YACF,EACA,OAAU,CACR,QACF,EACA,SAAY,CACV,WACA,KACF,EACA,WAAY,CACV,WACA,MACF,EACA,IAAO,CACL,MACA,MACF,EACA,MAAS,CACP,OACF,EACA,MAAS,CACP,OACF,EACA,OAAU,CACR,SACA,WACF,EACA,IAAO,CACL,KACF,EACA,MAAS,CACP,OACF,EACA,KAAQ,CACN,MACF,EACA,MAAS,CACP,OACF,EACA,IAAO,CACL,MACA,MACF,EACA,IAAO,CACL,KACF,EACA,UAAa,CACX,WACF,EACA,aAAgB,CACd,cACF,EACA,IAAO,CACL,KACF,EACA,SAAY,CACV,WACA,KACF,EACA,WAAc,CACZ,YACF,EACA,IAAO,CACL,KACF,EACA,SAAU,CACR,QACA,QACF,EACA,WAAY,CACV,UACA,WACA,MACF,EACA,QAAW,CACT,SACF,EACA,MAAS,CACP,OACF,EACA,MAAS,CACP,OACF,EACA,aAAgB,CACd,eACA,QACF,EACA,UAAa,CACX,YACA,MACF,EACA,0BAA2B,CACzB,KACF,EACA,SAAY,CACV,UACF,EACA,KAAQ,CACN,OACA,IACF,EACA,QAAW,CACT,SACF,EACA,IAAO,CACL,KACF,EACA,IAAO,CACL,KACF,EACA,OAAU,CACR,QACF,EACA,EAAK,CACH,GACF,EACA,KAAQ,CACN,MACF,EACA,UAAa,CACX,WACF,EACA,IAAO,CACL,KACF,EACA,MAAS,CACP,OACF,EACA,KAAQ,CACN,MACF,EACA,oBAAqB,CACnB,mBACF,EACA,gBAAiB,CACf,SACA,QACF,EACA,gBAAiB,CACf,gBACA,UACF,EACA,OAAU,CACR,SACA,YACF,EACA,iBAAkB,CAChB,MACA,IACF,EACA,KAAQ,CACN,MACF,EACA,aAAgB,CACd,cACF,EACA,OAAU,CACR,QACF,EACA,IAAO,CACL,MACA,KACF,EACA,OAAU,CACR,QACF,EACA,IAAO,CACL,KACF,EACA,IAAO,CACL,KACF,EACA,0BAA2B,CACzB,OACF,EACA,IAAO,CACL,KACF,EACA,OAAU,CACR,QACF,EACA,gBAAiB,CACf,gBACA,OACA,KACF,EACA,KAAM,CACJ,QACF,EACA,OAAU,CACR,QACF,EACA,MAAS,CACP,OACF,EACA,2BAA4B,CAC1B,0BACF,EACA,KAAQ,CACN,MACF,EACA,QAAW,CACT,SACF,EACA,+BAAgC,CAC9B,KACF,EACA,qBAAsB,CACpB,MACA,mBACF,EACA,YAAa,CACX,KACF,EACA,SAAU,CACR,OACF,EACA,SAAY,CACV,UACF,EACA,OAAU,CACR,QACF,EACA,QAAW,CACT,UACA,IACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,GAAM,CACJ,KACA,KACF,EACA,oBAAqB,CACnB,gBACA,IACF,EACA,GAAM,CACJ,IACF,EACA,YAAa,CACX,YACA,QACF,EACA,OAAU,CACR,QACF,EACA,QAAW,CACT,SACF,EACA,OAAU,CACR,QACF,EACA,KAAQ,CACN,MACF,EACA,cAAe,CACb,MACF,EACA,QAAW,CACT,SACF,EACA,KAAQ,CACN,MACF,EACA,WAAc,CACZ,aACA,MACA,UACF,EACA,QAAW,CACT,UACA,IACF,EACA,KAAQ,CACN,MACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,KAAQ,CACN,MACF,EACA,uBAAwB,CACtB,MACF,EACA,iCAAkC,CAChC,MACF,EACA,KAAQ,CACN,OACA,aACF,EACA,IAAO,CACL,MACA,KACF,EACA,KAAQ,CACN,MACF,EACA,UAAa,CACX,WACF,EACA,KAAQ,CACN,MACF,EACA,qBAAsB,CACpB,oBACF,EACA,MAAS,CACP,QACA,KACF,EACA,UAAW,CACT,SACA,YACA,WACA,WACF,EACA,WAAY,CACV,SACF,EACA,IAAO,CACL,KACF,EACA,GAAM,CACJ,IACF,EACA,EAAK,CACH,GACF,EACA,KAAQ,CACN,MACF,EACA,MAAS,CACP,OACF,EACA,IAAO,CACL,KACF,EACA,eAAgB,CACd,aACF,EACA,QAAW,CACT,SACF,EACA,mBAAoB,CAClB,gBACF,EACA,MAAS,CACP,OACF,EACA,GAAM,CACJ,IACF,EACA,WAAc,CACZ,aACA,IACF,EACA,MAAS,CACP,OACF,EACA,KAAQ,CACN,OACA,OACF,EACA,MAAS,CACP,OACF,EACA,MAAS,CACP,OACF,EACA,iBAAkB,CAChB,cACF,EACA,MAAS,CACP,OACF,EACA,uBAAwB,CACtB,YACF,EACA,OAAU,CACR,QACF,EACA,OAAU,CACR,SACA,KACA,KACF,EACA,MAAS,CACP,OACF,EACA,MAAS,CACP,QACA,MACA,SACF,EACA,MAAS,CACP,OACF,EACA,OAAU,CACR,QACF,EACA,SAAY,CACV,WACA,IACF,EACA,OAAU,CACR,QACF,EACA,KAAQ,CACN,OACA,QACA,QACA,YACF,EACA,WAAc,CACZ,YACF,EACA,UAAW,CACT,MACF,EACA,WAAY,CACV,KACF,EACA,QAAW,CACT,SACF,EACA,cAAe,CACb,OACF,EACA,SAAY,CACV,UACF,EACA,KAAQ,CACN,MACF,EACA,OAAU,CACR,QACF,EACA,UAAa,CACX,WACF,EACA,IAAO,CACL,KACF,EACA,QAAW,CACT,SACF,EACA,SAAY,CACV,UACF,EACA,MAAS,CACP,OACF,EACA,QAAW,CACT,SACF,EACA,OAAU,CACR,QACF,EACA,WAAc,CACZ,aACA,MACF,EACA,KAAQ,CACN,MACF,EACA,qBAAsB,CACpB,iBACF,EACA,mBAAoB,CAClB,aACA,MACF,EACA,KAAQ,CACN,MACF,EACA,KAAQ,CACN,MACF,EACA,MAAS,CACP,OACF,EACA,MAAS,CACP,OACF,EACA,IAAO,CACL,KACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,cAAe,CACb,aACA,MACF,EACA,MAAS,CACP,OACF,EACA,KAAQ,CACN,MACF,EACA,OAAU,CACR,QACF,EACA,SAAY,CACV,WACA,MACF,EACA,GAAM,CACJ,IACF,EACA,UAAW,CACT,QACF,EACA,OAAU,CACR,QACF,EACA,OAAU,CACR,SACA,cACF,EACA,UAAa,CACX,WACF,EACA,4BAA6B,CAC3B,KACF,EACA,UAAW,CACT,SACA,IACF,EACA,WAAc,CACZ,aACA,OACF,EACA,KAAQ,CACN,MACF,EACA,OAAU,CACR,QACF,EACA,SAAY,CACV,YACA,UACF,EACA,SAAU,CACR,OACF,EACA,WAAc,CACZ,aACA,KACA,SACF,EACA,WAAc,CACZ,YACF,EACA,WAAc,CACZ,YACF,EACA,OAAU,CACR,QACF,EACA,OAAU,CACR,QACF,EACA,cAAe,CACb,YACF,EACA,mBAAoB,CAClB,UACF,EACA,OAAU,CACR,QACF,EACA,KAAQ,CACN,MACF,EACA,IAAO,CACL,KACF,EACA,OAAU,CACR,QACF,EACA,UAAa,CACX,YACA,QACF,EACA,OAAU,CACR,SACA,IACF,EACA,KAAM,CACJ,SACA,IACF,EACA,oBAAqB,CACnB,GACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,EAAK,CACH,GACF,EACA,OAAU,CACR,SACA,KACF,EACA,WAAY,CACV,SACA,OACF,EACA,YAAa,CACX,KACF,EACA,YAAa,CACX,KACF,EACA,OAAU,CACR,QACF,EACA,KAAQ,CACN,MACF,EACA,SAAW,CACT,QACA,KACF,EACA,SAAY,CACV,WACA,KACF,EACA,0BAA2B,CACzB,MACF,EACA,IAAO,CACL,KACF,EACA,SAAY,CACV,UACF,EACA,kBAAmB,CACjB,iBACA,OACF,EACA,KAAQ,CACN,MACF,EACA,IAAO,CACL,KACF,EACA,cAAe,CACb,MACF,EACA,gBAAiB,CACf,gBACA,aACA,cACF,EACA,MAAS,CACP,OACF,EACA,UAAa,CACX,WACF,EACA,OAAU,CACR,QACF,EACA,IAAO,CACL,MACA,OACF,EACA,sBAAuB,CACrB,WACA,KACF,EACA,gBAAiB,CACf,gBACA,KACF,EACA,yBAA0B,CACxB,KACF,EACA,aAAc,CACZ,YACF,EACA,oCAAqC,CACnC,KACF,EACA,SAAY,CACV,UACF,EACA,KAAQ,CACN,MACF,EACA,YAAa,CACX,OACF,EACA,gCAAiC,CAC/B,OACF,EACA,cAAiB,CACf,gBACA,QACF,EACA,MAAS,CACP,OACF,EACA,6BAA8B,CAC5B,SACF,EAC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","names":["array","callback","i","length","safePlay","media","promise","noop","e","AnimationIntersector","entries","entry","target","group","p","animation","_animation","idleController","idle","paused","override","element","found","player","indexOfAndSplice","el","item","options","observeElement","controlled","rootScope","_a","blurred","destroy","imitateIntersection","groups","forEachReverse","isInDOM","animations","fastRaf","lock","play","liteModeKey","changed","animationItem","loop","MOUNT_CLASS_TO","animationIntersector","FramesCache","cache","value","name","width","height","color","toneIndex","framesCache","needUpscale","pixelRatio","clamp","IS_APPLE","mediaSizes","IS_ANDROID","applyColorOnContext","context","x","y","_RLottiePlayer","EventListenerBase","worker","skipRatio","IS_APPLE_MOBILE","IS_SAFARI","IS_APPLE_MX","getLottiePixelRatio","canvas","IS_IMAGE_BITMAP_SUPPORTED","CAN_USE_TRANSFERABLES","args","transfer","data","clearPendingRAF","renderFirstFrame","curFrame","speed","direction","customProperties","frame","frameNo","idx","cachedSource","c","err","now","delta","timeout","frameNew","skipDelta","maxFrame","minFrame","method","from","to","bounds","renderIfPaused","frameCount","fps","diff","container","time","RLottiePlayer","QueryableWorker","error","event","message","IS_WEB_ASSEMBLY_SUPPORTED","LottieLoader","makeError","App","logger","LogTypes","reqId","resolve","reject","remain","queryableWorker","params","url","res","apiManagerProxy","arr","blobConstruct","blob","newParams","pause","middleware","cacheName","players","containers","playersByCacheName","lottieLoader","elem","node","firstChild","elements","disable","toggleDisability","placeCaretAtEnd","ignoreTouchCheck","focus","range","sel","VisibilityIntersector","onVisibilityChange","index","change","items","key","visible","targets","verify","out","PARALLEL_LIMIT","IGNORE_ERRORS","LazyLoadQueueBase","parallelLimit","throttle","LazyLoadQueueIntersector","findAndSpliceAll","LazyLoadQueue","ignoreHeavyAnimation","useHeavyAnimationCheck","findAndSplice","getPathFromBytes","bytes","lookup","path","num","outCanvas","outContext","computeLockColor","size","skipx","margin","skipy","imageData","sr","sg","sb","sa","rgba","createVideo","pip","video","getHeavyAnimationPromise","shouldIgnoreVideoError","shouldIgnore","onMediaLoad","readyState","useCanplayOnIos","loadEventName","errorEventName","onLoad","onError","loadedURLs","set","renderImageFromUrl","useCache","processImageOnLoad","isVideo","isImage","loader","renderImageFromUrlPromise","bytesFromHex","hexString","len","start","mimeType","convertToUint8Array","JPEG_HEADER_HEX","JPEG_HEADER","JPEG_TAIL","getPreviewBytesFromURL","needle","sliced","jpegBytes","char","isSticker","bytesToDataURL","getPreviewURLFromThumb","photo","thumb","heavyQueue","processingQueue","queue","deferredPromise","processHeavyQueue","timedChunk","results","f","todo","possiblePromise","realResult","RADIUS","ITERATIONS","requireBlurPromise","fastBlurFunc","IS_CANVAS_FILTER_SUPPORTED","m","processBlurNext","img","radius","iterations","ctx","CACHE_SIZE","blur","dataUri","cached","addHeavyTask","useBlur","loadPromise","result","savingLottiePreview","isSavingLottiePreview","doc","getStickerThumbKey","saving","sharedCanvas","sharedContext","createCanvas","uploadId","getFileNameForUpload","file","tabId","fileName","ext","thumbSize","getDocumentDownloadOptions","queueId","onlyCache","inputFileLocation","getDocumentInputFileLocation","getPhotoDownloadOptions","photoSize","location","isDocument","isPhoto","getWebFileDownloadOptions","getWebDocumentDownloadOptions","webDocument","downloadOptions","isWebDocument","getDownloadFileNameFromOptions","getDownloadMediaDetails","isWebFileLocation","onRemove","a","clickEvent","AppDownloadManager","managers","details","download","type","deferred","main","downloads","getPromise","promiseBefore","cb","justAttach","id","pingPromise","iframe","hadProgress","onProgress","getFileNameByLocation","createDownloadAnchor","appDownloadManager","boxWidth","boxHeight","useBytes","pushDocumentSize","bestPhotoSize","THUMB_TYPE_FULL","sizes","calcImageInBox","getStickerEffectThumb","encodeEmoji","emojiText","toCodePoints","removeVS16s","vs16RegExp","zeroWidthJoiner","rawEmoji","unicodeSurrogates","points","previous","getEmojiToneIndex","input","match","VIRTUAL_COUNTRIES_EMOJIS","getCountryEmoji","iso2","emojiFromCodePoints","codePoints","prev","curr","createDetails","MIDDLEWARE_ERROR","MiddlewareHelper","helper","additionalCallback","getMiddleware","schedulerFn","fn","waiting","_args","throttleWithRaf","emojiAnimationContainer","wrapStickerAnimation","animationDiv","unmountAnimation","middlewareHelper","onScroll","scrollable","onUnmount","stickerPromise","wrapSticker","loopEffect","stickerSize","render","IS_VIBRATE_SUPPORTED","setPosition","generateRandomSigned","max","r","randomOffsetX","withRandomOffset","randomOffsetY","factor","rect","stableOffsetX","side","stableOffsetY","rectX","rectY","addOffsetX","addOffsetY","windowSize","relativeEffect","currentTime","USE_FIX","IS_CHROMIUM","onVideoLeak","firstElementChild","setCurrentTime","handleVideoLeak","testVideoLeak","isLeak","onTimeUpdate","eventsOrder","eventsOrderLength","sawEvents","leakVideoFallbacks","events","normalized","deepEqual","fallbackCallback","locksUrls","videosCache","onAnimationEnd","onEnd","_timeout","isEmptyContainer","childElementCount","getThumbFromContainer","asStatic","div","isCustomEmoji","emoji","stickerType","boxSize","makeMediaSize","liteMode","isEffect","getCacheContext","cacheContext","isAnimated","effectThumb","isOut","willHaveLock","withLock","Icon","lockUrl","choosePhotoSize","fullThumb","attribute","customEmojiAttribute","textColor","lottieCachedThumbToneIndex","downloaded","needFadeIn","isThumbNeededForType","lottieCachedThumb","ret","loadThumbPromise","haveThumbCached","onlyThumb","withThumb","thumbImage","sequentialDom","afterRender","t","ns","svg","d","IS_WEBP_SUPPORTED","webpWorkerController","load","getImageFromStrippedThumb","lazyLoadQueue","loadPromises","loadStickerMiddleware","setLockColor","onFirstFrame","saveLottiePreview","isSingleVideo","syncedVideo","cachePromise","onTimeupdate","previousTime","playedTimes","middlewareError","mediaLength","loaded","ratio","videoWidth","videoHeight","h","w","reset","_media","lastPromise","exportLoad","noPremium","attachStickerEffectHandler","attachClickEvent","isAvailable","cancelEvent","showPremiumInfo","STICKER_EFFECT_MULTIPLIER","overflowElement","lookForSticky","overflowRect","overflowTop","overflowRight","overflowBottom","overflowLeft","sticky","overflow","windowWidth","windowHeight","getVisibleRect","getViewportSlice","selector","extraSize","invisibleTop","invisibleBottom","foundVisible","visibleRect","isVisible","extraMinLength","resizeObserverMap","resizeObserver","globalLazyLoadQueue","_CustomEmojiRendererElement","emojiRenderers","offsetsMap","findUpClassName","placeholders","elementsArr","offsets","elementRect","left","isDimensionsSet","syncedPlayersFrames","isImageData","frameWidth","frameHeight","dpr","elementWidth","maxLeft","replaceContent","top","forceRenderAfter","newWidth","newHeight","renderEmojis","renderer","addCustomEmojis","addElements","docId","usingOwnQueue","docIds","docs","wrap","_loadPromises","newElements","customEmojis","newElementsArray","isLottie","isStatic","IS_WEBM_SUPPORTED","willHaveSyncedPlayer","CUSTOM_EMOJI_INSTANT_PLAY","syncedPlayer","addition","readyPromise","placeholder","_p","setRenderInterval","syncedPlayers","clearRenderInterval","missing","cachedPromises","uncachedPromisesPromise","loadFromPromises","promises","l","onRender","uncached","CustomEmojiRendererElement","emojiRenderInterval","renderers","o","acc","v","CUSTOM_EMOJI_FPS","CUSTOM_EMOJI_FRAME_INTERVAL","encodeEntities","low","hi","documentFragmentToHTML","fragment","tag","anchor","selection","offset","findUpAsChild","getCaretPosF","childNodes","childNodesLength","CAN_COMBINE_ENTITIES","combineSameEntities","entities","nextEntityIdx","_i","entity","nextEntity","sortEntities","b","BOM","markdownTags","tabulationMatch","BLOCK_TAGS","BOM_REG_EXP","SELECTION_SEPARATOR","checkNodeForEntity","parentElement","closest","codeElement","isLineEmpty","line","lines","selNode","selOffset","nodeValue","pushLine","isSelected","isQuote","isBlock","alt","stickerEmoji","wasEntitiesLength","wasNodeEmpty","curChild","getRichElementValue","isTableCell","getCaretPos","field","startOffset","possibleChildrenFocusOffset","getRichValueWithCaret","withEntities","withCaret","caretPos","isInputEmpty","Emoji","EmojiVersions","version","buildURLHash","str","spoiler","text","chars","charsLength","before","spoilerBefore","spoilerAfter","after","TLD","checkBrackets","urlLength","urlOpenBrackets","urlCloseBrackets","getEmojiUnified","emojiCode","unified","parseEntities","raw","rawOffset","FULL_REG_EXP","matchIndex","EMAIL_REG_EXP","protocol","tld","balanced","splitted","timestamp","splittedLength","hours","minutes","seconds","setBlankToAnchor","EMOJI_VERSIONS_SUPPORTED","isEmojiSupported","inlineEl","newEmojiWidth","legacyEmojiWidth","IS_EMOJI_SUPPORTED","wrapTelegramUrlToAnchor","url1","wrapUrl","onclick","CustomEmojiElement","replaceChildren","createCustomFiller","CodeLanguageMap","CodeLanguageAliases","language","aliases","importPrismLanguage","lowerCase","alias","prism","importPrism","callbackify","hadBefore","__vitePreload","module","Prism","env","className","code","_language","imported","findIndexFrom","predicate","createMarkupFormatting","formatting","wrapRichText","wrapSomething","wrapElement","noFiller","lastElement","customWraps","nasty","passEntities","contextSite","contextExternal","textLength","copy","endOffset","endPartOffset","fullEntityText","partText","property","usedText","processingBlockElement","entityLanguage","content","languageName","header","headerName","i18n","headerWrapButton","highlightCode","html","n","lastInnerEntityIndex","bot","atPos","command","customEmojiElement","isSupported","IS_FIREFOX","masked","wrapped","hostname","currentContext","href","contextUrl","SITE_HASHTAGS","hashtag","username","encoded","encodeSpoiler","CLICK_EVENT_NAME","setDirection","foundNextLinebreakIndex","lastInnerLinebreakIndex","insertCustomFillers","notFiller","isCustomFillerNeededBySiblingNode","check","needed","previousSibling","nextSibling","ListenerSetter","listener","_listener","compareNodes","node1","node1Offset","node2","node2Offset","whichChild","parents","commonAncestorContainer","NOT_ONLY_BOMS_REG_EXP","RichInputHandler","caret","toLeft","addInputCallback","log","moveFirst","isBOM","something","fromSelectionChange","smthIndex","move","moved","idxidx","onlyBOMs","rangeString","br","capture","newCallback","sibling","getCaretPosNew","treeWalker","textNode","cleanSiblings","bomNode","focusNodeBefore","focusOffsetBefore","focusNodeAfter","focusOffsetAfter","fillers","smths","selectElementContents","SINGLE_ENTITIES","currentEntities","newEntity","singleEnd","currentEntity","PASS_SINGLE_CONFLICTING_ENTITIES","PASS_CONFLICTING_ENTITIES","newEntities","filtered","findConflictingEntity","wrapDraftText","insertRichTextAsHTML","wrappingForPeerId","createCustomEmojiRendererForInput","pre","customEmojiElements","simulateEvent","init","findUpAttribute","noLinebreaks","plainText","usePlainText","regExp","peerId","NULL_PEER_ID","span","richValue","lineIndex","nextLine","correctedText","richTextLength","plainTextLength","entities2","filterEntity","mergeEntities","InputState","animationGroup","processCustomEmojisInInput","hasSet","InputField","empty","label","onInputCallbacks","autocomplete","canBeEdited","findUpTag","centerX","focusOnNext","isEmpty","_i18n","withBorder","border","maxLength","showingLength","onInput","wasError","inputLength","isError","showLengthOn","labelEl","setInnerHTML","fromSet","silent","_value","state","wrapEmojiText","isDraft"],"sources":["../src/helpers/array/forEachReverse.ts","../src/helpers/dom/safePlay.ts","../src/components/animationIntersector.ts","../src/environment/imageBitmapSupport.ts","../src/helpers/framesCache.ts","../src/lib/rlottie/rlottiePlayer.ts","../src/lib/rlottie/queryableWorker.ts","../src/environment/webAssemblySupport.ts","../src/lib/rlottie/lottieLoader.ts","../src/helpers/dom/replaceContent.ts","../src/helpers/dom/toggleDisability.ts","../src/helpers/dom/placeCaretAtEnd.ts","../src/components/visibilityIntersector.ts","../src/helpers/array/findAndSpliceAll.ts","../src/components/lazyLoadQueueBase.ts","../src/components/lazyLoadQueueIntersector.ts","../src/components/lazyLoadQueue.ts","../src/helpers/bytes/getPathFromBytes.ts","../src/helpers/computeLockColor.ts","../src/helpers/dom/createVideo.ts","../src/helpers/onMediaLoad.ts","../src/helpers/dom/renderImageFromUrl.ts","../src/helpers/bytes/bytesFromHex.ts","../src/helpers/bytes/bytesToDataURL.ts","../src/helpers/bytes/convertToUint8Array.ts","../src/helpers/bytes/getPreviewURLFromBytes.ts","../src/helpers/getPreviewURLFromThumb.ts","../src/helpers/heavyQueue.ts","../src/helpers/blur.ts","../src/helpers/getImageFromStrippedThumb.ts","../src/helpers/saveLottiePreview.ts","../src/helpers/getFileNameForUpload.ts","../src/lib/appManagers/utils/docs/getDocumentInputFileLocation.ts","../src/lib/appManagers/utils/docs/getDocumentDownloadOptions.ts","../src/lib/appManagers/utils/photos/getPhotoDownloadOptions.ts","../src/lib/appManagers/utils/webFiles/getWebFileDownloadOptions.ts","../src/lib/appManagers/utils/webDocs/getWebDocumentDownloadOptions.ts","../src/lib/appManagers/utils/webDocs/isWebDocument.ts","../src/lib/appManagers/utils/download/getDownloadFileNameFromOptions.ts","../src/lib/appManagers/utils/download/getDownloadMediaDetails.ts","../src/helpers/dom/createDownloadAnchor.ts","../src/lib/appManagers/appDownloadManager.ts","../src/lib/appManagers/utils/photos/choosePhotoSize.ts","../src/lib/appManagers/utils/stickers/getStickerEffectThumb.ts","../src/vendor/emoji/index.ts","../src/helpers/middleware.ts","../src/helpers/schedulers/throttleWith.ts","../src/helpers/schedulers/throttleWithRaf.ts","../src/components/wrappers/stickerAnimation.ts","../src/helpers/dom/setCurrentTime.ts","../src/helpers/dom/handleVideoLeak.ts","../src/components/wrappers/sticker.ts","../src/helpers/dom/getVisibleRect.ts","../src/helpers/dom/getViewportSlice.ts","../src/lib/customEmoji/renderer.ts","../src/helpers/string/encodeEntities.ts","../src/helpers/dom/documentFragmentToHTML.ts","../src/helpers/dom/findUpAttribute.ts","../src/helpers/dom/findUpTag.ts","../src/helpers/dom/getCaretPosNew.ts","../src/lib/richTextProcessor/combineSameEntities.ts","../src/lib/richTextProcessor/sortEntities.ts","../src/helpers/string/bom.ts","../src/helpers/dom/getRichElementValue.ts","../src/helpers/dom/getRichValueWithCaret.ts","../src/helpers/dom/isInputEmpty.ts","../src/config/emoji.ts","../src/helpers/buildURLHash.ts","../src/lib/richTextProcessor/spoiler.ts","../src/lib/richTextProcessor/encodeSpoiler.ts","../src/config/tld.ts","../src/lib/richTextProcessor/checkBrackets.ts","../src/lib/richTextProcessor/getEmojiUnified.ts","../src/lib/richTextProcessor/parseEntities.ts","../src/lib/richTextProcessor/setBlankToAnchor.ts","../src/environment/emojiVersionsSupport.ts","../src/lib/richTextProcessor/wrapTelegramUrlToAnchor.ts","../src/lib/customEmoji/element.ts","../src/codeLanguages.ts","../src/helpers/array/findIndexFrom.ts","../src/lib/richTextProcessor/wrapRichText.ts","../src/helpers/listenerSetter.ts","../src/helpers/dom/compareNodes.ts","../src/helpers/dom/richInputHandler.ts","../src/helpers/dom/selectElementContents.ts","../src/lib/richTextProcessor/findConflictingEntity.ts","../src/lib/richTextProcessor/mergeEntities.ts","../src/lib/richTextProcessor/wrapDraftText.ts","../src/components/inputField.ts","../src/lib/richTextProcessor/wrapEmojiText.ts"],"sourcesContent":["export default function forEachReverse<T>(array: Array<T>, callback: (value: T, index?: number, array?: Array<T>) => void) {\r\n  for(let length = array.length, i = length - 1; i >= 0; --i) {\r\n    callback(array[i], i, array);\r\n  }\r\n};\r\n","import noop from '../noop';\r\n\r\nexport default function safePlay(media: {play: () => any}) {\r\n  try {\r\n    const promise = media.play();\r\n    if(promise instanceof Promise) {\r\n      promise.catch(noop);\r\n    }\r\n  } catch(e) {\r\n    console.error(e);\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {LiteModeKey} from '../helpers/liteMode';\r\nimport type RLottiePlayer from '../lib/rlottie/rlottiePlayer';\r\nimport rootScope from '../lib/rootScope';\r\nimport {MOUNT_CLASS_TO} from '../config/debug';\r\nimport isInDOM from '../helpers/dom/isInDOM';\r\nimport indexOfAndSplice from '../helpers/array/indexOfAndSplice';\r\nimport forEachReverse from '../helpers/array/forEachReverse';\r\nimport idleController from '../helpers/idleController';\r\nimport {fastRaf} from '../helpers/schedulers';\r\nimport {Middleware} from '../helpers/middleware';\r\nimport safePlay from '../helpers/dom/safePlay';\r\n\r\nexport type AnimationItemGroup = '' | 'none' | 'chat' | 'lock' |\r\n  'STICKERS-POPUP' | 'emoticons-dropdown' | 'STICKERS-SEARCH' | 'GIFS-SEARCH' |\r\n  `CHAT-MENU-REACTIONS-${number}` | 'INLINE-HELPER' | 'GENERAL-SETTINGS' | 'STICKER-VIEWER' | 'EMOJI' |\r\n  'EMOJI-STATUS' | `chat-${number}` | 'PREMIUM-PROMO' | 'NEW-MEDIA';\r\nexport interface AnimationItem {\r\n  el: HTMLElement,\r\n  group: AnimationItemGroup,\r\n  animation: AnimationItemWrapper,\r\n  liteModeKey?: LiteModeKey,\r\n  controlled?: boolean | Middleware,\r\n  type: AnimationItemType\r\n};\r\n\r\nexport type AnimationItemType = 'lottie' | 'dots' | 'video' | 'emoji';\r\n\r\nexport interface AnimationItemWrapper {\r\n  remove: () => void;\r\n  paused: boolean;\r\n  pause: () => any;\r\n  play: () => any;\r\n  autoplay: boolean;\r\n  _autoplay?: boolean;\r\n  loop: boolean | number;\r\n  _loop?: boolean | number;\r\n  // onVisibilityChange?: (visible: boolean) => boolean;\r\n};\r\n\r\nexport class AnimationIntersector {\r\n  private observer: IntersectionObserver;\r\n  private visible: Set<AnimationItem>;\r\n\r\n  private overrideIdleGroups: Set<string>;\r\n  private byGroups: {[group in AnimationItemGroup]?: AnimationItem[]};\r\n  private byPlayer: Map<AnimationItem['animation'], AnimationItem>;\r\n  private lockedGroups: {[group in AnimationItemGroup]?: true};\r\n  private onlyOnePlayableGroup: AnimationItemGroup;\r\n\r\n  private intersectionLockedGroups: {[group in AnimationItemGroup]?: true};\r\n  private videosLocked: boolean;\r\n\r\n  constructor() {\r\n    this.observer = new IntersectionObserver((entries) => {\r\n      // if(rootScope.idle.isIDLE) return;\r\n\r\n      for(const entry of entries) {\r\n        const target = entry.target;\r\n\r\n        for(const group in this.byGroups) {\r\n          if(this.intersectionLockedGroups[group as AnimationItemGroup]) {\r\n            continue;\r\n          }\r\n\r\n          const animation = this.byGroups[group as AnimationItemGroup].find((p) => p.el === target);\r\n          if(!animation) {\r\n            continue;\r\n          }\r\n\r\n          if(entry.isIntersecting) {\r\n            this.visible.add(animation);\r\n            this.checkAnimation(animation, false);\r\n\r\n            /* if(animation instanceof HTMLVideoElement && animation.dataset.src) {\r\n              animation.src = animation.dataset.src;\r\n              animation.load();\r\n            } */\r\n          } else {\r\n            this.visible.delete(animation);\r\n            this.checkAnimation(animation, true);\r\n\r\n            const _animation = animation.animation;\r\n            if(animation.type === 'lottie'/*  && animation.cachingDelta === 2 */) {\r\n              // console.warn('will clear cache', player);\r\n              (_animation as RLottiePlayer).clearCache();\r\n            }/*  else if(animation instanceof HTMLVideoElement && animation.src) {\r\n              animation.dataset.src = animation.src;\r\n              animation.src = '';\r\n              animation.load();\r\n            } */\r\n          }\r\n\r\n          break;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.visible = new Set();\r\n\r\n    this.overrideIdleGroups = new Set();\r\n    this.byGroups = {};\r\n    this.byPlayer = new Map();\r\n    this.lockedGroups = {};\r\n    this.onlyOnePlayableGroup = '';\r\n\r\n    this.intersectionLockedGroups = {};\r\n    this.videosLocked = false;\r\n\r\n    idleController.addEventListener('change', (idle) => {\r\n      this.checkAnimations2(idle);\r\n    });\r\n  }\r\n\r\n  public toggleMediaPause(paused: boolean) {\r\n    if(paused) {\r\n      if(this.videosLocked) {\r\n        this.videosLocked = false;\r\n        this.checkAnimations2();\r\n      }\r\n    } else {\r\n      this.videosLocked = true;\r\n      this.checkAnimations2();\r\n    }\r\n  }\r\n\r\n  public setOverrideIdleGroup(group: string, override: boolean) {\r\n    if(override) this.overrideIdleGroups.add(group);\r\n    else this.overrideIdleGroups.delete(group);\r\n  }\r\n\r\n  public getAnimations(element: HTMLElement) {\r\n    const found: AnimationItem[] = [];\r\n    for(const group in this.byGroups) {\r\n      for(const player of this.byGroups[group as AnimationItemGroup]) {\r\n        if(player.el === element) {\r\n          found.push(player);\r\n        }\r\n      }\r\n    }\r\n\r\n    return found;\r\n  }\r\n\r\n  public removeAnimation(player: AnimationItem) {\r\n    const {el, animation} = player;\r\n    if(!player.controlled && player.type !== 'video') {\r\n      animation.remove();\r\n    }\r\n\r\n    const group = this.byGroups[player.group];\r\n    if(group) {\r\n      indexOfAndSplice(group, player);\r\n      if(!group.length) {\r\n        delete this.byGroups[player.group];\r\n      }\r\n    }\r\n\r\n    this.observer.unobserve(el);\r\n    this.visible.delete(player);\r\n    this.byPlayer.delete(animation);\r\n  }\r\n\r\n  public removeAnimationByPlayer(player: AnimationItemWrapper) {\r\n    const item = this.byPlayer.get(player);\r\n    if(item) {\r\n      this.removeAnimation(item);\r\n    }\r\n  }\r\n\r\n  public addAnimation(options: {\r\n    animation: AnimationItem['animation'],\r\n    group?: AnimationItemGroup,\r\n    observeElement: HTMLElement,\r\n    controlled?: AnimationItem['controlled'],\r\n    liteModeKey?: LiteModeKey\r\n    type: AnimationItemType\r\n  }) {\r\n    const {animation, group = '', observeElement, controlled, liteModeKey, type} = options;\r\n    if(group === 'none' || this.byPlayer.has(animation)) {\r\n      return;\r\n    }\r\n\r\n    const item: AnimationItem = {\r\n      el: observeElement,\r\n      animation: animation,\r\n      group,\r\n      controlled,\r\n      liteModeKey,\r\n      type\r\n    };\r\n\r\n    if(controlled && typeof(controlled) !== 'boolean') {\r\n      controlled.onClean(() => {\r\n        this.removeAnimationByPlayer(animation);\r\n      });\r\n    }\r\n\r\n    if(item.type === 'lottie') {\r\n      if(!rootScope.settings.stickers.loop && animation.loop) {\r\n        animation.loop = rootScope.settings.stickers.loop;\r\n      }\r\n    }\r\n\r\n    (this.byGroups[group as AnimationItemGroup] ??= []).push(item);\r\n    this.observer.observe(item.el);\r\n    this.byPlayer.set(animation, item);\r\n  }\r\n\r\n  public checkAnimations(\r\n    blurred?: boolean,\r\n    group?: AnimationItemGroup,\r\n    destroy?: boolean,\r\n    imitateIntersection?: boolean\r\n  ) {\r\n    // if(rootScope.idle.isIDLE) return;\r\n\r\n    if(group !== undefined && !this.byGroups[group]) {\r\n      // console.warn('no animation group:', group);\r\n      return;\r\n    }\r\n\r\n    const groups = group !== undefined /* && false */ ? [group] : Object.keys(this.byGroups) as AnimationItemGroup[];\r\n\r\n    for(const group of groups) {\r\n      if(imitateIntersection && this.intersectionLockedGroups[group]) {\r\n        continue;\r\n      }\r\n\r\n      const animations = this.byGroups[group];\r\n\r\n      forEachReverse(animations, (animation) => {\r\n        this.checkAnimation(animation, blurred, destroy);\r\n      });\r\n    }\r\n  }\r\n\r\n  public checkAnimations2(blurred?: boolean) {\r\n    this.checkAnimations(blurred, undefined, undefined, true);\r\n  }\r\n\r\n  public checkAnimation(player: AnimationItem, blurred?: boolean, destroy?: boolean) {\r\n    const {el, animation, group} = player;\r\n    // return;\r\n    if(destroy || (!this.lockedGroups[group] && !isInDOM(el))) {\r\n      if(!player.controlled || destroy) {\r\n        this.removeAnimation(player);\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    if(blurred ||\r\n      (this.onlyOnePlayableGroup && this.onlyOnePlayableGroup !== group) ||\r\n      (player.type === 'video' && this.videosLocked)\r\n    ) {\r\n      if(!animation.paused) {\r\n        // console.warn('pause animation:', animation);\r\n        animation.pause();\r\n      }\r\n    } else if(animation.paused &&\r\n      this.visible.has(player) &&\r\n      animation.autoplay &&\r\n      (!this.onlyOnePlayableGroup || this.onlyOnePlayableGroup === group) &&\r\n      (!idleController.isIdle || this.overrideIdleGroups.has(player.group))\r\n    ) {\r\n      // console.warn('play animation:', animation);\r\n      safePlay(animation);\r\n    }\r\n  }\r\n\r\n  public getOnlyOnePlayableGroup() {\r\n    return this.onlyOnePlayableGroup;\r\n  }\r\n\r\n  public setOnlyOnePlayableGroup(group: AnimationItemGroup = '') {\r\n    this.onlyOnePlayableGroup = group;\r\n  }\r\n\r\n  public lockGroup(group: AnimationItemGroup) {\r\n    this.lockedGroups[group] = true;\r\n  }\r\n\r\n  public unlockGroup(group: AnimationItemGroup) {\r\n    delete this.lockedGroups[group];\r\n    this.checkAnimations(undefined, group);\r\n  }\r\n\r\n  public refreshGroup(group: AnimationItemGroup) {\r\n    const animations = this.byGroups[group];\r\n    if(!animations?.length) {\r\n      return;\r\n    }\r\n\r\n    animations.forEach((animation) => {\r\n      this.observer.unobserve(animation.el);\r\n    });\r\n\r\n    fastRaf(() => {\r\n      animations.forEach((animation) => {\r\n        this.observer.observe(animation.el);\r\n      });\r\n    });\r\n  }\r\n\r\n  public lockIntersectionGroup(group: AnimationItemGroup) {\r\n    this.intersectionLockedGroups[group] = true;\r\n  }\r\n\r\n  public unlockIntersectionGroup(group: AnimationItemGroup) {\r\n    delete this.intersectionLockedGroups[group];\r\n    this.refreshGroup(group);\r\n  }\r\n\r\n  public toggleIntersectionGroup(group: AnimationItemGroup, lock: boolean) {\r\n    if(lock) this.lockIntersectionGroup(group);\r\n    else this.unlockIntersectionGroup(group);\r\n  }\r\n\r\n  public setAutoplay(play: boolean, liteModeKey: LiteModeKey) {\r\n    let changed = false;\r\n    this.byPlayer.forEach((animationItem, animation) => {\r\n      if(animationItem.liteModeKey === liteModeKey) {\r\n        changed = true;\r\n        animation.autoplay = play ? animation._autoplay : false;\r\n        animation.loop = play ? rootScope.settings.stickers.loop && animation._loop : false;\r\n      }\r\n    });\r\n\r\n    return changed;\r\n  }\r\n\r\n  public setLoop(loop: boolean) {\r\n    let changed = false;\r\n    this.byPlayer.forEach((animationItem, animation) => {\r\n      if(animation._loop &&\r\n        animation.loop !== loop &&\r\n        (animationItem.type === 'lottie' || animationItem.type === 'video')) {\r\n        changed = true;\r\n        animation.loop = loop;\r\n\r\n        // if(animation._autoplay && animation.autoplay !== animation._autoplay) {\r\n        animation.autoplay = animation._autoplay;\r\n        // }\r\n      }\r\n    });\r\n\r\n    return changed;\r\n  }\r\n}\r\n\r\nconst animationIntersector = new AnimationIntersector();\r\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.animationIntersector = animationIntersector);\r\nexport default animationIntersector;\r\n","const IS_IMAGE_BITMAP_SUPPORTED = typeof(ImageBitmap) !== 'undefined';\r\n\r\nexport default IS_IMAGE_BITMAP_SUPPORTED;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {RLottieColor} from '../lib/rlottie/rlottiePlayer';\r\n\r\nexport type FramesCacheMap = Map<number, Uint8ClampedArray>;\r\nexport type FramesCacheMapNew = Map<number, HTMLCanvasElement | ImageBitmap>;\r\nexport type FramesCacheMapURLs = Map<number, string>;\r\nexport type FramesCacheItem = {\r\n  frames: FramesCacheMap,\r\n  framesNew: FramesCacheMapNew,\r\n  framesURLs: FramesCacheMapURLs,\r\n  clearCache: () => void,\r\n  counter: number\r\n};\r\n\r\nexport class FramesCache {\r\n  private cache: Map<string, FramesCacheItem>;\r\n\r\n  constructor() {\r\n    this.cache = new Map();\r\n  }\r\n\r\n  public static createCache(): FramesCacheItem {\r\n    const cache: FramesCacheItem = {\r\n      frames: new Map(),\r\n      framesNew: new Map(),\r\n      framesURLs: new Map(),\r\n      clearCache: () => {\r\n        cache.framesNew.forEach((value) => {\r\n          (value as ImageBitmap).close?.();\r\n        });\r\n\r\n        cache.frames.clear();\r\n        cache.framesNew.clear();\r\n        cache.framesURLs.clear();\r\n      },\r\n      counter: 0\r\n    };\r\n\r\n    return cache;\r\n  }\r\n\r\n  public getCache(name: string) {\r\n    let cache = this.cache.get(name);\r\n    if(!cache) {\r\n      this.cache.set(name, cache = FramesCache.createCache());\r\n    } else {\r\n      // console.warn('[RLottieCache] cache will be reused', cache);\r\n    }\r\n\r\n    ++cache.counter;\r\n    return cache;\r\n  }\r\n\r\n  public releaseCache(name: string) {\r\n    const cache = this.cache.get(name);\r\n    if(cache && !--cache.counter) {\r\n      this.cache.delete(name);\r\n      // console.warn('[RLottieCache] released cache', cache);\r\n    }\r\n  }\r\n\r\n  public getCacheCounter(name: string) {\r\n    const cache = this.cache.get(name);\r\n    return cache?.counter;\r\n  }\r\n\r\n  public generateName(name: string, width: number, height: number, color: RLottieColor, toneIndex: number) {\r\n    return [\r\n      name,\r\n      width,\r\n      height,\r\n      // color ? rgbaToHexa(color) : ''\r\n      // color ? 'colored' : '',\r\n      toneIndex || ''\r\n    ].filter(Boolean).join('-');\r\n  }\r\n}\r\n\r\nconst framesCache = new FramesCache();\r\n\r\nexport default framesCache;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {AnimationItemGroup, AnimationItemWrapper} from '../../components/animationIntersector';\r\nimport type {Middleware} from '../../helpers/middleware';\r\nimport type {LiteModeKey} from '../../helpers/liteMode';\r\nimport CAN_USE_TRANSFERABLES from '../../environment/canUseTransferables';\r\nimport IS_APPLE_MX from '../../environment/appleMx';\r\nimport {IS_ANDROID, IS_APPLE_MOBILE, IS_APPLE, IS_SAFARI} from '../../environment/userAgent';\r\nimport EventListenerBase from '../../helpers/eventListenerBase';\r\nimport mediaSizes from '../../helpers/mediaSizes';\r\nimport clamp from '../../helpers/number/clamp';\r\nimport QueryableWorker from './queryableWorker';\r\nimport IS_IMAGE_BITMAP_SUPPORTED from '../../environment/imageBitmapSupport';\r\nimport framesCache, {FramesCache, FramesCacheItem} from '../../helpers/framesCache';\r\nimport customProperties, {CustomProperty} from '../../helpers/dom/customProperties';\r\n\r\nexport type RLottieOptions = {\r\n  container: HTMLElement | HTMLElement[],\r\n  middleware?: Middleware,\r\n  canvas?: HTMLCanvasElement,\r\n  autoplay?: boolean,\r\n  animationData: Blob,\r\n  loop?: RLottiePlayer['loop'],\r\n  width?: number,\r\n  height?: number,\r\n  group?: AnimationItemGroup,\r\n  noCache?: boolean,\r\n  needUpscale?: boolean,\r\n  skipRatio?: number,\r\n  initFrame?: number, // index\r\n  color?: RLottieColor,\r\n  textColor?: WrapSomethingOptions['textColor'],\r\n  name?: string,\r\n  skipFirstFrameRendering?: boolean,\r\n  toneIndex?: number,\r\n  sync?: boolean,\r\n  liteModeKey?: LiteModeKey\r\n};\r\n\r\nexport type RLottieColor = [number, number, number];\r\n\r\nexport function getLottiePixelRatio(width: number, height: number, needUpscale?: boolean) {\r\n  let pixelRatio = clamp(window.devicePixelRatio, 1, 2);\r\n  if(pixelRatio > 1 && !needUpscale) {\r\n    if(width > 90 && height > 90) {\r\n      if(!IS_APPLE && mediaSizes.isMobile) {\r\n        pixelRatio = 1;\r\n      }\r\n    } else if((width > 60 && height > 60) || IS_ANDROID) {\r\n      pixelRatio = Math.max(1.5, pixelRatio - 1.5);\r\n    }\r\n  }\r\n\r\n  return pixelRatio;\r\n}\r\n\r\nexport function applyColorOnContext(\r\n  context: CanvasRenderingContext2D,\r\n  color: RLottieColor | string,\r\n  x: number,\r\n  y: number,\r\n  width: number,\r\n  height: number\r\n) {\r\n  context.globalCompositeOperation = 'source-atop';\r\n  context.fillStyle = typeof(color) === 'string' ? color : `rgb(${color[0]}, ${color[1]}, ${color[2]})`;\r\n  context.fillRect(x, y, width, height);\r\n  context.globalCompositeOperation = 'source-over';\r\n}\r\n\r\nexport default class RLottiePlayer extends EventListenerBase<{\r\n  enterFrame: (frameNo: number) => void,\r\n  ready: () => void,\r\n  firstFrame: () => void,\r\n  cached: () => void,\r\n  destroy: () => void\r\n}> implements AnimationItemWrapper {\r\n  public static CACHE = framesCache;\r\n  private static reqId = 0;\r\n\r\n  public reqId = 0;\r\n  public curFrame: number;\r\n  private frameCount: number;\r\n  private fps: number;\r\n  private skipDelta: number;\r\n  public name: string;\r\n  public cacheName: string;\r\n  private toneIndex: number;\r\n\r\n  private worker: QueryableWorker;\r\n\r\n  private width = 0;\r\n  private height = 0;\r\n\r\n  public el: HTMLElement[];\r\n  public canvas: HTMLCanvasElement[];\r\n  public contexts: CanvasRenderingContext2D[];\r\n\r\n  public paused = true;\r\n  // public paused = false;\r\n  public direction = 1;\r\n  private speed = 1;\r\n  public autoplay = true;\r\n  public _autoplay: boolean; // ! will be used to store original value for settings.stickers.loop\r\n  public loop: number | boolean = true;\r\n  public _loop: RLottiePlayer['loop']; // ! will be used to store original value for settings.stickers.loop\r\n  public group: AnimationItemGroup = '';\r\n  public liteModeKey: LiteModeKey;\r\n\r\n  private frInterval: number;\r\n  private frThen: number;\r\n  private rafId: number;\r\n\r\n  // private caching = false;\r\n  // private removed = false;\r\n\r\n  private cache: FramesCacheItem;\r\n  private imageData: ImageData;\r\n  public clamped: Uint8ClampedArray;\r\n  private cachingDelta = 0;\r\n\r\n  private initFrame: number;\r\n  private color: RLottieOptions['color'];\r\n  private textColor: RLottieOptions['textColor'];\r\n\r\n  public minFrame: number;\r\n  public maxFrame: number;\r\n\r\n  private playedTimes = 0;\r\n\r\n  private currentMethod: RLottiePlayer['mainLoopForwards'] | RLottiePlayer['mainLoopBackwards'];\r\n  private frameListener: (currentFrame: number) => void;\r\n  private skipFirstFrameRendering: boolean;\r\n  private playToFrameOnFrameCallback: (frameNo: number) => void;\r\n\r\n  public overrideRender: (frame: ImageData | HTMLCanvasElement | ImageBitmap) => void;\r\n  private renderedFirstFrame: boolean;\r\n\r\n  private raw: boolean;\r\n\r\n  constructor({el, worker, options}: {\r\n    el: RLottiePlayer['el'],\r\n    worker: QueryableWorker,\r\n    options: RLottieOptions\r\n  }) {\r\n    super(true);\r\n\r\n    this.reqId = ++RLottiePlayer['reqId'];\r\n    this.el = el;\r\n    this.worker = worker;\r\n\r\n    for(const i in options) {\r\n      if(this.hasOwnProperty(i)) {\r\n        // @ts-ignore\r\n        this[i] = options[i];\r\n      }\r\n    }\r\n\r\n    this._loop = this.loop;\r\n    this._autoplay = this.autoplay;\r\n\r\n    // ! :(\r\n    this.initFrame = options.initFrame;\r\n    this.color = options.color;\r\n    this.textColor = options.textColor;\r\n    this.name = options.name;\r\n    this.skipFirstFrameRendering = options.skipFirstFrameRendering;\r\n    this.toneIndex = options.toneIndex;\r\n    this.raw = false;\r\n    this.liteModeKey = options.liteModeKey;\r\n\r\n    if(this.name) {\r\n      this.cacheName = RLottiePlayer.CACHE.generateName(\r\n        this.name,\r\n        this.width,\r\n        this.height,\r\n        this.color,\r\n        this.toneIndex\r\n      );\r\n    }\r\n\r\n    // * Skip ratio (30fps)\r\n    let skipRatio: number;\r\n    if(options.skipRatio !== undefined) skipRatio = options.skipRatio;\r\n    else if((IS_ANDROID || IS_APPLE_MOBILE || (IS_APPLE && !IS_SAFARI && !IS_APPLE_MX)) && this.width < 100 && this.height < 100 && !options.needUpscale) {\r\n      skipRatio = 0.5;\r\n    }\r\n\r\n    this.skipDelta = skipRatio !== undefined ? 1 / skipRatio | 0 : 1;\r\n\r\n    // options.needUpscale = true;\r\n\r\n    // * Pixel ratio\r\n    const pixelRatio = getLottiePixelRatio(this.width, this.height, options.needUpscale);\r\n\r\n    this.width = Math.round(this.width * pixelRatio);\r\n    this.height = Math.round(this.height * pixelRatio);\r\n\r\n    // options.noCache = true;\r\n\r\n    // * Cache frames params\r\n    if(!options.noCache/*  && false */) {\r\n      // проверка на размер уже после скейлинга, сделано для попапа и сайдбара, где стикеры 80х80 и 68х68, туда нужно 75%\r\n      if(IS_APPLE && this.width > 100 && this.height > 100) {\r\n        this.cachingDelta = 2; // 2 // 50%\r\n      } else if(this.width < 100 && this.height < 100) {\r\n        this.cachingDelta = Infinity; // 100%\r\n      } else {\r\n        this.cachingDelta = 4; // 75%\r\n      }\r\n    }\r\n\r\n    // this.cachingDelta = Infinity;\r\n    // this.cachingDelta = 0;\r\n    // if(isApple) {\r\n    //   this.cachingDelta = 0; //2 // 50%\r\n    // }\r\n\r\n    if(!this.canvas) {\r\n      this.canvas = this.el.map(() => {\r\n        const canvas = document.createElement('canvas');\r\n        canvas.classList.add('rlottie');\r\n        canvas.width = this.width;\r\n        canvas.height = this.height;\r\n        canvas.dpr = pixelRatio;\r\n        return canvas;\r\n      });\r\n    }\r\n\r\n    this.contexts = this.canvas.map((canvas) => canvas.getContext('2d'));\r\n\r\n    if(!IS_IMAGE_BITMAP_SUPPORTED || this.raw) {\r\n      this.imageData = new ImageData(this.width, this.height);\r\n\r\n      if(CAN_USE_TRANSFERABLES) {\r\n        this.clamped = new Uint8ClampedArray(this.width * this.height * 4);\r\n      }\r\n    }\r\n\r\n    if(this.name) {\r\n      this.cache = RLottiePlayer.CACHE.getCache(this.cacheName);\r\n    } else {\r\n      this.cache = FramesCache.createCache();\r\n    }\r\n  }\r\n\r\n  public setSize(width: number, height: number) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.canvas.forEach((canvas) => {\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n    });\r\n  }\r\n\r\n  public clearCache() {\r\n    if(this.cachingDelta === Infinity) {\r\n      return;\r\n    }\r\n\r\n    if(this.cacheName && this.cache.counter > 1) { // skip clearing because same sticker can be still visible\r\n      return;\r\n    }\r\n\r\n    this.cache.clearCache();\r\n  }\r\n\r\n  public sendQuery(args: any[], transfer?: Transferable[]) {\r\n    this.worker.sendQuery([args.shift(), this.reqId, ...args], transfer);\r\n  }\r\n\r\n  public loadFromData(data: RLottieOptions['animationData']) {\r\n    this.sendQuery([\r\n      'loadFromData',\r\n      data,\r\n      this.width,\r\n      this.height,\r\n      this.toneIndex,\r\n      this.raw\r\n      /* , this.canvas.transferControlToOffscreen() */\r\n    ]);\r\n  }\r\n\r\n  public play() {\r\n    if(!this.paused) {\r\n      return;\r\n    }\r\n\r\n    this.paused = false;\r\n    this.setMainLoop();\r\n  }\r\n\r\n  public pause(clearPendingRAF = true) {\r\n    if(this.paused) {\r\n      return;\r\n    }\r\n\r\n    this.paused = true;\r\n    if(clearPendingRAF) {\r\n      clearTimeout(this.rafId);\r\n      this.rafId = undefined;\r\n    }\r\n    // window.cancelAnimationFrame(this.rafId);\r\n  }\r\n\r\n  private resetCurrentFrame() {\r\n    return this.curFrame = this.initFrame ?? (this.direction === 1 ? this.minFrame : this.maxFrame);\r\n  }\r\n\r\n  public stop(renderFirstFrame = true) {\r\n    this.pause();\r\n\r\n    const curFrame = this.resetCurrentFrame();\r\n    if(renderFirstFrame) {\r\n      this.requestFrame(curFrame);\r\n      // this.sendQuery('renderFrame', this.curFrame);\r\n    }\r\n  }\r\n\r\n  public restart() {\r\n    this.stop(false);\r\n    this.play();\r\n  }\r\n\r\n  public playOrRestart() {\r\n    if(!this.paused) {\r\n      return;\r\n    }\r\n\r\n    if(this.curFrame === this.maxFrame) {\r\n      this.restart();\r\n    } else {\r\n      this.play();\r\n    }\r\n  }\r\n\r\n  public setSpeed(speed: number) {\r\n    if(this.speed === speed) {\r\n      return;\r\n    }\r\n\r\n    this.speed = speed;\r\n\r\n    if(!this.paused) {\r\n      this.setMainLoop();\r\n    }\r\n  }\r\n\r\n  public setDirection(direction: number) {\r\n    if(this.direction === direction) {\r\n      return;\r\n    }\r\n\r\n    this.direction = direction;\r\n\r\n    if(!this.paused) {\r\n      this.setMainLoop();\r\n    }\r\n  }\r\n\r\n  public remove() {\r\n    this.pause();\r\n    this.sendQuery(['destroy']);\r\n    if(this.cacheName) RLottiePlayer.CACHE.releaseCache(this.cacheName);\r\n    this.dispatchEvent('destroy');\r\n    this.cleanup();\r\n  }\r\n\r\n  public applyColor(context: CanvasRenderingContext2D) {\r\n    applyColorOnContext(\r\n      context,\r\n      // this.color || customProperties.getPropertyAsColor(typeof(this.textColor) === 'function' ? this.textColor() : this.textColor),\r\n      this.color || customProperties.getPropertyAsColor(this.textColor),\r\n      0,\r\n      0,\r\n      this.width,\r\n      this.height\r\n    );\r\n  }\r\n\r\n  public applyColorForAllContexts() {\r\n    if(!this.color && !this.textColor) {\r\n      return;\r\n    }\r\n\r\n    this.contexts.forEach((context) => {\r\n      this.applyColor(context);\r\n    });\r\n  }\r\n\r\n  public renderFrame2(frame: Uint8ClampedArray | HTMLCanvasElement | ImageBitmap, frameNo: number) {\r\n    /* this.setListenerResult('enterFrame', frameNo);\r\n    return; */\r\n\r\n    try {\r\n      if(frame instanceof Uint8ClampedArray) {\r\n        this.imageData.data.set(frame);\r\n      }\r\n\r\n      // this.context.putImageData(new ImageData(frame, this.width, this.height), 0, 0);\r\n      this.contexts.forEach((context, idx) => {\r\n        let cachedSource: HTMLCanvasElement | ImageBitmap = this.cache.framesNew.get(frameNo);\r\n        if(!(frame instanceof Uint8ClampedArray)) {\r\n          cachedSource = frame;\r\n        } else if(idx > 0) {\r\n          cachedSource = this.canvas[0];\r\n        }\r\n\r\n        if(!cachedSource) {\r\n          const c = document.createElement('canvas');\r\n          c.width = context.canvas.width;\r\n          c.height = context.canvas.height;\r\n          c.getContext('2d').putImageData(this.imageData, 0, 0);\r\n          this.cache.framesNew.set(frameNo, c);\r\n          cachedSource = c;\r\n        }\r\n\r\n        if(this.overrideRender && this.renderedFirstFrame) {\r\n          this.overrideRender(cachedSource || this.imageData);\r\n        } else if(cachedSource) {\r\n          context.clearRect(0, 0, cachedSource.width, cachedSource.height);\r\n          context.drawImage(cachedSource, 0, 0);\r\n        } else {\r\n          context.putImageData(this.imageData, 0, 0);\r\n        }\r\n\r\n        if(this.color || this.textColor) {\r\n          this.applyColor(context);\r\n        }\r\n\r\n        if(!this.renderedFirstFrame) {\r\n          this.renderedFirstFrame = true;\r\n        }\r\n      });\r\n\r\n      this.dispatchEvent('enterFrame', frameNo);\r\n    } catch(err) {\r\n      console.error('RLottiePlayer renderFrame error:', err/* , frame */, this.width, this.height);\r\n      this.autoplay = false;\r\n      this.pause();\r\n    }\r\n  }\r\n\r\n  public renderFrame(frame: Parameters<RLottiePlayer['renderFrame2']>[0], frameNo: number) {\r\n    const canCacheFrame = this.cachingDelta && (frameNo % this.cachingDelta || !frameNo);\r\n    if(canCacheFrame) {\r\n      if(frame instanceof Uint8ClampedArray && !this.cache.frames.has(frameNo)) {\r\n        this.cache.frames.set(frameNo, new Uint8ClampedArray(frame));// frame;\r\n      } else if(IS_IMAGE_BITMAP_SUPPORTED && frame instanceof ImageBitmap && !this.cache.framesNew.has(frameNo)) {\r\n        this.cache.framesNew.set(frameNo, frame);\r\n      }\r\n    }\r\n\r\n    /* if(!this.listenerResults.hasOwnProperty('cached')) {\r\n      this.setListenerResult('enterFrame', frameNo);\r\n      if(frameNo === (this.frameCount - 1)) {\r\n        this.setListenerResult('cached');\r\n      }\r\n\r\n      return;\r\n    } */\r\n\r\n    if(this.frInterval) {\r\n      const now = Date.now(), delta = now - this.frThen;\r\n\r\n      if(delta < 0) {\r\n        const timeout = this.frInterval > -delta ? -delta % this.frInterval : this.frInterval;\r\n        if(this.rafId) clearTimeout(this.rafId);\r\n        this.rafId = window.setTimeout(() => {\r\n          this.renderFrame2(frame, frameNo);\r\n        }, timeout);\r\n        // await new Promise((resolve) => setTimeout(resolve, -delta % this.frInterval));\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.renderFrame2(frame, frameNo);\r\n  }\r\n\r\n  public requestFrame(frameNo: number) {\r\n    const frame = this.cache.frames.get(frameNo);\r\n    const frameNew = this.cache.framesNew.get(frameNo);\r\n    if(frameNew) {\r\n      this.renderFrame(frameNew, frameNo);\r\n    } else if(frame) {\r\n      this.renderFrame(frame, frameNo);\r\n    } else {\r\n      if(this.clamped && !this.clamped.length) { // fix detached\r\n        this.clamped = new Uint8ClampedArray(this.width * this.height * 4);\r\n      }\r\n\r\n      this.sendQuery(['renderFrame', frameNo], this.clamped ? [this.clamped.buffer] : undefined);\r\n    }\r\n  }\r\n\r\n  private onLap() {\r\n    ++this.playedTimes;\r\n    if(typeof(this.loop) === 'number' && this.playedTimes >= this.loop) {\r\n      this.loop =\r\n        this.autoplay =\r\n        this._loop =\r\n        this._autoplay =\r\n        false;\r\n    }\r\n\r\n    if(!this.loop) {\r\n      this.clearCache();\r\n      this.pause(false);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  private mainLoopForwards() {\r\n    const {skipDelta, maxFrame} = this;\r\n    const frame = (this.curFrame + skipDelta) > maxFrame ? this.curFrame = (this.loop ? this.minFrame : this.maxFrame) : this.curFrame += skipDelta;\r\n    // console.log('mainLoopForwards', this.curFrame, skipDelta, frame);\r\n\r\n    this.requestFrame(frame);\r\n    if((frame + skipDelta) > maxFrame) {\r\n      return this.onLap();\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  private mainLoopBackwards() {\r\n    const {skipDelta, minFrame} = this;\r\n    const frame = (this.curFrame - skipDelta) < minFrame ? this.curFrame = (this.loop ? this.maxFrame : this.minFrame) : this.curFrame -= skipDelta;\r\n    // console.log('mainLoopBackwards', this.curFrame, skipDelta, frame);\r\n\r\n    this.requestFrame(frame);\r\n    if((frame - skipDelta) < minFrame) {\r\n      return this.onLap();\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  public setMainLoop() {\r\n    // window.cancelAnimationFrame(this.rafId);\r\n    clearTimeout(this.rafId);\r\n    this.rafId = undefined;\r\n\r\n    this.frInterval = 1000 / this.fps / this.speed * this.skipDelta;\r\n    this.frThen = Date.now() - this.frInterval;\r\n\r\n    // console.trace('setMainLoop', this.frInterval, this.direction, this, JSON.stringify(this.listenerResults), this.listenerResults);\r\n\r\n    const method = (this.direction === 1 ? this.mainLoopForwards : this.mainLoopBackwards).bind(this);\r\n    this.currentMethod = method;\r\n    // this.frameListener && this.removeListener('enterFrame', this.frameListener);\r\n\r\n    // setTimeout(() => {\r\n    // this.addListener('enterFrame', this.frameListener);\r\n    // }, 0);\r\n\r\n    if(this.frameListener) {\r\n      const lastResult = this.listenerResults.enterFrame;\r\n      if(lastResult !== undefined) {\r\n        this.frameListener(this.curFrame);\r\n      }\r\n    }\r\n\r\n    // this.mainLoop(method);\r\n    // this.r(method);\r\n    // method();\r\n  }\r\n\r\n  public playPart(options: {\r\n    from: number,\r\n    to: number,\r\n    callback?: () => void\r\n  }) {\r\n    this.pause();\r\n\r\n    const {from, to, callback} = options;\r\n    this.curFrame = from - 1;\r\n\r\n    return this.playToFrame({\r\n      frame: to,\r\n      direction: to > from ? 1 : -1,\r\n      callback\r\n    });\r\n  }\r\n\r\n  public playToFrame(options: {\r\n    frame: number,\r\n    speed?: number,\r\n    direction?: number,\r\n    callback?: () => void\r\n  }) {\r\n    this.pause();\r\n\r\n    const {frame, speed, callback, direction} = options;\r\n    this.setDirection(direction === undefined ? this.curFrame > frame ? -1 : 1 : direction);\r\n    speed !== undefined && this.setSpeed(speed);\r\n\r\n    const bounds = [this.curFrame, frame];\r\n    if(this.direction === -1) bounds.reverse();\r\n\r\n    this.loop = false;\r\n    this.setMinMax(bounds[0], bounds[1]);\r\n\r\n    if(this.playToFrameOnFrameCallback) {\r\n      this.removeEventListener('enterFrame', this.playToFrameOnFrameCallback);\r\n    }\r\n\r\n    if(callback) {\r\n      this.playToFrameOnFrameCallback = (frameNo: number) => {\r\n        if(frameNo === frame) {\r\n          this.removeEventListener('enterFrame', this.playToFrameOnFrameCallback);\r\n          callback();\r\n        }\r\n      };\r\n\r\n      this.addEventListener('enterFrame', this.playToFrameOnFrameCallback);\r\n    }\r\n\r\n    this.play();\r\n  }\r\n\r\n  public setColor(color: RLottieColor | string, renderIfPaused: boolean) {\r\n    if(typeof(color) === 'string') {\r\n      this.textColor = color;\r\n    } else {\r\n      this.color = color;\r\n    }\r\n\r\n    if(renderIfPaused && this.paused) {\r\n      this.applyColorForAllContexts();\r\n      // this.renderFrame2(this.imageData?.data, this.curFrame);\r\n    }\r\n  }\r\n\r\n  private setMinMax(minFrame = 0, maxFrame = this.frameCount - 1) {\r\n    this.minFrame = minFrame;\r\n    this.maxFrame = maxFrame;\r\n  }\r\n\r\n  public async onLoad(frameCount: number, fps: number) {\r\n    this.frameCount = frameCount;\r\n    this.fps = fps;\r\n    this.setMinMax();\r\n    if(this.initFrame !== undefined) {\r\n      this.initFrame = clamp(this.initFrame, this.minFrame, this.maxFrame);\r\n    }\r\n\r\n    const curFrame = this.resetCurrentFrame();\r\n\r\n    // * Handle 30fps stickers if 30fps set\r\n    if(this.fps < 60 && this.skipDelta !== 1) {\r\n      const diff = 60 / fps;\r\n      this.skipDelta = this.skipDelta / diff | 0;\r\n    }\r\n\r\n    this.frInterval = 1000 / this.fps / this.speed * this.skipDelta;\r\n    this.frThen = Date.now() - this.frInterval;\r\n    // this.sendQuery('renderFrame', 0);\r\n\r\n    // Кешировать сразу не получится, рендер стикера (тайгер) занимает 519мс,\r\n    // если рендерить 75% с получением каждого кадра из воркера, будет 475мс, т.е. при 100% было бы 593мс, потеря на передаче 84мс.\r\n\r\n    /* console.time('cache' + this.reqId);\r\n    for(let i = 0; i < frameCount; ++i) {\r\n      //if(this.removed) return;\r\n\r\n      if(i % 4) {\r\n        await new Promise((resolve) => {\r\n          delete this.listenerResults.enterFrame;\r\n          this.addListener('enterFrame', resolve, true);\r\n          this.requestFrame(i);\r\n        });\r\n      }\r\n    }\r\n\r\n    console.timeEnd('cache' + this.reqId); */\r\n    // console.log('cached');\r\n    /* this.el.innerHTML = '';\r\n    this.el.append(this.canvas);\r\n    return; */\r\n\r\n    !this.skipFirstFrameRendering && this.requestFrame(curFrame);\r\n    this.dispatchEvent('ready');\r\n    this.addEventListener('enterFrame', () => {\r\n      this.dispatchEvent('firstFrame');\r\n\r\n      if(!this.canvas[0].parentNode && this.el && !this.overrideRender) {\r\n        this.el.forEach((container, idx) => container.append(this.canvas[idx]));\r\n      }\r\n\r\n      // console.log('enterFrame firstFrame');\r\n\r\n      // let lastTime = this.frThen;\r\n      this.frameListener = () => {\r\n        if(this.paused || !this.currentMethod) {\r\n          return;\r\n        }\r\n\r\n        const time = Date.now();\r\n        // console.log(`enterFrame handle${this.reqId}`, time, (time - lastTime), this.frInterval);\r\n        /* if(Math.round(time - lastTime + this.frInterval * 0.25) < Math.round(this.frInterval)) {\r\n          return;\r\n        } */\r\n\r\n        // lastTime = time;\r\n\r\n        this.frThen = time + this.frInterval;\r\n        const canContinue = this.currentMethod();\r\n        if(!canContinue && !this.loop && this.autoplay) {\r\n          this.autoplay = false;\r\n        }\r\n      };\r\n\r\n      this.addEventListener('enterFrame', this.frameListener);\r\n      // setInterval(this.frameListener, this.frInterval);\r\n\r\n      // ! fix autoplaying since there will be no animationIntersector for it\r\n      if(this.group === 'none' && this.autoplay) {\r\n        this.play();\r\n      }\r\n    }, {once: true});\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport CAN_USE_TRANSFERABLES from '../../environment/canUseTransferables';\r\nimport EventListenerBase from '../../helpers/eventListenerBase';\r\n\r\nexport default class QueryableWorker extends EventListenerBase<{\r\n  ready: () => void,\r\n  frame: (reqId: number, frameNo: number, frame: Uint8ClampedArray | ImageBitmap) => void,\r\n  loaded: (reqId: number, frameCount: number, fps: number) => void,\r\n  error: (reqId: number, error: Error) => void,\r\n  workerError: (error: ErrorEvent) => void\r\n}> {\r\n  constructor(private worker: Worker) {\r\n    super();\r\n\r\n    this.worker.onerror = (error) => {\r\n      try {\r\n        this.dispatchEvent('workerError', error);\r\n        this.cleanup();\r\n        this.terminate();\r\n      } catch(err) {\r\n\r\n      }\r\n    };\r\n\r\n    this.worker.onmessage = (event) => {\r\n      this.dispatchEvent(event.data.queryMethodListener, ...event.data.queryMethodArguments);\r\n    };\r\n  }\r\n\r\n  public postMessage(message: any) {\r\n    this.worker.postMessage(message);\r\n  }\r\n\r\n  public terminate() {\r\n    this.worker.terminate();\r\n  }\r\n\r\n  public sendQuery(args: any[], transfer?: Transferable[]) {\r\n    this.worker.postMessage({\r\n      queryMethod: args.shift(),\r\n      queryMethodArguments: args\r\n    }, CAN_USE_TRANSFERABLES ? transfer: undefined);\r\n  }\r\n}\r\n","const IS_WEB_ASSEMBLY_SUPPORTED = typeof(WebAssembly) !== 'undefined';\r\n\r\nexport default IS_WEB_ASSEMBLY_SUPPORTED;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport animationIntersector from '../../components/animationIntersector';\r\nimport {MOUNT_CLASS_TO} from '../../config/debug';\r\nimport pause from '../../helpers/schedulers/pause';\r\nimport {logger, LogTypes} from '../logger';\r\nimport RLottiePlayer, {RLottieOptions} from './rlottiePlayer';\r\nimport QueryableWorker from './queryableWorker';\r\nimport blobConstruct from '../../helpers/blob/blobConstruct';\r\nimport apiManagerProxy from '../mtproto/mtprotoworker';\r\nimport IS_WEB_ASSEMBLY_SUPPORTED from '../../environment/webAssemblySupport';\r\nimport makeError from '../../helpers/makeError';\r\nimport App from '../../config/app';\r\nimport rootScope from '../rootScope';\r\n\r\nexport type LottieAssetName = 'EmptyFolder' | 'Folders_1' | 'Folders_2' |\r\n  'TwoFactorSetupMonkeyClose' | 'TwoFactorSetupMonkeyCloseAndPeek' |\r\n  'TwoFactorSetupMonkeyCloseAndPeekToIdle' | 'TwoFactorSetupMonkeyIdle' |\r\n  'TwoFactorSetupMonkeyPeek' | 'TwoFactorSetupMonkeyTracking' |\r\n  'voice_outlined2' | 'voip_filled' | 'voice_mini' | 'jolly_roger' |\r\n  'Gift3' | 'Gift6' | 'Gift12' | 'Folders_Shared' | 'UtyanSearch' |\r\n  'UtyanDiscussion' | 'UtyanLinks' | 'UtyanStories' | 'ReactionGeneric' |\r\n  'StatsEmoji' | 'Congratulations';\r\n\r\nexport class LottieLoader {\r\n  private loadPromise: Promise<void> = !IS_WEB_ASSEMBLY_SUPPORTED ? Promise.reject(makeError('NO_WASM')) : undefined;\r\n  private loaded = false;\r\n\r\n  private workersLimit = App.threads;\r\n  private players: {[reqId: number]: RLottiePlayer} = {};\r\n  private playersByCacheName: {[cacheName: string]: Set<RLottiePlayer>} = {};\r\n\r\n  private workers: QueryableWorker[] = [];\r\n  private curWorkerNum = 0;\r\n\r\n  private log = logger('LOTTIE', LogTypes.Error);\r\n\r\n  constructor() {\r\n    rootScope.addEventListener('theme_changed', () => {\r\n      for(const reqId in this.players) {\r\n        this.players[reqId].applyColorForAllContexts();\r\n      }\r\n    });\r\n  }\r\n\r\n  public getAnimation(element: HTMLElement) {\r\n    for(const i in this.players) {\r\n      if(this.players[i].el.includes(element)) {\r\n        return this.players[i];\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  public loadLottieWorkers() {\r\n    if(this.loadPromise) {\r\n      return this.loadPromise;\r\n    }\r\n\r\n    return this.loadPromise = new Promise((resolve, reject) => {\r\n      let remain = this.workersLimit;\r\n      for(let i = 0; i < this.workersLimit; ++i) {\r\n        const worker = new Worker(new URL('./rlottie.worker.ts', import.meta.url), {type: 'module'});\r\n        const queryableWorker = this.workers[i] = new QueryableWorker(worker);\r\n\r\n        queryableWorker.addEventListener('ready', () => {\r\n          this.log('worker #' + i + ' ready');\r\n\r\n          queryableWorker.addEventListener('frame', this.onFrame);\r\n          queryableWorker.addEventListener('loaded', this.onPlayerLoaded);\r\n          queryableWorker.addEventListener('error', this.onPlayerError);\r\n\r\n          --remain;\r\n          if(!remain) {\r\n            this.log('workers ready');\r\n            resolve();\r\n            this.loaded = true;\r\n          }\r\n        }, {once: true});\r\n\r\n        queryableWorker.addEventListener('workerError', (error) => {\r\n          reject('rlottie load error: ' + error.message);\r\n          this.loaded = false;\r\n        }, {once: true});\r\n      }\r\n    });\r\n  }\r\n\r\n  public makeAssetUrl(name: LottieAssetName) {\r\n    return 'assets/tgs/' + name + '.json';\r\n  }\r\n\r\n  public loadAnimationAsAsset(params: Omit<RLottieOptions, 'animationData' | 'name'>, name: LottieAssetName) {\r\n    // (params as RLottieOptions).name = name;\r\n    return this.loadAnimationFromURL(params, this.makeAssetUrl(name));\r\n  }\r\n\r\n  public loadAnimationDataFromURL(url: string, method: 'json'): Promise<any>;\r\n  public loadAnimationDataFromURL(url: string, method?: 'blob'): Promise<Blob>;\r\n  public loadAnimationDataFromURL(url: string, method: 'json' | 'blob' = 'blob'): Promise<Blob | any> {\r\n    if(!IS_WEB_ASSEMBLY_SUPPORTED) {\r\n      return this.loadPromise as any;\r\n    }\r\n\r\n    this.loadLottieWorkers();\r\n\r\n    return fetch(url)\r\n    .then((res) => {\r\n      if(!res.headers || res.headers.get('content-type') === 'application/octet-stream') {\r\n        return res.arrayBuffer()\r\n        .then((data) => apiManagerProxy.invokeCrypto('gzipUncompress', data))\r\n        .then((arr) => blobConstruct(arr as Uint8Array, ''));\r\n      } else {\r\n        return res[method]();\r\n      }\r\n    });\r\n    /* .then((str) => {\r\n      return new Promise<string>((resolve) => setTimeout(() => resolve(str), 2e3));\r\n    }) */\r\n  }\r\n\r\n  public loadAnimationFromURLManually(name: LottieAssetName) {\r\n    const url = this.makeAssetUrl(name);\r\n    return this.loadAnimationDataFromURL(url).then((blob) => {\r\n      return (params: Omit<RLottieOptions, 'animationData'>) => this.loadAnimationFromURLNext(blob, params, url);\r\n    });\r\n  }\r\n\r\n  public loadAnimationFromURL(params: Omit<RLottieOptions, 'animationData'>, url: string) {\r\n    return this.loadAnimationDataFromURL(url).then((blob) => {\r\n      return this.loadAnimationFromURLNext(blob, params, url);\r\n    });\r\n  }\r\n\r\n  public loadAnimationFromURLNext(blob: Blob, params: Omit<RLottieOptions, 'animationData'>, url: string) {\r\n    const newParams = Object.assign(params, {animationData: blob, needUpscale: true});\r\n    newParams.name ||= url;\r\n    return this.loadAnimationWorker(newParams);\r\n  }\r\n\r\n  public waitForFirstFrame(player: RLottiePlayer) {\r\n    return Promise.race([\r\n      /* new Promise<void>((resolve) => {\r\n        player.addEventListener('firstFrame', () => {\r\n          setTimeout(() => resolve(), 1500);\r\n        }, true);\r\n      }) */\r\n      new Promise<void>((resolve) => {\r\n        player.addEventListener('firstFrame', resolve, {once: true});\r\n      }),\r\n      pause(2500)\r\n    ]).then(() => player);\r\n  }\r\n\r\n  public async loadAnimationWorker(params: RLottieOptions): Promise<RLottiePlayer> {\r\n    if(!IS_WEB_ASSEMBLY_SUPPORTED) {\r\n      return this.loadPromise as any;\r\n    }\r\n\r\n    if(!this.loaded) {\r\n      await this.loadLottieWorkers();\r\n    }\r\n\r\n    const {middleware, group = ''} = params;\r\n    if(middleware && !middleware()) {\r\n      throw makeError('MIDDLEWARE');\r\n    }\r\n\r\n    if(params.sync) {\r\n      const cacheName = RLottiePlayer.CACHE.generateName(params.name, params.width, params.height, params.color, params.toneIndex);\r\n      const players = this.playersByCacheName[cacheName];\r\n      if(players?.size) {\r\n        return Promise.resolve(players.entries().next().value[0]);\r\n      }\r\n    }\r\n\r\n    const containers = Array.isArray(params.container) ? params.container : [params.container];\r\n    if(!params.width || !params.height) {\r\n      params.width = parseInt(containers[0].style.width);\r\n      params.height = parseInt(containers[0].style.height);\r\n    }\r\n\r\n    if(!params.width || !params.height) {\r\n      throw new Error('No size for sticker!');\r\n    }\r\n\r\n    params.group = group;\r\n\r\n    const player = this.initPlayer(containers, params);\r\n\r\n    animationIntersector.addAnimation({\r\n      animation: player,\r\n      group,\r\n      observeElement: player.el[0],\r\n      controlled: middleware,\r\n      liteModeKey: params.liteModeKey,\r\n      type: 'lottie'\r\n    });\r\n\r\n    params.middleware?.onDestroy(() => {\r\n      player.remove();\r\n    });\r\n\r\n    return player;\r\n  }\r\n\r\n  private onPlayerLoaded = (reqId: number, frameCount: number, fps: number) => {\r\n    const player = this.players[reqId];\r\n    if(!player) {\r\n      this.log.warn('onPlayerLoaded on destroyed player:', reqId, frameCount);\r\n      return;\r\n    }\r\n\r\n    this.log.debug('onPlayerLoaded');\r\n    player.onLoad(frameCount, fps);\r\n  };\r\n\r\n  private onFrame = (reqId: number, frameNo: number, frame: Uint8ClampedArray | ImageBitmap) => {\r\n    const player = this.players[reqId];\r\n    if(!player) {\r\n      this.log.warn('onFrame on destroyed player:', reqId, frameNo);\r\n      return;\r\n    }\r\n\r\n    if(player.clamped !== undefined && frame instanceof Uint8ClampedArray) {\r\n      player.clamped = frame;\r\n    }\r\n\r\n    player.renderFrame(frame, frameNo);\r\n  };\r\n\r\n  private onPlayerError = (reqId: number, error: Error) => {\r\n    const player = this.players[reqId];\r\n    if(!player) {\r\n      return;\r\n    }\r\n\r\n    // ! will need refactoring later, this is not the best way to remove the animation\r\n    const animations = animationIntersector.getAnimations(player.el[0]);\r\n    animations.forEach((animation) => {\r\n      animationIntersector.removeAnimation(animation);\r\n    });\r\n  };\r\n\r\n  public onDestroy(reqId: number) {\r\n    delete this.players[reqId];\r\n  }\r\n\r\n  public destroyWorkers() {\r\n    if(!IS_WEB_ASSEMBLY_SUPPORTED) {\r\n      return;\r\n    }\r\n\r\n    this.workers.forEach((worker, idx) => {\r\n      worker.terminate();\r\n      this.log('worker #' + idx + ' terminated');\r\n    });\r\n\r\n    this.log('workers destroyed');\r\n    this.workers.length = 0;\r\n    this.curWorkerNum = 0;\r\n    this.loaded = false;\r\n    this.loadPromise = undefined;\r\n  }\r\n\r\n  private initPlayer(el: RLottiePlayer['el'], options: RLottieOptions) {\r\n    const player = new RLottiePlayer({\r\n      el,\r\n      worker: this.workers[this.curWorkerNum++],\r\n      options\r\n    });\r\n\r\n    const {reqId, cacheName} = player;\r\n    this.players[reqId] = player;\r\n\r\n    const playersByCacheName = cacheName ? this.playersByCacheName[cacheName] ??= new Set() : undefined;\r\n    if(cacheName) {\r\n      playersByCacheName.add(player);\r\n    }\r\n\r\n    if(this.curWorkerNum >= this.workers.length) {\r\n      this.curWorkerNum = 0;\r\n    }\r\n\r\n    player.addEventListener('destroy', () => {\r\n      this.onDestroy(reqId);\r\n      if(playersByCacheName.delete(player) && !playersByCacheName.size) {\r\n        delete this.playersByCacheName[cacheName];\r\n      }\r\n    });\r\n\r\n    player.loadFromData(options.animationData);\r\n\r\n    return player;\r\n  }\r\n}\r\n\r\nconst lottieLoader = new LottieLoader();\r\nMOUNT_CLASS_TO.lottieLoader = lottieLoader;\r\nexport default lottieLoader;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nexport default function replaceContent(elem: HTMLElement, node: string | Node) {\r\n  if(typeof(node) === 'string') {\r\n    elem.textContent = node;\r\n    return;\r\n  }\r\n\r\n  // * children.length doesn't count text nodes\r\n  const firstChild = elem.firstChild;\r\n  if(firstChild) {\r\n    if(elem.lastChild === firstChild) {\r\n      firstChild.replaceWith(node);\r\n    } else {\r\n      elem.textContent = '';\r\n      elem.append(node);\r\n    }\r\n  } else {\r\n    elem.append(node);\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nexport default function toggleDisability(elements: HTMLElement | HTMLElement[], disable: boolean): () => void {\r\n  if(!Array.isArray(elements)) {\r\n    elements = [elements];\r\n  }\r\n\r\n  if(disable) {\r\n    elements.forEach((el) => el.setAttribute('disabled', 'true'));\r\n  } else {\r\n    elements.forEach((el) => el.removeAttribute('disabled'));\r\n  }\r\n\r\n  return () => toggleDisability(elements, !disable);\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\nimport IS_TOUCH_SUPPORTED from '../../environment/touchSupport';\r\n\r\nexport default function placeCaretAtEnd(el: HTMLElement, ignoreTouchCheck = false, focus = true) {\r\n  if(IS_TOUCH_SUPPORTED && (!ignoreTouchCheck || (document.activeElement.tagName !== 'INPUT' && !(document.activeElement as HTMLElement).isContentEditable))) {\r\n    return;\r\n  }\r\n\r\n  focus && el.focus();\r\n  if(el instanceof HTMLInputElement) {\r\n    const length = el.value.length;\r\n    el.selectionStart = length;\r\n    el.selectionEnd = length;\r\n  } else {\r\n    const range = document.createRange();\r\n    range.selectNodeContents(el);\r\n    range.collapse(false);\r\n    const sel = window.getSelection();\r\n    sel.removeAllRanges();\r\n    sel.addRange(range);\r\n  }\r\n}\r\n\r\n(window as any).placeCaretAtEnd = placeCaretAtEnd;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\ntype TargetType = HTMLElement;\r\nexport type OnVisibilityChangeItem = {target: TargetType, visible: boolean, entry: IntersectionObserverEntry, index: number};\r\nexport type OnVisibilityChange = (item: OnVisibilityChangeItem) => void;\r\n\r\nexport default class VisibilityIntersector {\r\n  private observer: IntersectionObserver;\r\n  private items: Map<TargetType, boolean> = new Map();\r\n  private locked = false;\r\n\r\n  constructor(onVisibilityChange: OnVisibilityChange, options?: IntersectionObserverInit) {\r\n    this.observer = new IntersectionObserver((entries) => {\r\n      if(this.locked) {\r\n        return;\r\n      }\r\n\r\n      const changed: OnVisibilityChangeItem[] = [];\r\n\r\n      entries.forEach((entry, index) => {\r\n        const target = entry.target as TargetType;\r\n\r\n        if(this.items.get(target) === entry.isIntersecting) {\r\n          return;\r\n        } else {\r\n          this.items.set(target, entry.isIntersecting);\r\n        }\r\n\r\n        /* if(entry.isIntersecting) {\r\n          console.log('ooo', entry);\r\n        } */\r\n\r\n        /* if(this.locked) {\r\n          return;\r\n        } */\r\n\r\n        const change: typeof changed[0] = {target, visible: entry.isIntersecting, entry, index};\r\n\r\n        // ! order will be incorrect so can't use it\r\n        // changed[entry.isIntersecting ? 'unshift' : 'push'](change);\r\n        changed.push(change);\r\n\r\n        // onVisibilityChange(target, entry.isIntersecting);\r\n      });\r\n\r\n      changed.forEach((item) => {\r\n        onVisibilityChange(item);\r\n      });\r\n    }, options);\r\n  }\r\n\r\n  public getVisible() {\r\n    const items: TargetType[] = [];\r\n    this.items.forEach((value, key) => {\r\n      if(value) {\r\n        items.push(key);\r\n      }\r\n    });\r\n\r\n    return items;\r\n  }\r\n\r\n  public clearVisible() {\r\n    const visible = this.getVisible();\r\n    for(const target of visible) {\r\n      this.items.set(target, false);\r\n    }\r\n  }\r\n\r\n  public isVisible(target: TargetType) {\r\n    return this.items.get(target);\r\n  }\r\n\r\n  public disconnect() {\r\n    this.observer.disconnect();\r\n    this.items.clear();\r\n  }\r\n\r\n  public refresh() {\r\n    this.observer.disconnect();\r\n\r\n    // window.requestAnimationFrame(() => {\r\n    const targets = [...this.items.keys()];\r\n    for(const target of targets) {\r\n      // this.items.set(target, false);\r\n      this.observer.observe(target);\r\n    }\r\n    // });\r\n  }\r\n\r\n  public refreshVisible() {\r\n    const visible = this.getVisible();\r\n    for(const target of visible) {\r\n      this.observer.unobserve(target);\r\n    }\r\n\r\n    for(const target of visible) {\r\n      this.observer.observe(target);\r\n    }\r\n  }\r\n\r\n  public observe(target: TargetType) {\r\n    this.items.set(target, false);\r\n    this.observer.observe(target);\r\n  }\r\n\r\n  public unobserve(target: TargetType) {\r\n    this.observer.unobserve(target);\r\n    this.items.delete(target);\r\n  }\r\n\r\n  public unlock() {\r\n    this.locked = false;\r\n  }\r\n\r\n  public unlockAndRefresh() {\r\n    this.unlock();\r\n    this.refresh();\r\n  }\r\n\r\n  public lock() {\r\n    this.locked = true;\r\n  }\r\n}\r\n","export default function findAndSpliceAll<T>(array: Array<T>, verify: (value: T, index: number, arr: typeof array) => boolean) {\r\n  const out: typeof array = [];\r\n  let idx = -1;\r\n  while((idx = array.findIndex(verify)) !== -1) {\r\n    out.push(array.splice(idx, 1)[0]);\r\n  }\r\n\r\n  return out;\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport indexOfAndSplice from '../helpers/array/indexOfAndSplice';\r\nimport {Middleware} from '../helpers/middleware';\r\nimport throttle from '../helpers/schedulers/throttle';\r\nimport {logger, LogTypes} from '../lib/logger';\r\n\r\nconst PARALLEL_LIMIT = 8;\r\nconst IGNORE_ERRORS: Set<ErrorType> = new Set(['NO_ENTRY_FOUND', 'STORAGE_OFFLINE', 'MIDDLEWARE', 'NO_AUTO_DOWNLOAD']);\r\n\r\nexport type LazyLoadElementBase = {\r\n  load: () => Promise<any>,\r\n  middleware?: Middleware\r\n};\r\n\r\nexport default class LazyLoadQueueBase {\r\n  public queueId = 0;\r\n  protected queue: Array<LazyLoadElementBase> = [];\r\n  protected inProcess: Set<LazyLoadElementBase> = new Set();\r\n\r\n  protected lockPromise: Promise<void> = null;\r\n  protected unlockResolve: () => void = null;\r\n\r\n  protected log = logger('LL', LogTypes.Error);\r\n  protected processQueue: () => void;\r\n\r\n  constructor(protected parallelLimit = PARALLEL_LIMIT) {\r\n    this.processQueue = throttle(() => this._processQueue(), 8, false);\r\n  }\r\n\r\n  public clear() {\r\n    this.inProcess.clear(); // ацтеки забьются, будет плохо\r\n\r\n    this.queue.length = 0;\r\n    // unreachable code\r\n    /* for(let item of this.inProcess) {\r\n      this.lazyLoadMedia.push(item);\r\n    } */\r\n  }\r\n\r\n  public lock() {\r\n    if(this.lockPromise) return;\r\n\r\n    // const perf = performance.now();\r\n    this.lockPromise = new Promise((resolve, reject) => {\r\n      this.unlockResolve = resolve;\r\n    });\r\n\r\n    /* if(DEBUG) {\r\n      this.lockPromise.then(() => {\r\n        this.log('was locked for:', performance.now() - perf);\r\n      });\r\n    } */\r\n  }\r\n\r\n  public unlock() {\r\n    if(!this.unlockResolve) return;\r\n\r\n    this.unlockResolve();\r\n    this.unlockResolve = this.lockPromise = null;\r\n\r\n    this.processQueue();\r\n  }\r\n\r\n  protected async processItem(item: LazyLoadElementBase) {\r\n    if(this.lockPromise) {\r\n      return;\r\n    }\r\n\r\n    this.inProcess.add(item);\r\n\r\n    /* if(DEBUG) {\r\n      this.log('will load media', this.lockPromise, item);\r\n    } */\r\n\r\n    try {\r\n      // await new Promise((resolve) => setTimeout(resolve, 2e3));\r\n      // await new Promise((resolve, reject) => window.requestAnimationFrame(() => window.requestAnimationFrame(resolve)));\r\n      // await item.load(item.div);\r\n      await this.loadItem(item);\r\n    } catch(err) {\r\n      if(!IGNORE_ERRORS.has((err as ApiError)?.type)) {\r\n        this.log.error('loadMediaQueue error:', err/* , item */);\r\n      }\r\n    }\r\n\r\n    this.inProcess.delete(item);\r\n\r\n    /* if(DEBUG) {\r\n      this.log('loaded media', item);\r\n    } */\r\n\r\n    this.processQueue();\r\n  }\r\n\r\n  protected loadItem(item: LazyLoadElementBase) {\r\n    return item.load();\r\n  }\r\n\r\n  protected getItem() {\r\n    return this.queue.shift();\r\n  }\r\n\r\n  protected addElement(method: 'push' | 'unshift', el: LazyLoadElementBase) {\r\n    this.queue[method](el);\r\n    this.processQueue();\r\n  }\r\n\r\n  protected _processQueue(item?: LazyLoadElementBase) {\r\n    if(!this.queue.length || this.lockPromise || (this.parallelLimit > 0 && this.inProcess.size >= this.parallelLimit)) return;\r\n\r\n    // console.log('_processQueue start');\r\n    // let added = 0;\r\n    do {\r\n      if(item) {\r\n        indexOfAndSplice(this.queue, item);\r\n      } else {\r\n        item = this.getItem();\r\n      }\r\n\r\n      if(item) {\r\n        this.processItem(item);\r\n      } else {\r\n        break;\r\n      }\r\n\r\n      item = null;\r\n      // ++added;\r\n    } while(this.inProcess.size < this.parallelLimit && this.queue.length);\r\n    // console.log('_processQueue end, added', added, this.queue.length);\r\n  }\r\n\r\n  public push(el: LazyLoadElementBase) {\r\n    this.addElement('push', el);\r\n  }\r\n\r\n  public unshift(el: LazyLoadElementBase) {\r\n    this.addElement('unshift', el);\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport findAndSpliceAll from '../helpers/array/findAndSpliceAll';\r\nimport LazyLoadQueueBase, {LazyLoadElementBase} from './lazyLoadQueueBase';\r\nimport VisibilityIntersector from './visibilityIntersector';\r\n\r\nexport type LazyLoadElement = Omit<LazyLoadElementBase, 'load'> & {\r\n  load: (target?: HTMLElement) => Promise<any>,\r\n  div: HTMLElement\r\n  wasSeen?: boolean,\r\n  visible?: boolean\r\n};\r\n\r\nexport default class LazyLoadQueueIntersector extends LazyLoadQueueBase {\r\n  protected queue: Array<LazyLoadElement> = [];\r\n  protected inProcess: Set<LazyLoadElement> = new Set();\r\n\r\n  public intersector: VisibilityIntersector;\r\n  protected intersectorTimeout: number;\r\n\r\n  constructor(parallelLimit?: number) {\r\n    super(parallelLimit);\r\n  }\r\n\r\n  public lock() {\r\n    super.lock();\r\n    this.intersector.lock();\r\n  }\r\n\r\n  public unlock() {\r\n    super.unlock();\r\n    this.intersector.unlock();\r\n  }\r\n\r\n  public unlockAndRefresh() {\r\n    super.unlock();\r\n    this.intersector.unlockAndRefresh();\r\n  }\r\n\r\n  public clear() {\r\n    super.clear();\r\n    this.intersector.disconnect();\r\n  }\r\n\r\n  public refresh() {\r\n    this.intersector.refresh();\r\n  }\r\n\r\n  protected loadItem(item: LazyLoadElement) {\r\n    return item.load(item.div);\r\n  }\r\n\r\n  protected addElement(method: 'push' | 'unshift', el: LazyLoadElement) {\r\n    const item = this.queue.find((i) => i.div === el.div && i.load === el.load);\r\n    if(item) {\r\n      return false;\r\n    } else {\r\n      for(const item of this.inProcess) {\r\n        if(item.div === el.div && item.load === el.load) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.queue[method](el);\r\n    return true;\r\n  }\r\n\r\n  protected setProcessQueueTimeout() {\r\n    this.intersectorTimeout ??= window.setTimeout(() => {\r\n      this.intersectorTimeout = undefined;\r\n      this.processQueue();\r\n    }, 0);\r\n  }\r\n\r\n  public push(el: LazyLoadElement) {\r\n    super.push(el);\r\n  }\r\n\r\n  public unshift(el: LazyLoadElement) {\r\n    super.unshift(el);\r\n  }\r\n\r\n  public delete(el: Omit<LazyLoadElement, 'load'>) {\r\n    findAndSpliceAll(this.queue, (i) => i.div === el.div);\r\n    this.unobserve(el);\r\n  }\r\n\r\n  public observe(el: LazyLoadElement) {\r\n    this.intersector.observe(el.div);\r\n  }\r\n\r\n  public unobserve(el: Omit<LazyLoadElement, 'load'>) {\r\n    this.intersector.unobserve(el.div);\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport VisibilityIntersector, {OnVisibilityChangeItem} from './visibilityIntersector';\r\nimport findAndSpliceAll from '../helpers/array/findAndSpliceAll';\r\nimport findAndSplice from '../helpers/array/findAndSplice';\r\nimport LazyLoadQueueIntersector, {LazyLoadElement} from './lazyLoadQueueIntersector';\r\nimport useHeavyAnimationCheck from '../hooks/useHeavyAnimationCheck';\r\n\r\nexport default class LazyLoadQueue extends LazyLoadQueueIntersector {\r\n  constructor(parallelLimit?: number, ignoreHeavyAnimation?: boolean) {\r\n    super(parallelLimit);\r\n\r\n    this.intersector = new VisibilityIntersector(this.onVisibilityChange);\r\n\r\n    !ignoreHeavyAnimation && useHeavyAnimationCheck(() => {\r\n      this.lock();\r\n    }, () => {\r\n      this.unlockAndRefresh();\r\n    });\r\n  }\r\n\r\n  private onVisibilityChange = ({target, visible}: OnVisibilityChangeItem) => {\r\n    // if(DEBUG) {\r\n    //   this.log('isIntersecting', target, visible);\r\n    // }\r\n\r\n    // if visible - will move to the end of visible arary\r\n    findAndSpliceAll(this.queue, (i) => i.div === target).forEach((item) => {\r\n      if(visible) {\r\n        item.wasSeen = true;\r\n      }\r\n\r\n      item.visible = visible;\r\n      const index = this.queue.findIndex((item) => !item.visible);\r\n      this.queue.splice(Math.max(0, index), 0, item);\r\n    });\r\n\r\n    this.setProcessQueueTimeout();\r\n  };\r\n\r\n  protected getItem() {\r\n    return findAndSplice(this.queue, (item) => item.wasSeen);\r\n  }\r\n\r\n  public async processItem(item: LazyLoadElement) {\r\n    await super.processItem(item);\r\n    this.intersector.unobserve(item.div);\r\n  }\r\n\r\n  protected addElement(method: 'push' | 'unshift', el: LazyLoadElement) {\r\n    const inserted = super.addElement(method, el);\r\n\r\n    if(!inserted) return false;\r\n\r\n    this.observe(el);\r\n    /* if(el.wasSeen) {\r\n      this.processQueue(el);\r\n    } else  */\r\n    el.wasSeen ??= false;\r\n\r\n    return true;\r\n  }\r\n\r\n  public setAllSeen() {\r\n    this.queue.forEach((item) => {\r\n      item.wasSeen = true;\r\n    });\r\n\r\n    this.setProcessQueueTimeout();\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\n/**\r\n  * https://core.telegram.org/api/files#vector-thumbnails\r\n  */\r\nexport default function getPathFromBytes(bytes: Uint8Array) {\r\n  const lookup = 'AACAAAAHAAALMAAAQASTAVAAAZaacaaaahaaalmaaaqastava.az0123456789-,';\r\n\r\n  let path = 'M';\r\n  for(let i = 0, length = bytes.length; i < length; ++i) {\r\n    const num = bytes[i];\r\n\r\n    if(num >= (128 + 64)) {\r\n      path += lookup[num - 128 - 64];\r\n    } else {\r\n      if(num >= 128) {\r\n        path += ',';\r\n      } else if(num >= 64) {\r\n        path += '-';\r\n      }\r\n      path += '' + (num & 63);\r\n    }\r\n  }\r\n  path += 'z';\r\n\r\n  return path;\r\n}\r\n","let outCanvas: HTMLCanvasElement,\r\n  outContext: CanvasRenderingContext2D;\r\n\r\n// https://github.com/telegramdesktop/tdesktop/blob/543bfab24a76402992421063f1e6444f347d31fe/Telegram/SourceFiles/boxes/sticker_set_box.cpp#L75\r\nexport default function computeLockColor(canvas: HTMLCanvasElement) {\r\n  if(!outCanvas) {\r\n    outCanvas = document.createElement('canvas');\r\n    outContext = outCanvas.getContext('2d');\r\n  }\r\n\r\n  const context = canvas.getContext('2d');\r\n  const size = 20 * (canvas.dpr ?? 1);\r\n  const width = size;\r\n  const height = size;\r\n  const skipx = (canvas.width - width) / 2;\r\n  const margin = 0/*  * (canvas.dpr ?? 1) */;\r\n  const skipy = canvas.height - height - margin;\r\n  const imageData = context.getImageData(skipx, skipy, width, height).data;\r\n  let sr = 0, sg = 0, sb = 0, sa = 0;\r\n  for(let i = 0; i < imageData.length; i += 4) {\r\n    sr += imageData[i];\r\n    sg += imageData[i + 1];\r\n    sb += imageData[i + 2];\r\n    sa += imageData[i + 3];\r\n  }\r\n\r\n  outCanvas.width = outCanvas.height = size;\r\n  const color = new Uint8ClampedArray([sr * 255 / sa, sg * 255 / sa, sb * 255 / sa, 255]);\r\n  const rgba = `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${color[3]})`;\r\n  outContext.fillStyle = rgba;\r\n  outContext.fillRect(0, 0, size, size);\r\n  outContext.fillStyle = `rgba(112, 117, 121, 0.3)`;\r\n  outContext.fillRect(0, 0, size, size);\r\n  // document.querySelector('.popup-title').append(c);\r\n  return outCanvas.toDataURL('image/jpeg');\r\n}\r\n","import {getHeavyAnimationPromise} from '../../hooks/useHeavyAnimationCheck';\r\nimport {Middleware} from '../middleware';\r\n\r\n// const createdVideos: HTMLVideoElement[] = [];\r\nexport default function createVideo({\r\n  pip,\r\n  middleware\r\n}: {\r\n  pip?: boolean,\r\n  middleware: Middleware\r\n}) {\r\n  const video = document.createElement('video');\r\n  if(!pip) video.disablePictureInPicture = true;\r\n  video.setAttribute('playsinline', 'true');\r\n  // createdVideos.push(video);\r\n\r\n  middleware?.onDestroy(async() => {\r\n    await getHeavyAnimationPromise();\r\n    video.src = '';\r\n    video.load();\r\n  });\r\n\r\n  return video;\r\n}\r\n\r\n// (window as any).createdVideos = createdVideos;\r\n","import {IS_APPLE_MOBILE} from '../environment/userAgent';\r\n\r\nexport function shouldIgnoreVideoError(e: ErrorEvent) {\r\n  try {\r\n    const target = e.target as HTMLVideoElement;\r\n    const shouldIgnore = target.error.message.includes('URL safety check');\r\n    if(shouldIgnore) {\r\n      console.warn('will ignore video error', e);\r\n    }\r\n    return shouldIgnore;\r\n  } catch(err) {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default function onMediaLoad(media: HTMLMediaElement, readyState = media.HAVE_METADATA, useCanplayOnIos?: boolean) {\r\n  return new Promise<void>((resolve, reject) => {\r\n    if(media.readyState >= readyState) {\r\n      resolve();\r\n      return;\r\n    }\r\n\r\n    const loadEventName = IS_APPLE_MOBILE && !useCanplayOnIos ? 'loadeddata' : 'canplay';\r\n    const errorEventName = 'error';\r\n    const onLoad = () => {\r\n      media.removeEventListener(errorEventName, onError);\r\n      resolve();\r\n    };\r\n    const onError = (e: ErrorEvent) => {\r\n      if(shouldIgnoreVideoError(e)) {\r\n        return;\r\n      }\r\n\r\n      media.removeEventListener(loadEventName, onLoad);\r\n      media.removeEventListener(errorEventName, onError);\r\n      reject(media.error);\r\n    };\r\n    media.addEventListener(loadEventName, onLoad, {once: true});\r\n    media.addEventListener(errorEventName, onError);\r\n  });\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport onMediaLoad from '../onMediaLoad';\r\n\r\n// import { getHeavyAnimationPromise } from \"../../hooks/useHeavyAnimationCheck\";\r\n\r\nexport const loadedURLs: {[url: string]: boolean} = {};\r\nconst set = (elem: HTMLElement | HTMLImageElement | SVGImageElement | HTMLVideoElement, url: string) => {\r\n  if(elem instanceof HTMLImageElement || elem instanceof HTMLVideoElement) elem.src = url;\r\n  else if(elem instanceof SVGImageElement) elem.setAttributeNS(null, 'href', url);\r\n  else elem.style.backgroundImage = 'url(' + url + ')';\r\n};\r\n\r\n// проблема функции в том, что она не подходит для ссылок, пригодна только для blob'ов, потому что обычным ссылкам нужен 'load' каждый раз.\r\nexport default function renderImageFromUrl(\r\n  elem: HTMLElement | HTMLImageElement | SVGImageElement | HTMLVideoElement,\r\n  url: string,\r\n  callback?: () => void,\r\n  useCache?: boolean,\r\n  processImageOnLoad?: (image: HTMLImageElement) => void\r\n): MaybePromise<void> {\r\n  if(processImageOnLoad) useCache = false;\r\n  useCache ??= processImageOnLoad === undefined;\r\n\r\n  if(!url) {\r\n    console.error('renderImageFromUrl: no url?', elem, url);\r\n    callback?.();\r\n    return;\r\n  }\r\n\r\n  const isVideo = elem instanceof HTMLVideoElement;\r\n  if(((loadedURLs[url]/*  && false */) && useCache) || isVideo) {\r\n    /* if(isVideo) {\r\n      const source = document.createElement('source');\r\n      source.src = url;\r\n      source.type = 'video/webm';\r\n      elem.append(source);\r\n    } else  */if(elem) {\r\n      set(elem, url);\r\n    }\r\n\r\n    if(callback) {\r\n      if(isVideo) {\r\n        return onMediaLoad(elem).then(callback);\r\n      } else {\r\n        callback?.();\r\n      }\r\n      // callback && getHeavyAnimationPromise().then(() => callback());\r\n    }\r\n  } else {\r\n    const isImage = elem instanceof HTMLImageElement;\r\n    const loader = isImage ? elem : new Image();\r\n    // const loader = new Image();\r\n    // let perf = performance.now();\r\n\r\n    const onLoad = () => {\r\n      if(!isImage && elem) {\r\n        set(elem, url);\r\n      }\r\n\r\n      loadedURLs[url] = true;\r\n      // console.log('onload:', url, performance.now(), loader.naturalWidth, loader.naturalHeight);\r\n      processImageOnLoad?.(loader);\r\n      // TODO: переделать прогрузки аватаров до начала анимации, иначе с этим ожиданием они неприятно появляются\r\n      // callback && getHeavyAnimationPromise().then(() => callback());\r\n      callback?.();\r\n\r\n      // if(loader.naturalWidth) {\r\n      //   const interval = setInterval(() => {\r\n      //     if(!loader.naturalWidth) {\r\n      //       const parents = getParents(loader);\r\n      //       console.warn('image no dimensions', loader.isConnected, parents, (parents[parents.length - 1] as HTMLElement).outerHTML, loader.src === url);\r\n      //     }\r\n      //   }, 1);\r\n\r\n      //   setTimeout(() => clearInterval(interval), 1e3);\r\n      // }\r\n    };\r\n\r\n    const onError = (err: DOMException) => {\r\n      if(!err.message.includes('cannot be decoded')) {\r\n        console.error('Render image from url failed:', err, url, loader, err.message, loader.naturalWidth);\r\n      }\r\n\r\n      callback?.();\r\n    };\r\n\r\n    loader.decoding = 'async';\r\n    loader.src = url;\r\n    return loader.decode().then(onLoad, onError);\r\n    // const timeout = setTimeout(() => {\r\n    //   console.error('not yet decoded', loader, url);\r\n    //   debugger;\r\n    // }, 1e3);\r\n    // decodePromise.finally(() => {\r\n    //   clearTimeout(timeout);\r\n    // });\r\n  }\r\n}\r\n\r\nexport function renderImageFromUrlPromise(\r\n  elem: Parameters<typeof renderImageFromUrl>[0],\r\n  url: string,\r\n  useCache?: boolean,\r\n  processImageOnLoad?: (image: HTMLImageElement) => void\r\n) {\r\n  return new Promise<void>((resolve) => {\r\n    renderImageFromUrl(elem, url, resolve, useCache, processImageOnLoad);\r\n  });\r\n}\r\n","export default function bytesFromHex(hexString: string) {\r\n  const len = hexString.length;\r\n  const bytes = new Uint8Array(Math.ceil(len / 2));\r\n  let start = 0;\r\n\r\n  if(len % 2) { // read 0x581 as 0x0581\r\n    bytes[start++] = parseInt(hexString.charAt(0), 16);\r\n  }\r\n\r\n  for(let i = start; i < len; i += 2) {\r\n    bytes[start++] = parseInt(hexString.substr(i, 2), 16);\r\n  }\r\n\r\n  return bytes;\r\n}\r\n","export default function bytesToDataURL(bytes: Uint8Array, mimeType: string = 'image/jpeg') {\r\n  return `data:${mimeType};base64,${btoa(String.fromCharCode(...bytes))}`;\r\n}\r\n","export default function convertToUint8Array(bytes: Uint8Array | ArrayBuffer | number[] | string): Uint8Array {\r\n  if(bytes instanceof Uint8Array) {\r\n    return bytes;\r\n  } else if(typeof(bytes) === 'string') {\r\n    return new TextEncoder().encode(bytes);\r\n  }\r\n\r\n  return new Uint8Array(bytes);\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {IS_SAFARI} from '../../environment/userAgent';\r\nimport bytesFromHex from './bytesFromHex';\r\nimport bytesToDataURL from './bytesToDataURL';\r\nimport convertToUint8Array from './convertToUint8Array';\r\n\r\nconst JPEG_HEADER_HEX = 'ffd8ffe000104a46494600010100000100010000ffdb004300281c1e231e19282321232d2b28303c64413c37373c7b585d4964918099968f808c8aa0b4e6c3a0aadaad8a8cc8ffcbdaeef5ffffff9bc1fffffffaffe6fdfff8ffdb0043012b2d2d3c353c76414176f8a58ca5f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8ffc00011080000000003012200021101031101ffc4001f0000010501010101010100000000000000000102030405060708090a0bffc400b5100002010303020403050504040000017d01020300041105122131410613516107227114328191a1082342b1c11552d1f02433627282090a161718191a25262728292a3435363738393a434445464748494a535455565758595a636465666768696a737475767778797a838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae1e2e3e4e5e6e7e8e9eaf1f2f3f4f5f6f7f8f9faffc4001f0100030101010101010101010000000000000102030405060708090a0bffc400b51100020102040403040705040400010277000102031104052131061241510761711322328108144291a1b1c109233352f0156272d10a162434e125f11718191a262728292a35363738393a434445464748494a535455565758595a636465666768696a737475767778797a82838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae2e3e4e5e6e7e8e9eaf2f3f4f5f6f7f8f9faffda000c03010002110311003f00';\r\n\r\nconst JPEG_HEADER = bytesFromHex(JPEG_HEADER_HEX);\r\nconst JPEG_TAIL = bytesFromHex('ffd9');\r\n\r\nexport function getPreviewBytesFromURL(url: string) {\r\n  const needle = 'base64,';\r\n  const sliced = url.slice(url.indexOf(needle) + needle.length);\r\n  const jpegBytes = [...atob(sliced)].map((char) => char.charCodeAt(0));\r\n\r\n  return new Uint8Array(jpegBytes);\r\n  // console.log('getPreviewBytesFromURL', bytesToHex(jpegBytes));\r\n\r\n  // const n = JPEG_HEADER_HEX.slice(-10);\r\n  // const one = jpegBytes[164];\r\n  // const two = jpegBytes[166];\r\n\r\n  // const body = jpegBytes.slice(bytesToHex(jpegBytes).indexOf(n) / 2 + n.length / 2/* JPEG_HEADER.length */, jpegBytes.length - JPEG_TAIL.length);\r\n  // const original = new Uint8Array([\r\n  //   0xFF,\r\n  //   one,\r\n  //   two,\r\n  //   ...body\r\n  // ]);\r\n\r\n  // console.log(bytesToHex(body));\r\n\r\n  // return original;\r\n}\r\n\r\nexport default function getPreviewURLFromBytes(bytes: Uint8Array | number[], isSticker = false) {\r\n  let arr: Uint8Array;\r\n  if(!isSticker && bytes[0] === 0x1) {\r\n    arr = new Uint8Array(JPEG_HEADER.concat(Array.from(bytes.slice(3)), JPEG_TAIL));\r\n    arr[164] = bytes[1];\r\n    arr[166] = bytes[2];\r\n  } else {\r\n    arr = convertToUint8Array(bytes);\r\n  }\r\n\r\n  let mimeType: string;\r\n  if(isSticker) {\r\n    mimeType = IS_SAFARI ? 'image/png' : 'image/webp';\r\n  } else {\r\n    mimeType = 'image/jpeg';\r\n  }\r\n\r\n  const dataURL = bytesToDataURL(arr, mimeType);\r\n  return dataURL;\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {MyDocument} from '../lib/appManagers/appDocsManager';\r\nimport type {MyPhoto} from '../lib/appManagers/appPhotosManager';\r\nimport {PhotoSize} from '../layer';\r\n// import appDownloadManager from \"../lib/appManagers/appDownloadManager\";\r\nimport getPreviewURLFromBytes from './bytes/getPreviewURLFromBytes';\r\n\r\nexport default function getPreviewURLFromThumb(photo: MyPhoto | MyDocument, thumb: PhotoSize.photoCachedSize | PhotoSize.photoStrippedSize, isSticker = false) {\r\n  // const cacheContext = appDownloadManager.getCacheContext(photo, thumb.type);\r\n  // return cacheContext.url || (cacheContext.url = getPreviewURLFromBytes(thumb.bytes, isSticker));\r\n  return getPreviewURLFromBytes(thumb.bytes, isSticker);\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport deferredPromise, {CancellablePromise} from './cancellablePromise';\r\nimport {getHeavyAnimationPromise} from '../hooks/useHeavyAnimationCheck';\r\nimport {fastRaf} from './schedulers';\r\nimport {ArgumentTypes} from '../types';\r\n\r\ntype HeavyQueue<T extends HeavyQueue<any>> = {\r\n  items: ArgumentTypes<T['process']>[],\r\n  process: (...args: any[]) => ReturnType<T['process']>,\r\n  context: any,\r\n  promise?: CancellablePromise<ReturnType<T['process']>[]>\r\n};\r\nconst heavyQueue: HeavyQueue<any>[] = [];\r\nlet processingQueue = false;\r\n\r\nexport default function addHeavyTask<T extends HeavyQueue<T>>(queue: T, method: 'push' | 'unshift' = 'push') {\r\n  if(!queue.items.length) {\r\n    return Promise.resolve([]) as typeof promise;\r\n  }\r\n\r\n  const promise = queue.promise = deferredPromise();\r\n  heavyQueue[method](queue);\r\n  processHeavyQueue();\r\n\r\n  return promise;\r\n}\r\n\r\nfunction processHeavyQueue() {\r\n  if(!processingQueue) {\r\n    const queue = heavyQueue.shift();\r\n    timedChunk(queue).finally(() => {\r\n      processingQueue = false;\r\n      if(heavyQueue.length) {\r\n        processHeavyQueue();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction timedChunk<T extends HeavyQueue<T>>(queue: HeavyQueue<T>) {\r\n  if(!queue.items.length) {\r\n    queue.promise.resolve([] as any);\r\n    return Promise.resolve([]);\r\n  }\r\n\r\n  const todo = queue.items.slice();\r\n  const results: ReturnType<T['process']>[] = [];\r\n\r\n  return new Promise<typeof results>((resolve, reject) => {\r\n    const f = async() => {\r\n      const start = performance.now();\r\n\r\n      do {\r\n        await getHeavyAnimationPromise();\r\n        const possiblePromise = queue.process.apply(queue.context, todo.shift());\r\n        let realResult: typeof results[0];\r\n        // @ts-ignore\r\n        if(possiblePromise instanceof Promise) {\r\n          try {\r\n            realResult = await possiblePromise;\r\n          } catch(err) {\r\n            reject(err);\r\n            return;\r\n          }\r\n        } else {\r\n          realResult = possiblePromise;\r\n        }\r\n\r\n        results.push(realResult);\r\n      } while(todo.length > 0 && (performance.now() - start) < 6);\r\n\r\n      if(todo.length > 0) {\r\n        fastRaf(f);\r\n        // setTimeout(f, 25);\r\n      } else {\r\n        resolve(results);\r\n      }\r\n    };\r\n\r\n    fastRaf(f);\r\n    // setTimeout(f, 25);\r\n  }).then(queue.promise.resolve.bind(queue.promise), queue.promise.reject.bind(queue.promise));\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type fastBlur from '../vendor/fastBlur';\r\nimport addHeavyTask from './heavyQueue';\r\nimport IS_CANVAS_FILTER_SUPPORTED from '../environment/canvasFilterSupport';\r\n\r\nconst RADIUS = 2;\r\nconst ITERATIONS = 2;\r\n\r\nlet requireBlurPromise: Promise<any>;\r\nlet fastBlurFunc: typeof fastBlur;\r\nif(!IS_CANVAS_FILTER_SUPPORTED) {\r\n  requireBlurPromise = import('../vendor/fastBlur').then((m) => {\r\n    fastBlurFunc = m.default;\r\n  });\r\n} else {\r\n  requireBlurPromise = Promise.resolve();\r\n}\r\n\r\nfunction processBlurNext(\r\n  img: HTMLImageElement,\r\n  radius: number,\r\n  iterations: number,\r\n  canvas: HTMLCanvasElement = document.createElement('canvas')\r\n) {\r\n  canvas.width = img.width;\r\n  canvas.height = img.height;\r\n\r\n  const ctx = canvas.getContext('2d', {alpha: false});\r\n  if(IS_CANVAS_FILTER_SUPPORTED) {\r\n    ctx.filter = `blur(${radius}px)`;\r\n    ctx.drawImage(img, -radius * 2, -radius * 2, canvas.width + radius * 4, canvas.height + radius * 4);\r\n  } else {\r\n    ctx.drawImage(img, 0, 0);\r\n    fastBlurFunc(ctx, 0, 0, canvas.width, canvas.height, radius, iterations);\r\n  }\r\n\r\n  return canvas;\r\n}\r\n\r\ntype CacheValue = {canvas: HTMLCanvasElement, promise: Promise<void>};\r\nconst cache: Map<string, CacheValue> = new Map();\r\nconst CACHE_SIZE = 150;\r\n\r\nexport default function blur(dataUri: string, radius: number = RADIUS, iterations: number = ITERATIONS) {\r\n  if(!dataUri) {\r\n    throw 'no dataUri for blur: ' + dataUri;\r\n  }\r\n\r\n  if(cache.size > CACHE_SIZE) {\r\n    cache.clear();\r\n  }\r\n\r\n  const canvas = document.createElement('canvas');\r\n  canvas.className = 'canvas-thumbnail';\r\n\r\n  let cached = cache.get(dataUri);\r\n  if(!cached) {\r\n    const promise: CacheValue['promise'] = new Promise((resolve) => {\r\n      // return resolve(dataUri);\r\n      requireBlurPromise.then(() => {\r\n        const img = new Image();\r\n        img.onload = () => {\r\n          // if(IS_CANVAS_FILTER_SUPPORTED) {\r\n          // resolve(processBlurNext(img, radius, iterations));\r\n          // } else {\r\n          const promise = addHeavyTask({\r\n            items: [[img, radius, iterations, canvas]],\r\n            context: null,\r\n            process: processBlurNext\r\n          }, 'unshift');\r\n\r\n          promise.then(() => {\r\n            resolve();\r\n          });\r\n          // }\r\n        };\r\n        img.src = dataUri;\r\n      });\r\n    });\r\n\r\n    cache.set(dataUri, cached = {\r\n      canvas,\r\n      promise\r\n    });\r\n  } else {\r\n    canvas.width = cached.canvas.width;\r\n    canvas.height = cached.canvas.height;\r\n    cached.promise.then(() => {\r\n      canvas.getContext('2d').drawImage(cached.canvas, 0, 0, canvas.width, canvas.height);\r\n    });\r\n  }\r\n\r\n  return {\r\n    ...cached,\r\n    canvas\r\n  };\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {PhotoSize} from '../layer';\r\nimport {MyDocument} from '../lib/appManagers/appDocsManager';\r\nimport {MyPhoto} from '../lib/appManagers/appPhotosManager';\r\nimport {renderImageFromUrlPromise} from './dom/renderImageFromUrl';\r\nimport getPreviewURLFromThumb from './getPreviewURLFromThumb';\r\nimport blur from './blur';\r\n\r\nexport default function getImageFromStrippedThumb(\r\n  photo: MyPhoto | MyDocument,\r\n  thumb: PhotoSize.photoCachedSize | PhotoSize.photoStrippedSize,\r\n  useBlur: boolean | number,\r\n  url = getPreviewURLFromThumb(photo, thumb, false)\r\n) {\r\n  let element: HTMLImageElement | HTMLCanvasElement, loadPromise: Promise<void>;\r\n  if(!useBlur) {\r\n    element = new Image();\r\n    loadPromise = renderImageFromUrlPromise(element, url);\r\n  } else {\r\n    const result = blur(url, typeof(useBlur) === 'number' ? useBlur : undefined);\r\n    element = result.canvas;\r\n    loadPromise = result.promise;\r\n  }\r\n\r\n  element.classList.add('thumbnail');\r\n\r\n  return {image: element, loadPromise};\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {MyDocument} from '../lib/appManagers/appDocsManager';\r\nimport {applyColorOnContext} from '../lib/rlottie/rlottiePlayer';\r\nimport rootScope from '../lib/rootScope';\r\nimport getStickerThumbKey from '../lib/storages/utils/thumbs/getStickerThumbKey';\r\nimport customProperties from './dom/customProperties';\r\n\r\nconst savingLottiePreview: {[docId: DocId]: {width: number, height: number}} = {};\r\n\r\nexport function isSavingLottiePreview(doc: MyDocument, toneIndex: number | string, width: number, height: number) {\r\n  const key = getStickerThumbKey(doc.id, toneIndex);\r\n  const saving = savingLottiePreview[key];\r\n  return saving && saving.width >= width && saving.height >= height;\r\n}\r\n\r\nlet sharedCanvas: HTMLCanvasElement, sharedContext: CanvasRenderingContext2D;\r\nconst createCanvas = () => {\r\n  rootScope.addEventListener('theme_changed', () => {\r\n    rootScope.managers.thumbsStorage.clearColoredStickerThumbs();\r\n\r\n    for(const key in savingLottiePreview) {\r\n      const [, toneIndex] = key.split('-');\r\n      if(toneIndex && isNaN(+toneIndex)) {\r\n        delete savingLottiePreview[key];\r\n      }\r\n    }\r\n  });\r\n\r\n  sharedCanvas = document.createElement('canvas');\r\n  sharedContext = sharedCanvas.getContext('2d');\r\n};\r\n\r\nexport async function saveLottiePreview(doc: MyDocument, canvas: HTMLCanvasElement, toneIndex: number | string) {\r\n  const key = getStickerThumbKey(doc.id, toneIndex);\r\n  const {width, height} = canvas;\r\n  if(isSavingLottiePreview(doc, toneIndex, width, height)) {\r\n    return;\r\n  }\r\n\r\n  const saving = savingLottiePreview[key] = {\r\n    width,\r\n    height\r\n  };\r\n\r\n  const thumb = await rootScope.managers.thumbsStorage.getStickerCachedThumb(doc.id, toneIndex);\r\n  if(savingLottiePreview[key] !== saving) {\r\n    return;\r\n  }\r\n\r\n  if(thumb && thumb.w >= width && thumb.h >= height) {\r\n    return;\r\n  }\r\n\r\n  if(typeof(toneIndex) === 'string') {\r\n    if(!sharedCanvas) {\r\n      createCanvas();\r\n    }\r\n\r\n    sharedCanvas.width = width;\r\n    sharedCanvas.height = height;\r\n    sharedContext.drawImage(canvas, 0, 0, width, height);\r\n    applyColorOnContext(sharedContext, customProperties.getProperty(toneIndex), 0, 0, width, height);\r\n    canvas = sharedCanvas;\r\n  }\r\n\r\n  const promise = new Promise<Blob>((resolve) => {\r\n    canvas.toBlob((blob) => resolve(blob));\r\n  });\r\n\r\n  const blob = await promise;\r\n  if(savingLottiePreview[key] !== saving) {\r\n    return;\r\n  }\r\n\r\n  if(!blob) {\r\n    console.error('trying to save sticker preview with no blob', arguments);\r\n    debugger;\r\n    return;\r\n  }\r\n\r\n  rootScope.managers.thumbsStorage.saveStickerPreview(doc.id, blob, width, height, toneIndex);\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport tabId from '../config/tabId';\r\n\r\nlet uploadId = 0;\r\nexport default function getFileNameForUpload(file: File | Blob) {\r\n  let fileName: string;\r\n  const mimeType = file?.type;\r\n  if(mimeType) { // the same like apiFileName in appMessagesManager for upload!\r\n    const ext = `${tabId}_${uploadId++}.${mimeType.split('/')[1]}`;\r\n\r\n    if(['image/jpeg', 'image/png', 'image/bmp'].indexOf(mimeType) >= 0) {\r\n      fileName = 'photo' + ext;\r\n    } else if(mimeType.indexOf('audio/') === 0 || ['video/ogg'].indexOf(mimeType) >= 0) {\r\n      fileName = 'audio' + ext;\r\n    } else if(mimeType.indexOf('video/') === 0) {\r\n      fileName = 'video' + ext;\r\n    } else {\r\n      fileName = 'document' + ext;\r\n    }\r\n  } else {\r\n    fileName = `upload-${tabId}_${uploadId++}`;\r\n  }\r\n\r\n  return fileName;\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {Document, InputFileLocation} from '../../../../layer';\r\n\r\nexport default function getDocumentInputFileLocation(doc: Document.document, thumbSize?: string): InputFileLocation.inputDocumentFileLocation {\r\n  return {\r\n    _: 'inputDocumentFileLocation',\r\n    id: doc.id,\r\n    access_hash: doc.access_hash,\r\n    file_reference: doc.file_reference,\r\n    thumb_size: thumbSize\r\n  };\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {Document, PhotoSize, VideoSize} from '../../../../layer';\r\nimport type {DownloadOptions} from '../../../mtproto/apiFileManager';\r\nimport getDocumentInputFileLocation from './getDocumentInputFileLocation';\r\n\r\nexport default function getDocumentDownloadOptions(\r\n  doc: Document.document,\r\n  thumb?: PhotoSize.photoSize | Extract<VideoSize, VideoSize.videoSize>,\r\n  queueId?: number,\r\n  onlyCache?: boolean\r\n): DownloadOptions {\r\n  const inputFileLocation = getDocumentInputFileLocation(doc, thumb?.type);\r\n\r\n  let mimeType: MTMimeType;\r\n  if(thumb?._ === 'photoSize') {\r\n    mimeType = doc.sticker ? 'image/webp' : (doc.mime_type.startsWith('image/') ? doc.mime_type : 'image/jpeg');\r\n  } else {\r\n    mimeType = doc.mime_type || 'application/octet-stream';\r\n  }\r\n\r\n  return {\r\n    dcId: doc.dc_id,\r\n    location: inputFileLocation,\r\n    size: thumb ? thumb.size : doc.size,\r\n    mimeType,\r\n    fileName: doc.file_name,\r\n    queueId,\r\n    onlyCache\r\n  };\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {PhotoSize, InputFileLocation} from '../../../../layer';\r\nimport type {DownloadOptions} from '../../../mtproto/apiFileManager';\r\nimport type {MyDocument} from '../../appDocsManager';\r\nimport type {MyPhoto} from '../../appPhotosManager';\r\n\r\nexport default function getPhotoDownloadOptions(photo: MyPhoto | MyDocument, photoSize: PhotoSize, queueId?: number, onlyCache?: boolean): DownloadOptions {\r\n  const isDocument = photo._ === 'document';\r\n\r\n  if(!photoSize || photoSize._ === 'photoSizeEmpty') {\r\n    // console.error('no photoSize by photo:', photo);\r\n    throw new Error('photoSizeEmpty!');\r\n  }\r\n\r\n  // maybe it's a thumb\r\n  const isPhoto = !!((photoSize._ === 'photoSize' || photoSize._ === 'photoSizeProgressive') && photo.access_hash && photo.file_reference);\r\n  const location: InputFileLocation.inputPhotoFileLocation | InputFileLocation.inputDocumentFileLocation = {\r\n    _: isDocument ? 'inputDocumentFileLocation' : 'inputPhotoFileLocation',\r\n    id: photo.id,\r\n    access_hash: photo.access_hash,\r\n    file_reference: photo.file_reference,\r\n    thumb_size: photoSize.type\r\n  };\r\n\r\n  return {\r\n    dcId: photo.dc_id,\r\n    location,\r\n    size: isPhoto ? (photoSize as PhotoSize.photoSize).size : undefined,\r\n    mimeType: 'image/jpeg',\r\n    queueId,\r\n    onlyCache\r\n  };\r\n}\r\n","import {InputWebFileLocation} from '../../../../layer';\r\nimport {DownloadOptions} from '../../../mtproto/apiFileManager';\r\n\r\nexport default function getWebFileDownloadOptions(location: InputWebFileLocation): DownloadOptions {\r\n  const downloadOptions: DownloadOptions = {\r\n    dcId: 0,\r\n    location,\r\n    size: 0,\r\n    mimeType: 'image/jpeg'\r\n  };\r\n\r\n  // if(location._ === 'inputWebFileGeoPointLocation') {\r\n  //   downloadOptions.size = 512 * 1024;\r\n  //   downloadOptions.mimeType = 'image/jpeg';\r\n  // }\r\n\r\n  return downloadOptions;\r\n}\r\n","import {WebDocument} from '../../../../layer';\r\nimport {DownloadOptions} from '../../../mtproto/apiFileManager';\r\nimport getWebFileDownloadOptions from '../webFiles/getWebFileDownloadOptions';\r\n\r\nexport default function getWebDocumentDownloadOptions(webDocument: WebDocument): DownloadOptions {\r\n  const downloadOptions = getWebFileDownloadOptions({\r\n    _: 'inputWebFileLocation',\r\n    access_hash: (webDocument as WebDocument.webDocument).access_hash,\r\n    url: webDocument.url\r\n  });\r\n\r\n  downloadOptions.size = webDocument.size;\r\n  downloadOptions.mimeType = webDocument.mime_type;\r\n\r\n  return downloadOptions;\r\n}\r\n","import {WebDocument} from '../../../../layer';\r\n\r\nexport default function isWebDocument(webDocument: any): webDocument is WebDocument {\r\n  return !!(webDocument && (webDocument._ === 'webDocument' || webDocument._ === 'webDocumentNoProxy'));\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {getFileNameByLocation} from '../../../../helpers/fileName';\r\nimport {DownloadOptions} from '../../../mtproto/apiFileManager';\r\n\r\nexport default function getDownloadFileNameFromOptions(options: DownloadOptions) {\r\n  return getFileNameByLocation(options.location, options);\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {DownloadMediaOptions, DownloadOptions} from '../../../mtproto/apiFileManager';\r\nimport getDocumentDownloadOptions from '../docs/getDocumentDownloadOptions';\r\nimport getPhotoDownloadOptions from '../photos/getPhotoDownloadOptions';\r\nimport getWebDocumentDownloadOptions from '../webDocs/getWebDocumentDownloadOptions';\r\nimport isWebDocument from '../webDocs/isWebDocument';\r\nimport getWebFileDownloadOptions from '../webFiles/getWebFileDownloadOptions';\r\nimport isWebFileLocation from '../webFiles/isWebFileLocation';\r\nimport getDownloadFileNameFromOptions from './getDownloadFileNameFromOptions';\r\n\r\nexport default function getDownloadMediaDetails(options: DownloadMediaOptions) {\r\n  const {media, thumb, queueId, onlyCache} = options;\r\n\r\n  let downloadOptions: DownloadOptions;\r\n  if(media._ === 'document') downloadOptions = getDocumentDownloadOptions(media, thumb as any, queueId, onlyCache);\r\n  else if(media._ === 'photo') downloadOptions = getPhotoDownloadOptions(media, thumb as any, queueId, onlyCache);\r\n  else if(isWebDocument(media)) downloadOptions = getWebDocumentDownloadOptions(media);\r\n  else if(isWebFileLocation(media)) downloadOptions = getWebFileDownloadOptions(media);\r\n\r\n  downloadOptions.downloadId = options.downloadId;\r\n\r\n  const fileName = getDownloadFileNameFromOptions(downloadOptions);\r\n  return {fileName, downloadOptions};\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nexport default function createDownloadAnchor(url: string, fileName: string, onRemove?: () => void) {\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = fileName;\r\n  a.target = '_blank';\r\n\r\n  a.style.position = 'absolute';\r\n  a.style.top = '1px';\r\n  a.style.left = '1px';\r\n\r\n  document.body.append(a);\r\n\r\n  try {\r\n    const clickEvent = document.createEvent('MouseEvents');\r\n    clickEvent.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\r\n    a.dispatchEvent(clickEvent);\r\n  } catch(e) {\r\n    console.error('Download click error', e);\r\n    try {\r\n      a.click();\r\n    } catch(e) {\r\n      window.open(url as string, '_blank');\r\n    }\r\n  }\r\n\r\n  setTimeout(() => {\r\n    a.remove();\r\n    onRemove && onRemove();\r\n  }, 100);\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {DownloadMediaOptions, DownloadOptions} from '../mtproto/apiFileManager';\r\nimport type {AppMessagesManager} from './appMessagesManager';\r\nimport type {MyDocument} from './appDocsManager';\r\nimport deferredPromise, {CancellablePromise} from '../../helpers/cancellablePromise';\r\nimport {InputFile, Photo, PhotoSize} from '../../layer';\r\nimport getFileNameForUpload from '../../helpers/getFileNameForUpload';\r\nimport {AppManagers} from './managers';\r\nimport rootScope from '../rootScope';\r\nimport {MOUNT_CLASS_TO} from '../../config/debug';\r\nimport noop from '../../helpers/noop';\r\nimport getDownloadMediaDetails from './utils/download/getDownloadMediaDetails';\r\nimport getDownloadFileNameFromOptions from './utils/download/getDownloadFileNameFromOptions';\r\nimport indexOfAndSplice from '../../helpers/array/indexOfAndSplice';\r\nimport makeError from '../../helpers/makeError';\r\nimport createDownloadAnchor from '../../helpers/dom/createDownloadAnchor';\r\nimport {getFileNameByLocation} from '../../helpers/fileName';\r\nimport getDocumentDownloadOptions from './utils/docs/getDocumentDownloadOptions';\r\nimport getPhotoDownloadOptions from './utils/photos/getPhotoDownloadOptions';\r\nimport apiManagerProxy from '../mtproto/mtprotoworker';\r\n\r\nexport type ResponseMethodBlob = 'blob';\r\nexport type ResponseMethodJson = 'json';\r\nexport type ResponseMethod = ResponseMethodBlob | ResponseMethodJson;\r\n\r\n/* export type DownloadBlob = {promise: Promise<Blob>, controller: AbortController};\r\nexport type DownloadJson = {promise: Promise<any>, controller: AbortController}; */\r\nexport type DownloadBlob = CancellablePromise<Blob>;\r\nexport type DownloadUrl = CancellablePromise<string>;\r\nexport type DownloadJson = CancellablePromise<any>;\r\n// export type Download = DownloadBlob/*  | DownloadJson */;\r\nexport type Download = DownloadBlob | DownloadUrl/*  | DownloadJson */;\r\n\r\nexport type Progress = {done: number, fileName: string, total: number, offset: number};\r\nexport type ProgressCallback = (details: Progress) => void;\r\n\r\ntype DownloadType = 'url' | 'blob' | 'void' | 'disc';\r\n\r\nexport class AppDownloadManager {\r\n  private downloads: {[fileName: string]: {main: Download} & {[type in DownloadType]?: Download}} = {};\r\n  // private downloadsToDisc: {[fileName: string]: Download} = {};\r\n  private progress: {[fileName: string]: Progress} = {};\r\n  // private progressCallbacks: {[fileName: string]: Array<ProgressCallback>} = {};\r\n  private managers: AppManagers;\r\n\r\n  public construct(managers: AppManagers) {\r\n    this.managers = managers;\r\n    rootScope.addEventListener('download_progress', (details) => {\r\n      // const callbacks = this.progressCallbacks[details.fileName];\r\n      // if(callbacks) {\r\n      //   callbacks.forEach((callback) => callback(details));\r\n      // }\r\n\r\n      const download = this.downloads[details.fileName];\r\n      if(download?.main?.notifyAll) {\r\n        this.progress[details.fileName] = details;\r\n        download.main.notifyAll(details);\r\n      }\r\n    });\r\n  }\r\n\r\n  private getNewDeferred<T>(fileName: string, type?: DownloadType) {\r\n    const deferred = deferredPromise<T>();\r\n\r\n    let download = this.downloads[fileName];\r\n    if(!download) {\r\n      download = this.downloads[fileName] = {\r\n        main: deferred as any\r\n      };\r\n\r\n      deferred.cancel = () => {\r\n        const error = makeError('DOWNLOAD_CANCELED');\r\n\r\n        this.managers.apiFileManager.cancelDownload(fileName);\r\n\r\n        deferred.reject(error);\r\n        deferred.cancel = noop;\r\n      };\r\n\r\n      deferred.catch(() => {\r\n        this.clearDownload(fileName, type);\r\n      }).finally(() => {\r\n        delete this.progress[fileName];\r\n        // delete this.progressCallbacks[fileName];\r\n      });\r\n    } else {\r\n      const main = download.main;\r\n      (['cancel', 'addNotifyListener', 'notify', 'notifyAll'] as (keyof CancellablePromise<void>)[]).forEach((key) => {\r\n        if(!main[key]) {\r\n          return;\r\n        }\r\n\r\n        // @ts-ignore\r\n        deferred[key] = main[key].bind(main);\r\n      });\r\n    }\r\n\r\n    const haveToClear = type === 'disc';\r\n    if(haveToClear) {\r\n      deferred.catch(noop).finally(() => {\r\n        this.clearDownload(fileName, type);\r\n      });\r\n    }\r\n\r\n    return download[type] = deferred as any;\r\n  }\r\n\r\n  public getNewDeferredForUpload<T extends Promise<any>>(fileName: string, promise: T) {\r\n    const deferred: CancellablePromise<Awaited<T>> = this.getNewDeferred<InputFile>(fileName);\r\n    promise.then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\r\n\r\n    deferred.finally(() => {\r\n      this.clearDownload(fileName);\r\n    });\r\n\r\n    return deferred;\r\n  }\r\n\r\n  private clearDownload(fileName: string, type?: DownloadType) {\r\n    const downloads = this.downloads[fileName];\r\n    if(!downloads) {\r\n      return;\r\n    }\r\n\r\n    delete downloads[type];\r\n\r\n    const length = Object.keys(downloads).length;\r\n    if(!length || (downloads.main && length === 1)) {\r\n      delete this.downloads[fileName];\r\n    }\r\n  }\r\n\r\n  public getUpload(fileName: string): ReturnType<AppMessagesManager['sendFile']>['promise'] {\r\n    let deferred: CancellablePromise<any> = this.getDownload(fileName);\r\n    if(deferred) {\r\n      return deferred;\r\n    }\r\n\r\n    deferred = this.getNewDeferred(fileName);\r\n    this.managers.appMessagesManager.getUploadPromise(fileName).then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\r\n    return deferred;\r\n  }\r\n\r\n  /* public fakeDownload(fileName: string, value: Blob | string) {\r\n    const deferred = this.getNewDeferred<Blob>(fileName);\r\n    if(typeof(value) === 'string') {\r\n      fetch(value)\r\n      .then((response) => response.blob())\r\n      .then((blob) => deferred.resolve(blob));\r\n    } else {\r\n      deferred.resolve(value);\r\n    }\r\n\r\n    return deferred;\r\n  } */\r\n\r\n  private d(fileName: string, getPromise: () => Promise<any>, type?: DownloadType) {\r\n    let deferred = this.getDownload(fileName, type);\r\n    if(deferred) return deferred;\r\n\r\n    deferred = this.getNewDeferred<Blob>(fileName, type);\r\n    getPromise().then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\r\n    return deferred;\r\n  }\r\n\r\n  public download(options: DownloadOptions): DownloadBlob {\r\n    const fileName = getDownloadFileNameFromOptions(options);\r\n    return this.d(fileName, () => this.managers.apiFileManager.download(options), 'blob') as any;\r\n  }\r\n\r\n  public downloadMedia(options: DownloadMediaOptions, type: DownloadType = 'blob', promiseBefore?: Promise<any>): DownloadBlob {\r\n    const {downloadOptions, fileName} = getDownloadMediaDetails(options);\r\n\r\n    return this.d(fileName, () => {\r\n      let cb: any;\r\n      if(type === 'url') {\r\n        cb = this.managers.apiFileManager.downloadMediaURL;\r\n      } else if(type === 'void'/*  || type === 'disc' */) {\r\n        cb = this.managers.apiFileManager.downloadMediaVoid;\r\n      } else /* if(type === 'blob') */ {\r\n        cb = this.managers.apiFileManager.downloadMedia;\r\n      }\r\n\r\n      if(promiseBefore) {\r\n        return promiseBefore.then(() => cb(options));\r\n      }\r\n\r\n      return cb(options);\r\n    }, type) as any;\r\n  }\r\n\r\n  public downloadMediaURL(options: DownloadMediaOptions): DownloadUrl {\r\n    return this.downloadMedia(options, 'url') as any;\r\n  }\r\n\r\n  public downloadMediaVoid(options: DownloadMediaOptions): DownloadBlob {\r\n    return this.downloadMedia(options, 'void');\r\n  }\r\n\r\n  public upload(file: File | Blob, fileName?: string, promise?: Promise<any>) {\r\n    if(!fileName) {\r\n      fileName = getFileNameForUpload(file);\r\n    }\r\n\r\n    if(!promise) {\r\n      promise = this.managers.apiFileManager.upload({file, fileName});\r\n    }\r\n\r\n    const deferred = this.getNewDeferredForUpload(fileName, promise);\r\n    return deferred as any as CancellablePromise<InputFile>;\r\n  }\r\n\r\n  public getDownload(fileName: string, type?: DownloadType) {\r\n    const d = this.downloads[fileName];\r\n    return d && d[type];\r\n  }\r\n\r\n  // public addProgressCallback(fileName: string, callback: ProgressCallback) {\r\n  //   const progress = this.progress[fileName];\r\n  //   (this.progressCallbacks[fileName] ?? (this.progressCallbacks[fileName] = [])).push(callback);\r\n\r\n  //   if(progress) {\r\n  //     callback(progress);\r\n  //   }\r\n  // }\r\n\r\n  public downloadToDisc(options: DownloadMediaOptions, justAttach?: boolean) {\r\n    const media = options.media;\r\n    const isDocument = media._ === 'document';\r\n    if(!isDocument && !options.thumb) {\r\n      options.thumb = (media as Photo.photo).sizes.slice().pop() as PhotoSize.photoSize;\r\n    }\r\n\r\n    // const {fileName: cacheFileName} = getDownloadMediaDetails(options);\r\n    // if(justAttach) {\r\n    //   const promise = this.downloadsToDisc[cacheFileName];\r\n    //   if(promise) {\r\n    //     return promise;\r\n    //   }\r\n    // }\r\n\r\n    // const {downloadOptions, fileName} = getDownloadMediaDetails(options);\r\n    // if(downloadOptions.size && downloadOptions.size > MAX_FILE_SAVE_SIZE) {\r\n    const id = '' + (Math.random() * 0x7FFFFFFF | 0);\r\n    // const id = 'test';\r\n    const url = `download/${id}`;\r\n    options.downloadId = id;\r\n\r\n    const pingPromise = apiManagerProxy.pingServiceWorkerWithIframe();\r\n\r\n    const promise = this.downloadMedia(options, 'disc', pingPromise);\r\n    // this.downloadsToDisc[cacheFileName] = promise;\r\n\r\n    if(justAttach) {\r\n      return promise;\r\n    }\r\n\r\n    const iframe = document.createElement('iframe');\r\n    iframe.hidden = true;\r\n\r\n    pingPromise.then(() => {\r\n      iframe.src = url;\r\n      document.body.append(iframe);\r\n    });\r\n\r\n    // createDownloadAnchor(url, 'asd.txt');\r\n\r\n    // const events = [\r\n    //   'emptied',\r\n    //   'abort',\r\n    //   'suspend',\r\n    //   'reset',\r\n    //   'error',\r\n    //   'ended',\r\n    //   'load'\r\n    // ].forEach((event) => {\r\n    //   iframe.addEventListener(event, () => alert(event));\r\n    //   iframe.contentWindow.addEventListener(event, () => alert(event));\r\n    // });\r\n\r\n    let element: HTMLElement, hadProgress = false;\r\n    const onProgress = () => {\r\n      if(hadProgress) {\r\n        return;\r\n      }\r\n\r\n      hadProgress = true;\r\n      element = iframe;\r\n\r\n      indexOfAndSplice(promise.listeners, onProgress);\r\n    };\r\n\r\n    promise.addNotifyListener(onProgress);\r\n    promise.then((blob) => {\r\n      if(!blob) {\r\n        return;\r\n      }\r\n\r\n      const url = URL.createObjectURL(blob);\r\n      const downloadOptions = isDocument ?\r\n        getDocumentDownloadOptions(media) :\r\n        getPhotoDownloadOptions(media as any, options.thumb as PhotoSize.photoSize);\r\n      const fileName = (options.media as MyDocument).file_name || getFileNameByLocation(downloadOptions.location);\r\n      createDownloadAnchor(url, downloadOptions.fileName || fileName, () => {\r\n        URL.revokeObjectURL(url);\r\n      });\r\n    }).catch(noop).finally(() => {\r\n      if(!hadProgress) {\r\n        onProgress();\r\n      }\r\n\r\n      setTimeout(() => {\r\n        element?.remove();\r\n      }, 1000);\r\n\r\n      // if(this.downloadsToDisc[cacheFileName] === promise) {\r\n      //   delete this.downloadsToDisc[cacheFileName];\r\n      // }\r\n    });\r\n\r\n    return promise;\r\n  }\r\n}\r\n\r\nconst appDownloadManager = new AppDownloadManager();\r\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.appDownloadManager = appDownloadManager);\r\nexport default appDownloadManager;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {MyDocument} from '../../appDocsManager';\r\nimport type {MyPhoto} from '../../appPhotosManager';\r\nimport type {PhotoSize, VideoSize, WebDocument} from '../../../../layer';\r\nimport calcImageInBox from '../../../../helpers/calcImageInBox';\r\nimport {THUMB_TYPE_FULL} from '../../../mtproto/mtproto_config';\r\n\r\nexport default function choosePhotoSize(\r\n  photo: MyPhoto | MyDocument | WebDocument,\r\n  boxWidth = 0,\r\n  boxHeight = 0,\r\n  useBytes = false,\r\n  pushDocumentSize = false\r\n) {\r\n  if(window.devicePixelRatio > 1) {\r\n    boxWidth *= 2;\r\n    boxHeight *= 2;\r\n  }\r\n\r\n  /*\r\n  s box 100x100\r\n  m box 320x320\r\n  x box 800x800\r\n  y box 1280x1280\r\n  w box 2560x2560\r\n  a crop  160x160\r\n  b crop  320x320\r\n  c crop  640x640\r\n  d crop  1280x1280 */\r\n\r\n  let sizes: PhotoSize[] = (photo as MyPhoto).sizes || (photo as MyDocument).thumbs as PhotoSize[];\r\n  let bestPhotoSize: typeof sizes[0] = {_: 'photoSizeEmpty', type: THUMB_TYPE_FULL};\r\n  if(pushDocumentSize && sizes && photo._ !== 'photo') {\r\n    sizes = sizes.concat({\r\n      _: 'photoSize',\r\n      w: photo.w,\r\n      h: photo.h,\r\n      size: photo.size,\r\n      type: THUMB_TYPE_FULL\r\n    });\r\n  }\r\n\r\n  if(sizes?.length) {\r\n    for(let i = 0, length = sizes.length; i < length; ++i) {\r\n      const photoSize = sizes[i];\r\n      if(!('w' in photoSize) && !('h' in photoSize)) continue;\r\n\r\n      bestPhotoSize = photoSize;\r\n\r\n      const size = calcImageInBox(photoSize.w, photoSize.h, boxWidth, boxHeight);\r\n      if(size.width >= boxWidth || size.height >= boxHeight) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    if(useBytes && bestPhotoSize._ === 'photoSizeEmpty' && sizes[0]._ === 'photoStrippedSize') {\r\n      bestPhotoSize = sizes[0];\r\n    }\r\n  }\r\n\r\n  return bestPhotoSize;\r\n}\r\n","import {MyDocument} from '../../appDocsManager';\r\nimport {VideoSize} from '../../../../layer';\r\n\r\nexport default function getStickerEffectThumb(doc: MyDocument) {\r\n  return doc.video_thumbs?.[0] as Extract<VideoSize, VideoSize.videoSize>;\r\n}\r\n","// https://github.com/twitter/twemoji-parser/blob/master/src/lib/regex.js\r\n\r\nexport function encodeEmoji(emojiText: string) {\r\n  const codepoints = toCodePoints(removeVS16s(emojiText)).join('-');\r\n  return codepoints;\r\n}\r\n\r\nconst vs16RegExp = /\\uFE0F/g;\r\n// avoid using a string literal like '\\u200D' here because minifiers expand it inline\r\nconst zeroWidthJoiner = String.fromCharCode(0x200d);\r\n\r\nconst removeVS16s = (rawEmoji: string) => (rawEmoji.indexOf(zeroWidthJoiner) < 0 ? rawEmoji.replace(vs16RegExp, '') : rawEmoji);\r\n\r\nexport function toCodePoints(unicodeSurrogates: string): Array<string> {\r\n  const points = [];\r\n  let char = 0;\r\n  let previous = 0;\r\n  let i = 0;\r\n  while(i < unicodeSurrogates.length) {\r\n    char = unicodeSurrogates.charCodeAt(i++);\r\n    if(previous) {\r\n      points.push((0x10000 + ((previous - 0xd800) << 10) + (char - 0xdc00)).toString(16));\r\n      previous = 0;\r\n    } else if(char > 0xd800 && char <= 0xdbff) {\r\n      previous = char;\r\n    } else {\r\n      points.push(char.toString(16));\r\n    }\r\n  }\r\n\r\n  if(points.length && points[0].length === 2) {\r\n    points[0] = '00' + points[0];\r\n  }\r\n\r\n  return points;\r\n}\r\n\r\nexport function getEmojiToneIndex(input: string) {\r\n  const match = input.match(/[\\uDFFB-\\uDFFF]/);\r\n  return match ? 5 - (57343 - match[0].charCodeAt(0)) : 0;\r\n}\r\n\r\nconst VIRTUAL_COUNTRIES_EMOJIS: Map<string, string> = new Map([\r\n  ['FT', '🏴‍☠']\r\n]);\r\n\r\nexport function getCountryEmoji(iso2: string) {\r\n  return VIRTUAL_COUNTRIES_EMOJIS.get(iso2) ??\r\n    String.fromCharCode(55356, 56741 + iso2.charCodeAt(0), 55356, 56741 + iso2.charCodeAt(1));\r\n}\r\n\r\nexport function emojiFromCodePoints(codePoints: string) {\r\n  return codePoints.split('-').reduce((prev, curr) => prev + String.fromCodePoint(parseInt(curr, 16)), '');\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport indexOfAndSplice from './array/indexOfAndSplice';\r\nimport makeError from './makeError';\r\n\r\nexport type Middleware = {\r\n  (): boolean;\r\n  create(): MiddlewareHelper;\r\n  onClean: (callback: VoidFunction) => void;\r\n  onDestroy: (callback: VoidFunction) => void;\r\n};\r\n\r\nconst createDetails = (): {\r\n  cleaned?: boolean,\r\n  inner: MiddlewareHelper[],\r\n  onCleanCallbacks: VoidFunction[],\r\n  middleware?: Middleware\r\n} => ({\r\n  cleaned: false,\r\n  inner: [],\r\n  onCleanCallbacks: []\r\n});\r\n\r\nconst MIDDLEWARE_ERROR = makeError('MIDDLEWARE');\r\n\r\n// * onClean == cancel promises, etc\r\n// * onDestroy == destructor\r\nexport class MiddlewareHelper {\r\n  private details = createDetails();\r\n  private onDestroyCallbacks: VoidFunction[] = [];\r\n  private parent: MiddlewareHelper;\r\n  private destroyed: boolean;\r\n\r\n  public clean() {\r\n    const details = this.details;\r\n    details.cleaned = true;\r\n    details.inner.splice(0, details.inner.length).forEach((helper) => helper.destroy());\r\n    details.onCleanCallbacks.splice(0, details.onCleanCallbacks.length).forEach((callback) => callback());\r\n    details.middleware = undefined;\r\n    this.details = createDetails();\r\n  }\r\n\r\n  public destroy() {\r\n    this.destroyed = true;\r\n    this.clean();\r\n    this.onDestroyCallbacks.splice(0, this.onDestroyCallbacks.length).forEach((callback) => callback());\r\n\r\n    if(this.parent) {\r\n      indexOfAndSplice(this.parent.details.inner, this);\r\n      this.parent = undefined;\r\n    }\r\n  }\r\n\r\n  private createMiddlewareForDetails(details: ReturnType<typeof createDetails>, additionalCallback?: () => boolean) {\r\n    const middleware: Middleware = () => {\r\n      return !details.cleaned && (!additionalCallback || additionalCallback());\r\n    };\r\n\r\n    middleware.create = () => {\r\n      if(!middleware()) throw MIDDLEWARE_ERROR;\r\n      const helper = getMiddleware();\r\n      helper.parent = this;\r\n      details.inner.push(helper);\r\n      return helper;\r\n    };\r\n\r\n    middleware.onClean = (callback) => {\r\n      if(!middleware()) return callback();\r\n      details.onCleanCallbacks.push(callback);\r\n    };\r\n\r\n    middleware.onDestroy = this.onDestroy;\r\n\r\n    return middleware;\r\n  }\r\n\r\n  public get(additionalCallback?: () => boolean) {\r\n    const details = this.details;\r\n    if(details.cleaned) {\r\n      return this.createMiddlewareForDetails(details);\r\n    }\r\n\r\n    if(additionalCallback) {\r\n      return this.createMiddlewareForDetails(details, additionalCallback);\r\n    }\r\n\r\n    return details.middleware ??= this.createMiddlewareForDetails(details);\r\n  }\r\n\r\n  public onDestroy = (callback: VoidFunction) => {\r\n    if(this.destroyed) return callback();\r\n    this.onDestroyCallbacks.push(callback);\r\n  };\r\n}\r\n\r\n// * will change .cleaned and new instance will be created\r\nexport function getMiddleware() {\r\n  return new MiddlewareHelper();\r\n}\r\n","// * Jolly Cobra's schedulers\r\n\r\nimport {AnyToVoidFunction} from '../../types';\r\n\r\nexport default function throttleWith<F extends AnyToVoidFunction>(schedulerFn: AnyToVoidFunction, fn: F) {\r\n  let waiting = false;\r\n  let args: Parameters<F>;\r\n\r\n  return (..._args: Parameters<F>) => {\r\n    args = _args;\r\n\r\n    if(!waiting) {\r\n      waiting = true;\r\n\r\n      schedulerFn(() => {\r\n        waiting = false;\r\n        // @ts-ignore\r\n        fn(...args);\r\n      });\r\n    }\r\n  };\r\n}\r\n","// * Jolly Cobra's schedulers\r\n\r\nimport {AnyToVoidFunction} from '../../types';\r\nimport {fastRaf} from '../schedulers';\r\nimport throttleWith from './throttleWith';\r\n\r\nexport default function throttleWithRaf<F extends AnyToVoidFunction>(fn: F) {\r\n  return throttleWith(fastRaf, fn);\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {MyDocument} from '../../lib/appManagers/appDocsManager';\r\nimport IS_VIBRATE_SUPPORTED from '../../environment/vibrateSupport';\r\nimport assumeType from '../../helpers/assumeType';\r\nimport isInDOM from '../../helpers/dom/isInDOM';\r\nimport makeError from '../../helpers/makeError';\r\nimport {getMiddleware, Middleware} from '../../helpers/middleware';\r\nimport throttleWithRaf from '../../helpers/schedulers/throttleWithRaf';\r\nimport windowSize from '../../helpers/windowSize';\r\nimport {PhotoSize, VideoSize} from '../../layer';\r\nimport {AppManagers} from '../../lib/appManagers/managers';\r\nimport RLottiePlayer from '../../lib/rlottie/rlottiePlayer';\r\nimport Scrollable from '../scrollable';\r\nimport wrapSticker from './sticker';\r\n\r\nexport const emojiAnimationContainer = document.createElement('div');\r\nemojiAnimationContainer.classList.add('emoji-animation-container');\r\n\r\nconst NO_UNMOUNT = false;\r\n\r\nexport default function wrapStickerAnimation({\r\n  size,\r\n  stickerSize,\r\n  doc,\r\n  middleware,\r\n  target,\r\n  side,\r\n  skipRatio,\r\n  play,\r\n  managers,\r\n  fullThumb,\r\n  withRandomOffset,\r\n  relativeEffect,\r\n  loopEffect,\r\n  onUnmount,\r\n  scrollable,\r\n  textColor\r\n}: {\r\n  size: number,\r\n  stickerSize?: number,\r\n  doc: MyDocument,\r\n  middleware?: Middleware,\r\n  target: HTMLElement,\r\n  side: 'left' | 'center' | 'right',\r\n  skipRatio?: number,\r\n  play: boolean,\r\n  managers?: AppManagers,\r\n  fullThumb?: PhotoSize | Extract<VideoSize, VideoSize.videoSize>,\r\n  withRandomOffset?: boolean,\r\n  relativeEffect?: boolean,\r\n  loopEffect?: boolean,\r\n  onUnmount?: () => void,\r\n  scrollable?: Scrollable,\r\n  textColor?: string\r\n}) {\r\n  const animationDiv = document.createElement('div');\r\n  animationDiv.classList.add('emoji-animation');\r\n\r\n  // const size = 280;\r\n  animationDiv.style.width = size + 'px';\r\n  animationDiv.style.height = size + 'px';\r\n\r\n  let animation: RLottiePlayer;\r\n  const unmountAnimation = () => {\r\n    if(NO_UNMOUNT) {\r\n      return;\r\n    }\r\n\r\n    middlewareHelper.destroy();\r\n    const a = animation;\r\n    animation = undefined;\r\n    a?.remove();\r\n    animationDiv.remove();\r\n    onScroll && scrollable.container.removeEventListener('scroll', onScroll);\r\n    if(a) {\r\n      onUnmount?.();\r\n    }\r\n  };\r\n\r\n  const middlewareHelper = middleware?.create() ?? getMiddleware();\r\n  middleware = middlewareHelper.get();\r\n\r\n  const stickerPromise = wrapSticker({\r\n    div: animationDiv,\r\n    doc,\r\n    middleware,\r\n    withThumb: false,\r\n    needFadeIn: false,\r\n    loop: !!loopEffect,\r\n    width: stickerSize || size,\r\n    height: stickerSize || size,\r\n    play,\r\n    group: 'none',\r\n    skipRatio,\r\n    managers,\r\n    fullThumb,\r\n    isEffect: true,\r\n    textColor\r\n  }).then(({render}) => render).then((_animation) => {\r\n    assumeType<RLottiePlayer>(_animation);\r\n    if(!middleware()) {\r\n      _animation.remove();\r\n      throw makeError('MIDDLEWARE');\r\n    }\r\n\r\n    animation = _animation;\r\n    animation.addEventListener('enterFrame', (frameNo) => {\r\n      if((!loopEffect && frameNo === animation.maxFrame) || !isInDOM(target)) {\r\n        unmountAnimation();\r\n      }\r\n    });\r\n\r\n    animation.addEventListener('destroy', unmountAnimation);\r\n\r\n    if(IS_VIBRATE_SUPPORTED) {\r\n      animation.addEventListener('firstFrame', () => {\r\n        navigator.vibrate(100);\r\n      }, {once: true});\r\n    }\r\n\r\n    animation.addEventListener('firstFrame', () => {\r\n      setPosition();\r\n    }, {once: true});\r\n\r\n    return animation;\r\n  });\r\n\r\n  const generateRandomSigned = (max: number) => {\r\n    const r = Math.random() * max * 2;\r\n    return r > max ? -r % max : r;\r\n  };\r\n\r\n  const randomOffsetX = withRandomOffset ? generateRandomSigned(16) : 0;\r\n  const randomOffsetY = withRandomOffset ? generateRandomSigned(4) : 0;\r\n  const setPosition = () => {\r\n    if(!isInDOM(target)) {\r\n      unmountAnimation();\r\n      return;\r\n    }\r\n\r\n    const rect = target.getBoundingClientRect();\r\n\r\n    const factor = rect.width / 200;\r\n    const stableOffsetX = side === 'center' ? 0 : 16 * (side === 'right' ? 1 : -1) * factor;\r\n    // const stableOffsetY = side === 'center' ? 0 : -50 * factor;\r\n    const stableOffsetY = side === 'center' ? 0 : 0 * factor;\r\n\r\n    const rectX = side === 'right' ? rect.right : rect.left;\r\n    const rectY = rect.top;\r\n\r\n    const addOffsetX = (side === 'center' ? (rect.width - size) / 2 : (side === 'right' ? -size : 0)) + stableOffsetX + randomOffsetX;\r\n    const addOffsetY = (side === 'center' || true ? (rect.height - size) / 2 : 0) + stableOffsetY + randomOffsetY;\r\n    const x = rectX + addOffsetX;\r\n    const y = rectY + addOffsetY;\r\n\r\n    if(y <= -size || y >= windowSize.height) {\r\n      unmountAnimation();\r\n      return;\r\n    }\r\n\r\n    if(relativeEffect) {\r\n      if(side !== 'center') animationDiv.style[side] = Math.abs(stableOffsetX) * -1 + 'px';\r\n      else animationDiv.style.left = addOffsetX + 'px';\r\n      animationDiv.style.top = addOffsetY + 'px';\r\n    } else {\r\n      animationDiv.style.top = y + 'px';\r\n      animationDiv.style.left = x + 'px';\r\n    }\r\n  };\r\n\r\n  let onScroll: () => void;\r\n  if(scrollable) {\r\n    onScroll = throttleWithRaf(setPosition);\r\n    scrollable.container.addEventListener('scroll', onScroll);\r\n  }\r\n\r\n  // setPosition();\r\n\r\n  if(relativeEffect) {\r\n    animationDiv.classList.add('is-relative');\r\n    target.parentElement.append(animationDiv);\r\n  } else {\r\n    emojiAnimationContainer.append(animationDiv);\r\n  }\r\n\r\n  return {animationDiv, stickerPromise};\r\n}\r\n","export default function setCurrentTime(media: HTMLMediaElement, currentTime: number) {\r\n  media.isSeeking = true;\r\n  media.currentTime = currentTime;\r\n}\r\n","import {IS_CHROMIUM} from '../../environment/userAgent';\r\nimport deferredPromise from '../cancellablePromise';\r\nimport noop from '../noop';\r\nimport deepEqual from '../object/deepEqual';\r\nimport onMediaLoad from '../onMediaLoad';\r\nimport safePlay from './safePlay';\r\nimport setCurrentTime from './setCurrentTime';\r\n\r\nconst USE_FIX = IS_CHROMIUM;\r\n\r\nexport async function onVideoLeak(video: HTMLVideoElement) {\r\n  // console.error('video is stuck', video.src, video, video.paused, videoPlaybackQuality);\r\n  const firstElementChild = video.firstElementChild as HTMLSourceElement;\r\n  if(!firstElementChild) {\r\n    video.src = '';\r\n    video.load();\r\n    throw new Error('leak');\r\n  }\r\n\r\n  const paused = video.paused;\r\n  firstElementChild.remove();\r\n  video.load();\r\n\r\n  if(!video.childElementCount && !video.src) {\r\n    throw new Error('leak');\r\n  }\r\n\r\n  if(!paused) safePlay(video);\r\n  else setCurrentTime(video, 0.0001);\r\n\r\n  return handleVideoLeak(video, onMediaLoad(video));\r\n}\r\n\r\nexport async function testVideoLeak(\r\n  video: HTMLVideoElement,\r\n  isLeak = !video.getVideoPlaybackQuality().totalVideoFrames\r\n) {\r\n  if(!isLeak) {\r\n    return;\r\n  }\r\n\r\n  return onVideoLeak(video);\r\n}\r\n\r\n// * fix new memory leak of chrome\r\nexport default async function handleVideoLeak(video: HTMLVideoElement, loadPromise?: Promise<any>) {\r\n  if(!USE_FIX) {\r\n    return loadPromise;\r\n  }\r\n\r\n  const onTimeUpdate = () => {\r\n    testVideoLeak(video).then(\r\n      deferred.resolve.bind(deferred),\r\n      deferred.reject.bind(deferred)\r\n    );\r\n  };\r\n\r\n  const deferred = deferredPromise<void>();\r\n  try {\r\n    await loadPromise;\r\n  } catch(err) {\r\n    onTimeUpdate();\r\n    return;\r\n  }\r\n\r\n  if(\r\n    video.getVideoPlaybackQuality().totalVideoFrames ||\r\n    video.readyState > video.HAVE_METADATA // * video can lose metadata on timeupdate if has no next chunk\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  video.addEventListener('timeupdate', onTimeUpdate, {once: true});\r\n  return deferred;\r\n}\r\n\r\nconst eventsOrder = [\r\n  // 'timeupdate',\r\n  'seeked',\r\n  'canplay',\r\n  'canplaythrough',\r\n  'seeking'\r\n  // 'play'\r\n];\r\nconst eventsOrderLength = eventsOrder.length;\r\n\r\nconst sawEvents = new WeakMap<HTMLElement, {events: Set<string>}>();\r\nexport const leakVideoFallbacks = new WeakMap<HTMLElement, () => void>();\r\nUSE_FIX && eventsOrder.forEach((event) => {\r\n  document.addEventListener(event, (e) => {\r\n    const target = e.target;\r\n    if(\r\n      !(target instanceof HTMLVideoElement) ||\r\n      target.readyState > target.HAVE_METADATA ||\r\n      target.isSeeking\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    // const needLog = target.parentElement.dataset.docId === '';\r\n    // if(needLog) {\r\n    //   console.log('video event', event/* , target */, target.currentTime, target.duration);\r\n    // }\r\n\r\n    let cache = sawEvents.get(target);\r\n    if(!cache) {\r\n      sawEvents.set(target, cache = {events: new Set()});\r\n    }\r\n\r\n    if(cache.events.has(event)) {\r\n      return;\r\n    }\r\n\r\n    cache.events.add(event);\r\n\r\n    if(cache.events.size === eventsOrderLength/*  && event == eventsOrder[eventsOrderLength - 1] */) {\r\n      const events = Array.from(cache.events);\r\n      const index = eventsOrder.indexOf(events[0]);\r\n      const normalized = eventsOrder.slice(index).concat(eventsOrder.slice(0, index));\r\n      if(!deepEqual(events, normalized)) {\r\n        return;\r\n      }\r\n\r\n      // console.log('bad video', target.currentTime, target.duration);\r\n\r\n      const fallbackCallback = leakVideoFallbacks.get(target);\r\n      if(fallbackCallback) {\r\n        fallbackCallback();\r\n        leakVideoFallbacks.delete(target);\r\n      } else {\r\n        onVideoLeak(target).catch(noop);\r\n      }\r\n    }\r\n\r\n    // const lastEvent = sawEvents.get(target);\r\n    // if(!lastEvent) {\r\n    //   if(eventsOrder[0] === event) {\r\n    //     sawEvents.set(target, event);\r\n    //   }\r\n    // } else if(lastEvent !== event) {\r\n    //   const lastEventIndex = eventsOrder.indexOf(lastEvent);\r\n    //   const shouldBeEvent = eventsOrder[lastEventIndex + 1];\r\n    //   if(shouldBeEvent === event) { // save event for next check\r\n    //     sawEvents.set(target, event);\r\n    //   } else if(!shouldBeEvent) { // saw all events\r\n    //     onVideoLeak(target).catch(noop);\r\n    //   } else { // wrong event\r\n    //     sawEvents.delete(target);\r\n    //   }\r\n    // }\r\n  }, true);\r\n});\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type RLottiePlayer from '../../lib/rlottie/rlottiePlayer';\r\nimport type {ThumbCache} from '../../lib/storages/thumbs';\r\nimport type {MyDocument} from '../../lib/appManagers/appDocsManager';\r\nimport IS_WEBP_SUPPORTED from '../../environment/webpSupport';\r\nimport getPathFromBytes from '../../helpers/bytes/getPathFromBytes';\r\nimport deferredPromise from '../../helpers/cancellablePromise';\r\nimport computeLockColor from '../../helpers/computeLockColor';\r\nimport cancelEvent from '../../helpers/dom/cancelEvent';\r\nimport {attachClickEvent} from '../../helpers/dom/clickEvent';\r\nimport createVideo from '../../helpers/dom/createVideo';\r\nimport renderImageFromUrl, {renderImageFromUrlPromise} from '../../helpers/dom/renderImageFromUrl';\r\nimport getImageFromStrippedThumb from '../../helpers/getImageFromStrippedThumb';\r\nimport getPreviewURLFromThumb from '../../helpers/getPreviewURLFromThumb';\r\nimport makeError from '../../helpers/makeError';\r\nimport {makeMediaSize} from '../../helpers/mediaSize';\r\nimport mediaSizes from '../../helpers/mediaSizes';\r\nimport {Middleware} from '../../helpers/middleware';\r\nimport {isSavingLottiePreview, saveLottiePreview} from '../../helpers/saveLottiePreview';\r\nimport sequentialDom from '../../helpers/sequentialDom';\r\nimport {DocumentAttribute, PhotoSize, VideoSize} from '../../layer';\r\nimport appDownloadManager from '../../lib/appManagers/appDownloadManager';\r\nimport {AppManagers} from '../../lib/appManagers/managers';\r\nimport choosePhotoSize from '../../lib/appManagers/utils/photos/choosePhotoSize';\r\nimport getStickerEffectThumb from '../../lib/appManagers/utils/stickers/getStickerEffectThumb';\r\nimport lottieLoader from '../../lib/rlottie/lottieLoader';\r\nimport rootScope from '../../lib/rootScope';\r\nimport webpWorkerController from '../../lib/webp/webpWorkerController';\r\nimport {Awaited} from '../../types';\r\nimport {getEmojiToneIndex} from '../../vendor/emoji';\r\nimport animationIntersector, {AnimationItemGroup} from '../animationIntersector';\r\nimport LazyLoadQueue from '../lazyLoadQueue';\r\nimport wrapStickerAnimation from './stickerAnimation';\r\nimport framesCache from '../../helpers/framesCache';\r\nimport liteMode, {LiteModeKey} from '../../helpers/liteMode';\r\nimport Scrollable from '../scrollable';\r\nimport apiManagerProxy from '../../lib/mtproto/mtprotoworker';\r\nimport Icon from '../icon';\r\nimport {leakVideoFallbacks, onVideoLeak} from '../../helpers/dom/handleVideoLeak';\r\nimport noop from '../../helpers/noop';\r\n\r\n// https://github.com/telegramdesktop/tdesktop/blob/master/Telegram/SourceFiles/history/view/media/history_view_sticker.cpp#L40\r\nexport const STICKER_EFFECT_MULTIPLIER = 1 + 0.245 * 2;\r\nconst EMOJI_EFFECT_MULTIPLIER = 3;\r\nconst UNMOUNT_THUMBS = true;\r\n\r\nconst locksUrls: {[docId: string]: string} = {};\r\n\r\nexport const videosCache: {[key: string]: Promise<any>} = {};\r\n\r\nconst onAnimationEnd = (element: HTMLElement, onAnimationEnd: () => void, timeout: number) => {\r\n  const onEnd = () => {\r\n    element.removeEventListener('animationend', onEnd);\r\n    onAnimationEnd();\r\n    clearTimeout(_timeout);\r\n  };\r\n  element.addEventListener('animationend', onEnd);\r\n  const _timeout = setTimeout(onEnd, timeout);\r\n};\r\n\r\nconst isEmptyContainer = (container: HTMLElement) => {\r\n  const childElementCount = container.childElementCount;\r\n  if(!childElementCount) return true;\r\n  const child = container.firstElementChild as HTMLElement;\r\n  return child.classList.contains('premium-sticker-lock') && childElementCount === 1;\r\n};\r\n\r\nconst getThumbFromContainer = (container: HTMLElement) => {\r\n  let element = container.firstElementChild as HTMLElement;\r\n  if(element && element.classList.contains('premium-sticker-lock')) {\r\n    element = element.nextElementSibling as HTMLElement;\r\n  }\r\n\r\n  return element;\r\n};\r\n\r\nexport default async function wrapSticker({doc, div, middleware, loadStickerMiddleware, lazyLoadQueue, exportLoad, group, play, onlyThumb, emoji, width, height, withThumb, loop, loadPromises, needFadeIn, needUpscale, skipRatio, static: asStatic, managers = rootScope.managers, fullThumb, isOut, noPremium, withLock, relativeEffect, loopEffect, isCustomEmoji, syncedVideo, liteModeKey, isEffect, textColor, scrollable, showPremiumInfo}: {\r\n  doc: MyDocument,\r\n  div: HTMLElement | HTMLElement[],\r\n  middleware?: Middleware,\r\n  loadStickerMiddleware?: Middleware,\r\n  lazyLoadQueue?: LazyLoadQueue,\r\n  exportLoad?: number,\r\n  group?: AnimationItemGroup,\r\n  play?: boolean,\r\n  onlyThumb?: boolean,\r\n  emoji?: string,\r\n  width?: number,\r\n  height?: number,\r\n  withThumb?: boolean,\r\n  loop?: RLottiePlayer['loop'],\r\n  loadPromises?: Promise<any>[],\r\n  needFadeIn?: boolean,\r\n  needUpscale?: boolean,\r\n  skipRatio?: number,\r\n  static?: boolean,\r\n  managers?: AppManagers,\r\n  fullThumb?: PhotoSize | Extract<VideoSize, VideoSize.videoSize>,\r\n  isOut?: boolean,\r\n  noPremium?: boolean,\r\n  withLock?: boolean,\r\n  relativeEffect?: boolean,\r\n  loopEffect?: boolean,\r\n  isCustomEmoji?: boolean,\r\n  syncedVideo?: boolean,\r\n  liteModeKey?: LiteModeKey | false,\r\n  isEffect?: boolean,\r\n  textColor?: WrapSomethingOptions['textColor'],\r\n  scrollable?: Scrollable\r\n  showPremiumInfo?: () => void\r\n}) {\r\n  const options = arguments[0];\r\n  div = Array.isArray(div) ? div : [div];\r\n\r\n  liteModeKey ??= 'stickers_panel';\r\n\r\n  if(isCustomEmoji) {\r\n    emoji = doc.stickerEmojiRaw;\r\n  }\r\n\r\n  const stickerType = doc.sticker;\r\n  if(stickerType === 1) {\r\n    asStatic = true;\r\n  }\r\n\r\n  if(!width && !height) {\r\n    const sizes = mediaSizes.active;\r\n    const boxSize = emoji ? sizes.emojiSticker : (doc.animated ? sizes.animatedSticker : sizes.staticSticker);\r\n    const size = makeMediaSize(doc.w, doc.h).aspectFitted(boxSize);\r\n    width = size.width;\r\n    height = size.height;\r\n  }\r\n\r\n  if(stickerType === 2) {\r\n    // LottieLoader.loadLottie();\r\n    lottieLoader.loadLottieWorkers();\r\n  }\r\n\r\n  loop = !!(!emoji || isCustomEmoji) && loop;\r\n\r\n  div.forEach((div) => {\r\n    div.dataset.docId = '' + doc.id;\r\n    if(emoji) {\r\n      div.dataset.stickerEmoji = emoji;\r\n    }\r\n\r\n    // div.dataset.stickerPlay = '' + +(play || false);\r\n    // div.dataset.stickerLoop = '' + +(loop || false);\r\n\r\n    div.classList.add('media-sticker-wrapper');\r\n  });\r\n\r\n  if(play && liteModeKey && !liteMode.isAvailable(liteModeKey) && !isCustomEmoji && !isEffect) {\r\n    play = false;\r\n    loop = false;\r\n  }\r\n\r\n  /* if(stickerType === 3) {\r\n    const videoRes = wrapVideo({\r\n      doc,\r\n      boxWidth: width,\r\n      boxHeight: height,\r\n      container: div,\r\n      group,\r\n      lazyLoadQueue,\r\n      middleware,\r\n      withoutPreloader: true,\r\n      loadPromises,\r\n      noPlayButton: true,\r\n      noInfo: true\r\n    });\r\n\r\n    if(videoRes.thumb) {\r\n      if(videoRes.thumb.images.thumb) {\r\n        videoRes.thumb.images.thumb.classList.add('media-sticker', 'thumbnail');\r\n      }\r\n\r\n      if(videoRes.thumb.images.full) {\r\n        videoRes.thumb.images.full.classList.add('media-sticker');\r\n      }\r\n    }\r\n\r\n    return videoRes.loadPromise;\r\n  } */\r\n\r\n  // console.log('wrap sticker', doc, div, onlyThumb);\r\n\r\n  let cacheContext: ThumbCache;\r\n  const getCacheContext = (type: string = cacheContext?.type) => {\r\n    return cacheContext = apiManagerProxy.getCacheContext(doc, type);\r\n  };\r\n\r\n  const isAnimated = !asStatic && (stickerType === 2 || stickerType === 3);\r\n\r\n  const effectThumb = getStickerEffectThumb(doc);\r\n  if(isOut !== undefined && effectThumb && !isOut) {\r\n    div.forEach((div) => div.classList.add('reflect-x'));\r\n  }\r\n\r\n  const willHaveLock = effectThumb && withLock;\r\n  if(willHaveLock) {\r\n    const lockUrl = locksUrls[doc.id];\r\n    div.forEach((div) => {\r\n      div.classList.add('is-premium-sticker');\r\n      div.append(Icon('premium_lock', 'premium-sticker-lock'));\r\n      lockUrl && div.style.setProperty('--lock-url', `url(${lockUrl})`);\r\n    });\r\n  }\r\n\r\n  if(asStatic && stickerType !== 1) {\r\n    const thumb = choosePhotoSize(doc, width, height, false) as PhotoSize.photoSize;\r\n    getCacheContext(thumb.type);\r\n  } else {\r\n    getCacheContext(fullThumb?.type);\r\n  }\r\n\r\n  const customEmojiAttribute = doc.attributes.find((attribute) => attribute._ === 'documentAttributeCustomEmoji') as DocumentAttribute.documentAttributeCustomEmoji;\r\n  if(!customEmojiAttribute || !customEmojiAttribute.pFlags.text_color) {\r\n    textColor = undefined;\r\n  } else if(!textColor) {\r\n    textColor = 'primary-text-color';\r\n  }\r\n\r\n  const toneIndex = emoji && !isCustomEmoji ? getEmojiToneIndex(emoji) : -1;\r\n  const lottieCachedThumbToneIndex = toneIndex === -1 ? textColor ?? toneIndex : toneIndex;\r\n  const downloaded = cacheContext.downloaded && !needFadeIn;\r\n\r\n  const isThumbNeededForType = isAnimated;\r\n  const lottieCachedThumb = stickerType === 2 || stickerType === 3 ? apiManagerProxy.getStickerCachedThumb(doc.id, lottieCachedThumbToneIndex) : undefined;\r\n\r\n  const ret = {\r\n    render: undefined as typeof loadPromise,\r\n    load: undefined as typeof load,\r\n    width,\r\n    height\r\n  };\r\n  let loadThumbPromise = deferredPromise<void>();\r\n  let haveThumbCached = false;\r\n  if((\r\n    doc.thumbs?.length ||\r\n      lottieCachedThumb\r\n  ) &&\r\n    isEmptyContainer(div[0]) && (\r\n    !downloaded ||\r\n      isThumbNeededForType ||\r\n      onlyThumb\r\n  ) && withThumb !== false/*  && doc.thumbs[0]._ !== 'photoSizeEmpty' */\r\n  ) {\r\n    let thumb = lottieCachedThumb || doc.thumbs[0];\r\n\r\n    // console.log('wrap sticker', thumb, div);\r\n\r\n    const afterRender = (div: HTMLElement, thumbImage: HTMLElement) => {\r\n      if(isEmptyContainer(div)) {\r\n        sequentialDom.mutateElement(div, () => {\r\n          if(isEmptyContainer(div)) {\r\n            thumbImage.classList.add('media-sticker', 'thumbnail');\r\n            div.append(thumbImage);\r\n          }\r\n\r\n          loadThumbPromise.resolve();\r\n        });\r\n      } else {\r\n        loadThumbPromise.resolve();\r\n      }\r\n    };\r\n\r\n    if('url' in thumb) {\r\n      haveThumbCached = true;\r\n      div.forEach((div) => {\r\n        const thumbImage = new Image();\r\n        renderImageFromUrl(thumbImage, (thumb as any).url, () => afterRender(div, thumbImage));\r\n      });\r\n    } else if('bytes' in thumb) {\r\n      if(thumb._ === 'photoPathSize') {\r\n        if(!thumb.bytes.length) {\r\n          thumb = doc.thumbs.find((t) => (t as PhotoSize.photoStrippedSize).bytes?.length) || thumb;\r\n        }\r\n\r\n        const d = getPathFromBytes((thumb as PhotoSize.photoStrippedSize).bytes);\r\n        const ns = 'http://www.w3.org/2000/svg';\r\n        const svg = document.createElementNS(ns, 'svg');\r\n        svg.classList.add('rlottie-vector', 'media-sticker', 'thumbnail');\r\n        svg.setAttributeNS(null, 'viewBox', `0 0 ${doc.w || 512} ${doc.h || 512}`);\r\n\r\n        // const defs = document.createElementNS(ns, 'defs');\r\n        // const linearGradient = document.createElementNS(ns, 'linearGradient');\r\n        // linearGradient.setAttributeNS(null, 'id', 'g');\r\n        // linearGradient.setAttributeNS(null, 'x1', '-300%');\r\n        // linearGradient.setAttributeNS(null, 'x2', '-200%');\r\n        // linearGradient.setAttributeNS(null, 'y1', '0');\r\n        // linearGradient.setAttributeNS(null, 'y2', '0');\r\n        // const stops = [\r\n        //   ['-10%', '.1'],\r\n        //   ['30%', '.07'],\r\n        //   ['70%', '.07'],\r\n        //   ['110%', '.1']\r\n        // ].map(([offset, stopOpacity]) => {\r\n        //   const stop = document.createElementNS(ns, 'stop');\r\n        //   stop.setAttributeNS(null, 'offset', offset);\r\n        //   stop.setAttributeNS(null, 'stop-opacity', stopOpacity);\r\n        //   return stop;\r\n        // });\r\n        // const animates = [\r\n        //   ['-300%', '1200%'],\r\n        //   ['-200%', '1300%']\r\n        // ].map(([from, to], idx) => {\r\n        //   const animate = document.createElementNS(ns, 'animate');\r\n        //   animate.setAttributeNS(null, 'attributeName', 'x' + (idx + 1));\r\n        //   animate.setAttributeNS(null, 'from', from);\r\n        //   animate.setAttributeNS(null, 'to', to);\r\n        //   animate.setAttributeNS(null, 'dur', '3s');\r\n        //   animate.setAttributeNS(null, 'repeatCount', 'indefinite');\r\n        //   return animate;\r\n        // });\r\n        // linearGradient.append(...stops, ...animates);\r\n        // defs.append(linearGradient);\r\n        // svg.append(defs);\r\n\r\n        const path = document.createElementNS(ns, 'path');\r\n        path.setAttributeNS(null, 'd', d);\r\n        // if(liteMode.isAvailable('animations') && !isCustomEmoji) path.setAttributeNS(null, 'fill', 'url(#g)');\r\n        svg.append(path);\r\n        div.forEach((div, idx) => div.append(idx > 0 ? svg.cloneNode(true) : svg));\r\n        haveThumbCached = true;\r\n        loadThumbPromise.resolve();\r\n      } else if(toneIndex <= 0) {\r\n        const r = () => {\r\n          (div as HTMLElement[]).forEach((div) => {\r\n            const thumbImage = new Image();\r\n            const url = getPreviewURLFromThumb(doc, thumb as PhotoSize.photoStrippedSize, true);\r\n            renderImageFromUrl(thumbImage, url, () => afterRender(div, thumbImage));\r\n          });\r\n        };\r\n\r\n        if((IS_WEBP_SUPPORTED || doc.pFlags.stickerThumbConverted || cacheContext.url)/*  && false */) {\r\n          haveThumbCached = true;\r\n          r();\r\n        } else {\r\n          haveThumbCached = true;\r\n          webpWorkerController.convert('main-' + doc.id, thumb.bytes).then((bytes) => {\r\n            managers.appDocsManager.saveWebPConvertedStrippedThumb(doc.id, bytes);\r\n            (thumb as PhotoSize.photoStrippedSize).bytes = bytes;\r\n            doc.pFlags.stickerThumbConverted = true;\r\n\r\n            if((middleware && !middleware()) || !isEmptyContainer((div as HTMLElement[])[0])) {\r\n              loadThumbPromise.resolve();\r\n              return;\r\n            }\r\n\r\n            r();\r\n          }).catch(() => loadThumbPromise.resolve());\r\n        }\r\n      }\r\n    } else if(((stickerType === 2 && toneIndex <= 0) || stickerType === 3) && (withThumb || onlyThumb)) {\r\n      const load = async() => {\r\n        if(!isEmptyContainer((div as HTMLElement[])[0]) || (middleware && !middleware())) {\r\n          loadThumbPromise.resolve();\r\n          return;\r\n        }\r\n\r\n        const r = (div: HTMLElement, thumbImage: HTMLElement, url: string) => {\r\n          if(!isEmptyContainer(div) || (middleware && !middleware())) {\r\n            loadThumbPromise.resolve();\r\n            return;\r\n          }\r\n\r\n          if(!url) afterRender(div, thumbImage);\r\n          else renderImageFromUrl(thumbImage, url, () => afterRender(div, thumbImage));\r\n        };\r\n\r\n        getCacheContext();\r\n        (div as HTMLElement[]).forEach((div) => {\r\n          if(cacheContext.url) {\r\n            r(div, new Image(), cacheContext.url);\r\n          } else if('bytes' in thumb) {\r\n            const res = getImageFromStrippedThumb(doc, thumb as PhotoSize.photoStrippedSize, true);\r\n            res.loadPromise.then(() => r(div, res.image, ''));\r\n\r\n            // return managers.appDocsManager.getThumbURL(doc, thumb as PhotoSize.photoStrippedSize).promise.then(r);\r\n          } else {\r\n            appDownloadManager.downloadMediaURL({\r\n              media: doc,\r\n              thumb: thumb as PhotoSize\r\n            }).then(async(url) => {\r\n              return r(div, new Image(), url);\r\n            });\r\n          }\r\n        });\r\n      };\r\n\r\n      if(lazyLoadQueue && onlyThumb) {\r\n        lazyLoadQueue.push({div: div[0], load});\r\n        loadThumbPromise.resolve();\r\n        return ret;\r\n      } else {\r\n        load();\r\n\r\n        if((thumb as any).url) {\r\n          haveThumbCached = true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if(loadPromises && haveThumbCached) {\r\n    loadPromises.push(loadThumbPromise);\r\n  }\r\n\r\n  if(onlyThumb/*  || true */) { // for sticker panel\r\n    return ret;\r\n  }\r\n\r\n  const middlewareError = makeError('MIDDLEWARE');\r\n  const load = async() => {\r\n    if(middleware && !middleware()) {\r\n      throw middlewareError;\r\n    }\r\n\r\n    if(stickerType === 2 && !asStatic) {\r\n      const blob = await appDownloadManager.downloadMedia({media: doc, queueId: lazyLoadQueue?.queueId, thumb: fullThumb});\r\n      if(middleware && !middleware()) {\r\n        throw middlewareError;\r\n      }\r\n\r\n      const animation = await lottieLoader.loadAnimationWorker({\r\n        container: (div as HTMLElement[])[0],\r\n        loop,\r\n        autoplay: play,\r\n        animationData: blob,\r\n        width,\r\n        height,\r\n        name: 'doc' + doc.id,\r\n        needUpscale,\r\n        skipRatio,\r\n        toneIndex,\r\n        sync: isCustomEmoji,\r\n        middleware: loadStickerMiddleware ?? middleware,\r\n        group,\r\n        liteModeKey: liteModeKey || undefined,\r\n        textColor: !isCustomEmoji ? textColor : undefined\r\n      });\r\n\r\n      // const deferred = deferredPromise<void>();\r\n\r\n      const setLockColor = willHaveLock ? () => {\r\n        const lockUrl = locksUrls[doc.id] ??= computeLockColor(animation.canvas[0]);\r\n        (div as HTMLElement[]).forEach((div) => div.style.setProperty('--lock-url', `url(${lockUrl})`));\r\n      } : undefined;\r\n\r\n      const onFirstFrame = (container: HTMLElement, canvas: HTMLCanvasElement) => {\r\n        let element = getThumbFromContainer(container);\r\n        element = element !== canvas && element as HTMLElement;\r\n        if(needFadeIn !== false) {\r\n          needFadeIn = (needFadeIn || !element || element.tagName === 'svg') && liteMode.isAvailable('animations');\r\n        }\r\n\r\n        const cb = () => {\r\n          if(\r\n            element &&\r\n            element !== canvas &&\r\n            element.tagName !== 'DIV'\r\n          ) {\r\n            element.remove();\r\n          }\r\n        };\r\n\r\n        if(!needFadeIn) {\r\n          if(element) {\r\n            sequentialDom.mutate(cb);\r\n          }\r\n        } else {\r\n          sequentialDom.mutate(() => {\r\n            canvas && canvas.classList.add('fade-in');\r\n            if(element) {\r\n              element.classList.add('fade-out');\r\n            }\r\n\r\n            onAnimationEnd(canvas || element, () => {\r\n              sequentialDom.mutate(() => {\r\n                canvas && canvas.classList.remove('fade-in');\r\n                cb();\r\n              });\r\n            }, 400);\r\n          });\r\n        }\r\n      };\r\n\r\n      animation.addEventListener('firstFrame', () => {\r\n        const canvas = animation.canvas[0];\r\n        if(withThumb !== false || isCustomEmoji) {\r\n          saveLottiePreview(doc, canvas, lottieCachedThumbToneIndex);\r\n        }\r\n\r\n        if(willHaveLock) {\r\n          setLockColor();\r\n        }\r\n\r\n        if(!isCustomEmoji) {\r\n          (div as HTMLElement[]).forEach((container, idx) => {\r\n            onFirstFrame(container, animation.canvas[idx]);\r\n          });\r\n        }\r\n      }, {once: true});\r\n\r\n      if(emoji) {\r\n        managers.appStickersManager.preloadAnimatedEmojiStickerAnimation(emoji);\r\n      }\r\n\r\n      return animation;\r\n\r\n      // return deferred;\r\n      // await new Promise((resolve) => setTimeout(resolve, 5e3));\r\n    } else if(asStatic || stickerType === 3) {\r\n      const isSingleVideo = isAnimated && syncedVideo;\r\n      const cacheName = isSingleVideo ? framesCache.generateName('' + doc.id, 0, 0, undefined, undefined) : undefined;\r\n\r\n      const cachePromise = videosCache[cacheName];\r\n      if(cachePromise) {\r\n        return cachePromise as typeof promise;\r\n      }\r\n\r\n      const d = isSingleVideo ? (div as HTMLElement[]).slice(0, 1) : div as HTMLElement[];\r\n      const media: HTMLElement[] = d.map(() => {\r\n        let media: HTMLElement;\r\n        if(asStatic) {\r\n          media = new Image();\r\n        } else {\r\n          const video = media = createVideo({middleware});\r\n          video.muted = true;\r\n          if(play) video.autoplay = true;\r\n          if(loop) video.loop = true;\r\n          video._autoplay = play || false;\r\n          video._loop = loop || false;\r\n\r\n          if(loop && typeof(loop) === 'number') {\r\n            let previousTime = 0, playedTimes = 0;\r\n            function onTimeupdate(this: HTMLVideoElement) {\r\n              if(previousTime > this.currentTime && ++playedTimes === loop as number) {\r\n                this.autoplay = false;\r\n                this.loop = false;\r\n                this.pause();\r\n                video.removeEventListener('timeupdate', onTimeupdate);\r\n              }\r\n\r\n              previousTime = this.currentTime;\r\n            }\r\n\r\n            video.addEventListener('timeupdate', onTimeupdate);\r\n          }\r\n        }\r\n\r\n        media.classList.add('media-sticker');\r\n        return media;\r\n      });\r\n\r\n      const thumbImage = (div as HTMLElement[]).map((div, idx) => {\r\n        const thumb = getThumbFromContainer(div);\r\n        return (thumb as HTMLElement) !== media[idx] && thumb;\r\n      }) as HTMLElement[];\r\n      if(needFadeIn !== false) {\r\n        needFadeIn = (needFadeIn || !downloaded || (asStatic ? thumbImage[0] : (!thumbImage[0] || thumbImage[0].tagName === 'svg'))) && liteMode.isAvailable('animations');\r\n      }\r\n\r\n      if(needFadeIn) {\r\n        media.forEach((media) => media.classList.add('fade-in'));\r\n      }\r\n\r\n      const promise = new Promise<HTMLVideoElement[] | HTMLImageElement[]>(async(resolve, reject) => {\r\n        const r = async() => {\r\n          if(middleware && !middleware()) {\r\n            reject(middlewareError);\r\n            return;\r\n          }\r\n\r\n          const mediaLength = media.length;\r\n          const loaded: HTMLElement[] = [];\r\n          const onLoad = (div: HTMLElement, media: HTMLElement, thumbImage: HTMLElement) => {\r\n            sequentialDom.mutateElement(div, () => {\r\n              if(middleware && !middleware()) {\r\n                reject(middlewareError);\r\n                return;\r\n              }\r\n\r\n              if(!media) {\r\n                if(!isSingleVideo || !isAnimated) {\r\n                  UNMOUNT_THUMBS && thumbImage?.remove();\r\n                }\r\n\r\n                return;\r\n              }\r\n\r\n              const isVideo = media instanceof HTMLVideoElement;\r\n              if(isVideo/*  && media.isConnected */) {\r\n                // * video sticker can have arbitrary dimensions\r\n                const {videoWidth, videoHeight} = media;\r\n                const ratio = videoWidth / videoHeight;\r\n\r\n                let w = width * window.devicePixelRatio;\r\n                let h = height * window.devicePixelRatio;\r\n                if(ratio < 1) {\r\n                  w = h * ratio;\r\n                } else {\r\n                  h = w / ratio;\r\n                }\r\n\r\n                if(!isSavingLottiePreview(doc, toneIndex, w, h)) {\r\n                  // const perf = performance.now();\r\n                  const canvas = document.createElement('canvas');\r\n                  canvas.width = w;\r\n                  canvas.height = h;\r\n                  const ctx = canvas.getContext('2d');\r\n                  ctx.drawImage(media, 0, 0, canvas.width, canvas.height);\r\n                  saveLottiePreview(doc, canvas, toneIndex);\r\n                  // console.log('perf', performance.now() - perf);\r\n                }\r\n              }\r\n\r\n              if(isSingleVideo) {\r\n                resolve(media as any);\r\n                return;\r\n              }\r\n\r\n              if(isVideo) {\r\n                leakVideoFallbacks.set(media, () => {\r\n                  const reset = () => {\r\n                    onVideoLeak(media).catch(noop);\r\n                  };\r\n\r\n                  if(!thumbImage || !(thumbImage instanceof HTMLImageElement)) {\r\n                    const d = document.createElement('div');\r\n                    wrapSticker({\r\n                      ...options,\r\n                      div: d,\r\n                      static: true,\r\n                      exportLoad: undefined,\r\n                      needFadeIn: false,\r\n                      lazyLoadQueue: undefined\r\n                      // onlyThumb: true\r\n                    }).then(({render}) => {\r\n                      return render;\r\n                    }).finally(() => {\r\n                      sequentialDom.mutateElement(media, () => {\r\n                        if(middleware()) div.append(...Array.from(d.children));\r\n                        media.remove();\r\n                        reset();\r\n                      });\r\n                    });\r\n                  } else {\r\n                    media.replaceWith(thumbImage);\r\n                    reset();\r\n                  }\r\n                });\r\n              }\r\n\r\n              div.append(media);\r\n\r\n              if(needFadeIn) {\r\n                thumbImage && thumbImage.classList.add('fade-out');\r\n                onAnimationEnd(media, () => {\r\n                  media.classList.remove('fade-in');\r\n                  UNMOUNT_THUMBS && thumbImage?.remove();\r\n                }, 400);\r\n              } else {\r\n                UNMOUNT_THUMBS && thumbImage?.remove();\r\n              }\r\n\r\n              if(isAnimated) {\r\n                animationIntersector.addAnimation({\r\n                  animation: media as HTMLVideoElement,\r\n                  observeElement: div,\r\n                  group,\r\n                  controlled: middleware,\r\n                  liteModeKey: liteModeKey || undefined,\r\n                  type: 'video'\r\n                });\r\n              }\r\n\r\n              if(loaded.push(media) === mediaLength) {\r\n                resolve(loaded as any);\r\n              }\r\n            });\r\n          };\r\n\r\n          getCacheContext();\r\n          let lastPromise: Promise<any>;\r\n          (div as HTMLElement[]).forEach((div, idx) => {\r\n            const _media = media[idx];\r\n            const cb = () => onLoad(div, _media, thumbImage[idx]);\r\n            if(_media) lastPromise = renderImageFromUrlPromise(_media, cacheContext.url);\r\n            lastPromise.then(cb);\r\n          });\r\n        };\r\n\r\n        getCacheContext();\r\n        if(cacheContext.url) r();\r\n        else {\r\n          let promise: Promise<any>;\r\n          if(stickerType !== 1 && asStatic) {\r\n            const thumb = choosePhotoSize(doc, width, height, false) as PhotoSize.photoSize;\r\n            // promise = managers.appDocsManager.getThumbURL(doc, thumb).promise\r\n            promise = appDownloadManager.downloadMediaURL({media: doc, thumb, queueId: lazyLoadQueue?.queueId});\r\n          } else {\r\n            promise = appDownloadManager.downloadMediaURL({media: doc, queueId: lazyLoadQueue?.queueId});\r\n          }\r\n\r\n          promise.then(r, reject);\r\n        }\r\n      });\r\n\r\n      if(cacheName) {\r\n        videosCache[cacheName] = promise as any;\r\n        loadStickerMiddleware && promise.finally(() => {\r\n          if(!loadStickerMiddleware()) {\r\n            delete videosCache[cacheName];\r\n          }\r\n        });\r\n      }\r\n\r\n      return promise;\r\n    }\r\n  };\r\n\r\n  if(exportLoad && ((exportLoad === 1 && (!downloaded || isAnimated)) || exportLoad === 2)) {\r\n    ret.load = load;\r\n    return ret;\r\n  }\r\n\r\n  const loadPromise: Promise<Awaited<ReturnType<typeof load>> | void> = lazyLoadQueue && (!downloaded || isAnimated) ?\r\n    (lazyLoadQueue.push({div: div[0], load}), Promise.resolve()) :\r\n    load();\r\n\r\n  if(downloaded && (asStatic/*  || stickerType === 3 */)) {\r\n    loadThumbPromise = loadPromise as any;\r\n    loadPromises?.push(loadThumbPromise);\r\n  }\r\n\r\n  if(stickerType === 2 && effectThumb && isOut !== undefined && !noPremium) {\r\n    attachStickerEffectHandler({\r\n      container: div[0],\r\n      doc,\r\n      managers,\r\n      middleware,\r\n      isOut,\r\n      width,\r\n      loadPromise,\r\n      relativeEffect,\r\n      loopEffect,\r\n      scrollable,\r\n      showPremiumInfo\r\n    });\r\n  }\r\n\r\n  ret.render = loadPromise as any;\r\n  return ret;\r\n}\r\n\r\nfunction attachStickerEffectHandler({container, doc, managers, middleware, isOut, width, loadPromise, relativeEffect, loopEffect, scrollable, showPremiumInfo}: {\r\n  container: HTMLElement,\r\n  doc: MyDocument,\r\n  managers: AppManagers,\r\n  middleware: Middleware,\r\n  isOut: boolean,\r\n  width: number,\r\n  loadPromise: Promise<any>,\r\n  relativeEffect?: boolean,\r\n  loopEffect?: boolean,\r\n  scrollable?: Scrollable,\r\n  showPremiumInfo?: () => void\r\n}) {\r\n  managers.appStickersManager.preloadSticker(doc.id, true);\r\n\r\n  attachClickEvent(container, async(e) => {\r\n    const isAvailable = liteMode.isAvailable('effects_premiumstickers') || relativeEffect;\r\n    cancelEvent(e);\r\n    if(!e.isTrusted && !isAvailable) {\r\n      return;\r\n    }\r\n\r\n    if(container.dataset.playing || !isAvailable) {\r\n      showPremiumInfo?.();\r\n      return;\r\n    }\r\n\r\n    container.dataset.playing = '1';\r\n\r\n    await loadPromise;\r\n    const {animationDiv, stickerPromise} = wrapStickerAnimation({\r\n      doc,\r\n      middleware,\r\n      side: isOut ? 'right' : 'left',\r\n      size: width * STICKER_EFFECT_MULTIPLIER,\r\n      target: container,\r\n      play: true,\r\n      fullThumb: getStickerEffectThumb(doc),\r\n      relativeEffect,\r\n      loopEffect,\r\n      scrollable\r\n    });\r\n\r\n    if(isOut !== undefined && !isOut/*  && !relativeEffect */) {\r\n      animationDiv.classList.add('reflect-x');\r\n    }\r\n\r\n    stickerPromise.then((player) => {\r\n      player.addEventListener('destroy', () => {\r\n        delete container.dataset.playing;\r\n      });\r\n    });\r\n  });\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport windowSize from '../windowSize';\r\n\r\nexport default function getVisibleRect(\r\n  element: HTMLElement,\r\n  overflowElement: HTMLElement,\r\n  lookForSticky?: boolean,\r\n  rect: DOMRectMinified = element.getBoundingClientRect(),\r\n  overflowRect: DOMRectMinified = overflowElement.getBoundingClientRect()\r\n) {\r\n  let {top: overflowTop, right: overflowRight, bottom: overflowBottom, left: overflowLeft} = overflowRect;\r\n\r\n  // * respect sticky headers\r\n  if(lookForSticky) {\r\n    const sticky = overflowElement.querySelector('.sticky');\r\n    if(sticky) {\r\n      const stickyRect = sticky.getBoundingClientRect();\r\n      overflowTop = stickyRect.bottom;\r\n    }\r\n  }\r\n\r\n  if(rect.top >= overflowBottom ||\r\n    rect.bottom <= overflowTop ||\r\n    rect.right <= overflowLeft ||\r\n    rect.left >= overflowRight) {\r\n    return null;\r\n  }\r\n\r\n  const overflow = {\r\n    top: false,\r\n    right: false,\r\n    bottom: false,\r\n    left: false,\r\n    vertical: 0 as 0 | 1 | 2,\r\n    horizontal: 0 as 0 | 1 | 2\r\n  };\r\n\r\n  const windowWidth = windowSize.width;\r\n  const windowHeight = windowSize.height;\r\n\r\n  return {\r\n    rect: {\r\n      top: rect.top < overflowTop && overflowTop !== 0 ? (overflow.top = true, ++overflow.vertical, overflowTop) : rect.top,\r\n      right: rect.right > overflowRight && overflowRight !== windowWidth ? (overflow.right = true, ++overflow.horizontal, overflowRight) : rect.right,\r\n      bottom: rect.bottom > overflowBottom && overflowBottom !== windowHeight ? (overflow.bottom = true, ++overflow.vertical, overflowBottom) : rect.bottom,\r\n      left: rect.left < overflowLeft && overflowLeft !== 0 ? (overflow.left = true, ++overflow.horizontal, overflowLeft) : rect.left\r\n    },\r\n    overflow\r\n  };\r\n}\r\n\r\n(window as any).getVisibleRect = getVisibleRect;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport getVisibleRect from './getVisibleRect';\r\n\r\nexport type ViewportSlicePart = {element: HTMLElement, rect: DOMRect, visibleRect: ReturnType<typeof getVisibleRect>}[];\r\n\r\nexport default function getViewportSlice({\r\n  overflowElement,\r\n  overflowRect,\r\n  selector,\r\n  extraSize,\r\n  extraMinLength,\r\n  elements\r\n}: {\r\n  overflowElement: HTMLElement,\r\n  overflowRect?: DOMRectMinified,\r\n  extraSize?: number,\r\n  extraMinLength?: number,\r\n  selector?: string,\r\n  elements?: HTMLElement[]\r\n}) {\r\n  // const perf = performance.now();\r\n  overflowRect ??= overflowElement.getBoundingClientRect();\r\n  elements ??= Array.from(overflowElement.querySelectorAll<HTMLElement>(selector));\r\n\r\n  if(extraSize) {\r\n    overflowRect = {\r\n      top: overflowRect.top - extraSize,\r\n      right: overflowRect.right + extraSize,\r\n      bottom: overflowRect.bottom + extraSize,\r\n      left: overflowRect.left - extraSize\r\n    };\r\n  }\r\n\r\n  const invisibleTop: ViewportSlicePart = [],\r\n    visible: typeof invisibleTop = [],\r\n    invisibleBottom: typeof invisibleTop = [];\r\n  let foundVisible = false;\r\n  for(const element of elements) {\r\n    const rect = element.getBoundingClientRect();\r\n    const visibleRect = getVisibleRect(element, overflowElement, false, rect, overflowRect);\r\n\r\n    const isVisible = !!visibleRect;\r\n    let array: typeof invisibleTop;\r\n    if(isVisible) {\r\n      foundVisible = true;\r\n      array = visible;\r\n    } else if(foundVisible) {\r\n      array = invisibleBottom;\r\n    } else {\r\n      array = invisibleTop;\r\n    }\r\n\r\n    array.push({\r\n      element,\r\n      rect,\r\n      visibleRect\r\n    });\r\n  }\r\n\r\n  if(extraMinLength) {\r\n    visible.unshift(...invisibleTop.splice(Math.max(0, invisibleTop.length - extraMinLength), extraMinLength));\r\n    visible.push(...invisibleBottom.splice(0, extraMinLength));\r\n  }\r\n\r\n  // if(extraSize && visible.length) {\r\n  //   const maxTop = visible[0].rect.top;\r\n  //   const minTop = maxTop - extraSize;\r\n  //   const minBottom = visible[visible.length - 1].rect.bottom;\r\n  //   const maxBottom = minBottom + extraSize;\r\n\r\n  //   for(let length = invisibleTop.length, i = length - 1; i >= 0; --i) {\r\n  //     const element = invisibleTop[i];\r\n  //     if(element.rect.top >= minTop) {\r\n  //       invisibleTop.splice(i, 1);\r\n  //       visible.unshift(element);\r\n  //     }\r\n  //   }\r\n\r\n  //   for(let i = 0, length = invisibleBottom.length; i < length; ++i) {\r\n  //     const element = invisibleBottom[i];\r\n  //     if(element.rect.bottom <= maxBottom) {\r\n  //       invisibleBottom.splice(i--, 1);\r\n  //       --length;\r\n  //       visible.push(element);\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  // console.log('getViewportSlice time:', performance.now() - perf);\r\n\r\n  return {invisibleTop, visible, invisibleBottom};\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {MyDocument} from '../appManagers/appDocsManager';\r\nimport animationIntersector, {AnimationItemGroup} from '../../components/animationIntersector';\r\nimport LazyLoadQueue from '../../components/lazyLoadQueue';\r\nimport wrapSticker, {videosCache} from '../../components/wrappers/sticker';\r\nimport customProperties, {CustomProperty} from '../../helpers/dom/customProperties';\r\nimport findUpClassName from '../../helpers/dom/findUpClassName';\r\nimport getViewportSlice from '../../helpers/dom/getViewportSlice';\r\nimport replaceContent from '../../helpers/dom/replaceContent';\r\nimport framesCache from '../../helpers/framesCache';\r\nimport {MediaSize} from '../../helpers/mediaSize';\r\nimport mediaSizes from '../../helpers/mediaSizes';\r\nimport {Middleware, MiddlewareHelper, getMiddleware} from '../../helpers/middleware';\r\nimport noop from '../../helpers/noop';\r\nimport {DocumentAttribute} from '../../layer';\r\nimport wrapRichText from '../richTextProcessor/wrapRichText';\r\nimport RLottiePlayer, {applyColorOnContext, getLottiePixelRatio} from '../rlottie/rlottiePlayer';\r\nimport rootScope from '../rootScope';\r\nimport CustomEmojiElement, {CustomEmojiElements} from './element';\r\nimport assumeType from '../../helpers/assumeType';\r\nimport {IS_WEBM_SUPPORTED} from '../../environment/videoSupport';\r\n\r\nconst resizeObserverMap: WeakMap<Element, CustomEmojiRendererElement> = new WeakMap();\r\nconst resizeObserver = new ResizeObserver((entries) => {\r\n  for(const entry of entries) {\r\n    const renderer = resizeObserverMap.get(entry.target);\r\n    renderer.setDimensionsFromRect(entry.contentRect);\r\n  }\r\n});\r\n\r\nconst globalLazyLoadQueue = new LazyLoadQueue();\r\n\r\nexport class CustomEmojiRendererElement extends HTMLElement {\r\n  public static globalLazyLoadQueue: LazyLoadQueue = globalLazyLoadQueue;\r\n\r\n  public canvas: HTMLCanvasElement;\r\n  public context: CanvasRenderingContext2D;\r\n\r\n  public playersSynced: Map<CustomEmojiElements, RLottiePlayer | HTMLVideoElement>;\r\n  public textColored: Set<CustomEmojiElements>;\r\n  public clearedElements: WeakSet<CustomEmojiElements>;\r\n  public customEmojis: Parameters<typeof wrapRichText>[1]['customEmojis'];\r\n  public lastPausedVideo: HTMLVideoElement;\r\n\r\n  public lastRect: DOMRect;\r\n  public isDimensionsSet: boolean;\r\n\r\n  public animationGroup: AnimationItemGroup;\r\n  public size: MediaSize;\r\n\r\n  public isSelectable: boolean;\r\n  public isCanvasClean: boolean;\r\n\r\n  public ignoreSettingDimensions: boolean;\r\n\r\n  public forceRenderAfterSize: boolean;\r\n\r\n  public middlewareHelper: MiddlewareHelper;\r\n\r\n  public auto: boolean;\r\n  public textColor: CustomProperty;\r\n\r\n  public observeResizeElement: HTMLElement;\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.classList.add('custom-emoji-renderer');\r\n    this.canvas = document.createElement('canvas');\r\n    this.canvas.classList.add('custom-emoji-canvas');\r\n    this.context = this.canvas.getContext('2d');\r\n    this.append(this.canvas);\r\n\r\n    this.playersSynced = new Map();\r\n    this.textColored = new Set();\r\n    this.clearedElements = new WeakSet();\r\n    this.customEmojis = new Map();\r\n\r\n    this.animationGroup = 'EMOJI';\r\n    this.isCanvasClean = false;\r\n  }\r\n\r\n  public connectedCallback() {\r\n    if(emojiRenderers.has(this)) {\r\n      return;\r\n    }\r\n\r\n    // this.setDimensions();\r\n    // animationIntersector.addAnimation(this, this.animationGroup);\r\n    const observeElement = this.observeResizeElement ?? this.canvas;\r\n    resizeObserverMap.set(observeElement, this);\r\n    resizeObserver.observe(observeElement);\r\n    emojiRenderers.add(this);\r\n\r\n    this.connectedCallback = undefined;\r\n  }\r\n\r\n  public disconnectedCallback() {\r\n    if(this.isConnected || !this.auto) {\r\n      return;\r\n    }\r\n\r\n    this.destroy?.();\r\n\r\n    this.disconnectedCallback = undefined;\r\n  }\r\n\r\n  public destroy() {\r\n    // if(this.isConnected) {\r\n    //   return;\r\n    // }\r\n\r\n    const observeElement = this.observeResizeElement ?? this.canvas;\r\n    resizeObserverMap.delete(observeElement);\r\n    resizeObserver.unobserve(observeElement);\r\n\r\n    this.customEmojis.forEach((elements) => {\r\n      elements.forEach((element) => {\r\n        element.clear();\r\n      });\r\n    });\r\n\r\n    emojiRenderers.delete(this);\r\n    this.playersSynced.clear();\r\n    this.middlewareHelper?.clean();\r\n    this.customEmojis.clear();\r\n    this.textColored.clear();\r\n\r\n    this.destroy =\r\n      this.lastPausedVideo =\r\n      undefined;\r\n  }\r\n\r\n  public getOffsets(offsetsMap: Map<CustomEmojiElements, {top: number, left: number, width: number}[]> = new Map()) {\r\n    if(!this.playersSynced.size) {\r\n      return offsetsMap;\r\n    }\r\n\r\n    const overflowElement = findUpClassName(this, 'scrollable') || this.offsetParent as HTMLElement;\r\n    if(!overflowElement) {\r\n      return offsetsMap;\r\n    }\r\n\r\n    const overflowRect = overflowElement.getBoundingClientRect();\r\n    const rect = this.getBoundingClientRect();\r\n\r\n    for(const elements of this.playersSynced.keys()) {\r\n      const elementsArr = Array.from(elements);\r\n      const placeholders = this.isSelectable ? elementsArr.map((element) => element.placeholder) : elementsArr;\r\n      const {visible} = getViewportSlice({\r\n        overflowElement,\r\n        overflowRect,\r\n        elements: placeholders,\r\n        extraSize: this.size.height * 2.5 // let's add some margin\r\n      });\r\n\r\n      const offsets = visible.map(({rect: elementRect}) => {\r\n        const top = elementRect.top - rect.top;\r\n        const left = elementRect.left - rect.left;\r\n        return {top, left, width: elementRect.width};\r\n      });\r\n\r\n      if(offsets.length) {\r\n        offsetsMap.set(elements, offsets);\r\n      }\r\n    }\r\n\r\n    // const rect = this.getBoundingClientRect();\r\n    // const visibleRect = getVisibleRect(this, overflowElement, undefined, rect);\r\n    // const minTop = visibleRect ? visibleRect.rect.top - this.size.height : 0;\r\n    // const maxTop = Infinity;\r\n    // for(const elements of this.playersSynced.keys()) {\r\n    //   const offsets = elements.map((element) => {\r\n    //     const elementRect = element.getBoundingClientRect();\r\n    //     const top = elementRect.top - rect.top;\r\n    //     const left = elementRect.left - rect.left;\r\n    //     return top >= minTop && (top + elementRect.height) <= maxTop ? {top, left} : undefined;\r\n    //   }).filter(Boolean);\r\n\r\n    //   if(offsets.length) {\r\n    //     offsetsMap.set(elements, offsets);\r\n    //   }\r\n    // }\r\n\r\n    return offsetsMap;\r\n  }\r\n\r\n  public clearCanvas() {\r\n    if(this.isCanvasClean) {\r\n      return;\r\n    }\r\n\r\n    const {context, canvas} = this;\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    this.isCanvasClean = true;\r\n  }\r\n\r\n  public render(offsetsMap: ReturnType<CustomEmojiRendererElement['getOffsets']>) {\r\n    const {context, canvas, isDimensionsSet} = this;\r\n    if(!isDimensionsSet) {\r\n      this.setDimensionsFromRect(undefined, false);\r\n    }\r\n\r\n    this.isCanvasClean = false;\r\n\r\n    const {width, height, dpr} = canvas;\r\n    for(const [elements, offsets] of offsetsMap) {\r\n      const player = this.playersSynced.get(elements);\r\n      const frame = syncedPlayersFrames.get(player) || (player instanceof HTMLVideoElement ? player : undefined);\r\n      if(!frame) {\r\n        continue;\r\n      }\r\n\r\n      const isImageData = frame instanceof ImageData;\r\n      let frameWidth: number, frameHeight: number;\r\n      if(player instanceof HTMLVideoElement) {\r\n        frameWidth = this.size.width * dpr;\r\n        frameHeight = this.size.height * dpr;\r\n      } else {\r\n        frameWidth = frame.width;\r\n        frameHeight = frame.height;\r\n      }\r\n\r\n      // ! check performance of scaling\r\n      const elementWidth = Math.round(offsets[0].width * dpr);\r\n      if(elementWidth !== frameWidth) {\r\n        // if(this.size.width === 36) {\r\n        //   console.warn('different width', elementWidth, frameWidth, this);\r\n        // }\r\n\r\n        frameWidth = elementWidth;\r\n        frameHeight = elementWidth;\r\n      }\r\n\r\n      const maxTop = height - frameHeight;\r\n      const maxLeft = width - frameWidth;\r\n      const color = this.textColored.has(elements) ? customProperties.getProperty(this.textColor) : undefined;\r\n\r\n      if(!this.clearedElements.has(elements) && !this.isSelectable) {\r\n        if(this.isSelectable/*  && false */) {\r\n          elements.forEach((element) => {\r\n            element.lastChildWas ??= element.lastChild;\r\n            replaceContent(element, element.firstChild);\r\n          });\r\n        } else {\r\n          elements.forEach((element) => {\r\n            element.replaceChildren();\r\n          });\r\n        }\r\n\r\n        this.clearedElements.add(elements);\r\n      }\r\n\r\n      offsets.forEach(({top, left}) => {\r\n        top = Math.round(top * dpr), left = Math.round(left * dpr);\r\n        if(left < 0 ||/* top > maxTop ||  */left > maxLeft) {\r\n          return;\r\n        }\r\n\r\n        if(isImageData) {\r\n          context.putImageData(frame, left, top);\r\n        } else {\r\n          // context.clearRect(left, top, width, height);\r\n          context.drawImage(frame, left, top, frameWidth, frameHeight);\r\n        }\r\n\r\n        if(color) {\r\n          applyColorOnContext(context, color, left, top, frameWidth, frameHeight);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public checkForAnyFrame() {\r\n    for(const player of this.playersSynced.values()) {\r\n      if(syncedPlayersFrames.has(player) || player instanceof HTMLVideoElement) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  public remove() {\r\n    super.remove();\r\n    // this.canvas.remove();\r\n  }\r\n\r\n  // public setDimensions() {\r\n  //   const {canvas} = this;\r\n  //   sequentialDom.mutateElement(canvas, () => {\r\n  //     const rect = canvas.getBoundingClientRect();\r\n  //     this.setDimensionsFromRect(rect);\r\n  //   });\r\n  // }\r\n\r\n  public setDimensionsFromRect(rect: DOMRect = this.lastRect, forceRenderAfter = true) {\r\n    const {canvas} = this;\r\n    const {dpr} = canvas;\r\n\r\n    if(this.lastRect !== rect) {\r\n      this.lastRect = rect;\r\n    }\r\n\r\n    if(!rect || !dpr || this.ignoreSettingDimensions) {\r\n      return;\r\n    }\r\n\r\n    const {width, height} = rect;\r\n    // if(this.isSelectable) {\r\n    //   height = this.parentElement.scrollHeight || height;\r\n\r\n    //   this.style.width = width + 'px';\r\n    //   this.style.height = height + 'px';\r\n    // }\r\n\r\n    const newWidth = Math.floor(Math.round(width * dpr));\r\n    const newHeight = Math.floor(Math.round(height * dpr));\r\n    if(canvas.width === newWidth && canvas.height === newHeight) {\r\n      return;\r\n    }\r\n\r\n    canvas.width = newWidth;\r\n    canvas.height = newHeight;\r\n    this.isDimensionsSet = true;\r\n    this.isCanvasClean = true;\r\n\r\n    if(this.observeResizeElement) {\r\n      this.canvas.style.setProperty('width', width + 'px', 'important');\r\n      this.canvas.style.setProperty('height', height + 'px', 'important');\r\n    }\r\n\r\n    if(this.forceRenderAfterSize || (this.isSelectable && forceRenderAfter)) {\r\n      this.forceRenderAfterSize = undefined;\r\n      this.forceRender();\r\n    }\r\n  }\r\n\r\n  public forceRender() {\r\n    if(!this.isDimensionsSet) {\r\n      return;\r\n    }\r\n\r\n    if(!renderEmojis(new Set([this]))) {\r\n      this.clearCanvas();\r\n    }\r\n  }\r\n\r\n  public add({\r\n    addCustomEmojis,\r\n    lazyLoadQueue,\r\n    onlyThumb,\r\n    withThumb\r\n  }: {\r\n    addCustomEmojis: Parameters<typeof wrapRichText>[1]['customEmojis'],\r\n    lazyLoadQueue?: LazyLoadQueue | false,\r\n    onlyThumb?: boolean,\r\n    withThumb?: boolean\r\n  }) {\r\n    const renderer = this;\r\n\r\n    addCustomEmojis.forEach((addElements, docId) => { // prevent adding old elements\r\n      let elements = this.customEmojis.get(docId);\r\n      if(!elements) this.customEmojis.set(docId, elements = new Set());\r\n      else this.clearedElements.delete(elements);\r\n\r\n      for(const el of addElements) {\r\n        if(elements.has(el)) {\r\n          addElements.delete(el);\r\n        } else {\r\n          el.clean = false;\r\n          el.renderer = renderer;\r\n          el.elements = elements;\r\n          el.middlewareHelper = this.middlewareHelper.get().create();\r\n          elements.add(el);\r\n\r\n          if(el.lastChildWas && !el.lastChildWas.parentNode) {\r\n            el.append(el.lastChildWas);\r\n          }\r\n        }\r\n      }\r\n\r\n      if(!addElements.size) {\r\n        addCustomEmojis.delete(docId);\r\n      }\r\n    });\r\n\r\n    if(!addCustomEmojis.size) {\r\n      return;\r\n    }\r\n\r\n    const usingOwnQueue = !!(!lazyLoadQueue && lazyLoadQueue !== false && globalLazyLoadQueue);\r\n\r\n    const docIds = Array.from(addCustomEmojis.keys());\r\n\r\n    const managers = rootScope.managers;\r\n    const middleware = this.middlewareHelper.get();\r\n    const size = this.size;\r\n\r\n    const loadPromise = managers.appEmojiManager.getCachedCustomEmojiDocuments(docIds).then((docs) => {\r\n      if(middleware && !middleware()) return;\r\n\r\n      const loadPromises: Promise<any>[] = [];\r\n      const wrap = (doc: MyDocument, _loadPromises?: Promise<any>[]) => {\r\n        const docId = doc.id;\r\n        const newElements = addCustomEmojis.get(docId);\r\n        const customEmojis = renderer.customEmojis.get(docId);\r\n        const newElementsArray = Array.from(newElements);\r\n        const isLottie = doc.sticker === 2;\r\n        const isStatic = newElementsArray[0].static || (doc.mime_type === 'video/webm' && !IS_WEBM_SUPPORTED);\r\n        const willHaveSyncedPlayer = (isLottie || (doc.sticker === 3 && this.isSelectable)) && !onlyThumb && !isStatic;\r\n\r\n        const attribute = doc.attributes.find((attribute) => attribute._ === 'documentAttributeCustomEmoji') as DocumentAttribute.documentAttributeCustomEmoji;\r\n        if(attribute) {\r\n          if(attribute.pFlags.text_color) {\r\n            renderer.textColored.add(customEmojis);\r\n          }\r\n        }\r\n\r\n        const loadPromises: Promise<any>[] = [];\r\n        const promise = wrapSticker({\r\n          div: newElementsArray,\r\n          doc,\r\n          width: size.width,\r\n          height: size.height,\r\n          loop: true,\r\n          play: CUSTOM_EMOJI_INSTANT_PLAY,\r\n          managers,\r\n          isCustomEmoji: true,\r\n          group: 'none',\r\n          loadPromises,\r\n          middleware,\r\n          exportLoad: usingOwnQueue || lazyLoadQueue === false ? 2 : 1, // 2 - export load always, 1 - do not export load if cached static\r\n          needFadeIn: false,\r\n          loadStickerMiddleware: willHaveSyncedPlayer && middleware ? middleware.create().get(() => {\r\n            // if(syncedPlayers.get(key) !== syncedPlayer) {\r\n            //   return false;\r\n            // }\r\n\r\n            // let good = false;\r\n            // for(const middleware of syncedPlayer.middlewares) {\r\n            //   if(middleware()) {\r\n            //     good = true;\r\n            //     break;\r\n            //   }\r\n            // }\r\n\r\n            // return good;\r\n            return !!syncedPlayer.middlewares.size;\r\n          }) : undefined,\r\n          static: isStatic,\r\n          onlyThumb,\r\n          withThumb: withThumb ?? (renderer.clearedElements.has(customEmojis) ? false : undefined),\r\n          syncedVideo: this.isSelectable,\r\n          textColor: renderer.textColor\r\n        });\r\n\r\n        if(_loadPromises) {\r\n          promise.then(() => _loadPromises.push(...loadPromises));\r\n        }\r\n\r\n        const addition: {\r\n          onRender?: (_p: Awaited<Awaited<typeof promise>['render']>) => Promise<void>,\r\n          elements: typeof newElements\r\n        } = {\r\n          elements: newElements\r\n        };\r\n\r\n        const readyPromise = newElementsArray[0].readyPromise;\r\n        if(readyPromise) {\r\n          promise.then(({render}) => {\r\n            if(!render) {\r\n              readyPromise.resolve();\r\n              return;\r\n            }\r\n\r\n            render.then(\r\n              () => readyPromise.resolve(),\r\n              readyPromise.reject.bind(readyPromise)\r\n            );\r\n          });\r\n        }\r\n\r\n        if(doc.sticker === 1 || onlyThumb || isStatic) {\r\n          if(this.isSelectable) {\r\n            addition.onRender = () => Promise.all(loadPromises).then(() => {\r\n              if(middleware && !middleware()) return;\r\n              newElementsArray.forEach((element) => {\r\n                const {placeholder} = element;\r\n                placeholder.src = (element.firstElementChild as HTMLImageElement).src;\r\n              });\r\n            });\r\n          }\r\n\r\n          return promise.then((res) => ({...res, ...addition}));\r\n        }\r\n\r\n        // eslint-disable-next-line prefer-const\r\n        addition.onRender = (_p) => Promise.all(loadPromises).then(() => {\r\n          if((middleware && !middleware()) || !doc.animated) {\r\n            return;\r\n          }\r\n\r\n          const players = Array.isArray(_p) ? _p as HTMLVideoElement[] : [_p as RLottiePlayer];\r\n          const player = Array.isArray(players) ? players[0] : players;\r\n          assumeType<RLottiePlayer | HTMLVideoElement>(player);\r\n          newElementsArray.forEach((element, idx) => {\r\n            const player = players[idx] || players[0];\r\n            element.player = player;\r\n\r\n            if(syncedPlayer) {\r\n              element.syncedPlayer = syncedPlayer;\r\n              if(element.paused) {\r\n                element.syncedPlayer.pausedElements.add(element);\r\n              } else if(player.paused) {\r\n                player.play();\r\n              }\r\n            }\r\n\r\n            if(element.isConnected || middleware?.()) {\r\n              animationIntersector.addAnimation({\r\n                animation: element,\r\n                group: element.renderer.animationGroup,\r\n                observeElement: element.placeholder ?? element,\r\n                controlled: true,\r\n                type: 'emoji'\r\n              });\r\n            }\r\n          });\r\n\r\n          if(player instanceof RLottiePlayer || (player instanceof HTMLVideoElement && this.isSelectable)) {\r\n            syncedPlayer.player = player;\r\n            renderer.playersSynced.set(customEmojis, player);\r\n          }\r\n\r\n          if(player instanceof RLottiePlayer) {\r\n            player.group = renderer.animationGroup;\r\n\r\n            player.overrideRender ??= (frame) => {\r\n              syncedPlayersFrames.set(player, frame);\r\n              // frames.set(containers, frame);\r\n            };\r\n          } else if(player instanceof HTMLVideoElement) {\r\n            // player.play();\r\n\r\n            // const cache = framesCache.getCache(key);\r\n            // let {width, height} = renderer.size;\r\n            // width *= dpr;\r\n            // height *= dpr;\r\n\r\n            // const onFrame = (frame: ImageBitmap | HTMLCanvasElement) => {\r\n            //   topFrames.set(player, frame);\r\n            //   player.requestVideoFrameCallback(callback);\r\n            // };\r\n\r\n            // let frameNo = -1, lastTime = 0;\r\n            // const callback: VideoFrameRequestCallback = (now, metadata) => {\r\n            //   const time = player.currentTime;\r\n            //   if(lastTime > time) {\r\n            //     frameNo = -1;\r\n            //   }\r\n\r\n            //   const _frameNo = ++frameNo;\r\n            //   lastTime = time;\r\n            //   // const frameNo = Math.floor(player.currentTime * 1000 / CUSTOM_EMOJI_FRAME_INTERVAL);\r\n            //   // const frameNo = metadata.presentedFrames;\r\n            //   const imageBitmap = cache.framesNew.get(_frameNo);\r\n\r\n            //   if(imageBitmap) {\r\n            //     onFrame(imageBitmap);\r\n            //   } else if(IS_IMAGE_BITMAP_SUPPORTED) {\r\n            //     createImageBitmap(player, {resizeWidth: width, resizeHeight: height}).then((imageBitmap) => {\r\n            //       cache.framesNew.set(_frameNo, imageBitmap);\r\n            //       if(frameNo === _frameNo) onFrame(imageBitmap);\r\n            //     });\r\n            //   } else {\r\n            //     const canvas = document.createElement('canvas');\r\n            //     const context = canvas.getContext('2d');\r\n            //     canvas.width = width;\r\n            //     canvas.height = height;\r\n            //     context.drawImage(player, 0, 0);\r\n            //     cache.framesNew.set(_frameNo, canvas);\r\n            //     onFrame(canvas);\r\n            //   }\r\n            // };\r\n\r\n            // // player.requestVideoFrameCallback(callback);\r\n            // // setInterval(callback, CUSTOM_EMOJI_FRAME_INTERVAL);\r\n          }\r\n\r\n          if(willHaveSyncedPlayer) {\r\n            const dpr = getLottiePixelRatio(this.size.width, this.size.height);\r\n            renderer.canvas.dpr = dpr;\r\n            setRenderInterval();\r\n          }\r\n        });\r\n\r\n        let syncedPlayer: SyncedPlayer;\r\n        const key = [docId, size.width, size.height].join('-');\r\n        if(willHaveSyncedPlayer) {\r\n          syncedPlayer = syncedPlayers.get(key);\r\n          if(!syncedPlayer) {\r\n            syncedPlayer = {\r\n              player: undefined,\r\n              middlewares: new Set(),\r\n              pausedElements: new Set(),\r\n              key\r\n            };\r\n\r\n            syncedPlayers.set(key, syncedPlayer);\r\n          }\r\n\r\n          for(const element of newElements) {\r\n            const middleware = element.middlewareHelper.get();\r\n            syncedPlayer.middlewares.add(middleware);\r\n            middleware.onClean(() => {\r\n              element.clear(); // * it is correct\r\n\r\n              syncedPlayer.middlewares.delete(middleware);\r\n\r\n              if(!syncedPlayer.middlewares.size) {\r\n                if(syncedPlayer.player) {\r\n                  const frame = syncedPlayersFrames.get(syncedPlayer.player);\r\n                  if(frame) {\r\n                    (frame as ImageBitmap).close?.();\r\n                    syncedPlayersFrames.delete(syncedPlayer.player);\r\n                  }\r\n\r\n                  syncedPlayersFrames.delete(syncedPlayer.player);\r\n                  if(syncedPlayer.player instanceof RLottiePlayer) {\r\n                    syncedPlayer.player.overrideRender = noop;\r\n                    syncedPlayer.player.remove();\r\n                  } else if(syncedPlayer.player instanceof HTMLVideoElement) {\r\n                    const cacheName = framesCache.generateName('' + element.docId, 0, 0, undefined, undefined);\r\n                    delete videosCache[cacheName];\r\n                  }\r\n\r\n                  syncedPlayer.player = undefined;\r\n                }\r\n\r\n                if(syncedPlayers.get(syncedPlayer.key) === syncedPlayer && syncedPlayers.delete(syncedPlayer.key) && !syncedPlayers.size) {\r\n                  clearRenderInterval();\r\n                }\r\n              }\r\n            });\r\n          }\r\n        }\r\n\r\n        return promise.then((res) => ({...res, ...addition}));\r\n      };\r\n\r\n      const missing: DocId[] = [];\r\n      const cachedPromises = docs.map((doc, idx) => {\r\n        if(!doc) {\r\n          missing.push(docIds[idx]);\r\n          return;\r\n        }\r\n\r\n        return wrap(doc, loadPromises);\r\n      }).filter(Boolean);\r\n\r\n      const uncachedPromisesPromise = !missing.length ?\r\n        Promise.resolve([] as typeof cachedPromises) :\r\n        managers.appEmojiManager.getCustomEmojiDocuments(missing).then((docs) => {\r\n          if(middleware && !middleware()) return [];\r\n          return docs.filter(Boolean).map((doc) => wrap(doc));\r\n        });\r\n\r\n      const loadFromPromises = (promises: typeof cachedPromises) => {\r\n        return Promise.all(promises).then((arr) => {\r\n          const promises = arr.map(({load, onRender, elements}) => {\r\n            if(!load) {\r\n              return;\r\n            }\r\n\r\n            const l = () => load().then(onRender);\r\n\r\n            if(usingOwnQueue) {\r\n              elements.forEach((element) => {\r\n                globalLazyLoadQueue.push({\r\n                  div: element,\r\n                  load: () => {\r\n                    elements.forEach((element) => {\r\n                      globalLazyLoadQueue.delete({div: element});\r\n                    });\r\n\r\n                    return l();\r\n                  }\r\n                });\r\n              });\r\n            } else {\r\n              return l();\r\n            }\r\n          });\r\n\r\n          return Promise.all(promises);\r\n        });\r\n      };\r\n\r\n      const load = () => {\r\n        if(middleware && !middleware()) return;\r\n        const cached = loadFromPromises(cachedPromises);\r\n        const uncached = uncachedPromisesPromise.then((promises) => loadFromPromises(promises));\r\n        return Promise.all([cached, uncached]);\r\n      };\r\n\r\n      if(lazyLoadQueue) {\r\n        lazyLoadQueue.push({\r\n          div: renderer.canvas,\r\n          load\r\n        });\r\n      } else {\r\n        load();\r\n      }\r\n\r\n      return Promise.all(cachedPromises).then(() => Promise.all(loadPromises)).then(() => {});\r\n    });\r\n\r\n    // recordPromise(loadPromise, 'render emojis: ' + docIds.length);\r\n\r\n    return loadPromise;\r\n  }\r\n\r\n  public setTextColor(textColor: string) {\r\n    this.textColor = textColor;\r\n  }\r\n\r\n  public static create(options: CustomEmojiRendererElementOptions) {\r\n    const renderer = new CustomEmojiRendererElement();\r\n    renderer.animationGroup = options.animationGroup;\r\n    renderer.size = options.customEmojiSize || mediaSizes.active.customEmoji;\r\n    renderer.isSelectable = options.isSelectable;\r\n    renderer.textColor = options.textColor;\r\n    // renderer.textColor = typeof(options.textColor) === 'function' ? options.textColor() : options.textColor;\r\n    renderer.observeResizeElement = options.observeResizeElement;\r\n    if(options.wrappingDraft) {\r\n      renderer.contentEditable = 'false';\r\n      renderer.style.height = 'inherit';\r\n    }\r\n    // const middleware = () => !!renderer.disconnectedCallback && (!options.middleware || options.middleware());\r\n    let middleware = options.middleware;\r\n    if(middleware) {\r\n      renderer.middlewareHelper = middleware.create();\r\n      middleware = renderer.middlewareHelper.get();\r\n      middleware.onDestroy(() => {\r\n        renderer.destroy?.();\r\n      });\r\n    } else {\r\n      // console.error('no middleware', this, options);\r\n      renderer.auto = true;\r\n      renderer.middlewareHelper = getMiddleware();\r\n    }\r\n\r\n    return renderer;\r\n  }\r\n}\r\n\r\nexport type CustomEmojiRenderer = CustomEmojiRendererElement;\r\nexport type SyncedPlayer = {\r\n  player: RLottiePlayer | HTMLVideoElement,\r\n  middlewares: Set<Middleware>,\r\n  pausedElements: Set<CustomEmojiElement>,\r\n  key: string\r\n};\r\nexport type CustomEmojiFrame = Parameters<RLottiePlayer['overrideRender']>[0] | HTMLVideoElement;\r\n\r\nexport type CustomEmojiRendererElementOptions = Partial<{\r\n  loadPromises: Promise<any>[],\r\n  customEmojiRenderer: CustomEmojiRendererElement,\r\n\r\n  isSelectable: boolean,\r\n  wrappingDraft: boolean,\r\n\r\n  observeResizeElement?: HTMLElement\r\n}> & WrapSomethingOptions;\r\n\r\nconst CUSTOM_EMOJI_INSTANT_PLAY = true; // do not wait for animationIntersector\r\nlet emojiRenderInterval: number;\r\nconst emojiRenderers: Set<CustomEmojiRenderer> = new Set();\r\nconst syncedPlayers: Map<string, SyncedPlayer> = new Map();\r\nconst syncedPlayersFrames: Map<RLottiePlayer | HTMLVideoElement, CustomEmojiFrame> = new Map();\r\nexport const renderEmojis = (renderers = emojiRenderers) => {\r\n  const r = Array.from(renderers);\r\n  const t = r.filter((r) => r.isConnected && r.checkForAnyFrame() && !r.ignoreSettingDimensions);\r\n  if(!t.length) {\r\n    return false;\r\n  }\r\n\r\n  const o = t.map((renderer) => {\r\n    const paused = [...renderer.playersSynced.values()].reduce((acc, v) => acc + +!!v.paused, 0);\r\n    if(renderer.playersSynced.size === paused) {\r\n      return;\r\n    }\r\n\r\n    const offsets = renderer.getOffsets();\r\n    if(offsets.size) {\r\n      return [renderer, offsets] as const;\r\n    }\r\n  }).filter(Boolean);\r\n\r\n  for(const [renderer] of o) {\r\n    renderer.clearCanvas();\r\n  }\r\n\r\n  for(const [renderer, offsets] of o) {\r\n    renderer.render(offsets);\r\n  }\r\n\r\n  return true;\r\n};\r\nconst CUSTOM_EMOJI_FPS = 60;\r\nconst CUSTOM_EMOJI_FRAME_INTERVAL = 1000 / CUSTOM_EMOJI_FPS;\r\nconst setRenderInterval = () => {\r\n  if(emojiRenderInterval) {\r\n    return;\r\n  }\r\n\r\n  emojiRenderInterval = window.setInterval(renderEmojis, CUSTOM_EMOJI_FRAME_INTERVAL);\r\n  renderEmojis();\r\n};\r\nconst clearRenderInterval = () => {\r\n  if(!emojiRenderInterval) {\r\n    return;\r\n  }\r\n\r\n  clearInterval(emojiRenderInterval);\r\n  emojiRenderInterval = undefined;\r\n};\r\n\r\n(window as any).syncedPlayers = syncedPlayers;\r\n(window as any).emojiRenderers = emojiRenderers;\r\n\r\ncustomElements.define('custom-emoji-renderer-element', CustomEmojiRendererElement);\r\n","export default function encodeEntities(value: string) {\r\n  return value.replace(/&/g, '&amp;').replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, (value) => {\r\n    const hi = value.charCodeAt(0);\r\n    const low = value.charCodeAt(1);\r\n    return '&#' + (((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000) + ';';\r\n  }).replace(/([^\\#-~| |!])/g, (value) => { // non-alphanumeric\r\n    return '&#' + value.charCodeAt(0) + ';';\r\n  }).replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n}\r\n","import encodeEntities from '../string/encodeEntities';\r\n\r\nexport default function documentFragmentToHTML(fragment: DocumentFragment) {\r\n  return Array.from(fragment.childNodes).map((node) => {\r\n    return node.nodeType === node.TEXT_NODE ? encodeEntities(node.textContent) : (node as Element).outerHTML;\r\n  }).join('');\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nexport default function findUpAttribute(el: any, attribute: string): HTMLElement {\r\n  return el.closest(`[${attribute}]`);\r\n  /* if(el.getAttribute(attribute) !== null) return el; // 03.02.2020\r\n\r\n  while(el.parentElement) {\r\n    el = el.parentElement;\r\n    if(el.getAttribute(attribute) !== null)\r\n      return el;\r\n  }\r\n  return null; */\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nexport default function findUpTag(el: any, tag: string): HTMLElement {\r\n  return el.closest(tag);\r\n  /* if(el.tagName === tag) return el; // 03.02.2020\r\n\r\n  while(el.parentElement) {\r\n    el = el.parentElement;\r\n    if(el.tagName === tag)\r\n      return el;\r\n  }\r\n  return null; */\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport findUpAsChild from './findUpAsChild';\r\n\r\nexport default function getCaretPosNew(input: HTMLElement, anchor?: boolean): ReturnType<typeof getCaretPosF> & {selection: Selection} {\r\n  const selection = document.getSelection();\r\n  // let {focusNode: node, focusOffset: offset} = selection;\r\n  const node = selection[anchor ? 'anchorNode' : 'focusNode'];\r\n  const offset = selection[anchor ? 'anchorOffset' : 'focusOffset'];\r\n  if(!findUpAsChild(node, input) && node !== input) {\r\n    return {selection} as any;\r\n  }\r\n\r\n  return {...getCaretPosF(input, node, offset), selection};\r\n}\r\n\r\nexport function getCaretPosF(input: HTMLElement, node: Node, offset: number) {\r\n  if(node === input) {\r\n    const childNodes = input.childNodes;\r\n    const childNodesLength = childNodes.length;\r\n    if(childNodesLength && offset >= childNodesLength) {\r\n      node = childNodes[childNodesLength - 1];\r\n      offset = (node.textContent || (node as HTMLImageElement).alt || '').length;\r\n    } else {\r\n      node = childNodes[offset];\r\n      offset = 0;\r\n    }\r\n  }\r\n\r\n  return {node: node as ChildNode, offset};\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {MessageEntity} from '../../layer';\r\n\r\nconst CAN_COMBINE_ENTITIES: Set<MessageEntity['_']> = new Set([\r\n  'messageEntityBold',\r\n  'messageEntityItalic',\r\n  'messageEntityCode',\r\n  'messageEntityPre',\r\n  'messageEntityUnderline',\r\n  'messageEntityStrike',\r\n  'messageEntityBlockquote',\r\n  'messageEntitySpoiler'\r\n]);\r\nexport default function combineSameEntities(entities: MessageEntity[]) {\r\n  // entities = entities.slice();\r\n  for(let i = 0; i < entities.length; ++i) {\r\n    const entity = entities[i];\r\n\r\n    let nextEntityIdx = -1;\r\n    do {\r\n      nextEntityIdx = entities.findIndex((e, _i) => {\r\n        return CAN_COMBINE_ENTITIES.has(e._) && _i !== i && e._ === entity._ && (e.offset - entity.length) === entity.offset;\r\n      });\r\n\r\n      if(nextEntityIdx !== -1) {\r\n        const nextEntity = entities[nextEntityIdx];\r\n        entity.length += nextEntity.length;\r\n        entities.splice(nextEntityIdx, 1);\r\n      }\r\n    } while(nextEntityIdx !== -1);\r\n  }\r\n  // return entities;\r\n}\r\n","import {MessageEntity} from '../../layer';\r\n\r\nexport default function sortEntities(entities: MessageEntity[]) {\r\n  entities.sort((a, b) => {\r\n    return (a.offset - b.offset) || (b.length - a.length);\r\n  });\r\n}\r\n","const BOM = '﻿';\r\n// const BOM = 'K';\r\nexport default BOM;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\nimport {MessageEntity} from '../../layer';\r\nimport BOM from '../string/bom';\r\n\r\nexport type MarkdownType = 'bold' | 'italic' | 'underline' | 'strikethrough' |\r\n  'monospace' | 'link' | 'mentionName' | 'spoiler' | 'quote'/*  | 'customEmoji' */;\r\nexport type MarkdownTag = {\r\n  match: string,\r\n  entityName: Extract<\r\n    MessageEntity['_'], 'messageEntityBold' | 'messageEntityUnderline' |\r\n    'messageEntityItalic' | 'messageEntityCode' | 'messageEntityStrike' |\r\n    'messageEntityTextUrl' | 'messageEntityMentionName' | 'messageEntitySpoiler' |\r\n    'messageEntityBlockquote'/*  | 'messageEntityCustomEmoji' */\r\n  >;\r\n};\r\n\r\n// https://core.telegram.org/bots/api#html-style\r\nexport const markdownTags: {[type in MarkdownType]: MarkdownTag} = {\r\n  bold: {\r\n    match: '[style*=\"bold\"], [style*=\"font-weight: 700\"], [style*=\"font-weight: 600\"], [style*=\"font-weight:700\"], [style*=\"font-weight:600\"], b, strong',\r\n    entityName: 'messageEntityBold'\r\n  },\r\n  underline: {\r\n    match: '[style*=\"underline\"], u, ins',\r\n    entityName: 'messageEntityUnderline'\r\n  },\r\n  italic: {\r\n    match: '[style*=\"italic\"], i, em',\r\n    entityName: 'messageEntityItalic'\r\n  },\r\n  monospace: {\r\n    match: '[style*=\"monospace\"], [face*=\"monospace\"], pre',\r\n    entityName: 'messageEntityCode'\r\n  },\r\n  strikethrough: {\r\n    match: '[style*=\"line-through\"], [style*=\"strikethrough\"], strike, del, s',\r\n    entityName: 'messageEntityStrike'\r\n  },\r\n  link: {\r\n    match: 'A:not(.follow)',\r\n    entityName: 'messageEntityTextUrl'\r\n  },\r\n  mentionName: {\r\n    match: 'A.follow',\r\n    entityName: 'messageEntityMentionName'\r\n  },\r\n  spoiler: {\r\n    match: '[style*=\"spoiler\"]',\r\n    entityName: 'messageEntitySpoiler'\r\n  },\r\n  quote: {\r\n    match: '[style*=\"quote\"], .quote',\r\n    entityName: 'messageEntityBlockquote'\r\n  }\r\n  // customEmoji: {\r\n  //   match: '.custom-emoji',\r\n  //   entityName: 'messageEntityCustomEmoji'\r\n  // }\r\n};\r\n\r\nconst tabulationMatch = '[style*=\"table-cell\"], th, td';\r\n\r\n/* export function getDepth(child: Node, container?: Node) {\r\n  let depth = 0;\r\n\r\n  do {\r\n    if(child === container) {\r\n      return depth;\r\n    }\r\n\r\n    ++depth;\r\n  } while((child = child.parentNode) !== null);\r\n\r\n  return depth;\r\n} */\r\n\r\nconst BLOCK_TAGS = new Set([\r\n  'DIV',\r\n  'P',\r\n  'BR',\r\n  'LI',\r\n  'SECTION',\r\n  'H6',\r\n  'H5',\r\n  'H4',\r\n  'H3',\r\n  'H2',\r\n  'H1',\r\n  'TR',\r\n  'OL',\r\n  'UL',\r\n  'BLOCKQUOTE'\r\n]);\r\n\r\n// const INSERT_NEW_LINE_TAGS = new Set([\r\n//   'OL',\r\n//   'UL'\r\n// ]);\r\n\r\nconst BOM_REG_EXP = new RegExp(BOM, 'g');\r\nexport const SELECTION_SEPARATOR = '\\x01';\r\n\r\nfunction checkNodeForEntity(node: Node, value: string, entities: MessageEntity[], offset: {offset: number}) {\r\n  const parentElement = node.parentElement;\r\n\r\n  // let closestTag: MarkdownTag, closestElementByTag: Element, closestDepth = Infinity;\r\n  for(const type in markdownTags) {\r\n    const tag = markdownTags[type as MarkdownType];\r\n    const closest: HTMLElement = parentElement.closest(tag.match + ', [contenteditable=\"true\"]');\r\n    if(closest?.getAttribute('contenteditable') !== null) {\r\n      /* const depth = getDepth(closest, parentElement.closest('[contenteditable]'));\r\n      if(closestDepth > depth) {\r\n        closestDepth = depth;\r\n        closestTag = tag;\r\n        closestElementByTag = closest;\r\n      } */\r\n      continue;\r\n    }\r\n\r\n    let codeElement: HTMLElement;\r\n    if(tag.entityName === 'messageEntityCode' && (codeElement = parentElement.closest('[data-language]'))) {\r\n      entities.push({\r\n        _: 'messageEntityPre',\r\n        language: codeElement.dataset.language || '',\r\n        offset: offset.offset,\r\n        length: value.length\r\n      });\r\n    } else if(tag.entityName === 'messageEntityTextUrl') {\r\n      entities.push({\r\n        _: tag.entityName,\r\n        url: (closest as HTMLAnchorElement).href,\r\n        offset: offset.offset,\r\n        length: value.length\r\n      });\r\n    } else if(tag.entityName === 'messageEntityMentionName') {\r\n      entities.push({\r\n        _: tag.entityName,\r\n        offset: offset.offset,\r\n        length: value.length,\r\n        user_id: (closest as HTMLElement).dataset.follow.toUserId()\r\n      });\r\n    }/*  else if(tag.entityName === 'messageEntityCustomEmoji') {\r\n      entities.push({\r\n        _: tag.entityName,\r\n        document_id: (closest as HTMLElement).dataset.docId,\r\n        offset: offset.offset,\r\n        length: emoji.length\r\n      });\r\n    } */ else {\r\n      entities.push({\r\n        _: tag.entityName,\r\n        offset: offset.offset,\r\n        length: value.length\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction isLineEmpty(line: string[]) {\r\n  const {length} = line;\r\n  if(!length) {\r\n    return true;\r\n  }\r\n\r\n  if(line[length - 1] === SELECTION_SEPARATOR && length === SELECTION_SEPARATOR.length) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport default function getRichElementValue(\r\n  node: HTMLElement,\r\n  lines: string[],\r\n  line: string[],\r\n  selNode?: Node,\r\n  selOffset?: number,\r\n  entities?: MessageEntity[],\r\n  offset: {offset: number, isInQuote?: boolean} = {offset: 0}\r\n) {\r\n  if(node.nodeType === node.TEXT_NODE) { // TEXT\r\n    let nodeValue = node.nodeValue;\r\n    // if(nodeValue[0] === BOM) {\r\n    nodeValue = nodeValue.replace(BOM_REG_EXP, '');\r\n    // }\r\n\r\n    /* const tabulation = node.parentElement?.closest(tabulationMatch + ', [contenteditable]');\r\n    if(tabulation?.getAttribute('contenteditable') === null) {\r\n      nodeValue += ' ';\r\n      // line.push('\\t');\r\n      // ++offset.offset;\r\n    } */\r\n\r\n    if(nodeValue) {\r\n      if(offset.isInQuote && nodeValue.endsWith('\\n')) { // slice last linebreak from quote\r\n        nodeValue = nodeValue.slice(0, -1);\r\n      }\r\n\r\n      if(selNode === node) {\r\n        line.push(nodeValue.substr(0, selOffset) + SELECTION_SEPARATOR + nodeValue.substr(selOffset));\r\n      } else {\r\n        line.push(nodeValue);\r\n      }\r\n    } else if(selNode === node) {\r\n      line.push(SELECTION_SEPARATOR);\r\n    }\r\n\r\n    if(entities && nodeValue.length && node.parentNode) {\r\n      checkNodeForEntity(node, nodeValue, entities, offset);\r\n    }\r\n\r\n    offset.offset += nodeValue.length;\r\n    return;\r\n  }\r\n\r\n  if(node.nodeType !== node.ELEMENT_NODE) { // NON-ELEMENT\r\n    return;\r\n  }\r\n\r\n  const pushLine = () => {\r\n    lines.push(line.join(''));\r\n    line.length = 0;\r\n    ++offset.offset;\r\n  };\r\n\r\n  const isSelected = selNode === node;\r\n  const isQuote = node.matches(markdownTags.quote.match);\r\n  const isBlock = BLOCK_TAGS.has(node.tagName) || isQuote;\r\n  if(isBlock && ((line.length && line[line.length - 1].slice(-1) !== '\\n') || node.tagName === 'BR'/*  || (BLOCK_TAGS.has(node.tagName) && lines.length) */)) {\r\n    pushLine();\r\n  } else {\r\n    const alt = node.dataset.stickerEmoji || (node as HTMLImageElement).alt;\r\n    const stickerEmoji = node.dataset.stickerEmoji;\r\n\r\n    if(alt && entities) {\r\n      checkNodeForEntity(node, alt, entities, offset);\r\n    }\r\n\r\n    if(stickerEmoji && entities) {\r\n      entities.push({\r\n        _: 'messageEntityCustomEmoji',\r\n        document_id: node.dataset.docId,\r\n        offset: offset.offset,\r\n        length: alt.length\r\n      });\r\n    }\r\n\r\n    if(alt) {\r\n      line.push(alt);\r\n      offset.offset += alt.length;\r\n    }\r\n  }\r\n\r\n  if(isSelected && !selOffset) {\r\n    line.push(SELECTION_SEPARATOR);\r\n  }\r\n\r\n  const isTableCell = node.matches(tabulationMatch);\r\n  const wasEntitiesLength = entities?.length;\r\n  // const wasLinesLength = lines.length;\r\n  let wasNodeEmpty = true;\r\n\r\n  if(isQuote) {\r\n    offset.isInQuote = true;\r\n  }\r\n\r\n  let curChild = node.firstChild as HTMLElement;\r\n  while(curChild) {\r\n    getRichElementValue(curChild, lines, line, selNode, selOffset, entities, offset);\r\n    curChild = curChild.nextSibling as any;\r\n\r\n    if(!isLineEmpty(line)) {\r\n      wasNodeEmpty = false;\r\n    }\r\n  }\r\n\r\n  if(isQuote) {\r\n    offset.isInQuote = false;\r\n  }\r\n\r\n  // can test on text with list (https://www.who.int/initiatives/sports-and-health)\r\n  if(wasNodeEmpty && node.textContent?.replace(/[\\r\\n]/g, '')) {\r\n    wasNodeEmpty = false;\r\n  }\r\n\r\n  if(isSelected && selOffset) {\r\n    line.push(SELECTION_SEPARATOR);\r\n  }\r\n\r\n  if(isTableCell && node.nextSibling && !isLineEmpty(line)) {\r\n    line.push(' ');\r\n    ++offset.offset;\r\n\r\n    // * combine entities such as url after adding space\r\n    if(wasEntitiesLength !== undefined) {\r\n      for(let i = wasEntitiesLength, length = entities.length; i < length; ++i) {\r\n        ++entities[i].length;\r\n      }\r\n    }\r\n  }\r\n\r\n  if(isBlock && !wasNodeEmpty) {\r\n    pushLine();\r\n  }\r\n\r\n  if(!wasNodeEmpty && node.tagName === 'P' && node.nextSibling) {\r\n    lines.push('');\r\n    ++offset.offset;\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\nimport {MOUNT_CLASS_TO} from '../../config/debug';\r\nimport {MessageEntity} from '../../layer';\r\nimport combineSameEntities from '../../lib/richTextProcessor/combineSameEntities';\r\nimport sortEntities from '../../lib/richTextProcessor/sortEntities';\r\nimport getRichElementValue, {SELECTION_SEPARATOR} from './getRichElementValue';\r\n\r\nexport function getCaretPos(field: Node) {\r\n  const sel = window.getSelection();\r\n  let selNode: Node;\r\n  let selOffset: number;\r\n  if(sel?.rangeCount) {\r\n    const range = sel.getRangeAt(0);\r\n    const startOffset = range.startOffset;\r\n    if(\r\n      range.startContainer &&\r\n      range.startContainer == range.endContainer &&\r\n      startOffset == range.endOffset\r\n    ) {\r\n      // * if focused on img, or caret has been set via placeCaretAtEnd\r\n      const possibleChildrenFocusOffset = startOffset - 1;\r\n      const childNodes = field.childNodes;\r\n      if(range.startContainer === field && childNodes[possibleChildrenFocusOffset]) {\r\n        selNode = childNodes[possibleChildrenFocusOffset];\r\n        selOffset = 0;\r\n\r\n        for(let i = 0; i < range.endOffset; ++i) {\r\n          const node = childNodes[i];\r\n          const value = node.nodeValue || (node as HTMLImageElement).alt;\r\n\r\n          if(value) {\r\n            selOffset += value.length;\r\n          }\r\n        }\r\n      } else {\r\n        selNode = range.startContainer;\r\n        selOffset = startOffset;\r\n      }\r\n    }\r\n  }\r\n\r\n  return {node: selNode, offset: selOffset};\r\n}\r\n\r\nexport default function getRichValueWithCaret(\r\n  field: Node | HTMLElement | DocumentFragment,\r\n  withEntities = true,\r\n  withCaret = true\r\n) {\r\n  const lines: string[] = [];\r\n  const line: string[] = [];\r\n\r\n  const {node: selNode, offset: selOffset} = !(field instanceof DocumentFragment) && withCaret && getCaretPos(field);\r\n\r\n  const entities: MessageEntity[] = withEntities ? [] : undefined;\r\n  const offset = {offset: 0};\r\n  if(field instanceof DocumentFragment) {\r\n    let curChild = field.firstChild as HTMLElement;\r\n    while(curChild) {\r\n      getRichElementValue(curChild, lines, line, selNode, selOffset, entities, offset);\r\n      curChild = curChild.nextSibling as any;\r\n    }\r\n  } else {\r\n    getRichElementValue(field as HTMLElement, lines, line, selNode, selOffset, entities, offset);\r\n  }\r\n\r\n  if(line.length) {\r\n    lines.push(line.join(''));\r\n  }\r\n\r\n  let value = lines.join('\\n');\r\n  const caretPos = value.indexOf(SELECTION_SEPARATOR);\r\n  if(caretPos !== -1) {\r\n    value = value.substr(0, caretPos) + value.substr(caretPos + 1);\r\n  }\r\n  value = value.replace(/\\u00A0/g, ' ');\r\n\r\n  if(entities?.length) {\r\n    // ! cannot do that here because have the same check before the sending in RichTextProcessor.parseMarkdown\r\n    /* const entity = entities[entities.length - 1];\r\n    const length = value.length;\r\n    const trimmedLength = value.trimRight().length;\r\n    if(length !== trimmedLength) {\r\n      entity.length -= length - trimmedLength;\r\n    } */\r\n\r\n    combineSameEntities(entities);\r\n    sortEntities(entities);\r\n  }\r\n\r\n  return {value, entities, caretPos};\r\n}\r\n\r\nMOUNT_CLASS_TO.getCaretPos = getCaretPos;\r\nMOUNT_CLASS_TO.getRichValueWithCaret = getRichValueWithCaret;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nexport default function isInputEmpty(element: HTMLElement) {\r\n  if(element.isContentEditable || element.tagName !== 'INPUT') {\r\n    /* const value = element.innerText;\r\n\r\n    return !value.trim() && !serializeNodes(Array.from(element.childNodes)).trim(); */\r\n    // return !getRichValueWithCaret(element, false, false).value.trim();\r\n    return !element.textContent.trim() && !element.querySelector('.emoji, .custom-emoji, .custom-emoji-placeholder');\r\n  } else {\r\n    return !(element as HTMLInputElement).value.trim();\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {EMOJI_VERSION} from '../environment/emojiVersionsSupport';\r\n\r\nexport const EmojiVersions: {[version in EMOJI_VERSION]: {[emoji: string]: number}} = {'14':{'1f6dd':4867, '1f6de':4916, '1f6df':4923, '1f7f0':62832, '1f979':183, '1f9cc':1557, '1fa7b':61332, '1fa7c':61330, '1faa9':51093, '1faaa':61364, '1faab':61189, '1faac':51085, '1fab7':2651, '1fab8':2631, '1fab9':2672, '1faba':2673, '1fac3':1520, '1fac4':1521, '1fac5':1505, '1fad7':3793, '1fad8':3707, '1fad9':3804, '1fae0':111, '1fae1':136, '1fae2':132, '1fae3':133, '1fae4':174, '1fae5':142, '1fae6':1385, '1fae7':61353, '1faf0':1341, '1faf1':1332, '1faf2':1333, '1faf3':1334, '1faf4':1335, '1faf5':1351, '1faf6':1360, '1faf1-1f3fb-200d-1faf2-1f3fc':0, '1faf1-1f3fb-200d-1faf2-1f3fd':0, '1faf1-1f3fb-200d-1faf2-1f3fe':0, '1faf1-1f3fb-200d-1faf2-1f3ff':0, '1faf1-1f3fc-200d-1faf2-1f3fb':0, '1faf1-1f3fc-200d-1faf2-1f3fd':0, '1faf1-1f3fc-200d-1faf2-1f3fe':0, '1faf1-1f3fc-200d-1faf2-1f3ff':0, '1faf1-1f3fd-200d-1faf2-1f3fb':0, '1faf1-1f3fd-200d-1faf2-1f3fc':0, '1faf1-1f3fd-200d-1faf2-1f3fe':0, '1faf1-1f3fd-200d-1faf2-1f3ff':0, '1faf1-1f3fe-200d-1faf2-1f3fb':0, '1faf1-1f3fe-200d-1faf2-1f3fc':0, '1faf1-1f3fe-200d-1faf2-1f3fd':0, '1faf1-1f3fe-200d-1faf2-1f3ff':0, '1faf1-1f3ff-200d-1faf2-1f3fb':0, '1faf1-1f3ff-200d-1faf2-1f3fc':0, '1faf1-1f3ff-200d-1faf2-1f3fd':0, '1faf1-1f3ff-200d-1faf2-1f3fe':0, '1fac3-1f3fb':0, '1fac3-1f3fc':0, '1fac3-1f3fd':0, '1fac3-1f3fe':0, '1fac3-1f3ff':0, '1fac4-1f3fb':0, '1fac4-1f3fc':0, '1fac4-1f3fd':0, '1fac4-1f3fe':0, '1fac4-1f3ff':0, '1fac5-1f3fb':0, '1fac5-1f3fc':0, '1fac5-1f3fd':0, '1fac5-1f3fe':0, '1fac5-1f3ff':0, '1faf0-1f3fb':0, '1faf0-1f3fc':0, '1faf0-1f3fd':0, '1faf0-1f3fe':0, '1faf0-1f3ff':0, '1faf1-1f3fb':0, '1faf1-1f3fc':0, '1faf1-1f3fd':0, '1faf1-1f3fe':0, '1faf1-1f3ff':0, '1faf2-1f3fb':0, '1faf2-1f3fc':0, '1faf2-1f3fd':0, '1faf2-1f3fe':0, '1faf2-1f3ff':0, '1faf3-1f3fb':0, '1faf3-1f3fc':0, '1faf3-1f3fd':0, '1faf3-1f3fe':0, '1faf3-1f3ff':0, '1faf4-1f3fb':0, '1faf4-1f3fc':0, '1faf4-1f3fd':0, '1faf4-1f3fe':0, '1faf4-1f3ff':0, '1faf5-1f3fb':0, '1faf5-1f3fc':0, '1faf5-1f3fd':0, '1faf5-1f3fe':0, '1faf5-1f3ff':0, '1faf6-1f3fb':0, '1faf6-1f3fc':0, '1faf6-1f3fd':0, '1faf6-1f3fe':0, '1faf6-1f3ff':0}, '':{'2049':62835, '2122':62863, '2139':62888, '2194':62764, '2195':62763, '2196':62762, '2197':62756, '2198':62758, '2199':62760, '2328':61194, '2600':4990, '2601':4998, '2602':41013, '2603':41018, '2604':41020, '2611':62851, '2614':41014, '2615':3781, '2618':2667, '2620':1106, '2622':62753, '2623':62754, '2626':62783, '2638':62780, '2639':177, '2648':62788, '2649':62789, '2650':62796, '2651':62797, '2652':62798, '2653':62799, '2660':51095, '2663':51098, '2665':51096, '2666':51097, '2668':4865, '2692':61297, '2693':4922, '2694':61300, '2696':61311, '2697':61319, '2699':61309, '2702':61284, '2705':62850, '2708':4931, '2709':61245, '2712':61259, '2714':62852, '2716':62828, '2721':62779, '2728':51029, '2733':62858, '2734':62859, '2744':41017, '2747':62860, '2753':62836, '2754':62837, '2755':62838, '2757':62839, '2763':1137, '2764':1141, '2795':62829, '2796':62830, '2797':62831, '2934':62767, '2935':62768, '3030':62840, '3297':62912, '3299':62913, '0023-20e3':62864, '002a-20e3':62865, '0030-20e3':62866, '0031-20e3':62867, '0032-20e3':62868, '0033-20e3':62869, '0034-20e3':62870, '0035-20e3':62871, '0036-20e3':62872, '0037-20e3':62873, '0038-20e3':62874, '0039-20e3':62875, '00a9':62861, '00ae':62862, '1f004':51101, '1f0cf':51100, '1f170':62882, '1f171':62884, '1f17e':62893, '1f17f':62895, '1f18e':62883, '1f191':62885, '1f192':62886, '1f193':62887, '1f194':62889, '1f195':62891, '1f196':62892, '1f197':62894, '1f198':62896, '1f199':62897, '1f19a':62898, '1f1e6-1f1e8':71594, '1f1e6-1f1e9':71595, '1f1e6-1f1ea':71596, '1f1e6-1f1eb':71597, '1f1e6-1f1ec':71598, '1f1e6-1f1ee':71599, '1f1e6-1f1f1':71600, '1f1e6-1f1f2':71601, '1f1e6-1f1f4':71602, '1f1e6-1f1f6':71603, '1f1e6-1f1f7':71604, '1f1e6-1f1f8':71605, '1f1e6-1f1f9':71606, '1f1e6-1f1fa':71607, '1f1e6-1f1fc':71608, '1f1e6-1f1fd':71609, '1f1e6-1f1ff':71610, '1f1e7-1f1e6':71611, '1f1e7-1f1e7':71612, '1f1e7-1f1e9':71613, '1f1e7-1f1ea':71614, '1f1e7-1f1eb':71615, '1f1e7-1f1ec':71616, '1f1e7-1f1ed':71617, '1f1e7-1f1ee':71618, '1f1e7-1f1ef':71619, '1f1e7-1f1f1':71620, '1f1e7-1f1f2':71621, '1f1e7-1f1f3':71622, '1f1e7-1f1f4':71623, '1f1e7-1f1f6':71624, '1f1e7-1f1f7':71625, '1f1e7-1f1f8':71626, '1f1e7-1f1f9':71627, '1f1e7-1f1fb':71628, '1f1e7-1f1fc':71629, '1f1e7-1f1fe':71630, '1f1e7-1f1ff':71631, '1f1e8-1f1e6':71632, '1f1e8-1f1e8':71633, '1f1e8-1f1e9':71634, '1f1e8-1f1eb':71635, '1f1e8-1f1ec':71636, '1f1e8-1f1ed':71637, '1f1e8-1f1ee':71638, '1f1e8-1f1f0':71639, '1f1e8-1f1f1':71640, '1f1e8-1f1f2':71641, '1f1e8-1f1f3':71642, '1f1e8-1f1f4':71643, '1f1e8-1f1f5':71644, '1f1e8-1f1f7':71645, '1f1e8-1f1fa':71646, '1f1e8-1f1fb':71647, '1f1e8-1f1fc':71648, '1f1e8-1f1fd':71649, '1f1e8-1f1fe':71650, '1f1e8-1f1ff':71651, '1f1e9-1f1ea':71652, '1f1e9-1f1ec':71653, '1f1e9-1f1ef':71654, '1f1e9-1f1f0':71655, '1f1e9-1f1f2':71656, '1f1e9-1f1f4':71657, '1f1e9-1f1ff':71658, '1f1ea-1f1e6':71659, '1f1ea-1f1e8':71660, '1f1ea-1f1ea':71661, '1f1ea-1f1ec':71662, '1f1ea-1f1ed':71663, '1f1ea-1f1f7':71664, '1f1ea-1f1f8':71665, '1f1ea-1f1f9':71666, '1f1ea-1f1fa':71667, '1f1eb-1f1ee':71668, '1f1eb-1f1ef':71669, '1f1eb-1f1f0':71670, '1f1eb-1f1f2':71671, '1f1eb-1f1f4':71672, '1f1eb-1f1f7':71673, '1f1ec-1f1e6':71674, '1f1ec-1f1e7':71675, '1f1ec-1f1e9':71676, '1f1ec-1f1ea':71677, '1f1ec-1f1eb':71678, '1f1ec-1f1ec':71679, '1f1ec-1f1ed':71680, '1f1ec-1f1ee':71681, '1f1ec-1f1f1':71682, '1f1ec-1f1f2':71683, '1f1ec-1f1f3':71684, '1f1ec-1f1f5':71685, '1f1ec-1f1f6':71686, '1f1ec-1f1f7':71687, '1f1ec-1f1f8':71688, '1f1ec-1f1f9':71689, '1f1ec-1f1fa':71690, '1f1ec-1f1fc':71691, '1f1ec-1f1fe':71692, '1f1ed-1f1f0':71693, '1f1ed-1f1f2':71694, '1f1ed-1f1f3':71695, '1f1ed-1f1f7':71696, '1f1ed-1f1f9':71697, '1f1ed-1f1fa':71698, '1f1ee-1f1e8':71699, '1f1ee-1f1e9':71700, '1f1ee-1f1ea':71701, '1f1ee-1f1f1':71702, '1f1ee-1f1f2':71703, '1f1ee-1f1f3':71704, '1f1ee-1f1f4':71705, '1f1ee-1f1f6':71706, '1f1ee-1f1f7':71707, '1f1ee-1f1f8':71708, '1f1ee-1f1f9':71709, '1f1ef-1f1ea':71710, '1f1ef-1f1f2':71711, '1f1ef-1f1f4':71712, '1f1ef-1f1f5':71713, '1f1f0-1f1ea':71714, '1f1f0-1f1ec':71715, '1f1f0-1f1ed':71716, '1f1f0-1f1ee':71717, '1f1f0-1f1f2':71718, '1f1f0-1f1f3':71719, '1f1f0-1f1f5':71720, '1f1f0-1f1f7':71721, '1f1f0-1f1fc':71722, '1f1f0-1f1fe':71723, '1f1f0-1f1ff':71724, '1f1f1-1f1e6':71725, '1f1f1-1f1e7':71726, '1f1f1-1f1e8':71727, '1f1f1-1f1ee':71728, '1f1f1-1f1f0':71729, '1f1f1-1f1f7':71730, '1f1f1-1f1f8':71731, '1f1f1-1f1f9':71732, '1f1f1-1f1fa':71733, '1f1f1-1f1fb':71734, '1f1f1-1f1fe':71735, '1f1f2-1f1e6':71736, '1f1f2-1f1e8':71737, '1f1f2-1f1e9':71738, '1f1f2-1f1ea':71739, '1f1f2-1f1eb':71740, '1f1f2-1f1ec':71741, '1f1f2-1f1ed':71742, '1f1f2-1f1f0':71743, '1f1f2-1f1f1':71744, '1f1f2-1f1f2':71745, '1f1f2-1f1f3':71746, '1f1f2-1f1f4':71747, '1f1f2-1f1f5':71748, '1f1f2-1f1f6':71749, '1f1f2-1f1f7':71750, '1f1f2-1f1f8':71751, '1f1f2-1f1f9':71752, '1f1f2-1f1fa':71753, '1f1f2-1f1fb':71754, '1f1f2-1f1fc':71755, '1f1f2-1f1fd':71756, '1f1f2-1f1fe':71757, '1f1f2-1f1ff':71758, '1f1f3-1f1e6':71759, '1f1f3-1f1e8':71760, '1f1f3-1f1ea':71761, '1f1f3-1f1eb':71762, '1f1f3-1f1ec':71763, '1f1f3-1f1ee':71764, '1f1f3-1f1f1':71765, '1f1f3-1f1f4':71766, '1f1f3-1f1f5':71767, '1f1f3-1f1f7':71768, '1f1f3-1f1fa':71769, '1f1f3-1f1ff':71770, '1f1f4-1f1f2':71771, '1f1f5-1f1e6':71772, '1f1f5-1f1ea':71773, '1f1f5-1f1eb':71774, '1f1f5-1f1ec':71775, '1f1f5-1f1ed':71776, '1f1f5-1f1f0':71777, '1f1f5-1f1f1':71778, '1f1f5-1f1f2':71779, '1f1f5-1f1f3':71780, '1f1f5-1f1f7':71781, '1f1f5-1f1f8':71782, '1f1f5-1f1f9':71783, '1f1f5-1f1fc':71784, '1f1f5-1f1fe':71785, '1f1f6-1f1e6':71786, '1f1f7-1f1ea':71787, '1f1f7-1f1f4':71788, '1f1f7-1f1f8':71789, '1f1f7-1f1fa':71790, '1f1f7-1f1fc':71791, '1f1f8-1f1e6':71792, '1f1f8-1f1e7':71793, '1f1f8-1f1e8':71794, '1f1f8-1f1e9':71795, '1f1f8-1f1ea':71796, '1f1f8-1f1ec':71797, '1f1f8-1f1ed':71798, '1f1f8-1f1ee':71799, '1f1f8-1f1ef':71800, '1f1f8-1f1f0':71801, '1f1f8-1f1f1':71802, '1f1f8-1f1f2':71803, '1f1f8-1f1f3':71804, '1f1f8-1f1f4':71805, '1f1f8-1f1f7':71806, '1f1f8-1f1f8':71807, '1f1f8-1f1f9':71808, '1f1f8-1f1fb':71809, '1f1f8-1f1fd':71810, '1f1f8-1f1fe':71811, '1f1f8-1f1ff':71812, '1f1f9-1f1e6':71813, '1f1f9-1f1e8':71814, '1f1f9-1f1e9':71815, '1f1f9-1f1eb':71816, '1f1f9-1f1ec':71817, '1f1f9-1f1ed':71818, '1f1f9-1f1ef':71819, '1f1f9-1f1f0':71820, '1f1f9-1f1f1':71821, '1f1f9-1f1f2':71822, '1f1f9-1f1f3':71823, '1f1f9-1f1f4':71824, '1f1f9-1f1f7':71825, '1f1f9-1f1f9':71826, '1f1f9-1f1fb':71827, '1f1f9-1f1fc':71828, '1f1f9-1f1ff':71829, '1f1fa-1f1e6':71830, '1f1fa-1f1ec':71831, '1f1fa-1f1f2':71832, '1f1fa-1f1f3':71833, '1f1fa-1f1f8':71834, '1f1fa-1f1fe':71835, '1f1fa-1f1ff':71836, '1f1fb-1f1e6':71837, '1f1fb-1f1e8':71838, '1f1fb-1f1ea':71839, '1f1fb-1f1ec':71840, '1f1fb-1f1ee':71841, '1f1fb-1f1f3':71842, '1f1fb-1f1fa':71843, '1f1fc-1f1eb':71844, '1f1fc-1f1f8':71845, '1f1fd-1f1f0':71846, '1f1fe-1f1ea':71847, '1f1fe-1f1f9':71848, '1f1ff-1f1e6':71849, '1f1ff-1f1f2':71850, '1f1ff-1f1fc':71851, '1f201':62899, '1f202':62900, '1f21a':62906, '1f22f':62903, '1f232':62907, '1f233':62911, '1f234':62910, '1f235':62915, '1f236':62902, '1f237':62901, '1f238':62909, '1f239':62905, '1f23a':62914, '1f250':62904, '1f251':62908, '1f300':41010, '1f301':4857, '1f302':41012, '1f303':4858, '1f304':4860, '1f305':4861, '1f306':4862, '1f307':4863, '1f308':41011, '1f309':4864, '1f30a':41023, '1f30b':4815, '1f30c':4997, '1f30d':4806, '1f30e':4807, '1f30f':4808, '1f310':4809, '1f311':4977, '1f312':4978, '1f313':4979, '1f314':4980, '1f315':4981, '1f316':4982, '1f317':4983, '1f318':4984, '1f319':4985, '1f31a':4986, '1f31b':4987, '1f31c':4988, '1f31d':4991, '1f31e':4992, '1f31f':4995, '1f320':4996, '1f321':4989, '1f324':41001, '1f325':41002, '1f326':41003, '1f327':41004, '1f328':41005, '1f329':41006, '1f32a':41007, '1f32b':41008, '1f32c':41009, '1f32d':3725, '1f32e':3727, '1f32f':3728, '1f330':3708, '1f331':2659, '1f332':2661, '1f333':2662, '1f334':2663, '1f335':2664, '1f336':3698, '1f337':2658, '1f338':2649, '1f339':2653, '1f33a':2655, '1f33b':2656, '1f33c':2657, '1f33d':3697, '1f33e':2665, '1f33f':2666, '1f340':2668, '1f341':2669, '1f342':2670, '1f343':2671, '1f344':3705, '1f345':3690, '1f346':3694, '1f347':3674, '1f348':3675, '1f349':3676, '1f34a':3677, '1f34b':3678, '1f34c':3679, '1f34d':3680, '1f34e':3682, '1f34f':3683, '1f350':3684, '1f351':3685, '1f352':3686, '1f353':3687, '1f354':3722, '1f355':3724, '1f356':3718, '1f357':3719, '1f358':3744, '1f359':3745, '1f35a':3746, '1f35b':3747, '1f35c':3748, '1f35d':3749, '1f35e':3709, '1f35f':3723, '1f360':3750, '1f361':3756, '1f362':3751, '1f363':3752, '1f364':3753, '1f365':3754, '1f366':3765, '1f367':3766, '1f368':3767, '1f369':3768, '1f36a':3769, '1f36b':3774, '1f36c':3775, '1f36d':3776, '1f36e':3777, '1f36f':3778, '1f370':3771, '1f371':3743, '1f372':3735, '1f373':3733, '1f374':3801, '1f375':3783, '1f376':3784, '1f377':3786, '1f378':3787, '1f379':3788, '1f37a':3789, '1f37b':3790, '1f37c':3779, '1f37d':3800, '1f37e':3785, '1f37f':3739, '1f380':51040, '1f381':51041, '1f382':3770, '1f383':51024, '1f384':51025, '1f385':1527, '1f386':51026, '1f387':51027, '1f388':51030, '1f389':51031, '1f38a':51032, '1f38b':51033, '1f38c':71588, '1f38d':51034, '1f38e':51035, '1f38f':51036, '1f390':51037, '1f391':51038, '1f392':61134, '1f393':61147, '1f396':51045, '1f397':51042, '1f399':61167, '1f39a':61168, '1f39b':61169, '1f39e':61203, '1f39f':51043, '1f3a0':4866, '1f3a1':4868, '1f3a2':4869, '1f3a3':51072, '1f3a4':61170, '1f3a5':61202, '1f3a6':62819, '1f3a7':61171, '1f3a8':51105, '1f3a9':61146, '1f3aa':4871, '1f3ab':51044, '1f3ac':61205, '1f3ad':51103, '1f3ae':51086, '1f3af':51078, '1f3b0':51088, '1f3b1':51081, '1f3b2':51089, '1f3b3':51060, '1f3b4':51102, '1f3b5':61165, '1f3b6':61166, '1f3b7':61173, '1f3b8':61175, '1f3b9':61176, '1f3ba':61177, '1f3bb':61178, '1f3bc':61164, '1f3bd':51074, '1f3be':51058, '1f3bf':51075, '1f3c0':51054, '1f3c1':71586, '1f3c2':1600, '1f3c3-200d-2640':1584, '1f3c3-200d-2642':1583, '1f3c3':1582, '1f3c4-200d-2640':1606, '1f3c4-200d-2642':1605, '1f3c4':1604, '1f3c5':51047, '1f3c6':51046, '1f3c7':1598, '1f3c8':51056, '1f3c9':51057, '1f3ca-200d-2640':1612, '1f3ca-200d-2642':1611, '1f3ca':1610, '1f3cb-200d-2640':1618, '1f3cb-200d-2642':1617, '1f3cb':1616, '1f3cc-200d-2640':1603, '1f3cc-200d-2642':1602, '1f3cc':1601, '1f3cd':4902, '1f3ce':4901, '1f3cf':51061, '1f3d0':51055, '1f3d1':51062, '1f3d2':51063, '1f3d3':51065, '1f3d4':4813, '1f3d5':4817, '1f3d6':4818, '1f3d7':4824, '1f3d8':4829, '1f3d9':4859, '1f3da':4830, '1f3db':4823, '1f3dc':4819, '1f3dd':4820, '1f3de':4821, '1f3df':4822, '1f3e0':4831, '1f3e1':4832, '1f3e2':4833, '1f3e3':4834, '1f3e4':4835, '1f3e5':4836, '1f3e6':4837, '1f3e7':62729, '1f3e8':4838, '1f3e9':4839, '1f3ea':4840, '1f3eb':4841, '1f3ec':4842, '1f3ed':4843, '1f3ee':61216, '1f3ef':4844, '1f3f0':4845, '1f3f3-200d-1f308':71591, '1f3f3-200d-26a7':71592, '1f3f3':71590, '1f3f4-200d-2620':71593, '1f3f4-e0067-e0062-e0065-e006e-e0067-e007f':71852, '1f3f4-e0067-e0062-e0073-e0063-e0074-e007f':71853, '1f3f4-e0067-e0062-e0077-e006c-e0073-e007f':71854, '1f3f4':71589, '1f3f5':2652, '1f3f7':61234, '1f3f8':51066, '1f3f9':61303, '1f3fa':3805, '1f3fb':9525, '1f3fc':9526, '1f3fd':9527, '1f3fe':9528, '1f3ff':9529, '1f400':2576, '1f401':2575, '1f402':2556, '1f403':2557, '1f404':2558, '1f405':2547, '1f406':2548, '1f407':2579, '1f408-200d-2b1b':2544, '1f408':2543, '1f409':2618, '1f40a':2613, '1f40b':2622, '1f40c':2632, '1f40d':2616, '1f40e':2550, '1f40f':2563, '1f410':2565, '1f411':2564, '1f412':2531, '1f413':2596, '1f414':2595, '1f415-200d-1f9ba':2537, '1f415':2535, '1f416':2560, '1f417':2561, '1f418':2570, '1f419':2629, '1f41a':2630, '1f41b':2634, '1f41c':2635, '1f41d':2636, '1f41e':2638, '1f41f':2625, '1f420':2626, '1f421':2627, '1f422':2614, '1f423':2597, '1f424':2598, '1f425':2599, '1f426':2600, '1f427':2601, '1f428':2586, '1f429':2538, '1f42a':2566, '1f42b':2567, '1f42c':2623, '1f42d':2574, '1f42e':2555, '1f42f':2546, '1f430':2578, '1f431':2542, '1f432':2617, '1f433':2621, '1f434':2549, '1f435':2530, '1f436':2534, '1f437':2559, '1f438':2612, '1f439':2577, '1f43a':2539, '1f43b-200d-2744':2585, '1f43b':2584, '1f43c':2587, '1f43d':2562, '1f43e':2593, '1f43f':2580, '1f440':1381, '1f441-200d-1f5e8':1159, '1f441':1382, '1f442':1373, '1f443':1375, '1f444':1384, '1f445':1383, '1f446':1347, '1f447':1349, '1f448':1345, '1f449':1346, '1f44a':1355, '1f44b':1327, '1f44c':1336, '1f44d':1352, '1f44e':1353, '1f44f':1358, '1f450':1361, '1f451':61144, '1f452':61145, '1f453':61110, '1f454':61115, '1f455':61116, '1f456':61117, '1f457':61122, '1f458':61123, '1f459':61128, '1f45a':61129, '1f45b':61130, '1f45c':61131, '1f45d':61132, '1f45e':61136, '1f45f':61137, '1f460':61140, '1f461':61141, '1f462':61143, '1f463':1687, '1f464':1684, '1f465':1685, '1f466':1388, '1f467':1389, '1f468-200d-1f33e':1457, '1f468-200d-1f373':1460, '1f468-200d-1f37c':1524, '1f468-200d-1f393':1448, '1f468-200d-1f3a4':1478, '1f468-200d-1f3a8':1481, '1f468-200d-1f3eb':1451, '1f468-200d-1f3ed':1466, '1f468-200d-1f466-200d-1f466':1674, '1f468-200d-1f466':1673, '1f468-200d-1f467-200d-1f466':1676, '1f468-200d-1f467-200d-1f467':1677, '1f468-200d-1f467':1675, '1f468-200d-1f468-200d-1f466':1663, '1f468-200d-1f468-200d-1f466-200d-1f466':1666, '1f468-200d-1f468-200d-1f467':1664, '1f468-200d-1f468-200d-1f467-200d-1f466':1665, '1f468-200d-1f468-200d-1f467-200d-1f467':1667, '1f468-200d-1f469-200d-1f466':1658, '1f468-200d-1f469-200d-1f466-200d-1f466':1661, '1f468-200d-1f469-200d-1f467':1659, '1f468-200d-1f469-200d-1f467-200d-1f466':1660, '1f468-200d-1f469-200d-1f467-200d-1f467':1662, '1f468-200d-1f4bb':1475, '1f468-200d-1f4bc':1469, '1f468-200d-1f527':1463, '1f468-200d-1f52c':1472, '1f468-200d-1f680':1487, '1f468-200d-1f692':1490, '1f468-200d-1f9af':1574, '1f468-200d-1f9b0':1396, '1f468-200d-1f9b1':1397, '1f468-200d-1f9b2':1399, '1f468-200d-1f9b3':1398, '1f468-200d-1f9bc':1577, '1f468-200d-1f9bd':1580, '1f468-200d-2695':1445, '1f468-200d-2696':1454, '1f468-200d-2708':1484, '1f468-200d-2764-200d-1f468':1655, '1f468-200d-2764-200d-1f48b-200d-1f468':1651, '1f468':1392, '1f469-200d-1f33e':1458, '1f469-200d-1f373':1461, '1f469-200d-1f37c':1523, '1f469-200d-1f393':1449, '1f469-200d-1f3a4':1479, '1f469-200d-1f3a8':1482, '1f469-200d-1f3eb':1452, '1f469-200d-1f3ed':1467, '1f469-200d-1f466-200d-1f466':1679, '1f469-200d-1f466':1678, '1f469-200d-1f467-200d-1f466':1681, '1f469-200d-1f467-200d-1f467':1682, '1f469-200d-1f467':1680, '1f469-200d-1f469-200d-1f466':1668, '1f469-200d-1f469-200d-1f466-200d-1f466':1671, '1f469-200d-1f469-200d-1f467':1669, '1f469-200d-1f469-200d-1f467-200d-1f466':1670, '1f469-200d-1f469-200d-1f467-200d-1f467':1672, '1f469-200d-1f4bb':1476, '1f469-200d-1f4bc':1470, '1f469-200d-1f527':1464, '1f469-200d-1f52c':1473, '1f469-200d-1f680':1488, '1f469-200d-1f692':1491, '1f469-200d-1f9af':1575, '1f469-200d-1f9b0':1401, '1f469-200d-1f9b1':1403, '1f469-200d-1f9b2':1407, '1f469-200d-1f9b3':1405, '1f469-200d-1f9bc':1578, '1f469-200d-1f9bd':1581, '1f469-200d-2695':1446, '1f469-200d-2696':1455, '1f469-200d-2708':1485, '1f469-200d-2764-200d-1f468':1654, '1f469-200d-2764-200d-1f469':1656, '1f469-200d-2764-200d-1f48b-200d-1f468':1650, '1f469-200d-2764-200d-1f48b-200d-1f469':1652, '1f469':1400, '1f46a':1657, '1f46b':1647, '1f46c':1648, '1f46d':1646, '1f46e-200d-2640':1494, '1f46e-200d-2642':1493, '1f46e':1492, '1f46f-200d-2640':1590, '1f46f-200d-2642':1589, '1f46f':1588, '1f470-200d-2640':1518, '1f470-200d-2642':1517, '1f470':1516, '1f471-200d-2640':1409, '1f471-200d-2642':1410, '1f471':1391, '1f472':1511, '1f473-200d-2640':1510, '1f473-200d-2642':1509, '1f473':1508, '1f474':1412, '1f475':1413, '1f476':1386, '1f477-200d-2640':1504, '1f477-200d-2642':1503, '1f477':1502, '1f478':1507, '1f479':1109, '1f47a':1110, '1f47b':1111, '1f47c':1526, '1f47d':1112, '1f47e':1113, '1f47f':1104, '1f480':1105, '1f481-200d-2640':1428, '1f481-200d-2642':1427, '1f481':1426, '1f482-200d-2640':1500, '1f482-200d-2642':1499, '1f482':1498, '1f483':1585, '1f484':61152, '1f485':1366, '1f486-200d-2640':1560, '1f486-200d-2642':1559, '1f486':1558, '1f487-200d-2640':1563, '1f487-200d-2642':1562, '1f487':1561, '1f488':4870, '1f489':61326, '1f48a':61328, '1f48b':1127, '1f48c':1128, '1f48d':61153, '1f48e':61154, '1f48f':1649, '1f490':2648, '1f491':1653, '1f492':4846, '1f493':1133, '1f494':1138, '1f495':1135, '1f496':1131, '1f497':1132, '1f498':1129, '1f499':1145, '1f49a':1144, '1f49b':1143, '1f49c':1146, '1f49d':1130, '1f49e':1134, '1f49f':1136, '1f4a0':62946, '1f4a1':61214, '1f4a2':1151, '1f4a3':1157, '1f4a4':1163, '1f4a5':1152, '1f4a6':1154, '1f4a7':41022, '1f4a8':1155, '1f4a9':1107, '1f4aa':1368, '1f4ab':1153, '1f4ac':1158, '1f4ad':1162, '1f4ae':2650, '1f4af':1150, '1f4b0':61235, '1f4b1':62841, '1f4b2':62842, '1f4b3':61242, '1f4b4':61237, '1f4b5':61238, '1f4b6':61239, '1f4b7':61240, '1f4b8':61241, '1f4b9':61244, '1f4ba':4936, '1f4bb':61191, '1f4bc':61265, '1f4bd':61197, '1f4be':61198, '1f4bf':61199, '1f4c0':61200, '1f4c1':61266, '1f4c2':61267, '1f4c3':61227, '1f4c4':61229, '1f4c5':61269, '1f4c6':61270, '1f4c7':61273, '1f4c8':61274, '1f4c9':61275, '1f4ca':61276, '1f4cb':61277, '1f4cc':61278, '1f4cd':61279, '1f4ce':61280, '1f4cf':61282, '1f4d0':61283, '1f4d1':61232, '1f4d2':61226, '1f4d3':61225, '1f4d4':61218, '1f4d5':61219, '1f4d6':61220, '1f4d7':61221, '1f4d8':61222, '1f4d9':61223, '1f4da':61224, '1f4db':62847, '1f4dc':61228, '1f4dd':61264, '1f4de':61185, '1f4df':61186, '1f4e0':61187, '1f4e1':61325, '1f4e2':61159, '1f4e3':61160, '1f4e4':61249, '1f4e5':61250, '1f4e6':61251, '1f4e7':61246, '1f4e8':61247, '1f4e9':61248, '1f4ea':61253, '1f4eb':61252, '1f4ec':61254, '1f4ed':61255, '1f4ee':61256, '1f4ef':61161, '1f4f0':61230, '1f4f1':61182, '1f4f2':61183, '1f4f3':62823, '1f4f4':62824, '1f4f5':62751, '1f4f6':62822, '1f4f7':61207, '1f4f8':61208, '1f4f9':61209, '1f4fa':61206, '1f4fb':61172, '1f4fc':61210, '1f4fd':61204, '1f4ff':61151, '1f500':62801, '1f501':62802, '1f502':62803, '1f503':62769, '1f504':62770, '1f505':62820, '1f506':62821, '1f507':61155, '1f508':61156, '1f509':61157, '1f50a':61158, '1f50b':61188, '1f50c':61190, '1f50d':61211, '1f50e':61212, '1f50f':61290, '1f510':61291, '1f511':61292, '1f512':61288, '1f513':61289, '1f514':61162, '1f515':61163, '1f516':61233, '1f517':61313, '1f518':62947, '1f519':62771, '1f51a':62772, '1f51b':62773, '1f51c':62774, '1f51d':62775, '1f51e':62752, '1f51f':62876, '1f520':62877, '1f521':62878, '1f522':62879, '1f523':62880, '1f524':62881, '1f525':41021, '1f526':61215, '1f527':61306, '1f528':61294, '1f529':61308, '1f52a':3803, '1f52b':61301, '1f52c':61323, '1f52d':61324, '1f52e':51082, '1f52f':62787, '1f530':62848, '1f531':62846, '1f532':62949, '1f533':62948, '1f534':62916, '1f535':62920, '1f536':62940, '1f537':62941, '1f538':62942, '1f539':62943, '1f53a':62944, '1f53b':62945, '1f53c':62811, '1f53d':62813, '1f549':62778, '1f54a':2602, '1f54b':4854, '1f54c':4850, '1f54d':4852, '1f54e':62786, '1f550':4955, '1f551':4957, '1f552':4959, '1f553':4961, '1f554':4963, '1f555':4965, '1f556':4967, '1f557':4969, '1f558':4971, '1f559':4973, '1f55a':4975, '1f55b':4953, '1f55c':4956, '1f55d':4958, '1f55e':4960, '1f55f':4962, '1f560':4964, '1f561':4966, '1f562':4968, '1f563':4970, '1f564':4972, '1f565':4974, '1f566':4976, '1f567':4954, '1f56f':61213, '1f570':4952, '1f573':1156, '1f574':1587, '1f575-200d-2640':1497, '1f575-200d-2642':1496, '1f575':1495, '1f576':61111, '1f577':2641, '1f578':2642, '1f579':51087, '1f57a':1586, '1f587':61281, '1f58a':61261, '1f58b':61260, '1f58c':61262, '1f58d':61263, '1f590':1329, '1f595':1348, '1f596':1331, '1f5a4':1148, '1f5a5':61192, '1f5a8':61193, '1f5b1':61195, '1f5b2':61196, '1f5bc':51104, '1f5c2':61268, '1f5c3':61285, '1f5c4':61286, '1f5d1':61287, '1f5d2':61271, '1f5d3':61272, '1f5dc':61310, '1f5dd':61293, '1f5de':61231, '1f5e1':61299, '1f5e3':1683, '1f5e8':1160, '1f5ef':1161, '1f5f3':61257, '1f5fa':4810, '1f5fb':4816, '1f5fc':4847, '1f5fd':4848, '1f5fe':4811, '1f5ff':61362, '1f600':11, '1f601':14, '1f602':18, '1f603':12, '1f604':13, '1f605':16, '1f606':15, '1f607':114, '1f608':1103, '1f609':112, '1f60a':113, '1f60b':124, '1f60c':150, '1f60d':116, '1f60e':170, '1f60f':144, '1f610':139, '1f611':140, '1f612':145, '1f613':195, '1f614':151, '1f615':173, '1f616':192, '1f617':119, '1f618':118, '1f619':122, '1f61a':121, '1f61b':125, '1f61c':126, '1f61d':128, '1f61e':194, '1f61f':175, '1f620':1101, '1f621':1100, '1f622':189, '1f623':193, '1f624':199, '1f625':188, '1f626':184, '1f627':185, '1f628':186, '1f629':196, '1f62a':152, '1f62b':197, '1f62c':147, '1f62d':190, '1f62e-200d-1f4a8':148, '1f62e':178, '1f62f':179, '1f630':187, '1f631':191, '1f632':180, '1f633':181, '1f634':154, '1f635-200d-1f4ab':165, '1f635':164, '1f636-200d-1f32b':143, '1f636':141, '1f637':155, '1f638':1116, '1f639':1117, '1f63a':1115, '1f63b':1118, '1f63c':1119, '1f63d':1120, '1f63e':1123, '1f63f':1122, '1f640':1121, '1f641':176, '1f642':19, '1f643':110, '1f644':146, '1f645-200d-2640':1422, '1f645-200d-2642':1421, '1f645':1420, '1f646-200d-2640':1425, '1f646-200d-2642':1424, '1f646':1423, '1f647-200d-2640':1437, '1f647-200d-2642':1436, '1f647':1435, '1f648':1124, '1f649':1125, '1f64a':1126, '1f64b-200d-2640':1431, '1f64b-200d-2642':1430, '1f64b':1429, '1f64c':1359, '1f64d-200d-2640':1416, '1f64d-200d-2642':1415, '1f64d':1414, '1f64e-200d-2640':1419, '1f64e-200d-2642':1418, '1f64e':1417, '1f64f':1364, '1f680':4942, '1f681':4937, '1f682':4872, '1f683':4873, '1f684':4874, '1f685':4875, '1f686':4876, '1f687':4877, '1f688':4878, '1f689':4879, '1f68a':4880, '1f68b':4883, '1f68c':4884, '1f68d':4885, '1f68e':4886, '1f68f':4911, '1f690':4887, '1f691':4888, '1f692':4889, '1f693':4890, '1f694':4891, '1f695':4892, '1f696':4893, '1f697':4894, '1f698':4895, '1f699':4896, '1f69a':4898, '1f69b':4899, '1f69c':4900, '1f69d':4881, '1f69e':4882, '1f69f':4938, '1f6a0':4939, '1f6a1':4940, '1f6a2':4930, '1f6a3-200d-2640':1609, '1f6a3-200d-2642':1608, '1f6a3':1607, '1f6a4':4926, '1f6a5':4918, '1f6a6':4919, '1f6a7':4921, '1f6a8':4917, '1f6a9':71587, '1f6aa':61333, '1f6ab':62745, '1f6ac':61358, '1f6ad':62747, '1f6ae':62730, '1f6af':62748, '1f6b0':62731, '1f6b1':62749, '1f6b2':4907, '1f6b3':62746, '1f6b4-200d-2640':1621, '1f6b4-200d-2642':1620, '1f6b4':1619, '1f6b5-200d-2640':1624, '1f6b5-200d-2642':1623, '1f6b5':1622, '1f6b6-200d-2640':1566, '1f6b6-200d-2642':1565, '1f6b6':1564, '1f6b7':62750, '1f6b8':62743, '1f6b9':62733, '1f6ba':62734, '1f6bb':62735, '1f6bc':62736, '1f6bd':61340, '1f6be':62737, '1f6bf':61342, '1f6c0':1643, '1f6c1':61343, '1f6c2':62738, '1f6c3':62739, '1f6c4':62740, '1f6c5':62741, '1f6cb':61338, '1f6cc':1644, '1f6cd':61133, '1f6ce':4944, '1f6cf':61337, '1f6d0':62776, '1f6d1':4920, '1f6d2':61357, '1f6d5':4851, '1f6d6':4828, '1f6d7':61334, '1f6e0':61298, '1f6e1':61304, '1f6e2':4914, '1f6e3':4912, '1f6e4':4913, '1f6e5':4929, '1f6e9':4932, '1f6eb':4933, '1f6ec':4934, '1f6f0':4941, '1f6f3':4927, '1f6f4':4908, '1f6f5':4903, '1f6f6':4925, '1f6f7':51076, '1f6f8':4943, '1f6f9':4909, '1f6fa':4906, '1f6fb':4897, '1f6fc':4910, '1f7e0':62917, '1f7e1':62918, '1f7e2':62919, '1f7e3':62921, '1f7e4':62922, '1f7e5':62925, '1f7e6':62929, '1f7e7':62926, '1f7e8':62927, '1f7e9':62928, '1f7ea':62930, '1f7eb':62931, '1f90c':1337, '1f90d':1149, '1f90e':1147, '1f90f':1338, '1f910':137, '1f911':129, '1f912':156, '1f913':171, '1f914':135, '1f915':157, '1f916':1114, '1f917':130, '1f918':1343, '1f919':1344, '1f91a':1328, '1f91b':1356, '1f91c':1357, '1f91d':1363, '1f91e':1340, '1f91f':1342, '1f920':167, '1f921':1108, '1f922':158, '1f923':17, '1f924':153, '1f925':149, '1f926-200d-2640':1440, '1f926-200d-2642':1439, '1f926':1438, '1f927':160, '1f928':138, '1f929':117, '1f92a':127, '1f92b':134, '1f92c':1102, '1f92d':131, '1f92e':159, '1f92f':166, '1f930':1519, '1f931':1522, '1f932':1362, '1f933':1367, '1f934':1506, '1f935-200d-2640':1515, '1f935-200d-2642':1514, '1f935':1513, '1f936':1528, '1f937-200d-2640':1443, '1f937-200d-2642':1442, '1f937':1441, '1f938-200d-2640':1627, '1f938-200d-2642':1626, '1f938':1625, '1f939-200d-2640':1639, '1f939-200d-2642':1638, '1f939':1637, '1f93a':1597, '1f93c-200d-2640':1630, '1f93c-200d-2642':1629, '1f93c':1628, '1f93d-200d-2640':1633, '1f93d-200d-2642':1632, '1f93d':1631, '1f93e-200d-2640':1636, '1f93e-200d-2642':1635, '1f93e':1634, '1f93f':51073, '1f940':2654, '1f941':61180, '1f942':3791, '1f943':3792, '1f944':3802, '1f945':51069, '1f947':51048, '1f948':51049, '1f949':51050, '1f94a':51067, '1f94b':51068, '1f94c':51077, '1f94d':51064, '1f94e':51053, '1f94f':51059, '1f950':3710, '1f951':3693, '1f952':3700, '1f953':3721, '1f954':3695, '1f955':3696, '1f956':3711, '1f957':3738, '1f958':3734, '1f959':3730, '1f95a':3732, '1f95b':3780, '1f95c':3706, '1f95d':3689, '1f95e':3715, '1f95f':3757, '1f960':3758, '1f961':3759, '1f962':3799, '1f963':3737, '1f964':3794, '1f965':3692, '1f966':3702, '1f967':3773, '1f968':3713, '1f969':3720, '1f96a':3726, '1f96b':3742, '1f96c':3701, '1f96d':3681, '1f96e':3755, '1f96f':3714, '1f970':115, '1f971':198, '1f972':123, '1f973':168, '1f974':163, '1f975':161, '1f976':162, '1f977':1501, '1f978':169, '1f97a':182, '1f97b':61124, '1f97c':61113, '1f97d':61112, '1f97e':61138, '1f97f':61139, '1f980':3760, '1f981':2545, '1f982':2643, '1f983':2594, '1f984':2551, '1f985':2603, '1f986':2604, '1f987':2583, '1f988':2628, '1f989':2606, '1f98a':2540, '1f98b':2633, '1f98c':2553, '1f98d':2532, '1f98e':2615, '1f98f':2572, '1f990':3762, '1f991':3763, '1f992':2569, '1f993':2552, '1f994':2582, '1f995':2619, '1f996':2620, '1f997':2639, '1f998':2591, '1f999':2568, '1f99a':2610, '1f99b':2573, '1f99c':2611, '1f99d':2541, '1f99e':3761, '1f99f':2644, '1f9a0':2647, '1f9a1':2592, '1f9a2':2605, '1f9a3':2571, '1f9a4':2607, '1f9a5':2588, '1f9a6':2589, '1f9a7':2533, '1f9a8':2590, '1f9a9':2609, '1f9aa':3764, '1f9ab':2581, '1f9ac':2554, '1f9ad':2624, '1f9ae':2536, '1f9af':61312, '1f9b4':1380, '1f9b5':1371, '1f9b6':1372, '1f9b7':1379, '1f9b8-200d-2640':1532, '1f9b8-200d-2642':1531, '1f9b8':1530, '1f9b9-200d-2640':1535, '1f9b9-200d-2642':1534, '1f9b9':1533, '1f9ba':61114, '1f9bb':1374, '1f9bc':4905, '1f9bd':4904, '1f9be':1369, '1f9bf':1370, '1f9c0':3717, '1f9c1':3772, '1f9c2':3741, '1f9c3':3796, '1f9c4':3703, '1f9c5':3704, '1f9c6':3731, '1f9c7':3716, '1f9c8':3740, '1f9c9':3797, '1f9ca':3798, '1f9cb':3795, '1f9cd-200d-2640':1569, '1f9cd-200d-2642':1568, '1f9cd':1567, '1f9ce-200d-2640':1572, '1f9ce-200d-2642':1571, '1f9ce':1570, '1f9cf-200d-2640':1434, '1f9cf-200d-2642':1433, '1f9cf':1432, '1f9d0':172, '1f9d1-200d-1f33e':1456, '1f9d1-200d-1f373':1459, '1f9d1-200d-1f37c':1525, '1f9d1-200d-1f384':1529, '1f9d1-200d-1f393':1447, '1f9d1-200d-1f3a4':1477, '1f9d1-200d-1f3a8':1480, '1f9d1-200d-1f3eb':1450, '1f9d1-200d-1f3ed':1465, '1f9d1-200d-1f4bb':1474, '1f9d1-200d-1f4bc':1468, '1f9d1-200d-1f527':1462, '1f9d1-200d-1f52c':1471, '1f9d1-200d-1f680':1486, '1f9d1-200d-1f692':1489, '1f9d1-200d-1f91d-200d-1f9d1':1645, '1f9d1-200d-1f9af':1573, '1f9d1-200d-1f9b0':1402, '1f9d1-200d-1f9b1':1404, '1f9d1-200d-1f9b2':1408, '1f9d1-200d-1f9b3':1406, '1f9d1-200d-1f9bc':1576, '1f9d1-200d-1f9bd':1579, '1f9d1-200d-2695':1444, '1f9d1-200d-2696':1453, '1f9d1-200d-2708':1483, '1f9d1':1390, '1f9d2':1387, '1f9d3':1411, '1f9d4-200d-2640':1395, '1f9d4-200d-2642':1394, '1f9d4':1393, '1f9d5':1512, '1f9d6-200d-2640':1593, '1f9d6-200d-2642':1592, '1f9d6':1591, '1f9d7-200d-2640':1596, '1f9d7-200d-2642':1595, '1f9d7':1594, '1f9d8-200d-2640':1642, '1f9d8-200d-2642':1641, '1f9d8':1640, '1f9d9-200d-2640':1538, '1f9d9-200d-2642':1537, '1f9d9':1536, '1f9da-200d-2640':1541, '1f9da-200d-2642':1540, '1f9da':1539, '1f9db-200d-2640':1544, '1f9db-200d-2642':1543, '1f9db':1542, '1f9dc-200d-2640':1547, '1f9dc-200d-2642':1546, '1f9dc':1545, '1f9dd-200d-2640':1550, '1f9dd-200d-2642':1549, '1f9dd':1548, '1f9de-200d-2640':1553, '1f9de-200d-2642':1552, '1f9de':1551, '1f9df-200d-2640':1556, '1f9df-200d-2642':1555, '1f9df':1554, '1f9e0':1376, '1f9e1':1142, '1f9e2':61148, '1f9e3':61118, '1f9e4':61119, '1f9e5':61120, '1f9e6':61121, '1f9e7':51039, '1f9e8':51028, '1f9e9':51090, '1f9ea':61320, '1f9eb':61321, '1f9ec':61322, '1f9ed':4812, '1f9ee':61201, '1f9ef':61356, '1f9f0':61316, '1f9f1':4825, '1f9f2':61317, '1f9f3':4945, '1f9f4':61346, '1f9f5':51106, '1f9f6':51108, '1f9f7':61347, '1f9f8':51091, '1f9f9':61348, '1f9fa':61349, '1f9fb':61350, '1f9fc':61352, '1f9fd':61355, '1f9fe':61243, '1f9ff':51084, '1fa70':61142, '1fa71':61125, '1fa72':61126, '1fa73':61127, '1fa74':61135, '1fa78':61327, '1fa79':61329, '1fa7a':61331, '1fa80':51079, '1fa81':51080, '1fa82':4935, '1fa83':61302, '1fa84':51083, '1fa85':51092, '1fa86':51094, '1fa90':4993, '1fa91':61339, '1fa92':61345, '1fa93':61295, '1fa94':61217, '1fa95':61179, '1fa96':61149, '1fa97':61174, '1fa98':61181, '1fa99':61236, '1fa9a':61305, '1fa9b':61307, '1fa9c':61318, '1fa9d':61315, '1fa9e':61335, '1fa9f':61336, '1faa0':61341, '1faa1':51107, '1faa2':51109, '1faa3':61351, '1faa4':61344, '1faa5':61354, '1faa6':61360, '1faa7':61363, '1faa8':4826, '1fab0':2645, '1fab1':2646, '1fab2':2637, '1fab3':2640, '1fab4':2660, '1fab5':4827, '1fab6':2608, '1fac0':1377, '1fac1':1378, '1fac2':1686, '1fad0':3688, '1fad1':3699, '1fad2':3691, '1fad3':3712, '1fad4':3729, '1fad5':3736, '1fad6':3782, '203c':62834, '21a9':62765, '21aa':62766, '231a':4948, '231b':4946, '23cf':62818, '23e9':62805, '23ea':62809, '23eb':62812, '23ec':62814, '23ed':62806, '23ee':62810, '23ef':62807, '23f0':4949, '23f1':4950, '23f2':4951, '23f3':4947, '23f8':62815, '23f9':62816, '23fa':62817, '24c2':62890, '25aa':62938, '25ab':62939, '25b6':62804, '25c0':62808, '25fb':62935, '25fc':62934, '25fd':62937, '25fe':62936, '260e':61184, '261d':1350, '262a':62784, '262e':62785, '262f':62781, '263a':120, '264a':62790, '264b':62791, '264c':62792, '264d':62793, '264e':62794, '264f':62795, '265f':51099, '267b':62844, '267e':62833, '267f':62732, '269b':62777, '269c':62845, '26a0':62742, '26a1':41016, '26a7':62827, '26aa':62924, '26ab':62923, '26b0':61359, '26b1':61361, '26bd':51051, '26be':51052, '26c4':41019, '26c5':4999, '26c8':41000, '26ce':62800, '26cf':61296, '26d1':61150, '26d3':61314, '26d4':62744, '26e9':4853, '26ea':4849, '26f0':4814, '26f1':41015, '26f2':4855, '26f3':51070, '26f4':4928, '26f5':4924, '26f7':1599, '26f8':51071, '26f9-200d-2640':1615, '26f9-200d-2642':1614, '26f9':1613, '26fa':4856, '26fd':4915, '270a':1354, '270b':1330, '270c':1339, '270d':1365, '270f':61258, '271d':62782, '274c':62853, '274e':62854, '2764-200d-1f525':1139, '2764-200d-1fa79':1140, '27a1':62757, '27b0':62855, '27bf':62856, '2b05':62761, '2b06':62755, '2b07':62759, '2b1b':62932, '2b1c':62933, '2b50':4994, '2b55':62849, '303d':62857, '1f385-1f3fb':0, '1f385-1f3fc':0, '1f385-1f3fd':0, '1f385-1f3fe':0, '1f385-1f3ff':0, '1f3c2-1f3fb':0, '1f3c2-1f3fc':0, '1f3c2-1f3fd':0, '1f3c2-1f3fe':0, '1f3c2-1f3ff':0, '1f3c3-1f3fb-200d-2640':0, '1f3c3-1f3fc-200d-2640':0, '1f3c3-1f3fd-200d-2640':0, '1f3c3-1f3fe-200d-2640':0, '1f3c3-1f3ff-200d-2640':0, '1f3c3-1f3fb-200d-2642':0, '1f3c3-1f3fc-200d-2642':0, '1f3c3-1f3fd-200d-2642':0, '1f3c3-1f3fe-200d-2642':0, '1f3c3-1f3ff-200d-2642':0, '1f3c3-1f3fb':0, '1f3c3-1f3fc':0, '1f3c3-1f3fd':0, '1f3c3-1f3fe':0, '1f3c3-1f3ff':0, '1f3c4-1f3fb-200d-2640':0, '1f3c4-1f3fc-200d-2640':0, '1f3c4-1f3fd-200d-2640':0, '1f3c4-1f3fe-200d-2640':0, '1f3c4-1f3ff-200d-2640':0, '1f3c4-1f3fb-200d-2642':0, '1f3c4-1f3fc-200d-2642':0, '1f3c4-1f3fd-200d-2642':0, '1f3c4-1f3fe-200d-2642':0, '1f3c4-1f3ff-200d-2642':0, '1f3c4-1f3fb':0, '1f3c4-1f3fc':0, '1f3c4-1f3fd':0, '1f3c4-1f3fe':0, '1f3c4-1f3ff':0, '1f3c7-1f3fb':0, '1f3c7-1f3fc':0, '1f3c7-1f3fd':0, '1f3c7-1f3fe':0, '1f3c7-1f3ff':0, '1f3ca-1f3fb-200d-2640':0, '1f3ca-1f3fc-200d-2640':0, '1f3ca-1f3fd-200d-2640':0, '1f3ca-1f3fe-200d-2640':0, '1f3ca-1f3ff-200d-2640':0, '1f3ca-1f3fb-200d-2642':0, '1f3ca-1f3fc-200d-2642':0, '1f3ca-1f3fd-200d-2642':0, '1f3ca-1f3fe-200d-2642':0, '1f3ca-1f3ff-200d-2642':0, '1f3ca-1f3fb':0, '1f3ca-1f3fc':0, '1f3ca-1f3fd':0, '1f3ca-1f3fe':0, '1f3ca-1f3ff':0, '1f3cb-1f3fb-200d-2640':0, '1f3cb-1f3fc-200d-2640':0, '1f3cb-1f3fd-200d-2640':0, '1f3cb-1f3fe-200d-2640':0, '1f3cb-1f3ff-200d-2640':0, '1f3cb-1f3fb-200d-2642':0, '1f3cb-1f3fc-200d-2642':0, '1f3cb-1f3fd-200d-2642':0, '1f3cb-1f3fe-200d-2642':0, '1f3cb-1f3ff-200d-2642':0, '1f3cb-1f3fb':0, '1f3cb-1f3fc':0, '1f3cb-1f3fd':0, '1f3cb-1f3fe':0, '1f3cb-1f3ff':0, '1f3cc-1f3fb-200d-2640':0, '1f3cc-1f3fc-200d-2640':0, '1f3cc-1f3fd-200d-2640':0, '1f3cc-1f3fe-200d-2640':0, '1f3cc-1f3ff-200d-2640':0, '1f3cc-1f3fb-200d-2642':0, '1f3cc-1f3fc-200d-2642':0, '1f3cc-1f3fd-200d-2642':0, '1f3cc-1f3fe-200d-2642':0, '1f3cc-1f3ff-200d-2642':0, '1f3cc-1f3fb':0, '1f3cc-1f3fc':0, '1f3cc-1f3fd':0, '1f3cc-1f3fe':0, '1f3cc-1f3ff':0, '1f442-1f3fb':0, '1f442-1f3fc':0, '1f442-1f3fd':0, '1f442-1f3fe':0, '1f442-1f3ff':0, '1f443-1f3fb':0, '1f443-1f3fc':0, '1f443-1f3fd':0, '1f443-1f3fe':0, '1f443-1f3ff':0, '1f446-1f3fb':0, '1f446-1f3fc':0, '1f446-1f3fd':0, '1f446-1f3fe':0, '1f446-1f3ff':0, '1f447-1f3fb':0, '1f447-1f3fc':0, '1f447-1f3fd':0, '1f447-1f3fe':0, '1f447-1f3ff':0, '1f448-1f3fb':0, '1f448-1f3fc':0, '1f448-1f3fd':0, '1f448-1f3fe':0, '1f448-1f3ff':0, '1f449-1f3fb':0, '1f449-1f3fc':0, '1f449-1f3fd':0, '1f449-1f3fe':0, '1f449-1f3ff':0, '1f44a-1f3fb':0, '1f44a-1f3fc':0, '1f44a-1f3fd':0, '1f44a-1f3fe':0, '1f44a-1f3ff':0, '1f44b-1f3fb':0, '1f44b-1f3fc':0, '1f44b-1f3fd':0, '1f44b-1f3fe':0, '1f44b-1f3ff':0, '1f44c-1f3fb':0, '1f44c-1f3fc':0, '1f44c-1f3fd':0, '1f44c-1f3fe':0, '1f44c-1f3ff':0, '1f44d-1f3fb':0, '1f44d-1f3fc':0, '1f44d-1f3fd':0, '1f44d-1f3fe':0, '1f44d-1f3ff':0, '1f44e-1f3fb':0, '1f44e-1f3fc':0, '1f44e-1f3fd':0, '1f44e-1f3fe':0, '1f44e-1f3ff':0, '1f44f-1f3fb':0, '1f44f-1f3fc':0, '1f44f-1f3fd':0, '1f44f-1f3fe':0, '1f44f-1f3ff':0, '1f450-1f3fb':0, '1f450-1f3fc':0, '1f450-1f3fd':0, '1f450-1f3fe':0, '1f450-1f3ff':0, '1f466-1f3fb':0, '1f466-1f3fc':0, '1f466-1f3fd':0, '1f466-1f3fe':0, '1f466-1f3ff':0, '1f467-1f3fb':0, '1f467-1f3fc':0, '1f467-1f3fd':0, '1f467-1f3fe':0, '1f467-1f3ff':0, '1f468-1f3fb-200d-1f33e':0, '1f468-1f3fc-200d-1f33e':0, '1f468-1f3fd-200d-1f33e':0, '1f468-1f3fe-200d-1f33e':0, '1f468-1f3ff-200d-1f33e':0, '1f468-1f3fb-200d-1f373':0, '1f468-1f3fc-200d-1f373':0, '1f468-1f3fd-200d-1f373':0, '1f468-1f3fe-200d-1f373':0, '1f468-1f3ff-200d-1f373':0, '1f468-1f3fb-200d-1f37c':0, '1f468-1f3fc-200d-1f37c':0, '1f468-1f3fd-200d-1f37c':0, '1f468-1f3fe-200d-1f37c':0, '1f468-1f3ff-200d-1f37c':0, '1f468-1f3fb-200d-1f393':0, '1f468-1f3fc-200d-1f393':0, '1f468-1f3fd-200d-1f393':0, '1f468-1f3fe-200d-1f393':0, '1f468-1f3ff-200d-1f393':0, '1f468-1f3fb-200d-1f3a4':0, '1f468-1f3fc-200d-1f3a4':0, '1f468-1f3fd-200d-1f3a4':0, '1f468-1f3fe-200d-1f3a4':0, '1f468-1f3ff-200d-1f3a4':0, '1f468-1f3fb-200d-1f3a8':0, '1f468-1f3fc-200d-1f3a8':0, '1f468-1f3fd-200d-1f3a8':0, '1f468-1f3fe-200d-1f3a8':0, '1f468-1f3ff-200d-1f3a8':0, '1f468-1f3fb-200d-1f3eb':0, '1f468-1f3fc-200d-1f3eb':0, '1f468-1f3fd-200d-1f3eb':0, '1f468-1f3fe-200d-1f3eb':0, '1f468-1f3ff-200d-1f3eb':0, '1f468-1f3fb-200d-1f3ed':0, '1f468-1f3fc-200d-1f3ed':0, '1f468-1f3fd-200d-1f3ed':0, '1f468-1f3fe-200d-1f3ed':0, '1f468-1f3ff-200d-1f3ed':0, '1f468-1f3fb-200d-1f4bb':0, '1f468-1f3fc-200d-1f4bb':0, '1f468-1f3fd-200d-1f4bb':0, '1f468-1f3fe-200d-1f4bb':0, '1f468-1f3ff-200d-1f4bb':0, '1f468-1f3fb-200d-1f4bc':0, '1f468-1f3fc-200d-1f4bc':0, '1f468-1f3fd-200d-1f4bc':0, '1f468-1f3fe-200d-1f4bc':0, '1f468-1f3ff-200d-1f4bc':0, '1f468-1f3fb-200d-1f527':0, '1f468-1f3fc-200d-1f527':0, '1f468-1f3fd-200d-1f527':0, '1f468-1f3fe-200d-1f527':0, '1f468-1f3ff-200d-1f527':0, '1f468-1f3fb-200d-1f52c':0, '1f468-1f3fc-200d-1f52c':0, '1f468-1f3fd-200d-1f52c':0, '1f468-1f3fe-200d-1f52c':0, '1f468-1f3ff-200d-1f52c':0, '1f468-1f3fb-200d-1f680':0, '1f468-1f3fc-200d-1f680':0, '1f468-1f3fd-200d-1f680':0, '1f468-1f3fe-200d-1f680':0, '1f468-1f3ff-200d-1f680':0, '1f468-1f3fb-200d-1f692':0, '1f468-1f3fc-200d-1f692':0, '1f468-1f3fd-200d-1f692':0, '1f468-1f3fe-200d-1f692':0, '1f468-1f3ff-200d-1f692':0, '1f468-1f3fb-200d-1f9af':0, '1f468-1f3fc-200d-1f9af':0, '1f468-1f3fd-200d-1f9af':0, '1f468-1f3fe-200d-1f9af':0, '1f468-1f3ff-200d-1f9af':0, '1f468-1f3fb-200d-1f9b0':0, '1f468-1f3fc-200d-1f9b0':0, '1f468-1f3fd-200d-1f9b0':0, '1f468-1f3fe-200d-1f9b0':0, '1f468-1f3ff-200d-1f9b0':0, '1f468-1f3fb-200d-1f9b1':0, '1f468-1f3fc-200d-1f9b1':0, '1f468-1f3fd-200d-1f9b1':0, '1f468-1f3fe-200d-1f9b1':0, '1f468-1f3ff-200d-1f9b1':0, '1f468-1f3fb-200d-1f9b2':0, '1f468-1f3fc-200d-1f9b2':0, '1f468-1f3fd-200d-1f9b2':0, '1f468-1f3fe-200d-1f9b2':0, '1f468-1f3ff-200d-1f9b2':0, '1f468-1f3fb-200d-1f9b3':0, '1f468-1f3fc-200d-1f9b3':0, '1f468-1f3fd-200d-1f9b3':0, '1f468-1f3fe-200d-1f9b3':0, '1f468-1f3ff-200d-1f9b3':0, '1f468-1f3fb-200d-1f9bc':0, '1f468-1f3fc-200d-1f9bc':0, '1f468-1f3fd-200d-1f9bc':0, '1f468-1f3fe-200d-1f9bc':0, '1f468-1f3ff-200d-1f9bc':0, '1f468-1f3fb-200d-1f9bd':0, '1f468-1f3fc-200d-1f9bd':0, '1f468-1f3fd-200d-1f9bd':0, '1f468-1f3fe-200d-1f9bd':0, '1f468-1f3ff-200d-1f9bd':0, '1f468-1f3fb-200d-2695':0, '1f468-1f3fc-200d-2695':0, '1f468-1f3fd-200d-2695':0, '1f468-1f3fe-200d-2695':0, '1f468-1f3ff-200d-2695':0, '1f468-1f3fb-200d-2696':0, '1f468-1f3fc-200d-2696':0, '1f468-1f3fd-200d-2696':0, '1f468-1f3fe-200d-2696':0, '1f468-1f3ff-200d-2696':0, '1f468-1f3fb-200d-2708':0, '1f468-1f3fc-200d-2708':0, '1f468-1f3fd-200d-2708':0, '1f468-1f3fe-200d-2708':0, '1f468-1f3ff-200d-2708':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fb':0, '1f468-1f3fc':0, '1f468-1f3fd':0, '1f468-1f3fe':0, '1f468-1f3ff':0, '1f469-1f3fb-200d-1f33e':0, '1f469-1f3fc-200d-1f33e':0, '1f469-1f3fd-200d-1f33e':0, '1f469-1f3fe-200d-1f33e':0, '1f469-1f3ff-200d-1f33e':0, '1f469-1f3fb-200d-1f373':0, '1f469-1f3fc-200d-1f373':0, '1f469-1f3fd-200d-1f373':0, '1f469-1f3fe-200d-1f373':0, '1f469-1f3ff-200d-1f373':0, '1f469-1f3fb-200d-1f37c':0, '1f469-1f3fc-200d-1f37c':0, '1f469-1f3fd-200d-1f37c':0, '1f469-1f3fe-200d-1f37c':0, '1f469-1f3ff-200d-1f37c':0, '1f469-1f3fb-200d-1f393':0, '1f469-1f3fc-200d-1f393':0, '1f469-1f3fd-200d-1f393':0, '1f469-1f3fe-200d-1f393':0, '1f469-1f3ff-200d-1f393':0, '1f469-1f3fb-200d-1f3a4':0, '1f469-1f3fc-200d-1f3a4':0, '1f469-1f3fd-200d-1f3a4':0, '1f469-1f3fe-200d-1f3a4':0, '1f469-1f3ff-200d-1f3a4':0, '1f469-1f3fb-200d-1f3a8':0, '1f469-1f3fc-200d-1f3a8':0, '1f469-1f3fd-200d-1f3a8':0, '1f469-1f3fe-200d-1f3a8':0, '1f469-1f3ff-200d-1f3a8':0, '1f469-1f3fb-200d-1f3eb':0, '1f469-1f3fc-200d-1f3eb':0, '1f469-1f3fd-200d-1f3eb':0, '1f469-1f3fe-200d-1f3eb':0, '1f469-1f3ff-200d-1f3eb':0, '1f469-1f3fb-200d-1f3ed':0, '1f469-1f3fc-200d-1f3ed':0, '1f469-1f3fd-200d-1f3ed':0, '1f469-1f3fe-200d-1f3ed':0, '1f469-1f3ff-200d-1f3ed':0, '1f469-1f3fb-200d-1f4bb':0, '1f469-1f3fc-200d-1f4bb':0, '1f469-1f3fd-200d-1f4bb':0, '1f469-1f3fe-200d-1f4bb':0, '1f469-1f3ff-200d-1f4bb':0, '1f469-1f3fb-200d-1f4bc':0, '1f469-1f3fc-200d-1f4bc':0, '1f469-1f3fd-200d-1f4bc':0, '1f469-1f3fe-200d-1f4bc':0, '1f469-1f3ff-200d-1f4bc':0, '1f469-1f3fb-200d-1f527':0, '1f469-1f3fc-200d-1f527':0, '1f469-1f3fd-200d-1f527':0, '1f469-1f3fe-200d-1f527':0, '1f469-1f3ff-200d-1f527':0, '1f469-1f3fb-200d-1f52c':0, '1f469-1f3fc-200d-1f52c':0, '1f469-1f3fd-200d-1f52c':0, '1f469-1f3fe-200d-1f52c':0, '1f469-1f3ff-200d-1f52c':0, '1f469-1f3fb-200d-1f680':0, '1f469-1f3fc-200d-1f680':0, '1f469-1f3fd-200d-1f680':0, '1f469-1f3fe-200d-1f680':0, '1f469-1f3ff-200d-1f680':0, '1f469-1f3fb-200d-1f692':0, '1f469-1f3fc-200d-1f692':0, '1f469-1f3fd-200d-1f692':0, '1f469-1f3fe-200d-1f692':0, '1f469-1f3ff-200d-1f692':0, '1f469-1f3fb-200d-1f9af':0, '1f469-1f3fc-200d-1f9af':0, '1f469-1f3fd-200d-1f9af':0, '1f469-1f3fe-200d-1f9af':0, '1f469-1f3ff-200d-1f9af':0, '1f469-1f3fb-200d-1f9b0':0, '1f469-1f3fc-200d-1f9b0':0, '1f469-1f3fd-200d-1f9b0':0, '1f469-1f3fe-200d-1f9b0':0, '1f469-1f3ff-200d-1f9b0':0, '1f469-1f3fb-200d-1f9b1':0, '1f469-1f3fc-200d-1f9b1':0, '1f469-1f3fd-200d-1f9b1':0, '1f469-1f3fe-200d-1f9b1':0, '1f469-1f3ff-200d-1f9b1':0, '1f469-1f3fb-200d-1f9b2':0, '1f469-1f3fc-200d-1f9b2':0, '1f469-1f3fd-200d-1f9b2':0, '1f469-1f3fe-200d-1f9b2':0, '1f469-1f3ff-200d-1f9b2':0, '1f469-1f3fb-200d-1f9b3':0, '1f469-1f3fc-200d-1f9b3':0, '1f469-1f3fd-200d-1f9b3':0, '1f469-1f3fe-200d-1f9b3':0, '1f469-1f3ff-200d-1f9b3':0, '1f469-1f3fb-200d-1f9bc':0, '1f469-1f3fc-200d-1f9bc':0, '1f469-1f3fd-200d-1f9bc':0, '1f469-1f3fe-200d-1f9bc':0, '1f469-1f3ff-200d-1f9bc':0, '1f469-1f3fb-200d-1f9bd':0, '1f469-1f3fc-200d-1f9bd':0, '1f469-1f3fd-200d-1f9bd':0, '1f469-1f3fe-200d-1f9bd':0, '1f469-1f3ff-200d-1f9bd':0, '1f469-1f3fb-200d-2695':0, '1f469-1f3fc-200d-2695':0, '1f469-1f3fd-200d-2695':0, '1f469-1f3fe-200d-2695':0, '1f469-1f3ff-200d-2695':0, '1f469-1f3fb-200d-2696':0, '1f469-1f3fc-200d-2696':0, '1f469-1f3fd-200d-2696':0, '1f469-1f3fe-200d-2696':0, '1f469-1f3ff-200d-2696':0, '1f469-1f3fb-200d-2708':0, '1f469-1f3fc-200d-2708':0, '1f469-1f3fd-200d-2708':0, '1f469-1f3fe-200d-2708':0, '1f469-1f3ff-200d-2708':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fb':0, '1f469-1f3fc':0, '1f469-1f3fd':0, '1f469-1f3fe':0, '1f469-1f3ff':0, '1f46b-1f3fb':0, '1f46b-1f3fc':0, '1f46b-1f3fd':0, '1f46b-1f3fe':0, '1f46b-1f3ff':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe':0, '1f46c-1f3fb':0, '1f46c-1f3fc':0, '1f46c-1f3fd':0, '1f46c-1f3fe':0, '1f46c-1f3ff':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe':0, '1f46d-1f3fb':0, '1f46d-1f3fc':0, '1f46d-1f3fd':0, '1f46d-1f3fe':0, '1f46d-1f3ff':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe':0, '1f46e-1f3fb-200d-2640':0, '1f46e-1f3fc-200d-2640':0, '1f46e-1f3fd-200d-2640':0, '1f46e-1f3fe-200d-2640':0, '1f46e-1f3ff-200d-2640':0, '1f46e-1f3fb-200d-2642':0, '1f46e-1f3fc-200d-2642':0, '1f46e-1f3fd-200d-2642':0, '1f46e-1f3fe-200d-2642':0, '1f46e-1f3ff-200d-2642':0, '1f46e-1f3fb':0, '1f46e-1f3fc':0, '1f46e-1f3fd':0, '1f46e-1f3fe':0, '1f46e-1f3ff':0, '1f470-1f3fb-200d-2640':0, '1f470-1f3fc-200d-2640':0, '1f470-1f3fd-200d-2640':0, '1f470-1f3fe-200d-2640':0, '1f470-1f3ff-200d-2640':0, '1f470-1f3fb-200d-2642':0, '1f470-1f3fc-200d-2642':0, '1f470-1f3fd-200d-2642':0, '1f470-1f3fe-200d-2642':0, '1f470-1f3ff-200d-2642':0, '1f470-1f3fb':0, '1f470-1f3fc':0, '1f470-1f3fd':0, '1f470-1f3fe':0, '1f470-1f3ff':0, '1f471-1f3fb-200d-2640':0, '1f471-1f3fc-200d-2640':0, '1f471-1f3fd-200d-2640':0, '1f471-1f3fe-200d-2640':0, '1f471-1f3ff-200d-2640':0, '1f471-1f3fb-200d-2642':0, '1f471-1f3fc-200d-2642':0, '1f471-1f3fd-200d-2642':0, '1f471-1f3fe-200d-2642':0, '1f471-1f3ff-200d-2642':0, '1f471-1f3fb':0, '1f471-1f3fc':0, '1f471-1f3fd':0, '1f471-1f3fe':0, '1f471-1f3ff':0, '1f472-1f3fb':0, '1f472-1f3fc':0, '1f472-1f3fd':0, '1f472-1f3fe':0, '1f472-1f3ff':0, '1f473-1f3fb-200d-2640':0, '1f473-1f3fc-200d-2640':0, '1f473-1f3fd-200d-2640':0, '1f473-1f3fe-200d-2640':0, '1f473-1f3ff-200d-2640':0, '1f473-1f3fb-200d-2642':0, '1f473-1f3fc-200d-2642':0, '1f473-1f3fd-200d-2642':0, '1f473-1f3fe-200d-2642':0, '1f473-1f3ff-200d-2642':0, '1f473-1f3fb':0, '1f473-1f3fc':0, '1f473-1f3fd':0, '1f473-1f3fe':0, '1f473-1f3ff':0, '1f474-1f3fb':0, '1f474-1f3fc':0, '1f474-1f3fd':0, '1f474-1f3fe':0, '1f474-1f3ff':0, '1f475-1f3fb':0, '1f475-1f3fc':0, '1f475-1f3fd':0, '1f475-1f3fe':0, '1f475-1f3ff':0, '1f476-1f3fb':0, '1f476-1f3fc':0, '1f476-1f3fd':0, '1f476-1f3fe':0, '1f476-1f3ff':0, '1f477-1f3fb-200d-2640':0, '1f477-1f3fc-200d-2640':0, '1f477-1f3fd-200d-2640':0, '1f477-1f3fe-200d-2640':0, '1f477-1f3ff-200d-2640':0, '1f477-1f3fb-200d-2642':0, '1f477-1f3fc-200d-2642':0, '1f477-1f3fd-200d-2642':0, '1f477-1f3fe-200d-2642':0, '1f477-1f3ff-200d-2642':0, '1f477-1f3fb':0, '1f477-1f3fc':0, '1f477-1f3fd':0, '1f477-1f3fe':0, '1f477-1f3ff':0, '1f478-1f3fb':0, '1f478-1f3fc':0, '1f478-1f3fd':0, '1f478-1f3fe':0, '1f478-1f3ff':0, '1f47c-1f3fb':0, '1f47c-1f3fc':0, '1f47c-1f3fd':0, '1f47c-1f3fe':0, '1f47c-1f3ff':0, '1f481-1f3fb-200d-2640':0, '1f481-1f3fc-200d-2640':0, '1f481-1f3fd-200d-2640':0, '1f481-1f3fe-200d-2640':0, '1f481-1f3ff-200d-2640':0, '1f481-1f3fb-200d-2642':0, '1f481-1f3fc-200d-2642':0, '1f481-1f3fd-200d-2642':0, '1f481-1f3fe-200d-2642':0, '1f481-1f3ff-200d-2642':0, '1f481-1f3fb':0, '1f481-1f3fc':0, '1f481-1f3fd':0, '1f481-1f3fe':0, '1f481-1f3ff':0, '1f482-1f3fb-200d-2640':0, '1f482-1f3fc-200d-2640':0, '1f482-1f3fd-200d-2640':0, '1f482-1f3fe-200d-2640':0, '1f482-1f3ff-200d-2640':0, '1f482-1f3fb-200d-2642':0, '1f482-1f3fc-200d-2642':0, '1f482-1f3fd-200d-2642':0, '1f482-1f3fe-200d-2642':0, '1f482-1f3ff-200d-2642':0, '1f482-1f3fb':0, '1f482-1f3fc':0, '1f482-1f3fd':0, '1f482-1f3fe':0, '1f482-1f3ff':0, '1f483-1f3fb':0, '1f483-1f3fc':0, '1f483-1f3fd':0, '1f483-1f3fe':0, '1f483-1f3ff':0, '1f485-1f3fb':0, '1f485-1f3fc':0, '1f485-1f3fd':0, '1f485-1f3fe':0, '1f485-1f3ff':0, '1f486-1f3fb-200d-2640':0, '1f486-1f3fc-200d-2640':0, '1f486-1f3fd-200d-2640':0, '1f486-1f3fe-200d-2640':0, '1f486-1f3ff-200d-2640':0, '1f486-1f3fb-200d-2642':0, '1f486-1f3fc-200d-2642':0, '1f486-1f3fd-200d-2642':0, '1f486-1f3fe-200d-2642':0, '1f486-1f3ff-200d-2642':0, '1f486-1f3fb':0, '1f486-1f3fc':0, '1f486-1f3fd':0, '1f486-1f3fe':0, '1f486-1f3ff':0, '1f487-1f3fb-200d-2640':0, '1f487-1f3fc-200d-2640':0, '1f487-1f3fd-200d-2640':0, '1f487-1f3fe-200d-2640':0, '1f487-1f3ff-200d-2640':0, '1f487-1f3fb-200d-2642':0, '1f487-1f3fc-200d-2642':0, '1f487-1f3fd-200d-2642':0, '1f487-1f3fe-200d-2642':0, '1f487-1f3ff-200d-2642':0, '1f487-1f3fb':0, '1f487-1f3fc':0, '1f487-1f3fd':0, '1f487-1f3fe':0, '1f487-1f3ff':0, '1f48f-1f3fb':0, '1f48f-1f3fc':0, '1f48f-1f3fd':0, '1f48f-1f3fe':0, '1f48f-1f3ff':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f491-1f3fb':0, '1f491-1f3fc':0, '1f491-1f3fd':0, '1f491-1f3fe':0, '1f491-1f3ff':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fe':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fe':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fe':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fe':0, '1f4aa-1f3fb':0, '1f4aa-1f3fc':0, '1f4aa-1f3fd':0, '1f4aa-1f3fe':0, '1f4aa-1f3ff':0, '1f574-1f3fb':0, '1f574-1f3fc':0, '1f574-1f3fd':0, '1f574-1f3fe':0, '1f574-1f3ff':0, '1f575-1f3fb-200d-2640':0, '1f575-1f3fc-200d-2640':0, '1f575-1f3fd-200d-2640':0, '1f575-1f3fe-200d-2640':0, '1f575-1f3ff-200d-2640':0, '1f575-1f3fb-200d-2642':0, '1f575-1f3fc-200d-2642':0, '1f575-1f3fd-200d-2642':0, '1f575-1f3fe-200d-2642':0, '1f575-1f3ff-200d-2642':0, '1f575-1f3fb':0, '1f575-1f3fc':0, '1f575-1f3fd':0, '1f575-1f3fe':0, '1f575-1f3ff':0, '1f57a-1f3fb':0, '1f57a-1f3fc':0, '1f57a-1f3fd':0, '1f57a-1f3fe':0, '1f57a-1f3ff':0, '1f590-1f3fb':0, '1f590-1f3fc':0, '1f590-1f3fd':0, '1f590-1f3fe':0, '1f590-1f3ff':0, '1f595-1f3fb':0, '1f595-1f3fc':0, '1f595-1f3fd':0, '1f595-1f3fe':0, '1f595-1f3ff':0, '1f596-1f3fb':0, '1f596-1f3fc':0, '1f596-1f3fd':0, '1f596-1f3fe':0, '1f596-1f3ff':0, '1f645-1f3fb-200d-2640':0, '1f645-1f3fc-200d-2640':0, '1f645-1f3fd-200d-2640':0, '1f645-1f3fe-200d-2640':0, '1f645-1f3ff-200d-2640':0, '1f645-1f3fb-200d-2642':0, '1f645-1f3fc-200d-2642':0, '1f645-1f3fd-200d-2642':0, '1f645-1f3fe-200d-2642':0, '1f645-1f3ff-200d-2642':0, '1f645-1f3fb':0, '1f645-1f3fc':0, '1f645-1f3fd':0, '1f645-1f3fe':0, '1f645-1f3ff':0, '1f646-1f3fb-200d-2640':0, '1f646-1f3fc-200d-2640':0, '1f646-1f3fd-200d-2640':0, '1f646-1f3fe-200d-2640':0, '1f646-1f3ff-200d-2640':0, '1f646-1f3fb-200d-2642':0, '1f646-1f3fc-200d-2642':0, '1f646-1f3fd-200d-2642':0, '1f646-1f3fe-200d-2642':0, '1f646-1f3ff-200d-2642':0, '1f646-1f3fb':0, '1f646-1f3fc':0, '1f646-1f3fd':0, '1f646-1f3fe':0, '1f646-1f3ff':0, '1f647-1f3fb-200d-2640':0, '1f647-1f3fc-200d-2640':0, '1f647-1f3fd-200d-2640':0, '1f647-1f3fe-200d-2640':0, '1f647-1f3ff-200d-2640':0, '1f647-1f3fb-200d-2642':0, '1f647-1f3fc-200d-2642':0, '1f647-1f3fd-200d-2642':0, '1f647-1f3fe-200d-2642':0, '1f647-1f3ff-200d-2642':0, '1f647-1f3fb':0, '1f647-1f3fc':0, '1f647-1f3fd':0, '1f647-1f3fe':0, '1f647-1f3ff':0, '1f64b-1f3fb-200d-2640':0, '1f64b-1f3fc-200d-2640':0, '1f64b-1f3fd-200d-2640':0, '1f64b-1f3fe-200d-2640':0, '1f64b-1f3ff-200d-2640':0, '1f64b-1f3fb-200d-2642':0, '1f64b-1f3fc-200d-2642':0, '1f64b-1f3fd-200d-2642':0, '1f64b-1f3fe-200d-2642':0, '1f64b-1f3ff-200d-2642':0, '1f64b-1f3fb':0, '1f64b-1f3fc':0, '1f64b-1f3fd':0, '1f64b-1f3fe':0, '1f64b-1f3ff':0, '1f64c-1f3fb':0, '1f64c-1f3fc':0, '1f64c-1f3fd':0, '1f64c-1f3fe':0, '1f64c-1f3ff':0, '1f64d-1f3fb-200d-2640':0, '1f64d-1f3fc-200d-2640':0, '1f64d-1f3fd-200d-2640':0, '1f64d-1f3fe-200d-2640':0, '1f64d-1f3ff-200d-2640':0, '1f64d-1f3fb-200d-2642':0, '1f64d-1f3fc-200d-2642':0, '1f64d-1f3fd-200d-2642':0, '1f64d-1f3fe-200d-2642':0, '1f64d-1f3ff-200d-2642':0, '1f64d-1f3fb':0, '1f64d-1f3fc':0, '1f64d-1f3fd':0, '1f64d-1f3fe':0, '1f64d-1f3ff':0, '1f64e-1f3fb-200d-2640':0, '1f64e-1f3fc-200d-2640':0, '1f64e-1f3fd-200d-2640':0, '1f64e-1f3fe-200d-2640':0, '1f64e-1f3ff-200d-2640':0, '1f64e-1f3fb-200d-2642':0, '1f64e-1f3fc-200d-2642':0, '1f64e-1f3fd-200d-2642':0, '1f64e-1f3fe-200d-2642':0, '1f64e-1f3ff-200d-2642':0, '1f64e-1f3fb':0, '1f64e-1f3fc':0, '1f64e-1f3fd':0, '1f64e-1f3fe':0, '1f64e-1f3ff':0, '1f64f-1f3fb':0, '1f64f-1f3fc':0, '1f64f-1f3fd':0, '1f64f-1f3fe':0, '1f64f-1f3ff':0, '1f6a3-1f3fb-200d-2640':0, '1f6a3-1f3fc-200d-2640':0, '1f6a3-1f3fd-200d-2640':0, '1f6a3-1f3fe-200d-2640':0, '1f6a3-1f3ff-200d-2640':0, '1f6a3-1f3fb-200d-2642':0, '1f6a3-1f3fc-200d-2642':0, '1f6a3-1f3fd-200d-2642':0, '1f6a3-1f3fe-200d-2642':0, '1f6a3-1f3ff-200d-2642':0, '1f6a3-1f3fb':0, '1f6a3-1f3fc':0, '1f6a3-1f3fd':0, '1f6a3-1f3fe':0, '1f6a3-1f3ff':0, '1f6b4-1f3fb-200d-2640':0, '1f6b4-1f3fc-200d-2640':0, '1f6b4-1f3fd-200d-2640':0, '1f6b4-1f3fe-200d-2640':0, '1f6b4-1f3ff-200d-2640':0, '1f6b4-1f3fb-200d-2642':0, '1f6b4-1f3fc-200d-2642':0, '1f6b4-1f3fd-200d-2642':0, '1f6b4-1f3fe-200d-2642':0, '1f6b4-1f3ff-200d-2642':0, '1f6b4-1f3fb':0, '1f6b4-1f3fc':0, '1f6b4-1f3fd':0, '1f6b4-1f3fe':0, '1f6b4-1f3ff':0, '1f6b5-1f3fb-200d-2640':0, '1f6b5-1f3fc-200d-2640':0, '1f6b5-1f3fd-200d-2640':0, '1f6b5-1f3fe-200d-2640':0, '1f6b5-1f3ff-200d-2640':0, '1f6b5-1f3fb-200d-2642':0, '1f6b5-1f3fc-200d-2642':0, '1f6b5-1f3fd-200d-2642':0, '1f6b5-1f3fe-200d-2642':0, '1f6b5-1f3ff-200d-2642':0, '1f6b5-1f3fb':0, '1f6b5-1f3fc':0, '1f6b5-1f3fd':0, '1f6b5-1f3fe':0, '1f6b5-1f3ff':0, '1f6b6-1f3fb-200d-2640':0, '1f6b6-1f3fc-200d-2640':0, '1f6b6-1f3fd-200d-2640':0, '1f6b6-1f3fe-200d-2640':0, '1f6b6-1f3ff-200d-2640':0, '1f6b6-1f3fb-200d-2642':0, '1f6b6-1f3fc-200d-2642':0, '1f6b6-1f3fd-200d-2642':0, '1f6b6-1f3fe-200d-2642':0, '1f6b6-1f3ff-200d-2642':0, '1f6b6-1f3fb':0, '1f6b6-1f3fc':0, '1f6b6-1f3fd':0, '1f6b6-1f3fe':0, '1f6b6-1f3ff':0, '1f6c0-1f3fb':0, '1f6c0-1f3fc':0, '1f6c0-1f3fd':0, '1f6c0-1f3fe':0, '1f6c0-1f3ff':0, '1f6cc-1f3fb':0, '1f6cc-1f3fc':0, '1f6cc-1f3fd':0, '1f6cc-1f3fe':0, '1f6cc-1f3ff':0, '1f90c-1f3fb':0, '1f90c-1f3fc':0, '1f90c-1f3fd':0, '1f90c-1f3fe':0, '1f90c-1f3ff':0, '1f90f-1f3fb':0, '1f90f-1f3fc':0, '1f90f-1f3fd':0, '1f90f-1f3fe':0, '1f90f-1f3ff':0, '1f918-1f3fb':0, '1f918-1f3fc':0, '1f918-1f3fd':0, '1f918-1f3fe':0, '1f918-1f3ff':0, '1f919-1f3fb':0, '1f919-1f3fc':0, '1f919-1f3fd':0, '1f919-1f3fe':0, '1f919-1f3ff':0, '1f91a-1f3fb':0, '1f91a-1f3fc':0, '1f91a-1f3fd':0, '1f91a-1f3fe':0, '1f91a-1f3ff':0, '1f91b-1f3fb':0, '1f91b-1f3fc':0, '1f91b-1f3fd':0, '1f91b-1f3fe':0, '1f91b-1f3ff':0, '1f91c-1f3fb':0, '1f91c-1f3fc':0, '1f91c-1f3fd':0, '1f91c-1f3fe':0, '1f91c-1f3ff':0, '1f91d-1f3fb':0, '1f91d-1f3fc':0, '1f91d-1f3fd':0, '1f91d-1f3fe':0, '1f91d-1f3ff':0, '1f91e-1f3fb':0, '1f91e-1f3fc':0, '1f91e-1f3fd':0, '1f91e-1f3fe':0, '1f91e-1f3ff':0, '1f91f-1f3fb':0, '1f91f-1f3fc':0, '1f91f-1f3fd':0, '1f91f-1f3fe':0, '1f91f-1f3ff':0, '1f926-1f3fb-200d-2640':0, '1f926-1f3fc-200d-2640':0, '1f926-1f3fd-200d-2640':0, '1f926-1f3fe-200d-2640':0, '1f926-1f3ff-200d-2640':0, '1f926-1f3fb-200d-2642':0, '1f926-1f3fc-200d-2642':0, '1f926-1f3fd-200d-2642':0, '1f926-1f3fe-200d-2642':0, '1f926-1f3ff-200d-2642':0, '1f926-1f3fb':0, '1f926-1f3fc':0, '1f926-1f3fd':0, '1f926-1f3fe':0, '1f926-1f3ff':0, '1f930-1f3fb':0, '1f930-1f3fc':0, '1f930-1f3fd':0, '1f930-1f3fe':0, '1f930-1f3ff':0, '1f931-1f3fb':0, '1f931-1f3fc':0, '1f931-1f3fd':0, '1f931-1f3fe':0, '1f931-1f3ff':0, '1f932-1f3fb':0, '1f932-1f3fc':0, '1f932-1f3fd':0, '1f932-1f3fe':0, '1f932-1f3ff':0, '1f933-1f3fb':0, '1f933-1f3fc':0, '1f933-1f3fd':0, '1f933-1f3fe':0, '1f933-1f3ff':0, '1f934-1f3fb':0, '1f934-1f3fc':0, '1f934-1f3fd':0, '1f934-1f3fe':0, '1f934-1f3ff':0, '1f935-1f3fb-200d-2640':0, '1f935-1f3fc-200d-2640':0, '1f935-1f3fd-200d-2640':0, '1f935-1f3fe-200d-2640':0, '1f935-1f3ff-200d-2640':0, '1f935-1f3fb-200d-2642':0, '1f935-1f3fc-200d-2642':0, '1f935-1f3fd-200d-2642':0, '1f935-1f3fe-200d-2642':0, '1f935-1f3ff-200d-2642':0, '1f935-1f3fb':0, '1f935-1f3fc':0, '1f935-1f3fd':0, '1f935-1f3fe':0, '1f935-1f3ff':0, '1f936-1f3fb':0, '1f936-1f3fc':0, '1f936-1f3fd':0, '1f936-1f3fe':0, '1f936-1f3ff':0, '1f937-1f3fb-200d-2640':0, '1f937-1f3fc-200d-2640':0, '1f937-1f3fd-200d-2640':0, '1f937-1f3fe-200d-2640':0, '1f937-1f3ff-200d-2640':0, '1f937-1f3fb-200d-2642':0, '1f937-1f3fc-200d-2642':0, '1f937-1f3fd-200d-2642':0, '1f937-1f3fe-200d-2642':0, '1f937-1f3ff-200d-2642':0, '1f937-1f3fb':0, '1f937-1f3fc':0, '1f937-1f3fd':0, '1f937-1f3fe':0, '1f937-1f3ff':0, '1f938-1f3fb-200d-2640':0, '1f938-1f3fc-200d-2640':0, '1f938-1f3fd-200d-2640':0, '1f938-1f3fe-200d-2640':0, '1f938-1f3ff-200d-2640':0, '1f938-1f3fb-200d-2642':0, '1f938-1f3fc-200d-2642':0, '1f938-1f3fd-200d-2642':0, '1f938-1f3fe-200d-2642':0, '1f938-1f3ff-200d-2642':0, '1f938-1f3fb':0, '1f938-1f3fc':0, '1f938-1f3fd':0, '1f938-1f3fe':0, '1f938-1f3ff':0, '1f939-1f3fb-200d-2640':0, '1f939-1f3fc-200d-2640':0, '1f939-1f3fd-200d-2640':0, '1f939-1f3fe-200d-2640':0, '1f939-1f3ff-200d-2640':0, '1f939-1f3fb-200d-2642':0, '1f939-1f3fc-200d-2642':0, '1f939-1f3fd-200d-2642':0, '1f939-1f3fe-200d-2642':0, '1f939-1f3ff-200d-2642':0, '1f939-1f3fb':0, '1f939-1f3fc':0, '1f939-1f3fd':0, '1f939-1f3fe':0, '1f939-1f3ff':0, '1f93d-1f3fb-200d-2640':0, '1f93d-1f3fc-200d-2640':0, '1f93d-1f3fd-200d-2640':0, '1f93d-1f3fe-200d-2640':0, '1f93d-1f3ff-200d-2640':0, '1f93d-1f3fb-200d-2642':0, '1f93d-1f3fc-200d-2642':0, '1f93d-1f3fd-200d-2642':0, '1f93d-1f3fe-200d-2642':0, '1f93d-1f3ff-200d-2642':0, '1f93d-1f3fb':0, '1f93d-1f3fc':0, '1f93d-1f3fd':0, '1f93d-1f3fe':0, '1f93d-1f3ff':0, '1f93e-1f3fb-200d-2640':0, '1f93e-1f3fc-200d-2640':0, '1f93e-1f3fd-200d-2640':0, '1f93e-1f3fe-200d-2640':0, '1f93e-1f3ff-200d-2640':0, '1f93e-1f3fb-200d-2642':0, '1f93e-1f3fc-200d-2642':0, '1f93e-1f3fd-200d-2642':0, '1f93e-1f3fe-200d-2642':0, '1f93e-1f3ff-200d-2642':0, '1f93e-1f3fb':0, '1f93e-1f3fc':0, '1f93e-1f3fd':0, '1f93e-1f3fe':0, '1f93e-1f3ff':0, '1f977-1f3fb':0, '1f977-1f3fc':0, '1f977-1f3fd':0, '1f977-1f3fe':0, '1f977-1f3ff':0, '1f9b5-1f3fb':0, '1f9b5-1f3fc':0, '1f9b5-1f3fd':0, '1f9b5-1f3fe':0, '1f9b5-1f3ff':0, '1f9b6-1f3fb':0, '1f9b6-1f3fc':0, '1f9b6-1f3fd':0, '1f9b6-1f3fe':0, '1f9b6-1f3ff':0, '1f9b8-1f3fb-200d-2640':0, '1f9b8-1f3fc-200d-2640':0, '1f9b8-1f3fd-200d-2640':0, '1f9b8-1f3fe-200d-2640':0, '1f9b8-1f3ff-200d-2640':0, '1f9b8-1f3fb-200d-2642':0, '1f9b8-1f3fc-200d-2642':0, '1f9b8-1f3fd-200d-2642':0, '1f9b8-1f3fe-200d-2642':0, '1f9b8-1f3ff-200d-2642':0, '1f9b8-1f3fb':0, '1f9b8-1f3fc':0, '1f9b8-1f3fd':0, '1f9b8-1f3fe':0, '1f9b8-1f3ff':0, '1f9b9-1f3fb-200d-2640':0, '1f9b9-1f3fc-200d-2640':0, '1f9b9-1f3fd-200d-2640':0, '1f9b9-1f3fe-200d-2640':0, '1f9b9-1f3ff-200d-2640':0, '1f9b9-1f3fb-200d-2642':0, '1f9b9-1f3fc-200d-2642':0, '1f9b9-1f3fd-200d-2642':0, '1f9b9-1f3fe-200d-2642':0, '1f9b9-1f3ff-200d-2642':0, '1f9b9-1f3fb':0, '1f9b9-1f3fc':0, '1f9b9-1f3fd':0, '1f9b9-1f3fe':0, '1f9b9-1f3ff':0, '1f9bb-1f3fb':0, '1f9bb-1f3fc':0, '1f9bb-1f3fd':0, '1f9bb-1f3fe':0, '1f9bb-1f3ff':0, '1f9cd-1f3fb-200d-2640':0, '1f9cd-1f3fc-200d-2640':0, '1f9cd-1f3fd-200d-2640':0, '1f9cd-1f3fe-200d-2640':0, '1f9cd-1f3ff-200d-2640':0, '1f9cd-1f3fb-200d-2642':0, '1f9cd-1f3fc-200d-2642':0, '1f9cd-1f3fd-200d-2642':0, '1f9cd-1f3fe-200d-2642':0, '1f9cd-1f3ff-200d-2642':0, '1f9cd-1f3fb':0, '1f9cd-1f3fc':0, '1f9cd-1f3fd':0, '1f9cd-1f3fe':0, '1f9cd-1f3ff':0, '1f9ce-1f3fb-200d-2640':0, '1f9ce-1f3fc-200d-2640':0, '1f9ce-1f3fd-200d-2640':0, '1f9ce-1f3fe-200d-2640':0, '1f9ce-1f3ff-200d-2640':0, '1f9ce-1f3fb-200d-2642':0, '1f9ce-1f3fc-200d-2642':0, '1f9ce-1f3fd-200d-2642':0, '1f9ce-1f3fe-200d-2642':0, '1f9ce-1f3ff-200d-2642':0, '1f9ce-1f3fb':0, '1f9ce-1f3fc':0, '1f9ce-1f3fd':0, '1f9ce-1f3fe':0, '1f9ce-1f3ff':0, '1f9cf-1f3fb-200d-2640':0, '1f9cf-1f3fc-200d-2640':0, '1f9cf-1f3fd-200d-2640':0, '1f9cf-1f3fe-200d-2640':0, '1f9cf-1f3ff-200d-2640':0, '1f9cf-1f3fb-200d-2642':0, '1f9cf-1f3fc-200d-2642':0, '1f9cf-1f3fd-200d-2642':0, '1f9cf-1f3fe-200d-2642':0, '1f9cf-1f3ff-200d-2642':0, '1f9cf-1f3fb':0, '1f9cf-1f3fc':0, '1f9cf-1f3fd':0, '1f9cf-1f3fe':0, '1f9cf-1f3ff':0, '1f9d1-1f3fb-200d-1f33e':0, '1f9d1-1f3fc-200d-1f33e':0, '1f9d1-1f3fd-200d-1f33e':0, '1f9d1-1f3fe-200d-1f33e':0, '1f9d1-1f3ff-200d-1f33e':0, '1f9d1-1f3fb-200d-1f373':0, '1f9d1-1f3fc-200d-1f373':0, '1f9d1-1f3fd-200d-1f373':0, '1f9d1-1f3fe-200d-1f373':0, '1f9d1-1f3ff-200d-1f373':0, '1f9d1-1f3fb-200d-1f37c':0, '1f9d1-1f3fc-200d-1f37c':0, '1f9d1-1f3fd-200d-1f37c':0, '1f9d1-1f3fe-200d-1f37c':0, '1f9d1-1f3ff-200d-1f37c':0, '1f9d1-1f3fb-200d-1f384':0, '1f9d1-1f3fc-200d-1f384':0, '1f9d1-1f3fd-200d-1f384':0, '1f9d1-1f3fe-200d-1f384':0, '1f9d1-1f3ff-200d-1f384':0, '1f9d1-1f3fb-200d-1f393':0, '1f9d1-1f3fc-200d-1f393':0, '1f9d1-1f3fd-200d-1f393':0, '1f9d1-1f3fe-200d-1f393':0, '1f9d1-1f3ff-200d-1f393':0, '1f9d1-1f3fb-200d-1f3a4':0, '1f9d1-1f3fc-200d-1f3a4':0, '1f9d1-1f3fd-200d-1f3a4':0, '1f9d1-1f3fe-200d-1f3a4':0, '1f9d1-1f3ff-200d-1f3a4':0, '1f9d1-1f3fb-200d-1f3a8':0, '1f9d1-1f3fc-200d-1f3a8':0, '1f9d1-1f3fd-200d-1f3a8':0, '1f9d1-1f3fe-200d-1f3a8':0, '1f9d1-1f3ff-200d-1f3a8':0, '1f9d1-1f3fb-200d-1f3eb':0, '1f9d1-1f3fc-200d-1f3eb':0, '1f9d1-1f3fd-200d-1f3eb':0, '1f9d1-1f3fe-200d-1f3eb':0, '1f9d1-1f3ff-200d-1f3eb':0, '1f9d1-1f3fb-200d-1f3ed':0, '1f9d1-1f3fc-200d-1f3ed':0, '1f9d1-1f3fd-200d-1f3ed':0, '1f9d1-1f3fe-200d-1f3ed':0, '1f9d1-1f3ff-200d-1f3ed':0, '1f9d1-1f3fb-200d-1f4bb':0, '1f9d1-1f3fc-200d-1f4bb':0, '1f9d1-1f3fd-200d-1f4bb':0, '1f9d1-1f3fe-200d-1f4bb':0, '1f9d1-1f3ff-200d-1f4bb':0, '1f9d1-1f3fb-200d-1f4bc':0, '1f9d1-1f3fc-200d-1f4bc':0, '1f9d1-1f3fd-200d-1f4bc':0, '1f9d1-1f3fe-200d-1f4bc':0, '1f9d1-1f3ff-200d-1f4bc':0, '1f9d1-1f3fb-200d-1f527':0, '1f9d1-1f3fc-200d-1f527':0, '1f9d1-1f3fd-200d-1f527':0, '1f9d1-1f3fe-200d-1f527':0, '1f9d1-1f3ff-200d-1f527':0, '1f9d1-1f3fb-200d-1f52c':0, '1f9d1-1f3fc-200d-1f52c':0, '1f9d1-1f3fd-200d-1f52c':0, '1f9d1-1f3fe-200d-1f52c':0, '1f9d1-1f3ff-200d-1f52c':0, '1f9d1-1f3fb-200d-1f680':0, '1f9d1-1f3fc-200d-1f680':0, '1f9d1-1f3fd-200d-1f680':0, '1f9d1-1f3fe-200d-1f680':0, '1f9d1-1f3ff-200d-1f680':0, '1f9d1-1f3fb-200d-1f692':0, '1f9d1-1f3fc-200d-1f692':0, '1f9d1-1f3fd-200d-1f692':0, '1f9d1-1f3fe-200d-1f692':0, '1f9d1-1f3ff-200d-1f692':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fb-200d-1f9af':0, '1f9d1-1f3fc-200d-1f9af':0, '1f9d1-1f3fd-200d-1f9af':0, '1f9d1-1f3fe-200d-1f9af':0, '1f9d1-1f3ff-200d-1f9af':0, '1f9d1-1f3fb-200d-1f9b0':0, '1f9d1-1f3fc-200d-1f9b0':0, '1f9d1-1f3fd-200d-1f9b0':0, '1f9d1-1f3fe-200d-1f9b0':0, '1f9d1-1f3ff-200d-1f9b0':0, '1f9d1-1f3fb-200d-1f9b1':0, '1f9d1-1f3fc-200d-1f9b1':0, '1f9d1-1f3fd-200d-1f9b1':0, '1f9d1-1f3fe-200d-1f9b1':0, '1f9d1-1f3ff-200d-1f9b1':0, '1f9d1-1f3fb-200d-1f9b2':0, '1f9d1-1f3fc-200d-1f9b2':0, '1f9d1-1f3fd-200d-1f9b2':0, '1f9d1-1f3fe-200d-1f9b2':0, '1f9d1-1f3ff-200d-1f9b2':0, '1f9d1-1f3fb-200d-1f9b3':0, '1f9d1-1f3fc-200d-1f9b3':0, '1f9d1-1f3fd-200d-1f9b3':0, '1f9d1-1f3fe-200d-1f9b3':0, '1f9d1-1f3ff-200d-1f9b3':0, '1f9d1-1f3fb-200d-1f9bc':0, '1f9d1-1f3fc-200d-1f9bc':0, '1f9d1-1f3fd-200d-1f9bc':0, '1f9d1-1f3fe-200d-1f9bc':0, '1f9d1-1f3ff-200d-1f9bc':0, '1f9d1-1f3fb-200d-1f9bd':0, '1f9d1-1f3fc-200d-1f9bd':0, '1f9d1-1f3fd-200d-1f9bd':0, '1f9d1-1f3fe-200d-1f9bd':0, '1f9d1-1f3ff-200d-1f9bd':0, '1f9d1-1f3fb-200d-2695':0, '1f9d1-1f3fc-200d-2695':0, '1f9d1-1f3fd-200d-2695':0, '1f9d1-1f3fe-200d-2695':0, '1f9d1-1f3ff-200d-2695':0, '1f9d1-1f3fb-200d-2696':0, '1f9d1-1f3fc-200d-2696':0, '1f9d1-1f3fd-200d-2696':0, '1f9d1-1f3fe-200d-2696':0, '1f9d1-1f3ff-200d-2696':0, '1f9d1-1f3fb-200d-2708':0, '1f9d1-1f3fc-200d-2708':0, '1f9d1-1f3fd-200d-2708':0, '1f9d1-1f3fe-200d-2708':0, '1f9d1-1f3ff-200d-2708':0, '1f9d1-1f3fb':0, '1f9d1-1f3fc':0, '1f9d1-1f3fd':0, '1f9d1-1f3fe':0, '1f9d1-1f3ff':0, '1f9d2-1f3fb':0, '1f9d2-1f3fc':0, '1f9d2-1f3fd':0, '1f9d2-1f3fe':0, '1f9d2-1f3ff':0, '1f9d3-1f3fb':0, '1f9d3-1f3fc':0, '1f9d3-1f3fd':0, '1f9d3-1f3fe':0, '1f9d3-1f3ff':0, '1f9d4-1f3fb-200d-2640':0, '1f9d4-1f3fc-200d-2640':0, '1f9d4-1f3fd-200d-2640':0, '1f9d4-1f3fe-200d-2640':0, '1f9d4-1f3ff-200d-2640':0, '1f9d4-1f3fb-200d-2642':0, '1f9d4-1f3fc-200d-2642':0, '1f9d4-1f3fd-200d-2642':0, '1f9d4-1f3fe-200d-2642':0, '1f9d4-1f3ff-200d-2642':0, '1f9d4-1f3fb':0, '1f9d4-1f3fc':0, '1f9d4-1f3fd':0, '1f9d4-1f3fe':0, '1f9d4-1f3ff':0, '1f9d5-1f3fb':0, '1f9d5-1f3fc':0, '1f9d5-1f3fd':0, '1f9d5-1f3fe':0, '1f9d5-1f3ff':0, '1f9d6-1f3fb-200d-2640':0, '1f9d6-1f3fc-200d-2640':0, '1f9d6-1f3fd-200d-2640':0, '1f9d6-1f3fe-200d-2640':0, '1f9d6-1f3ff-200d-2640':0, '1f9d6-1f3fb-200d-2642':0, '1f9d6-1f3fc-200d-2642':0, '1f9d6-1f3fd-200d-2642':0, '1f9d6-1f3fe-200d-2642':0, '1f9d6-1f3ff-200d-2642':0, '1f9d6-1f3fb':0, '1f9d6-1f3fc':0, '1f9d6-1f3fd':0, '1f9d6-1f3fe':0, '1f9d6-1f3ff':0, '1f9d7-1f3fb-200d-2640':0, '1f9d7-1f3fc-200d-2640':0, '1f9d7-1f3fd-200d-2640':0, '1f9d7-1f3fe-200d-2640':0, '1f9d7-1f3ff-200d-2640':0, '1f9d7-1f3fb-200d-2642':0, '1f9d7-1f3fc-200d-2642':0, '1f9d7-1f3fd-200d-2642':0, '1f9d7-1f3fe-200d-2642':0, '1f9d7-1f3ff-200d-2642':0, '1f9d7-1f3fb':0, '1f9d7-1f3fc':0, '1f9d7-1f3fd':0, '1f9d7-1f3fe':0, '1f9d7-1f3ff':0, '1f9d8-1f3fb-200d-2640':0, '1f9d8-1f3fc-200d-2640':0, '1f9d8-1f3fd-200d-2640':0, '1f9d8-1f3fe-200d-2640':0, '1f9d8-1f3ff-200d-2640':0, '1f9d8-1f3fb-200d-2642':0, '1f9d8-1f3fc-200d-2642':0, '1f9d8-1f3fd-200d-2642':0, '1f9d8-1f3fe-200d-2642':0, '1f9d8-1f3ff-200d-2642':0, '1f9d8-1f3fb':0, '1f9d8-1f3fc':0, '1f9d8-1f3fd':0, '1f9d8-1f3fe':0, '1f9d8-1f3ff':0, '1f9d9-1f3fb-200d-2640':0, '1f9d9-1f3fc-200d-2640':0, '1f9d9-1f3fd-200d-2640':0, '1f9d9-1f3fe-200d-2640':0, '1f9d9-1f3ff-200d-2640':0, '1f9d9-1f3fb-200d-2642':0, '1f9d9-1f3fc-200d-2642':0, '1f9d9-1f3fd-200d-2642':0, '1f9d9-1f3fe-200d-2642':0, '1f9d9-1f3ff-200d-2642':0, '1f9d9-1f3fb':0, '1f9d9-1f3fc':0, '1f9d9-1f3fd':0, '1f9d9-1f3fe':0, '1f9d9-1f3ff':0, '1f9da-1f3fb-200d-2640':0, '1f9da-1f3fc-200d-2640':0, '1f9da-1f3fd-200d-2640':0, '1f9da-1f3fe-200d-2640':0, '1f9da-1f3ff-200d-2640':0, '1f9da-1f3fb-200d-2642':0, '1f9da-1f3fc-200d-2642':0, '1f9da-1f3fd-200d-2642':0, '1f9da-1f3fe-200d-2642':0, '1f9da-1f3ff-200d-2642':0, '1f9da-1f3fb':0, '1f9da-1f3fc':0, '1f9da-1f3fd':0, '1f9da-1f3fe':0, '1f9da-1f3ff':0, '1f9db-1f3fb-200d-2640':0, '1f9db-1f3fc-200d-2640':0, '1f9db-1f3fd-200d-2640':0, '1f9db-1f3fe-200d-2640':0, '1f9db-1f3ff-200d-2640':0, '1f9db-1f3fb-200d-2642':0, '1f9db-1f3fc-200d-2642':0, '1f9db-1f3fd-200d-2642':0, '1f9db-1f3fe-200d-2642':0, '1f9db-1f3ff-200d-2642':0, '1f9db-1f3fb':0, '1f9db-1f3fc':0, '1f9db-1f3fd':0, '1f9db-1f3fe':0, '1f9db-1f3ff':0, '1f9dc-1f3fb-200d-2640':0, '1f9dc-1f3fc-200d-2640':0, '1f9dc-1f3fd-200d-2640':0, '1f9dc-1f3fe-200d-2640':0, '1f9dc-1f3ff-200d-2640':0, '1f9dc-1f3fb-200d-2642':0, '1f9dc-1f3fc-200d-2642':0, '1f9dc-1f3fd-200d-2642':0, '1f9dc-1f3fe-200d-2642':0, '1f9dc-1f3ff-200d-2642':0, '1f9dc-1f3fb':0, '1f9dc-1f3fc':0, '1f9dc-1f3fd':0, '1f9dc-1f3fe':0, '1f9dc-1f3ff':0, '1f9dd-1f3fb-200d-2640':0, '1f9dd-1f3fc-200d-2640':0, '1f9dd-1f3fd-200d-2640':0, '1f9dd-1f3fe-200d-2640':0, '1f9dd-1f3ff-200d-2640':0, '1f9dd-1f3fb-200d-2642':0, '1f9dd-1f3fc-200d-2642':0, '1f9dd-1f3fd-200d-2642':0, '1f9dd-1f3fe-200d-2642':0, '1f9dd-1f3ff-200d-2642':0, '1f9dd-1f3fb':0, '1f9dd-1f3fc':0, '1f9dd-1f3fd':0, '1f9dd-1f3fe':0, '1f9dd-1f3ff':0, '261d-1f3fb':0, '261d-1f3fc':0, '261d-1f3fd':0, '261d-1f3fe':0, '261d-1f3ff':0, '26f9-1f3fb-200d-2640':0, '26f9-1f3fc-200d-2640':0, '26f9-1f3fd-200d-2640':0, '26f9-1f3fe-200d-2640':0, '26f9-1f3ff-200d-2640':0, '26f9-1f3fb-200d-2642':0, '26f9-1f3fc-200d-2642':0, '26f9-1f3fd-200d-2642':0, '26f9-1f3fe-200d-2642':0, '26f9-1f3ff-200d-2642':0, '26f9-1f3fb':0, '26f9-1f3fc':0, '26f9-1f3fd':0, '26f9-1f3fe':0, '26f9-1f3ff':0, '270a-1f3fb':0, '270a-1f3fc':0, '270a-1f3fd':0, '270a-1f3fe':0, '270a-1f3ff':0, '270b-1f3fb':0, '270b-1f3fc':0, '270b-1f3fd':0, '270b-1f3fe':0, '270b-1f3ff':0, '270c-1f3fb':0, '270c-1f3fc':0, '270c-1f3fd':0, '270c-1f3fe':0, '270c-1f3ff':0, '270d-1f3fb':0, '270d-1f3fc':0, '270d-1f3fd':0, '270d-1f3fe':0, '270d-1f3ff':0}};\r\n\r\nconst Emoji: {[emoji: string]: number} = EmojiVersions[''];\r\nfor(const version in EmojiVersions) {\r\n  if(version) {\r\n    Object.assign(Emoji, EmojiVersions[version as EMOJI_VERSION]);\r\n  }\r\n}\r\n\r\nexport default Emoji;\r\n\r\n/* Emoji[\"00a9-fe0f\"] = 6362;\r\nEmoji[\"00ae-fe0f\"] = 6363;\r\nEmoji[\"2122-fe0f\"] = 6364; */\r\n","// just for the future\r\nexport default function buildURLHash(str: string) {\r\n  return '#' + encodeURIComponent(str);\r\n}\r\n","export default function spoiler(text: string): string {\r\n  const chars = '⠁⠂⠄⠈⠐⠠⡀⢀⠃⠅⠆⠉⠊⠌⠑⠒⠔⠘⠡⠢⠤⠨⠰⡁⡂⡄⡈⡐⡠⢁⢂⢄⢈⢐⢠⣀⠇⠋⠍⠎⠓⠕⠖⠙⠚⠜⠣⠥⠦⠩⠪⠬⠱⠲⠴⠸⡃⡅⡆⡉⡊⡌⡑⡒⡔⡘⡡⡢⡤⡨⡰⢃⢅⢆⢉⢊⢌⢑⢒⢔⢘⢡⢢⢤⢨⢰⣁⣂⣄⣈⣐⣠⠏⠗⠛⠝⠞⠧⠫⠭⠮⠳⠵⠶⠹⠺⠼⡇⡋⡍⡎⡓⡕⡖⡙⡚⡜⡣⡥⡦⡩⡪⡬⡱⡲⡴⡸⢇⢋⢍⢎⢓⢕⢖⢙⢚⢜⢣⢥⢦⢩⢪⢬⢱⢲⢴⢸⣃⣅⣆⣉⣊⣌⣑⣒⣔⣘⣡⣢⣤⣨⣰⠟⠯⠷⠻⠽⠾⡏⡗⡛⡝⡞⡧⡫⡭⡮⡳⡵⡶⡹⡺⡼⢏⢗⢛⢝⢞⢧⢫⢭⢮⢳⢵⢶⢹⢺⢼⣇⣋⣍⣎⣓⣕⣖⣙⣚⣜⣣⣥⣦⣩⣪⣬⣱⣲⣴⣸⠿⡟⡯⡷⡻⡽⡾⢟⢯⢷⢻⢽⢾⣏⣗⣛⣝⣞⣧⣫⣭⣮⣳⣵⣶⣹⣺⣼⡿⢿⣟⣯⣷⣻⣽⣾⣿';\r\n  const charsLength = chars.length;\r\n\r\n  const out: string[] = [];\r\n  for(let i = 0; i < text.length; ++i) {\r\n    const char = text.charCodeAt(i);\r\n    out.push(chars[char % charsLength]);\r\n  }\r\n\r\n  return out.join('');\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {MessageEntity} from '../../layer';\r\nimport spoiler from './spoiler';\r\n\r\nexport default function encodeSpoiler(text: string, entity: MessageEntity.messageEntitySpoiler) {\r\n  const before = text.slice(0, entity.offset);\r\n  const spoilerBefore = text.slice(entity.offset, entity.offset + entity.length);\r\n  const spoilerAfter = spoiler(spoilerBefore)/*  '▚'.repeat(entity.length) */;\r\n  const after = text.slice(entity.offset + entity.length);\r\n  text = before + spoilerAfter + after;\r\n  return {text, entityText: spoilerAfter};\r\n};\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\n// From https://github.com/stephenmathieson/node-tlds/blob/master/index.js\r\nconst TLD = ['abogado', 'ac', 'academy', 'accountants', 'active', 'actor', 'ad', 'adult', 'ae', 'aero', 'af', 'ag', 'agency', 'ai', 'airforce', 'al', 'allfinanz', 'alsace', 'am', 'amsterdam', 'an', 'android', 'ao', 'apartments', 'aq', 'aquarelle', 'ar', 'archi', 'army', 'arpa', 'as', 'asia', 'associates', 'at', 'attorney', 'au', 'auction', 'audio', 'autos', 'aw', 'ax', 'axa', 'az', 'ba', 'band', 'bank', 'bar', 'barclaycard', 'barclays', 'bargains', 'bayern', 'bb', 'bd', 'be', 'beer', 'berlin', 'best', 'bf', 'bg', 'bh', 'bi', 'bid', 'bike', 'bingo', 'bio', 'biz', 'bj', 'black', 'blackfriday', 'bloomberg', 'blue', 'bm', 'bmw', 'bn', 'bnpparibas', 'bo', 'boo', 'boutique', 'br', 'brussels', 'bs', 'bt', 'budapest', 'build', 'builders', 'business', 'buzz', 'bv', 'bw', 'by', 'bz', 'bzh', 'ca', 'cab', 'cal', 'camera', 'camp', 'cancerresearch', 'canon', 'capetown', 'capital', 'caravan', 'cards', 'care', 'career', 'careers', 'cartier', 'casa', 'cash', 'cat', 'catering', 'cc', 'cd', 'center', 'ceo', 'cern', 'cf', 'cg', 'ch', 'channel', 'chat', 'cheap', 'christmas', 'chrome', 'church', 'ci', 'citic', 'city', 'ck', 'cl', 'claims', 'cleaning', 'click', 'clinic', 'clothing', 'club', 'cm', 'cn', 'co', 'coach', 'codes', 'coffee', 'college', 'cologne', 'com', 'community', 'company', 'computer', 'condos', 'construction', 'consulting', 'contractors', 'cooking', 'cool', 'coop', 'country', 'cr', 'credit', 'creditcard', 'cricket', 'crs', 'cruises', 'cu', 'cuisinella', 'cv', 'cw', 'cx', 'cy', 'cymru', 'cz', 'dabur', 'dad', 'dance', 'dating', 'day', 'dclk', 'de', 'deals', 'degree', 'delivery', 'democrat', 'dental', 'dentist', 'desi', 'design', 'dev', 'diamonds', 'diet', 'digital', 'direct', 'directory', 'discount', 'dj', 'dk', 'dm', 'dnp', 'do', 'docs', 'domains', 'doosan', 'durban', 'dvag', 'dz', 'eat', 'ec', 'edu', 'education', 'ee', 'eg', 'email', 'emerck', 'energy', 'engineer', 'engineering', 'enterprises', 'equipment', 'er', 'es', 'esq', 'estate', 'et', 'eu', 'eurovision', 'eus', 'events', 'everbank', 'exchange', 'expert', 'exposed', 'fail', 'farm', 'fashion', 'feedback', 'fi', 'finance', 'financial', 'firmdale', 'fish', 'fishing', 'fit', 'fitness', 'fj', 'fk', 'flights', 'florist', 'flowers', 'flsmidth', 'fly', 'fm', 'fo', 'foo', 'forsale', 'foundation', 'fr', 'frl', 'frogans', 'fund', 'furniture', 'futbol', 'ga', 'gal', 'gallery', 'garden', 'gb', 'gbiz', 'gd', 'ge', 'gent', 'gf', 'gg', 'ggee', 'gh', 'gi', 'gift', 'gifts', 'gives', 'gl', 'glass', 'gle', 'global', 'globo', 'gm', 'gmail', 'gmo', 'gmx', 'gn', 'goog', 'google', 'gop', 'gov', 'gp', 'gq', 'gr', 'graphics', 'gratis', 'green', 'gripe', 'gs', 'gt', 'gu', 'guide', 'guitars', 'guru', 'gw', 'gy', 'hamburg', 'hangout', 'haus', 'healthcare', 'help', 'here', 'hermes', 'hiphop', 'hiv', 'hk', 'hm', 'hn', 'holdings', 'holiday', 'homes', 'horse', 'host', 'hosting', 'house', 'how', 'hr', 'ht', 'hu', 'ibm', 'id', 'ie', 'ifm', 'il', 'im', 'immo', 'immobilien', 'in', 'industries', 'info', 'ing', 'ink', 'institute', 'insure', 'int', 'international', 'investments', 'io', 'iq', 'ir', 'irish', 'is', 'it', 'iwc', 'jcb', 'je', 'jetzt', 'jm', 'jo', 'jobs', 'joburg', 'jp', 'juegos', 'kaufen', 'kddi', 'ke', 'kg', 'kh', 'ki', 'kim', 'kitchen', 'kiwi', 'km', 'kn', 'koeln', 'kp', 'kr', 'krd', 'kred', 'kw', 'ky', 'kyoto', 'kz', 'la', 'lacaixa', 'land', 'lat', 'latrobe', 'lawyer', 'lb', 'lc', 'lds', 'lease', 'legal', 'lgbt', 'li', 'lidl', 'life', 'lighting', 'limited', 'limo', 'link', 'lk', 'loans', 'london', 'lotte', 'lotto', 'lr', 'ls', 'lt', 'ltda', 'lu', 'luxe', 'luxury', 'lv', 'ly', 'ma', 'madrid', 'maison', 'management', 'mango', 'market', 'marketing', 'marriott', 'mc', 'md', 'me', 'media', 'meet', 'melbourne', 'meme', 'memorial', 'menu', 'mg', 'mh', 'miami', 'mil', 'mini', 'mk', 'ml', 'mm', 'mn', 'mo', 'mobi', 'moda', 'moe', 'monash', 'money', 'mormon', 'mortgage', 'moscow', 'motorcycles', 'mov', 'mp', 'mq', 'mr', 'ms', 'mt', 'mu', 'museum', 'mv', 'mw', 'mx', 'my', 'mz', 'na', 'nagoya', 'name', 'navy', 'nc', 'ne', 'net', 'network', 'neustar', 'new', 'nexus', 'nf', 'ng', 'ngo', 'nhk', 'ni', 'nico', 'ninja', 'nl', 'no', 'np', 'nr', 'nra', 'nrw', 'ntt', 'nu', 'nyc', 'nz', 'okinawa', 'om', 'one', 'ong', 'onl', 'ooo', 'org', 'organic', 'osaka', 'otsuka', 'ovh', 'pa', 'paris', 'partners', 'parts', 'party', 'pe', 'pf', 'pg', 'ph', 'pharmacy', 'photo', 'photography', 'photos', 'physio', 'pics', 'pictures', 'pink', 'pizza', 'pk', 'pl', 'place', 'plumbing', 'pm', 'pn', 'pohl', 'poker', 'porn', 'post', 'pr', 'praxi', 'press', 'pro', 'prod', 'productions', 'prof', 'properties', 'property', 'ps', 'pt', 'pub', 'pw', 'py', 'qa', 'qpon', 'quebec', 're', 'realtor', 'recipes', 'red', 'rehab', 'reise', 'reisen', 'reit', 'ren', 'rentals', 'repair', 'report', 'republican', 'rest', 'restaurant', 'reviews', 'rich', 'rio', 'rip', 'ro', 'rocks', 'rodeo', 'rs', 'rsvp', 'ru', 'ruhr', 'rw', 'ryukyu', 'sa', 'saarland', 'sale', 'samsung', 'sarl', 'saxo', 'sb', 'sc', 'sca', 'scb', 'schmidt', 'schule', 'schwarz', 'science', 'scot', 'sd', 'se', 'services', 'sew', 'sexy', 'sg', 'sh', 'shiksha', 'shoes', 'shriram', 'si', 'singles', 'sj', 'sk', 'sky', 'sl', 'sm', 'sn', 'so', 'social', 'software', 'sohu', 'solar', 'solutions', 'soy', 'space', 'spiegel', 'sr', 'st', 'style', 'su', 'supplies', 'supply', 'support', 'surf', 'surgery', 'suzuki', 'sv', 'sx', 'sy', 'sydney', 'systems', 'sz', 'taipei', 'tatar', 'tattoo', 'tax', 'tc', 'td', 'technology', 'tel', 'temasek', 'tennis', 'tf', 'tg', 'th', 'tienda', 'tips', 'tires', 'tirol', 'tj', 'tk', 'tl', 'tm', 'tn', 'to', 'today', 'tokyo', 'tools', 'top', 'toshiba', 'town', 'toys', 'tp', 'tr', 'trade', 'training', 'travel', 'trust', 'tt', 'tui', 'tv', 'tw', 'tz', 'ua', 'ug', 'uk', 'university', 'uno', 'uol', 'us', 'uy', 'uz', 'va', 'vacations', 'vc', 've', 'vegas', 'ventures', 'versicherung', 'vet', 'vg', 'vi', 'viajes', 'video', 'villas', 'vision', 'vlaanderen', 'vn', 'vodka', 'vote', 'voting', 'voto', 'voyage', 'vu', 'wales', 'wang', 'watch', 'webcam', 'website', 'wed', 'wedding', 'wf', 'whoswho', 'wien', 'wiki', 'williamhill', 'wme', 'work', 'works', 'world', 'ws', 'wtc', 'wtf', '佛山', '集团', '在线', '한국', 'ভারত', '八卦', 'موقع', '公益', '公司', '移动', '我爱你', 'москва', 'қаз', 'онлайн', 'сайт', 'срб', '淡马锡', 'орг', '삼성', 'சிங்கப்பூர்', '商标', '商店', '商城', 'дети', 'мкд', '中文网', '中信', '中国', '中國', '谷歌', 'భారత్', 'ලංකා', 'ભારત', 'भारत', '网店', 'संगठन', '网络', 'укр', '香港', '台湾', '台灣', '手机', 'мон', 'الجزائر', 'عمان', 'ایران', 'امارات', 'بازار', 'الاردن', 'بھارت', 'المغرب', 'السعودية', 'مليسيا', 'شبكة', 'გე', '机构', '组织机构', 'ไทย', 'سورية', 'рус', 'рф', 'تونس', 'みんな', 'グーグル', '世界', 'ਭਾਰਤ', '网址', '游戏', 'vermögensberater', 'vermögensberatung', '企业', 'مصر', 'قطر', '广东', 'இலங்கை', 'இந்தியா', '新加坡', 'فلسطين', '政务', 'xxx', 'xyz', 'yachts', 'yandex', 'ye', 'yoga', 'yokohama', 'youtube', 'yt', 'za', 'zip', 'zm', 'zone', 'zuerich', 'zw'];\r\n\r\nexport default TLD;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\nexport default function checkBrackets(url: string) {\r\n  var urlLength = url.length;\r\n  var urlOpenBrackets = url.split('(').length - 1;\r\n  var urlCloseBrackets = url.split(')').length - 1;\r\n  while(urlCloseBrackets > urlOpenBrackets &&\r\n    url.charAt(urlLength - 1) === ')') {\r\n    url = url.substr(0, urlLength - 1)\r\n    urlCloseBrackets--;\r\n    urlLength--;\r\n  }\r\n  if(urlOpenBrackets > urlCloseBrackets) {\r\n    url = url.replace(/\\)+$/, '');\r\n  }\r\n  return url;\r\n}\r\n","import Emoji from '../../config/emoji';\r\nimport {encodeEmoji} from '../../vendor/emoji';\r\n\r\nexport default function getEmojiUnified(emojiCode: string) {\r\n  const unified = encodeEmoji(emojiCode).replace(/-?fe0f/g, '');\r\n\r\n  /* if(unified === '1f441-200d-1f5e8') {\r\n    //unified = '1f441-fe0f-200d-1f5e8-fe0f';\r\n    unified = '1f441-fe0f-200d-1f5e8';\r\n  } */\r\n\r\n  if(!Emoji.hasOwnProperty(unified)\r\n  // && !emojiData.hasOwnProperty(unified.replace(/-?fe0f$/, ''))\r\n  ) {\r\n    // console.error('lol', unified);\r\n    return;\r\n  }\r\n\r\n  return unified;\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n *\r\n * Originally from:\r\n * https://github.com/zhukov/webogram\r\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\r\n * https://github.com/zhukov/webogram/blob/master/LICENSE\r\n */\r\n\r\nimport {EMAIL_REG_EXP, FULL_REG_EXP} from '.';\r\nimport TLD from '../../config/tld';\r\nimport {MessageEntity} from '../../layer';\r\nimport checkBrackets from './checkBrackets';\r\nimport getEmojiUnified from './getEmojiUnified';\r\n\r\nexport default function parseEntities(text: string) {\r\n  let match: RegExpMatchArray;\r\n  let raw = text;\r\n  const entities: MessageEntity[] = [];\r\n  let matchIndex;\r\n  let rawOffset = 0;\r\n  // var start = tsNow()\r\n  FULL_REG_EXP.lastIndex = 0;\r\n  while(match = raw.match(FULL_REG_EXP)) {\r\n    matchIndex = rawOffset + match.index;\r\n\r\n    // console.log('parseEntities match:', match);\r\n\r\n    if(match[3]) { // mentions\r\n      entities.push({\r\n        _: 'messageEntityMention',\r\n        offset: matchIndex + match[1].length,\r\n        length: match[2].length + match[3].length\r\n      });\r\n    } else if(match[4]) {\r\n      if(EMAIL_REG_EXP.test(match[4])) { // email\r\n        entities.push({\r\n          _: 'messageEntityEmail',\r\n          offset: matchIndex,\r\n          length: match[4].length\r\n        });\r\n      } else {\r\n        let url: string;\r\n        let protocol = match[5];\r\n        const tld = match[6];\r\n        // let excluded = '';\r\n        if(tld) { // URL\r\n          if(!protocol && (tld.substr(0, 4) === 'xn--' || TLD.indexOf(tld.toLowerCase()) !== -1)) {\r\n            protocol = 'http://';\r\n          }\r\n\r\n          if(protocol) {\r\n            const balanced = checkBrackets(match[4]);\r\n            if(balanced.length !== match[4].length) {\r\n              // excluded = match[4].substring(balanced.length);\r\n              match[4] = balanced;\r\n            }\r\n\r\n            url = (match[5] ? '' : protocol) + match[4];\r\n          }\r\n        } else { // IP address\r\n          url = (match[5] ? '' : 'http://') + match[4];\r\n        }\r\n\r\n        if(url) {\r\n          entities.push({\r\n            _: 'messageEntityUrl',\r\n            offset: matchIndex,\r\n            length: match[4].length\r\n          });\r\n        }\r\n      }\r\n    } else if(match[7]) { // New line\r\n      entities.push({\r\n        _: 'messageEntityLinebreak',\r\n        offset: matchIndex,\r\n        length: 1\r\n      });\r\n    } else if(match[8]) { // Emoji\r\n      const unified = getEmojiUnified(match[8]);\r\n      if(unified) {\r\n        entities.push({\r\n          _: 'messageEntityEmoji',\r\n          offset: matchIndex,\r\n          length: match[8].length,\r\n          unicode: unified\r\n        });\r\n      }\r\n    } else if(match[11]) { // Hashtag\r\n      entities.push({\r\n        _: 'messageEntityHashtag',\r\n        offset: matchIndex + (match[10] ? match[10].length : 0),\r\n        length: match[11].length\r\n      });\r\n    } else if(match[13]) { // Bot command\r\n      entities.push({\r\n        _: 'messageEntityBotCommand',\r\n        offset: matchIndex + (match[11] ? match[11].length : 0) + (match[12] ? match[12].length : 0),\r\n        length: 1 + match[13].length + (match[14] ? 1 + match[14].length : 0),\r\n        unsafe: true\r\n      });\r\n    } else if(match[16]) { // Media timestamp\r\n      const timestamp = match[16];\r\n      const splitted: string[] = timestamp.split(':');\r\n      const splittedLength = splitted.length;\r\n      const hours = splittedLength === 3 ? +splitted[0] : 0;\r\n      const minutes = +splitted[splittedLength === 3 ? 1 : 0];\r\n      const seconds = +splitted[splittedLength - 1];\r\n      entities.push({\r\n        _: 'messageEntityTimestamp',\r\n        offset: matchIndex + (/\\D/.test(match[0][0]) ? 1 : 0),\r\n        length: timestamp.length,\r\n        raw: timestamp,\r\n        time: hours * 3600 + minutes * 60 + seconds\r\n      });\r\n    }\r\n\r\n    raw = raw.substr(match.index + match[0].length);\r\n    rawOffset += match.index + match[0].length;\r\n  }\r\n\r\n  // if (entities.length) {\r\n  //   console.log('parse entities', text, entities.slice())\r\n  // }\r\n  return entities;\r\n}\r\n","export default function setBlankToAnchor(anchor: HTMLAnchorElement) {\r\n  anchor.target = '_blank';\r\n  anchor.rel = 'noopener noreferrer';\r\n  return anchor;\r\n}\r\n","import IS_EMOJI_SUPPORTED from './emojiSupport';\r\n\r\nexport type EMOJI_VERSION = '' | '14';\r\n\r\nconst EMOJI_VERSIONS_SUPPORTED: {\r\n  [v in EMOJI_VERSION]: boolean\r\n} = {} as any;\r\n\r\n// Thanks to WebZ for the detect\r\nfunction isEmojiSupported(emoji: string) {\r\n  const ALLOWABLE_CALCULATION_ERROR_SIZE = 5;\r\n  const inlineEl = document.createElement('span');\r\n  inlineEl.classList.add('emoji');\r\n  document.body.appendChild(inlineEl);\r\n\r\n  inlineEl.innerText = emoji; // Emoji from 14.0 version\r\n  const newEmojiWidth = inlineEl.offsetWidth;\r\n  inlineEl.innerText = '❤️'; // Emoji from 1.0 version\r\n  const legacyEmojiWidth = inlineEl.offsetWidth;\r\n\r\n  document.body.removeChild(inlineEl);\r\n\r\n  return Math.abs(newEmojiWidth - legacyEmojiWidth) < ALLOWABLE_CALCULATION_ERROR_SIZE;\r\n}\r\n\r\nif(IS_EMOJI_SUPPORTED) {\r\n  EMOJI_VERSIONS_SUPPORTED[''] = true;\r\n\r\n  const a: [keyof typeof EMOJI_VERSIONS_SUPPORTED, string][] = [\r\n    ['14', '🫱🏻']\r\n  ];\r\n\r\n  a.forEach(([version, emoji]) => {\r\n    EMOJI_VERSIONS_SUPPORTED[version] = isEmojiSupported(emoji);\r\n  });\r\n}\r\n\r\nexport default EMOJI_VERSIONS_SUPPORTED;\r\n","import wrapUrl from './wrapUrl';\r\n\r\nexport default function wrapTelegramUrlToAnchor(url1: string) {\r\n  const {url, onclick} = wrapUrl(url1);\r\n  const element = document.createElement('a');\r\n  (element as HTMLAnchorElement).href = url;\r\n  if(onclick) {\r\n    element.setAttribute('onclick', `${onclick}(this)`);\r\n  }\r\n\r\n  return element;\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {CancellablePromise} from '../../helpers/cancellablePromise';\r\nimport animationIntersector from '../../components/animationIntersector';\r\nimport safePlay from '../../helpers/dom/safePlay';\r\nimport {MiddlewareHelper} from '../../helpers/middleware';\r\nimport {createCustomFiller} from '../richTextProcessor/wrapRichText';\r\nimport RLottiePlayer from '../rlottie/rlottiePlayer';\r\nimport {CustomEmojiRendererElement, SyncedPlayer} from './renderer';\r\n\r\nexport type CustomEmojiElements = Set<CustomEmojiElement>;\r\n\r\nexport default class CustomEmojiElement extends HTMLElement {\r\n  public elements: CustomEmojiElements;\r\n  public renderer: CustomEmojiRendererElement;\r\n  public player: RLottiePlayer | HTMLVideoElement;\r\n  public paused: boolean;\r\n  public syncedPlayer: SyncedPlayer;\r\n  public clean: boolean;\r\n  public lastChildWas: Node;\r\n  // public docId: DocId;\r\n  public placeholder: HTMLImageElement;\r\n  public middlewareHelper: MiddlewareHelper;\r\n  public static: boolean;\r\n  public readyPromise: CancellablePromise<void>;\r\n\r\n  constructor() {\r\n    super();\r\n    this.paused = true;\r\n    this.classList.add('custom-emoji');\r\n  }\r\n\r\n  public get docId() {\r\n    return this.dataset.docId;\r\n  }\r\n\r\n  public set docId(docId: DocId) {\r\n    this.dataset.docId = '' + docId;\r\n  }\r\n\r\n  public static create(docId?: DocId) {\r\n    const element = new CustomEmojiElement();\r\n    if(docId) element.docId = docId;\r\n    return element;\r\n  }\r\n\r\n  public get isConnected() {\r\n    return this.placeholder?.isConnected ?? super.isConnected;\r\n  }\r\n\r\n  public connectedCallback() {\r\n    // if(this.isConnected) {\r\n    //   return;\r\n    // }\r\n\r\n    if(this.player) {\r\n      animationIntersector.addAnimation({\r\n        animation: this,\r\n        group: this.renderer.animationGroup,\r\n        observeElement: this.placeholder ?? this,\r\n        controlled: true,\r\n        type: 'emoji'\r\n      });\r\n    }\r\n\r\n    // this.connectedCallback = undefined;\r\n  }\r\n\r\n  public disconnectedCallback() {\r\n    if(this.isConnected || !this.renderer?.isSelectable) { // prepend on sibling can invoke disconnectedCallback\r\n      return;\r\n    }\r\n\r\n    this.clear();\r\n  }\r\n\r\n  public destroy() {\r\n    this.clear();\r\n  }\r\n\r\n  public clear(replaceChildren = true) {\r\n    if(this.clean) {\r\n      return;\r\n    }\r\n\r\n    // if(this.docId === '5399836826758290421') {\r\n    //   console.log('clear', this, this.isConnected);\r\n    // }\r\n\r\n    this.clean = true;\r\n    this.pause();\r\n\r\n    const {syncedPlayer} = this;\r\n    if(syncedPlayer) {\r\n      syncedPlayer.pausedElements.delete(this);\r\n    }\r\n\r\n    this.middlewareHelper?.clean();\r\n    this.readyPromise?.reject();\r\n\r\n    if(this.renderer) {\r\n      const elements = this.renderer.customEmojis.get(this.docId);\r\n      if(elements?.delete(this) && !elements.size) {\r\n        this.renderer.customEmojis.delete(this.docId);\r\n        this.renderer.textColored.delete(elements);\r\n        this.renderer.playersSynced.delete(elements);\r\n      }\r\n\r\n      if(replaceChildren) {\r\n        if(this.renderer.isSelectable) {\r\n          this.replaceChildren(createCustomFiller(true));\r\n        } else {\r\n          // otherwise https://bugs.chromium.org/p/chromium/issues/detail?id=1144736#c27 will happen\r\n          this.replaceChildren();\r\n        }\r\n      }\r\n    }\r\n\r\n    if(this.player) {\r\n      animationIntersector.removeAnimationByPlayer(this);\r\n    }\r\n\r\n    CustomEmojiRendererElement.globalLazyLoadQueue?.delete({div: this});\r\n\r\n    /* this.disconnectedCallback =  */this.elements =\r\n      this.renderer =\r\n      this.player =\r\n      this.syncedPlayer =\r\n      undefined;\r\n  }\r\n\r\n  public pause() {\r\n    if(this.paused) {\r\n      return;\r\n    }\r\n\r\n    this.paused = true;\r\n\r\n    if(this.player instanceof HTMLVideoElement && !this.syncedPlayer) {\r\n      this.renderer.lastPausedVideo = this.player;\r\n      this.player.pause();\r\n    }\r\n\r\n    if(this.syncedPlayer && !this.syncedPlayer.pausedElements.has(this)) {\r\n      this.syncedPlayer.pausedElements.add(this);\r\n\r\n      if(this.syncedPlayer.player && this.syncedPlayer.pausedElements.size === this.syncedPlayer.middlewares.size) {\r\n        this.syncedPlayer.player.pause();\r\n      }\r\n    }\r\n  }\r\n\r\n  public play() {\r\n    if(!this.paused) {\r\n      return;\r\n    }\r\n\r\n    this.paused = false;\r\n\r\n    if(this.player instanceof HTMLVideoElement) {\r\n      this.player.currentTime = this.renderer.lastPausedVideo?.currentTime ?? this.player.currentTime;\r\n      safePlay(this.player);\r\n    }\r\n\r\n    if(this.syncedPlayer && this.syncedPlayer.pausedElements.has(this)) {\r\n      this.syncedPlayer.pausedElements.delete(this);\r\n\r\n      if(this.syncedPlayer.pausedElements.size !== this.syncedPlayer.middlewares.size) {\r\n        this.player.play();\r\n      }\r\n    }\r\n  }\r\n\r\n  public remove() {\r\n    super.remove();\r\n    this.clear();\r\n    // this.elements = this.renderer = this.player = undefined;\r\n  }\r\n\r\n  public get autoplay() {\r\n    return true;\r\n  }\r\n\r\n  public get loop() {\r\n    return true;\r\n  }\r\n}\r\n\r\ncustomElements.define('custom-emoji-element', CustomEmojiElement);\r\n","import callbackify from './helpers/callbackify';\r\n\r\nexport const CodeLanguageMap: {[key: string]: string[]} = {\r\n  'Markup': [\r\n    'markup',\r\n    'html',\r\n    'xml',\r\n    'svg',\r\n    'mathml',\r\n    'ssml',\r\n    'atom',\r\n    'rss'\r\n  ],\r\n  'CSS': [\r\n    'css'\r\n  ],\r\n  'C-like': [\r\n    'clike'\r\n  ],\r\n  'Regex': [\r\n    'regex'\r\n  ],\r\n  'JavaScript': [\r\n    'javascript',\r\n    'js'\r\n  ],\r\n  'ABAP': [\r\n    'abap'\r\n  ],\r\n  'ABNF': [\r\n    'abnf'\r\n  ],\r\n  'ActionScript': [\r\n    'actionscript'\r\n  ],\r\n  'Ada': [\r\n    'ada'\r\n  ],\r\n  'Agda': [\r\n    'agda'\r\n  ],\r\n  'AL': [\r\n    'al'\r\n  ],\r\n  'ANTLR4': [\r\n    'antlr4',\r\n    'g4'\r\n  ],\r\n  'Apache Configuration': [\r\n    'apacheconf'\r\n  ],\r\n  'SQL': [\r\n    'sql'\r\n  ],\r\n  'Apex': [\r\n    'apex'\r\n  ],\r\n  'APL': [\r\n    'apl'\r\n  ],\r\n  'AppleScript': [\r\n    'applescript'\r\n  ],\r\n  'AQL': [\r\n    'aql'\r\n  ],\r\n  'C': [\r\n    'c'\r\n  ],\r\n  'C++': [\r\n    'cpp'\r\n  ],\r\n  'Arduino': [\r\n    'arduino',\r\n    'ino'\r\n  ],\r\n  'ARFF': [\r\n    'arff'\r\n  ],\r\n  'ARM Assembly': [\r\n    'armasm',\r\n    'arm-asm'\r\n  ],\r\n  'Bash': [\r\n    'bash',\r\n    'sh',\r\n    'shell'\r\n  ],\r\n  'YAML': [\r\n    'yaml',\r\n    'yml'\r\n  ],\r\n  'Markdown': [\r\n    'markdown',\r\n    'md'\r\n  ],\r\n  'Arturo': [\r\n    'arturo',\r\n    'art'\r\n  ],\r\n  'AsciiDoc': [\r\n    'asciidoc',\r\n    'adoc'\r\n  ],\r\n  'C#': [\r\n    'csharp',\r\n    'cs',\r\n    'dotnet'\r\n  ],\r\n  'ASP.NET (C#)': [\r\n    'aspnet'\r\n  ],\r\n  '6502 Assembly': [\r\n    'asm6502'\r\n  ],\r\n  'Atmel AVR Assembly': [\r\n    'asmatmel'\r\n  ],\r\n  'AutoHotkey': [\r\n    'autohotkey'\r\n  ],\r\n  'AutoIt': [\r\n    'autoit'\r\n  ],\r\n  'AviSynth': [\r\n    'avisynth',\r\n    'avs'\r\n  ],\r\n  'Avro IDL': [\r\n    'avro-idl',\r\n    'avdl'\r\n  ],\r\n  'AWK': [\r\n    'awk',\r\n    'gawk'\r\n  ],\r\n  'BASIC': [\r\n    'basic'\r\n  ],\r\n  'Batch': [\r\n    'batch'\r\n  ],\r\n  'BBcode': [\r\n    'bbcode',\r\n    'shortcode'\r\n  ],\r\n  'BBj': [\r\n    'bbj'\r\n  ],\r\n  'Bicep': [\r\n    'bicep'\r\n  ],\r\n  'Birb': [\r\n    'birb'\r\n  ],\r\n  'Bison': [\r\n    'bison'\r\n  ],\r\n  'BNF': [\r\n    'bnf',\r\n    'rbnf'\r\n  ],\r\n  'BQN': [\r\n    'bqn'\r\n  ],\r\n  'Brainfuck': [\r\n    'brainfuck'\r\n  ],\r\n  'BrightScript': [\r\n    'brightscript'\r\n  ],\r\n  'Bro': [\r\n    'bro'\r\n  ],\r\n  'CFScript': [\r\n    'cfscript',\r\n    'cfc'\r\n  ],\r\n  'ChaiScript': [\r\n    'chaiscript'\r\n  ],\r\n  'CIL': [\r\n    'cil'\r\n  ],\r\n  'Cilk/C': [\r\n    'cilkc',\r\n    'cilk-c'\r\n  ],\r\n  'Cilk/C++': [\r\n    'cilkcpp',\r\n    'cilk-cpp',\r\n    'cilk'\r\n  ],\r\n  'Clojure': [\r\n    'clojure'\r\n  ],\r\n  'CMake': [\r\n    'cmake'\r\n  ],\r\n  'COBOL': [\r\n    'cobol'\r\n  ],\r\n  'CoffeeScript': [\r\n    'coffeescript',\r\n    'coffee'\r\n  ],\r\n  'Concurnas': [\r\n    'concurnas',\r\n    'conc'\r\n  ],\r\n  'Content-Security-Policy': [\r\n    'csp'\r\n  ],\r\n  'Cooklang': [\r\n    'cooklang'\r\n  ],\r\n  'Ruby': [\r\n    'ruby',\r\n    'rb'\r\n  ],\r\n  'Crystal': [\r\n    'crystal'\r\n  ],\r\n  'CSV': [\r\n    'csv'\r\n  ],\r\n  'CUE': [\r\n    'cue'\r\n  ],\r\n  'Cypher': [\r\n    'cypher'\r\n  ],\r\n  'D': [\r\n    'd'\r\n  ],\r\n  'Dart': [\r\n    'dart'\r\n  ],\r\n  'DataWeave': [\r\n    'dataweave'\r\n  ],\r\n  'DAX': [\r\n    'dax'\r\n  ],\r\n  'Dhall': [\r\n    'dhall'\r\n  ],\r\n  'Diff': [\r\n    'diff'\r\n  ],\r\n  'Markup templating': [\r\n    'markup-templating'\r\n  ],\r\n  'Django/Jinja2': [\r\n    'django',\r\n    'jinja2'\r\n  ],\r\n  'DNS zone file': [\r\n    'dns-zone-file',\r\n    'dns-zone'\r\n  ],\r\n  'Docker': [\r\n    'docker',\r\n    'dockerfile'\r\n  ],\r\n  'DOT (Graphviz)': [\r\n    'dot',\r\n    'gv'\r\n  ],\r\n  'EBNF': [\r\n    'ebnf'\r\n  ],\r\n  'EditorConfig': [\r\n    'editorconfig'\r\n  ],\r\n  'Eiffel': [\r\n    'eiffel'\r\n  ],\r\n  'EJS': [\r\n    'ejs',\r\n    'eta'\r\n  ],\r\n  'Elixir': [\r\n    'elixir'\r\n  ],\r\n  'Elm': [\r\n    'elm'\r\n  ],\r\n  'Lua': [\r\n    'lua'\r\n  ],\r\n  'Embedded Lua templating': [\r\n    'etlua'\r\n  ],\r\n  'ERB': [\r\n    'erb'\r\n  ],\r\n  'Erlang': [\r\n    'erlang'\r\n  ],\r\n  'Excel Formula': [\r\n    'excel-formula',\r\n    'xlsx',\r\n    'xls'\r\n  ],\r\n  'F#': [\r\n    'fsharp'\r\n  ],\r\n  'Factor': [\r\n    'factor'\r\n  ],\r\n  'False': [\r\n    'false'\r\n  ],\r\n  'Firestore security rules': [\r\n    'firestore-security-rules'\r\n  ],\r\n  'Flow': [\r\n    'flow'\r\n  ],\r\n  'Fortran': [\r\n    'fortran'\r\n  ],\r\n  'FreeMarker Template Language': [\r\n    'ftl'\r\n  ],\r\n  'GameMaker Language': [\r\n    'gml',\r\n    'gamemakerlanguage'\r\n  ],\r\n  'GAP (CAS)': [\r\n    'gap'\r\n  ],\r\n  'G-code': [\r\n    'gcode'\r\n  ],\r\n  'GDScript': [\r\n    'gdscript'\r\n  ],\r\n  'GEDCOM': [\r\n    'gedcom'\r\n  ],\r\n  'gettext': [\r\n    'gettext',\r\n    'po'\r\n  ],\r\n  'Git': [\r\n    'git'\r\n  ],\r\n  'GLSL': [\r\n    'glsl'\r\n  ],\r\n  'GN': [\r\n    'gn',\r\n    'gni'\r\n  ],\r\n  'GNU Linker Script': [\r\n    'linker-script',\r\n    'ld'\r\n  ],\r\n  'Go': [\r\n    'go'\r\n  ],\r\n  'Go module': [\r\n    'go-module',\r\n    'go-mod'\r\n  ],\r\n  'Gradle': [\r\n    'gradle'\r\n  ],\r\n  'GraphQL': [\r\n    'graphql'\r\n  ],\r\n  'Groovy': [\r\n    'groovy'\r\n  ],\r\n  'Less': [\r\n    'less'\r\n  ],\r\n  'Sass (SCSS)': [\r\n    'scss'\r\n  ],\r\n  'Textile': [\r\n    'textile'\r\n  ],\r\n  'Haml': [\r\n    'haml'\r\n  ],\r\n  'Handlebars': [\r\n    'handlebars',\r\n    'hbs',\r\n    'mustache'\r\n  ],\r\n  'Haskell': [\r\n    'haskell',\r\n    'hs'\r\n  ],\r\n  'Haxe': [\r\n    'haxe'\r\n  ],\r\n  'HCL': [\r\n    'hcl'\r\n  ],\r\n  'HLSL': [\r\n    'hlsl'\r\n  ],\r\n  'Hoon': [\r\n    'hoon'\r\n  ],\r\n  'HTTP Public-Key-Pins': [\r\n    'hpkp'\r\n  ],\r\n  'HTTP Strict-Transport-Security': [\r\n    'hsts'\r\n  ],\r\n  'JSON': [\r\n    'json',\r\n    'webmanifest'\r\n  ],\r\n  'URI': [\r\n    'uri',\r\n    'url'\r\n  ],\r\n  'HTTP': [\r\n    'http'\r\n  ],\r\n  'IchigoJam': [\r\n    'ichigojam'\r\n  ],\r\n  'Icon': [\r\n    'icon'\r\n  ],\r\n  'ICU Message Format': [\r\n    'icu-message-format'\r\n  ],\r\n  'Idris': [\r\n    'idris',\r\n    'idr'\r\n  ],\r\n  '.ignore': [\r\n    'ignore',\r\n    'gitignore',\r\n    'hgignore',\r\n    'npmignore'\r\n  ],\r\n  'Inform 7': [\r\n    'inform7'\r\n  ],\r\n  'Ini': [\r\n    'ini'\r\n  ],\r\n  'Io': [\r\n    'io'\r\n  ],\r\n  'J': [\r\n    'j'\r\n  ],\r\n  'Java': [\r\n    'java'\r\n  ],\r\n  'Scala': [\r\n    'scala'\r\n  ],\r\n  'PHP': [\r\n    'php'\r\n  ],\r\n  'JavaDoc-like': [\r\n    'javadoclike'\r\n  ],\r\n  'JavaDoc': [\r\n    'javadoc'\r\n  ],\r\n  'Java stack trace': [\r\n    'javastacktrace'\r\n  ],\r\n  'Jolie': [\r\n    'jolie'\r\n  ],\r\n  'JQ': [\r\n    'jq'\r\n  ],\r\n  'TypeScript': [\r\n    'typescript',\r\n    'ts'\r\n  ],\r\n  'JSDoc': [\r\n    'jsdoc'\r\n  ],\r\n  'N4JS': [\r\n    'n4js',\r\n    'n4jsd'\r\n  ],\r\n  'JSON5': [\r\n    'json5'\r\n  ],\r\n  'JSONP': [\r\n    'jsonp'\r\n  ],\r\n  'JS stack trace': [\r\n    'jsstacktrace'\r\n  ],\r\n  'Julia': [\r\n    'julia'\r\n  ],\r\n  'Keepalived Configure': [\r\n    'keepalived'\r\n  ],\r\n  'Keyman': [\r\n    'keyman'\r\n  ],\r\n  'Kotlin': [\r\n    'kotlin',\r\n    'kt',\r\n    'kts'\r\n  ],\r\n  'Kusto': [\r\n    'kusto'\r\n  ],\r\n  'LaTeX': [\r\n    'latex',\r\n    'tex',\r\n    'context'\r\n  ],\r\n  'Latte': [\r\n    'latte'\r\n  ],\r\n  'Scheme': [\r\n    'scheme'\r\n  ],\r\n  'LilyPond': [\r\n    'lilypond',\r\n    'ly'\r\n  ],\r\n  'Liquid': [\r\n    'liquid'\r\n  ],\r\n  'Lisp': [\r\n    'lisp',\r\n    'emacs',\r\n    'elisp',\r\n    'emacs-lisp'\r\n  ],\r\n  'LiveScript': [\r\n    'livescript'\r\n  ],\r\n  'LLVM IR': [\r\n    'llvm'\r\n  ],\r\n  'Log file': [\r\n    'log'\r\n  ],\r\n  'LOLCODE': [\r\n    'lolcode'\r\n  ],\r\n  'Magma (CAS)': [\r\n    'magma'\r\n  ],\r\n  'Makefile': [\r\n    'makefile'\r\n  ],\r\n  'Mata': [\r\n    'mata'\r\n  ],\r\n  'MATLAB': [\r\n    'matlab'\r\n  ],\r\n  'MAXScript': [\r\n    'maxscript'\r\n  ],\r\n  'MEL': [\r\n    'mel'\r\n  ],\r\n  'Mermaid': [\r\n    'mermaid'\r\n  ],\r\n  'METAFONT': [\r\n    'metafont'\r\n  ],\r\n  'Mizar': [\r\n    'mizar'\r\n  ],\r\n  'MongoDB': [\r\n    'mongodb'\r\n  ],\r\n  'Monkey': [\r\n    'monkey'\r\n  ],\r\n  'MoonScript': [\r\n    'moonscript',\r\n    'moon'\r\n  ],\r\n  'N1QL': [\r\n    'n1ql'\r\n  ],\r\n  'Nand To Tetris HDL': [\r\n    'nand2tetris-hdl'\r\n  ],\r\n  'Naninovel Script': [\r\n    'naniscript',\r\n    'nani'\r\n  ],\r\n  'NASM': [\r\n    'nasm'\r\n  ],\r\n  'NEON': [\r\n    'neon'\r\n  ],\r\n  'Nevod': [\r\n    'nevod'\r\n  ],\r\n  'nginx': [\r\n    'nginx'\r\n  ],\r\n  'Nim': [\r\n    'nim'\r\n  ],\r\n  'Nix': [\r\n    'nix'\r\n  ],\r\n  'NSIS': [\r\n    'nsis'\r\n  ],\r\n  'Objective-C': [\r\n    'objectivec',\r\n    'objc'\r\n  ],\r\n  'OCaml': [\r\n    'ocaml'\r\n  ],\r\n  'Odin': [\r\n    'odin'\r\n  ],\r\n  'OpenCL': [\r\n    'opencl'\r\n  ],\r\n  'OpenQasm': [\r\n    'openqasm',\r\n    'qasm'\r\n  ],\r\n  'Oz': [\r\n    'oz'\r\n  ],\r\n  'PARI/GP': [\r\n    'parigp'\r\n  ],\r\n  'Parser': [\r\n    'parser'\r\n  ],\r\n  'Pascal': [\r\n    'pascal',\r\n    'objectpascal'\r\n  ],\r\n  'Pascaligo': [\r\n    'pascaligo'\r\n  ],\r\n  'PATROL Scripting Language': [\r\n    'psl'\r\n  ],\r\n  'PC-Axis': [\r\n    'pcaxis',\r\n    'px'\r\n  ],\r\n  'PeopleCode': [\r\n    'peoplecode',\r\n    'pcode'\r\n  ],\r\n  'Perl': [\r\n    'perl'\r\n  ],\r\n  'PHPDoc': [\r\n    'phpdoc'\r\n  ],\r\n  'PlantUML': [\r\n    'plant-uml',\r\n    'plantuml'\r\n  ],\r\n  'PL/SQL': [\r\n    'plsql'\r\n  ],\r\n  'PowerQuery': [\r\n    'powerquery',\r\n    'pq',\r\n    'mscript'\r\n  ],\r\n  'PowerShell': [\r\n    'powershell'\r\n  ],\r\n  'Processing': [\r\n    'processing'\r\n  ],\r\n  'Prolog': [\r\n    'prolog'\r\n  ],\r\n  'PromQL': [\r\n    'promql'\r\n  ],\r\n  '.properties': [\r\n    'properties'\r\n  ],\r\n  'Protocol Buffers': [\r\n    'protobuf'\r\n  ],\r\n  'Stylus': [\r\n    'stylus'\r\n  ],\r\n  'Twig': [\r\n    'twig'\r\n  ],\r\n  'Pug': [\r\n    'pug'\r\n  ],\r\n  'Puppet': [\r\n    'puppet'\r\n  ],\r\n  'PureBasic': [\r\n    'purebasic',\r\n    'pbfasm'\r\n  ],\r\n  'Python': [\r\n    'python',\r\n    'py'\r\n  ],\r\n  'Q#': [\r\n    'qsharp',\r\n    'qs'\r\n  ],\r\n  'Q (kdb+ database)': [\r\n    'q'\r\n  ],\r\n  'QML': [\r\n    'qml'\r\n  ],\r\n  'Qore': [\r\n    'qore'\r\n  ],\r\n  'R': [\r\n    'r'\r\n  ],\r\n  'Racket': [\r\n    'racket',\r\n    'rkt'\r\n  ],\r\n  'Razor C#': [\r\n    'cshtml',\r\n    'razor'\r\n  ],\r\n  'React JSX': [\r\n    'jsx'\r\n  ],\r\n  'React TSX': [\r\n    'tsx'\r\n  ],\r\n  'Reason': [\r\n    'reason'\r\n  ],\r\n  'Rego': [\r\n    'rego'\r\n  ],\r\n  'Ren\\'py': [\r\n    'renpy',\r\n    'rpy'\r\n  ],\r\n  'ReScript': [\r\n    'rescript',\r\n    'res'\r\n  ],\r\n  'reST (reStructuredText)': [\r\n    'rest'\r\n  ],\r\n  'Rip': [\r\n    'rip'\r\n  ],\r\n  'Roboconf': [\r\n    'roboconf'\r\n  ],\r\n  'Robot Framework': [\r\n    'robotframework',\r\n    'robot'\r\n  ],\r\n  'Rust': [\r\n    'rust'\r\n  ],\r\n  'SAS': [\r\n    'sas'\r\n  ],\r\n  'Sass (Sass)': [\r\n    'sass'\r\n  ],\r\n  'Shell session': [\r\n    'shell-session',\r\n    'sh-session',\r\n    'shellsession'\r\n  ],\r\n  'Smali': [\r\n    'smali'\r\n  ],\r\n  'Smalltalk': [\r\n    'smalltalk'\r\n  ],\r\n  'Smarty': [\r\n    'smarty'\r\n  ],\r\n  'SML': [\r\n    'sml',\r\n    'smlnj'\r\n  ],\r\n  'Solidity (Ethereum)': [\r\n    'solidity',\r\n    'sol'\r\n  ],\r\n  'Solution file': [\r\n    'solution-file',\r\n    'sln'\r\n  ],\r\n  'Soy (Closure Template)': [\r\n    'soy'\r\n  ],\r\n  'Splunk SPL': [\r\n    'splunk-spl'\r\n  ],\r\n  'SQF: Status Quo Function (Arma 3)': [\r\n    'sqf'\r\n  ],\r\n  'Squirrel': [\r\n    'squirrel'\r\n  ],\r\n  'Stan': [\r\n    'stan'\r\n  ],\r\n  'Stata Ado': [\r\n    'stata'\r\n  ],\r\n  'Structured Text (IEC 61131-3)': [\r\n    'iecst'\r\n  ],\r\n  'SuperCollider': [\r\n    'supercollider',\r\n    'sclang'\r\n  ],\r\n  'Swift': [\r\n    'swift'\r\n  ],\r\n  'Systemd configuration file': [\r\n    'systemd'\r\n  ],\r\n  'T4 templating': [\r\n    't4-templating'\r\n  ],\r\n  'T4 Text Templates (C#)': [\r\n    't4-cs',\r\n    't4'\r\n  ],\r\n  'VB.Net': [\r\n    'vbnet'\r\n  ],\r\n  'T4 Text Templates (VB)': [\r\n    't4-vb'\r\n  ],\r\n  'TAP': [\r\n    'tap'\r\n  ],\r\n  'Tcl': [\r\n    'tcl'\r\n  ],\r\n  'Template Toolkit 2': [\r\n    'tt2'\r\n  ],\r\n  'TOML': [\r\n    'toml'\r\n  ],\r\n  'Tremor': [\r\n    'tremor',\r\n    'trickle',\r\n    'troy'\r\n  ],\r\n  'TypoScript': [\r\n    'typoscript',\r\n    'tsconfig'\r\n  ],\r\n  'UnrealScript': [\r\n    'unrealscript',\r\n    'uscript',\r\n    'uc'\r\n  ],\r\n  'UO Razor Script': [\r\n    'uorazor'\r\n  ],\r\n  'V': [\r\n    'v'\r\n  ],\r\n  'Vala': [\r\n    'vala'\r\n  ],\r\n  'Velocity': [\r\n    'velocity'\r\n  ],\r\n  'Verilog': [\r\n    'verilog'\r\n  ],\r\n  'VHDL': [\r\n    'vhdl'\r\n  ],\r\n  'vim': [\r\n    'vim'\r\n  ],\r\n  'Visual Basic': [\r\n    'visual-basic',\r\n    'vb',\r\n    'vba'\r\n  ],\r\n  'WarpScript': [\r\n    'warpscript'\r\n  ],\r\n  'WebAssembly': [\r\n    'wasm'\r\n  ],\r\n  'Web IDL': [\r\n    'web-idl',\r\n    'webidl'\r\n  ],\r\n  'WGSL': [\r\n    'wgsl'\r\n  ],\r\n  'Wiki markup': [\r\n    'wiki'\r\n  ],\r\n  'Wolfram language': [\r\n    'wolfram',\r\n    'mathematica',\r\n    'nb',\r\n    'wl'\r\n  ],\r\n  'Wren': [\r\n    'wren'\r\n  ],\r\n  'Xeora': [\r\n    'xeora',\r\n    'xeoracube'\r\n  ],\r\n  'Xojo (REALbasic)': [\r\n    'xojo'\r\n  ],\r\n  'XQuery': [\r\n    'xquery'\r\n  ],\r\n  'YANG': [\r\n    'yang'\r\n  ],\r\n  'Zig': [\r\n    'zig'\r\n  ]\r\n};\r\n\r\nexport const CodeLanguageAliases: {[key: string]: string} = {};\r\n\r\nfor(const language in CodeLanguageMap) {\r\n  const aliases = CodeLanguageMap[language];\r\n  aliases.unshift(language.toLowerCase());\r\n  for(let i = 0, l = aliases.length; i < l; ++i) {\r\n    CodeLanguageAliases[aliases[i]] = language;\r\n  }\r\n}\r\n\r\nfunction importPrismLanguage(language: string) {\r\n  const lowerCase = language.toLowerCase();\r\n  const aliases = CodeLanguageMap[CodeLanguageAliases[lowerCase]] || [];\r\n  for(const alias of aliases) {\r\n    if(prism.languages[alias]) {\r\n      return {language: alias, prism};\r\n    }\r\n  }\r\n\r\n  console.error('No prism language ' + lowerCase);\r\n}\r\n\r\nlet prism: any;\r\nexport function importPrism(language: string) {\r\n  if(prism) {\r\n    return callbackify(prism, () => importPrismLanguage(language));\r\n  }\r\n\r\n  const hadBefore = !!(window as any).Prism;\r\n  if(!hadBefore) {\r\n    (window as any).Prism = window.Prism || {};\r\n    (window as any).Prism.manual = true;\r\n  }\r\n\r\n  return prism = import('./vendor/prism').then((module) => {\r\n    const Prism = module.default;\r\n    if(!hadBefore) {\r\n      Prism.hooks.add('wrap', (env) => {\r\n        env.classes.forEach((className, i, arr) => {\r\n          arr[i] = 'prism-' + className;\r\n        });\r\n      });\r\n    }\r\n\r\n    prism = Prism;\r\n    return importPrismLanguage(language);\r\n  });\r\n}\r\n\r\nexport function highlightCode(code: string, _language: string) {\r\n  return callbackify(importPrism(_language), (imported) => {\r\n    if(!imported) {\r\n      console.error(`Language \"${_language}\" is not supported`, code);\r\n      return;\r\n    }\r\n\r\n    const {prism, language} = imported;\r\n    const html: string = prism.highlight(code, prism.languages[language], language);\r\n    return html;\r\n  });\r\n}\r\n\r\n// console.log(Object.keys(LanguageMap).map((key) => LanguageMap[key][0]));\r\n","export default function findIndexFrom<T>(\r\n  arr: T[],\r\n  predicate: (item: T, idx: number, arr: T[]) => boolean,\r\n  i: number = 0\r\n): number {\r\n  for(let length = arr.length; i < length; ++i) {\r\n    if(predicate(arr[i], i, arr)) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {EMOJI_VERSION} from '../../environment/emojiVersionsSupport';\r\nimport {SITE_HASHTAGS} from '.';\r\nimport {EmojiVersions} from '../../config/emoji';\r\nimport IS_EMOJI_SUPPORTED from '../../environment/emojiSupport';\r\nimport buildURLHash from '../../helpers/buildURLHash';\r\nimport copy from '../../helpers/object/copy';\r\nimport encodeEntities from '../../helpers/string/encodeEntities';\r\nimport {MessageEntity} from '../../layer';\r\nimport encodeSpoiler from './encodeSpoiler';\r\nimport parseEntities from './parseEntities';\r\nimport setBlankToAnchor from './setBlankToAnchor';\r\nimport wrapUrl from './wrapUrl';\r\nimport EMOJI_VERSIONS_SUPPORTED from '../../environment/emojiVersionsSupport';\r\nimport {CLICK_EVENT_NAME} from '../../helpers/dom/clickEvent';\r\nimport IS_CUSTOM_EMOJI_SUPPORTED from '../../environment/customEmojiSupport';\r\nimport BOM from '../../helpers/string/bom';\r\nimport wrapTelegramUrlToAnchor from './wrapTelegramUrlToAnchor';\r\nimport {IS_FIREFOX} from '../../environment/userAgent';\r\nimport CustomEmojiElement, {CustomEmojiElements} from '../customEmoji/element';\r\nimport {CustomEmojiRendererElementOptions, CustomEmojiRendererElement} from '../customEmoji/renderer';\r\nimport {setDirection} from '../../helpers/dom/setInnerHTML';\r\nimport {i18n} from '../langPack';\r\nimport Icon from '../../components/icon';\r\nimport {CodeLanguageAliases, highlightCode} from '../../codeLanguages';\r\nimport callbackify from '../../helpers/callbackify';\r\nimport findIndexFrom from '../../helpers/array/findIndexFrom';\r\n\r\nexport type WrapRichTextOptions = Partial<{\r\n  entities: MessageEntity[],\r\n  contextSite: string,\r\n  highlightUsername: string,\r\n  noLinks: boolean,\r\n  noLinebreaks: boolean,\r\n  noCommands: boolean,\r\n  wrappingDraft: boolean,\r\n  // mustWrapEmoji: boolean,\r\n  fromBot: boolean,\r\n  noTextFormat: boolean,\r\n  passEntities: Partial<{\r\n    [_ in MessageEntity['_']]: boolean\r\n  }>,\r\n  maxMediaTimestamp: number,\r\n  noEncoding: boolean,\r\n  isSelectable: boolean,\r\n  whitelistedDomains?: string[],\r\n  passMaskedLinks?: boolean,\r\n\r\n  contextHashtag?: string,\r\n\r\n  // ! recursive, do not provide\r\n  nasty?: {\r\n    i: number,\r\n    usedLength: number,\r\n    text: string,\r\n    lastEntity?: MessageEntity\r\n  },\r\n  voodoo?: boolean,\r\n  customEmojis?: Map<DocId, CustomEmojiElements>,\r\n  customWraps?: Set<HTMLElement>,\r\n  ignoreNextIndex?: number,\r\n  doubleLinebreak?: number\r\n}> & CustomEmojiRendererElementOptions;\r\n\r\nfunction createMarkupFormatting(formatting: string) {\r\n  const element = document.createElement('span');\r\n  element.style.fontFamily = 'markup-' + formatting;\r\n  element.classList.add('is-markup');\r\n  element.dataset.markup = formatting;\r\n  return element;\r\n}\r\n\r\n/**\r\n * * Expecting correctly sorted nested entities (RichTextProcessor.sortEntities)\r\n */\r\nexport default function wrapRichText(text: string, options: WrapRichTextOptions = {}) {\r\n  const fragment = document.createDocumentFragment();\r\n  if(!text) {\r\n    return fragment;\r\n  }\r\n\r\n  const nasty = options.nasty ??= {\r\n    i: 0,\r\n    usedLength: 0,\r\n    text\r\n  };\r\n\r\n  const wrapSomething = (wrapElement: HTMLElement, noFiller?: boolean) => {\r\n    const element = document.createElement('span');\r\n    // element.append(BOM, a, BOM);\r\n    if(options.wrappingDraft) {\r\n      element.contentEditable = 'false';\r\n    }\r\n    // element.style.display = 'inline-block';\r\n    element.classList.add('input-something');\r\n    element.append(/* BOM,  */wrapElement);\r\n\r\n    (lastElement || fragment).append(element);\r\n\r\n    wrapElement.classList.add('input-selectable');\r\n    // if(wrapElement instanceof HTMLImageElement) {\r\n    //   element.prepend(f());\r\n    // } else {\r\n    !noFiller && wrapElement.append(createCustomFiller(true));\r\n    // }\r\n\r\n    customWraps.add(element);\r\n\r\n    return element;\r\n  };\r\n\r\n  options.isSelectable ||= options.wrappingDraft;\r\n\r\n  const customEmojis = options.customEmojis ??= new Map() as Map<DocId, CustomEmojiElements>;\r\n  const customWraps = options.customWraps ??= new Set();\r\n\r\n  const entities = options.entities ??= parseEntities(nasty.text);\r\n\r\n  const passEntities = options.passEntities ??= {};\r\n  const contextSite = options.contextSite ??= 'Telegram';\r\n  const contextExternal = contextSite !== 'Telegram';\r\n\r\n  const textLength = nasty.text.length;\r\n  const length = entities.length;\r\n  let lastElement: HTMLElement | DocumentFragment;\r\n  for(; nasty.i < length; ++nasty.i) {\r\n    let entity = entities[nasty.i];\r\n\r\n    // * check whether text was sliced\r\n    // TODO: consider about moving it to other function\r\n    if(entity.offset >= textLength) {\r\n      if(entity._ !== 'messageEntityCaret') { // * can set caret to the end\r\n        continue;\r\n      }\r\n    } else if((entity.offset + entity.length) > textLength) {\r\n      entity = copy(entity);\r\n      // entity.length = entity.offset + entity.length - textLength;\r\n      entity.length = textLength - entity.offset;\r\n    }\r\n\r\n    if(entity.length) {\r\n      nasty.lastEntity = entity;\r\n    }\r\n\r\n    let nextEntity = entities[nasty.i + 1];\r\n\r\n    const startOffset = entity.offset;\r\n    const endOffset = startOffset + entity.length;\r\n    const endPartOffset = Math.min(endOffset, nextEntity?.offset ?? 0xFFFF);\r\n    const fullEntityText = nasty.text.slice(startOffset, endOffset);\r\n    const sliced = nasty.text.slice(startOffset, endPartOffset);\r\n    let partText = sliced;\r\n\r\n    if(nasty.usedLength < startOffset) {\r\n      (lastElement || fragment).append(nasty.text.slice(nasty.usedLength, startOffset));\r\n    }\r\n\r\n    if(lastElement) {\r\n      lastElement = fragment;\r\n    }\r\n\r\n    nasty.usedLength = endPartOffset;\r\n\r\n    let element: HTMLElement,\r\n      property: 'textContent' | 'alt' = 'textContent',\r\n      usedText = false,\r\n      processingBlockElement = false;\r\n    switch(entity._) {\r\n      case 'messageEntityBold': {\r\n        if(!options.noTextFormat) {\r\n          if(options.wrappingDraft) {\r\n            element = createMarkupFormatting('bold');\r\n          } else {\r\n            element = document.createElement('strong');\r\n          }\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityItalic': {\r\n        if(!options.noTextFormat) {\r\n          if(options.wrappingDraft) {\r\n            element = createMarkupFormatting('italic');\r\n          } else {\r\n            element = document.createElement('em');\r\n          }\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityStrike': {\r\n        if(options.wrappingDraft) {\r\n          element = createMarkupFormatting('strikethrough');\r\n          // element = document.createElement('span');\r\n          // const styleName = IS_SAFARI ? 'text-decoration' : 'text-decoration-line';\r\n          // element.style.cssText = `${styleName}: line-through;`;\r\n          // element.style.fontFamily = 'markup-strikethrough';\r\n        } else/*  if(!options.noTextFormat) */ {\r\n          element = document.createElement('del');\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityUnderline': {\r\n        if(options.wrappingDraft) {\r\n          element = createMarkupFormatting('underline');\r\n          // element = document.createElement('span');\r\n          // const styleName = IS_SAFARI ? 'text-decoration' : 'text-decoration-line';\r\n          // element.style.cssText = `${styleName}: underline;`;\r\n          // element.style.fontFamily = 'markup-underline';\r\n        } else if(!options.noTextFormat) {\r\n          element = document.createElement('u');\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityPre':\r\n      case 'messageEntityCode': {\r\n        const entityLanguage = (entity as MessageEntity.messageEntityPre).language;\r\n        if(options.wrappingDraft) {\r\n          element = createMarkupFormatting('monospace');\r\n          if(entityLanguage) {\r\n            element.dataset.language = entityLanguage;\r\n          }\r\n          // element = document.createElement('span');\r\n          // element.style.fontFamily = 'var(--font-monospace)';\r\n          // element.style.fontFamily = 'markup-monospace';\r\n        } else if(entity._ === 'messageEntityPre' && !options.noTextFormat) {\r\n          const container = document.createElement('pre');\r\n          const content = document.createElement('div');\r\n          content.classList.add('code-content');\r\n          element = document.createElement('code');\r\n          element.classList.add('code-code');\r\n          fragment.append(container);\r\n          content.append(element);\r\n\r\n          container.classList.add('quote-like', 'quote-like-border', 'code');\r\n\r\n          const languageName = CodeLanguageAliases[entityLanguage.toLowerCase()];\r\n\r\n          const header = document.createElement('div');\r\n          header.classList.add('code-header');\r\n          const headerName = document.createElement('span');\r\n          headerName.classList.add('code-header-name');\r\n          headerName.append(languageName || i18n('CopyCode'));\r\n          const headerWrapButton = Icon('menu', 'code-header-button', 'code-header-toggle-wrap');\r\n          header.append(headerName, headerWrapButton, Icon('copy', 'code-header-button', 'code-header-copy'));\r\n\r\n          container.append(header, content);\r\n\r\n          const result = languageName && highlightCode(fullEntityText, languageName);\r\n          result && callbackify(result, (html) => {\r\n            if(html) {\r\n              element.innerHTML = html;\r\n            }\r\n          });\r\n\r\n          usedText = true;\r\n          if(!result || result instanceof Promise) {\r\n            element.textContent = fullEntityText;\r\n          }\r\n\r\n          let lastInnerEntityIndex = findIndexFrom(entities, (n) => n.offset >= endOffset, nasty.i + 1);\r\n          if(lastInnerEntityIndex === -1) lastInnerEntityIndex = entities.length - 1;\r\n          else lastInnerEntityIndex -= 1;\r\n          nasty.i = lastInnerEntityIndex;\r\n          nasty.usedLength = endOffset;\r\n          nasty.lastEntity = entities[lastInnerEntityIndex];\r\n          nextEntity = undefined;\r\n          processingBlockElement = true;\r\n        } else if(!options.noTextFormat) {\r\n          element = document.createElement('code');\r\n          element.classList.add('monospace-text');\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      // case 'messageEntityPre': {\r\n      //   if(options.wrappingDraft) {\r\n      //     element = document.createElement('span');\r\n      //     element.style.fontFamily = 'var(--font-monospace)';\r\n      //   } else if(!options.noTextFormat) {\r\n      //     element = document.createElement('pre');\r\n      //     const inner = document.createElement('code');\r\n      //     if(entity.language) {\r\n      //       inner.className = 'language-' + entity.language;\r\n      //       inner.textContent = entityText;\r\n      //       usedText = true;\r\n      //     }\r\n      //   }\r\n\r\n      //   break;\r\n      // }\r\n\r\n      case 'messageEntityHighlight': {\r\n        element = document.createElement('i');\r\n        element.className = 'text-highlight';\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityBotCommand': {\r\n        // if(!(options.noLinks || options.noCommands || contextExternal)/*  && !entity.unsafe */) {\r\n        if(!options.noLinks && passEntities[entity._]) {\r\n          let command = fullEntityText.slice(1);\r\n          let bot: string | boolean;\r\n          let atPos: number;\r\n          if((atPos = command.indexOf('@')) !== -1) {\r\n            bot = command.slice(atPos + 1);\r\n            command = command.slice(0, atPos);\r\n          } else {\r\n            bot = options.fromBot;\r\n          }\r\n\r\n          element = document.createElement('a');\r\n          (element as HTMLAnchorElement).href = encodeEntities('tg://bot_command?command=' + encodeURIComponent(command) + (bot ? '&bot=' + encodeURIComponent(bot) : ''));\r\n          if(!contextExternal) {\r\n            element.setAttribute('onclick', 'execBotCommand(this)');\r\n          }\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityCustomEmoji': {\r\n        if(!IS_CUSTOM_EMOJI_SUPPORTED) {\r\n          break;\r\n        }\r\n\r\n        while(nextEntity?._ === 'messageEntityEmoji' && nextEntity.offset < endOffset) {\r\n          ++nasty.i;\r\n          nasty.lastEntity = nextEntity;\r\n          nasty.usedLength += nextEntity.length;\r\n          nextEntity = entities[nasty.i + 1];\r\n        }\r\n\r\n        const customEmojiElement = element = CustomEmojiElement.create(entity.document_id);\r\n        const {docId} = customEmojiElement;\r\n        let set = customEmojis.get(docId);\r\n        if(!set) customEmojis.set(docId, set = new Set());\r\n        set.add(customEmojiElement);\r\n        customEmojiElement.dataset.stickerEmoji = fullEntityText;\r\n\r\n        if(options.wrappingDraft) {\r\n          element = document.createElement('img');\r\n          (element as HTMLImageElement).alt = fullEntityText;\r\n          for(const i in customEmojiElement.dataset) {\r\n            element.dataset[i] = customEmojiElement.dataset[i];\r\n          }\r\n          (element as any).customEmojiElement = customEmojiElement;\r\n          customEmojiElement.placeholder = element as HTMLImageElement;\r\n          element.classList.add('custom-emoji-placeholder');\r\n          (element as HTMLImageElement).src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC';\r\n          property = 'alt';\r\n          break;\r\n        }\r\n\r\n        if(options.isSelectable) {\r\n          // const s = document.createElement('span');\r\n          // s.append(fullEntityText);\r\n          // element.append(s);\r\n          // element.textContent = fullEntityText;\r\n          // element.textContent = 'a';\r\n          // element.contentEditable = 'false';\r\n\r\n          // const x = f();\r\n          // x.style.display = 'inline-block';\r\n          // x.contentEditable = 'false';\r\n          // (lastElement || fragment).append(BOM);\r\n          // (lastElement || fragment).append(x);\r\n\r\n          element = wrapSomething(element, !!options.customEmojiRenderer);\r\n\r\n          // const a = element;\r\n          // element = document.createElement('span');\r\n          // element.append(BOM, a, BOM);\r\n          // element.contentEditable = 'false';\r\n        }\r\n\r\n        property = 'alt';\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityEmoji': {\r\n        let isSupported = IS_EMOJI_SUPPORTED;\r\n        if(isSupported) {\r\n          for(const version in EmojiVersions) {\r\n            if(version) {\r\n              const emojiData = EmojiVersions[version as EMOJI_VERSION];\r\n              if(emojiData.hasOwnProperty(entity.unicode) && !EMOJI_VERSIONS_SUPPORTED[version as EMOJI_VERSION]) {\r\n                isSupported = false;\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        // if(!(options.wrappingDraft && isSupported)) { // * fix safari emoji\r\n        if(!isSupported) { // no wrapping needed\r\n          // if(isSupported) { // ! contenteditable=\"false\" нужен для поля ввода, иначе там будет меняться шрифт в Safari, или же рендерить смайлик напрямую, без контейнера\r\n          //   insertPart(entity, '<span class=\"emoji\">', '</span>');\r\n          // } else {\r\n          element = document.createElement('img');\r\n          (element as HTMLImageElement).src = `assets/img/emoji/${entity.unicode}.png`;\r\n          property = 'alt';\r\n          element.className = 'emoji emoji-image';\r\n\r\n          // if(options.isSelectable) {\r\n          //   usedText = true;\r\n          //   (element as HTMLImageElement).alt = partText;\r\n          //   element = wrapSomething(element);\r\n          // }\r\n\r\n          // const a = element;\r\n          // a.contentEditable = 'false';\r\n          // element = document.createElement('span');\r\n          // element.append(a);\r\n          // element.contentEditable = 'false';\r\n          // }\r\n        // } else if(options.mustWrapEmoji) {\r\n        } else if(!options.wrappingDraft) {\r\n          element = document.createElement('span');\r\n          element.className = 'emoji emoji-native';\r\n        }/*  else if(!IS_SAFARI) {\r\n          insertPart(entity, '<span class=\"emoji\" contenteditable=\"false\">', '</span>');\r\n        } */\r\n        /* if(!isSupported) {\r\n          insertPart(entity, `<img src=\"assets/img/emoji/${entity.unicode}.png\" alt=\"`, `\" class=\"emoji\">`);\r\n        } */\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityCaret': {\r\n        element = document.createElement('span');\r\n        element.className = 'composer-sel';\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityLinebreak': {\r\n        // slice linebreaks before and after quote\r\n        if(options.ignoreNextIndex === nasty.i || (options.wrappingDraft && nextEntity?._ === 'messageEntityBlockquote' && nextEntity.offset === endOffset)) {\r\n          usedText = true;\r\n        } else if(options.wrappingDraft && IS_FIREFOX) {\r\n          element = document.createElement('br');\r\n          usedText = true;\r\n        }\r\n\r\n        if(options.doubleLinebreak === nasty.i) {\r\n          options.doubleLinebreak = undefined;\r\n          (element || fragment).append('\\n\\n');\r\n          usedText = true;\r\n        }\r\n        // if(options.noLinebreaks) {\r\n        //   insertPart(entity, ' ');\r\n        // } else {\r\n        //   insertPart(entity, '<br/>');\r\n        // }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityUrl':\r\n      case 'messageEntityTextUrl': {\r\n        if(!(options.noLinks && !passEntities[entity._])) {\r\n          // let inner: string;\r\n          let url: string = (entity as MessageEntity.messageEntityTextUrl).url || fullEntityText;\r\n          let masked = false;\r\n          let onclick: string;\r\n\r\n          const wrapped = wrapUrl(url, true);\r\n          url = wrapped.url;\r\n          onclick = wrapped.onclick;\r\n\r\n          if(options.whitelistedDomains) {\r\n            try {\r\n              const hostname = new URL(url).hostname;\r\n              if(!options.whitelistedDomains.includes(hostname)) {\r\n                break;\r\n              }\r\n            } catch(err) {\r\n              break;\r\n            }\r\n          }\r\n\r\n          if(entity._ === 'messageEntityTextUrl') {\r\n            if(nextEntity?._ === 'messageEntityUrl' &&\r\n              nextEntity.length === entity.length &&\r\n              nextEntity.offset === entity.offset) {\r\n              nasty.lastEntity = nextEntity;\r\n              ++nasty.i;\r\n            }\r\n\r\n            if(url !== fullEntityText) {\r\n              masked = true;\r\n            }\r\n          } else {\r\n            // inner = encodeEntities(replaceUrlEncodings(entityText));\r\n          }\r\n\r\n          const currentContext = !!onclick;\r\n          if(!onclick && masked && !currentContext && !options.passMaskedLinks) {\r\n            onclick = 'showMaskedAlert';\r\n          }\r\n\r\n          if(options.wrappingDraft) {\r\n            onclick = undefined;\r\n          }\r\n\r\n          const href = (currentContext || typeof electronHelpers === 'undefined') ?\r\n            url :\r\n            `javascript:electronHelpers.openExternal('${url}');`;\r\n\r\n          element = document.createElement('a');\r\n          element.className = 'anchor-url';\r\n          (element as HTMLAnchorElement).href = href;\r\n\r\n          if(!(currentContext || typeof electronHelpers !== 'undefined')) {\r\n            setBlankToAnchor(element as HTMLAnchorElement);\r\n          }\r\n\r\n          if(onclick) {\r\n            element.setAttribute('onclick', onclick + '(this)');\r\n          }\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityEmail': {\r\n        if(!options.noLinks) {\r\n          element = document.createElement('a');\r\n          (element as HTMLAnchorElement).href = encodeEntities('mailto:' + fullEntityText);\r\n          setBlankToAnchor(element as HTMLAnchorElement);\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityHashtag': {\r\n        const contextUrl = !options.noLinks && SITE_HASHTAGS[contextSite];\r\n        if(contextUrl) {\r\n          const hashtag = fullEntityText.slice(1);\r\n          element = document.createElement('a');\r\n          element.className = 'anchor-hashtag';\r\n          (element as HTMLAnchorElement).href = contextUrl.replace('{1}', encodeURIComponent(hashtag));\r\n          if(contextExternal) {\r\n            setBlankToAnchor(element as HTMLAnchorElement);\r\n          } else {\r\n            element.setAttribute('onclick', 'searchByHashtag(this)');\r\n          }\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityMentionName': {\r\n        if(!(options.noLinks && !passEntities[entity._])) {\r\n          element = document.createElement('a');\r\n          (element as HTMLAnchorElement).href = buildURLHash('' + entity.user_id);\r\n          element.className = 'follow';\r\n          element.dataset.follow = '' + entity.user_id;\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityMention': {\r\n        // const contextUrl = !options.noLinks && siteMentions[contextSite];\r\n        if(!options.noLinks) {\r\n          const username = fullEntityText.slice(1);\r\n\r\n          element = wrapTelegramUrlToAnchor('t.me/' + username);\r\n          element.className = 'mention';\r\n\r\n          // insertPart(entity, `<a class=\"mention\" href=\"${contextUrl.replace('{1}', encodeURIComponent(username))}\"${contextExternal ? ' target=\"_blank\" rel=\"noopener noreferrer\"' : ''}>`, '</a>');\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntitySpoiler': {\r\n        if(options.noTextFormat) {\r\n          const encoded = encodeSpoiler(nasty.text, entity);\r\n          nasty.text = encoded.text;\r\n          partText = encoded.entityText;\r\n          if(endPartOffset !== endOffset) {\r\n            nasty.usedLength += endOffset - endPartOffset;\r\n          }\r\n          let n: MessageEntity;\r\n          for(; n = entities[nasty.i + 1], n && n.offset < endOffset;) {\r\n            // nasty.usedLength += n.length;\r\n            ++nasty.i;\r\n            nasty.lastEntity = n;\r\n            nextEntity = entities[nasty.i + 1];\r\n          }\r\n        } else if(options.wrappingDraft) {\r\n          element = createMarkupFormatting('spoiler');\r\n          // element = document.createElement('span');\r\n          // element.style.fontFamily = 'spoiler';\r\n          // element.style.fontFamily = 'markup-spoiler';\r\n        } else {\r\n          const container = document.createElement('span');\r\n          container.className = 'spoiler';\r\n          element = document.createElement('span');\r\n          element.className = 'spoiler-text';\r\n          element.textContent = partText;\r\n          usedText = true;\r\n          container.append(element);\r\n          fragment.append(container);\r\n\r\n          container[`on${CLICK_EVENT_NAME}`] = (window as any).onSpoilerClick;\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityTimestamp': {\r\n        if(!options.maxMediaTimestamp || entity.time > options.maxMediaTimestamp) {\r\n          break;\r\n        }\r\n\r\n        element = document.createElement('a');\r\n        element.classList.add('timestamp');\r\n        element.dataset.timestamp = '' + entity.time;\r\n        (element as HTMLAnchorElement).href = '#';\r\n        element.setAttribute('onclick', 'setMediaTimestamp(this)');\r\n\r\n        if(options.maxMediaTimestamp === Infinity) {\r\n          element.classList.add('is-disabled');\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      case 'messageEntityBlockquote': {\r\n        if(options.noTextFormat) {\r\n          break;\r\n        }\r\n\r\n        if(options.wrappingDraft) {\r\n          element = createMarkupFormatting('quote');\r\n        } else {\r\n          element = document.createElement('blockquote');\r\n          element.classList.add('quote');\r\n        }\r\n\r\n        element.classList.add('quote-like', 'quote-like-border', 'quote-like-icon');\r\n        setDirection(element);\r\n\r\n        processingBlockElement = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if(processingBlockElement) {\r\n      let foundNextLinebreakIndex = -1;\r\n      for(let i = nasty.i; i < length; ++i) {\r\n        const n = entities[i];\r\n        if(n._ === 'messageEntityLinebreak' && n.offset >= endOffset) {\r\n          foundNextLinebreakIndex = i;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if(foundNextLinebreakIndex !== -1 && nasty.text.slice(endOffset, entities[foundNextLinebreakIndex].offset).trim()) {\r\n        foundNextLinebreakIndex = -1;\r\n      }\r\n\r\n      if(!options.wrappingDraft && endOffset < nasty.text.length) {\r\n        // * ignore inner linebreak if found and double next linebreak\r\n        if(!element.parentElement) {\r\n          const container = document.createElement('div');\r\n          container.append(element);\r\n          fragment.append(container);\r\n        }\r\n\r\n        if(nasty.text[endOffset - 1] === '\\n') {\r\n          let lastInnerLinebreakIndex = -1;\r\n          for(let i = nasty.i; i < length; ++i) {\r\n            const n = entities[i];\r\n            if(n.offset >= endOffset) {\r\n              break;\r\n            }\r\n\r\n            if(n._ === 'messageEntityLinebreak') {\r\n              lastInnerLinebreakIndex = i;\r\n            }\r\n          }\r\n\r\n          if(lastInnerLinebreakIndex !== -1) {\r\n            options.ignoreNextIndex = lastInnerLinebreakIndex;\r\n          }\r\n        } else if(foundNextLinebreakIndex !== -1) {\r\n          options.ignoreNextIndex = foundNextLinebreakIndex;\r\n        }\r\n\r\n        // if(nasty.text[endOffset - 1] === '\\n' &&\r\n        //   foundNextLinebreakIndex !== -1 &&\r\n        //   nasty.text[endPartOffset + 1] === '\\n') {\r\n        //   options.ignoreNextIndex = foundNextLinebreakIndex - 1;\r\n        //   options.doubleLinebreak = foundNextLinebreakIndex;\r\n        // }\r\n      }\r\n\r\n      if(options.wrappingDraft && foundNextLinebreakIndex !== -1) {\r\n        options.ignoreNextIndex = foundNextLinebreakIndex;\r\n      }\r\n\r\n      // if(!options.wrappingDraft) {\r\n      //   const i = Icon('quote', 'quote-icon');\r\n      //   element.textContent = partText;\r\n      //   usedText = true;\r\n      //   element.prepend(i);\r\n      // } else {\r\n      //   element.classList.add('quote-use-before');\r\n      // }\r\n    }\r\n\r\n    if(!usedText && partText) {\r\n      if(element) {\r\n        // @ts-ignore\r\n        element[property] = partText;\r\n      } else {\r\n        (element || fragment).append(partText);\r\n      }\r\n    }\r\n\r\n    if(element && !element.parentNode) {\r\n      (lastElement || fragment).append(element);\r\n    }\r\n\r\n    while(nextEntity && nextEntity.offset < endOffset) {\r\n      ++nasty.i;\r\n\r\n      (element || fragment).append(wrapRichText(nasty.text, {\r\n        ...options,\r\n        voodoo: true\r\n      }));\r\n\r\n      nextEntity = entities[nasty.i + 1];\r\n    }\r\n\r\n    // if(!element?.parentNode) {\r\n    //   (lastElement || fragment).append(element ?? partText);\r\n    // }\r\n\r\n    if(nasty.usedLength <= endOffset) {\r\n      if(nasty.usedLength < endOffset) {\r\n        (element || fragment).append(nasty.text.slice(nasty.usedLength, endOffset));\r\n        nasty.usedLength = endOffset;\r\n      }\r\n\r\n      lastElement = fragment;\r\n      nasty.lastEntity = undefined;\r\n    } else if(entity.length > partText.length && element) {\r\n      lastElement = element;\r\n    } else {\r\n      lastElement = fragment;\r\n    }\r\n\r\n    if(options.voodoo) {\r\n      return fragment;\r\n    }\r\n  }\r\n\r\n  if(nasty.lastEntity) {\r\n    nasty.usedLength = nasty.lastEntity.offset + nasty.lastEntity.length;\r\n  }\r\n\r\n  if(nasty.usedLength < textLength) {\r\n    (lastElement || fragment).append(nasty.text.slice(nasty.usedLength));\r\n  }\r\n\r\n  if((!options.wrappingDraft || options.customEmojiRenderer) && customEmojis.size) {\r\n    let renderer = options.customEmojiRenderer;\r\n    if(!renderer) {\r\n      renderer = CustomEmojiRendererElement.create(options);\r\n      fragment.prepend(renderer);\r\n    }\r\n\r\n    const loadPromise = renderer.add({\r\n      addCustomEmojis: customEmojis,\r\n      lazyLoadQueue: options.lazyLoadQueue,\r\n      onlyThumb: options.wrappingDraft\r\n    });\r\n    options.loadPromises?.push(loadPromise);\r\n    // recordPromise(loadPromise, 'render emojis: ' + docIds.length);\r\n  }\r\n\r\n  if(customWraps.size) {\r\n    insertCustomFillers(customWraps);\r\n  }\r\n\r\n  fragment.normalize();\r\n\r\n  return fragment;\r\n}\r\n\r\nexport const createCustomFiller = (notFiller?: boolean) => {\r\n  const x = document.createElement('span');\r\n  x.classList.add(notFiller ? 'input-filler2' : 'input-filler');\r\n  x.textContent = BOM;\r\n  return x;\r\n};\r\n\r\nexport function isCustomFillerNeededBySiblingNode(node: ChildNode) {\r\n  if(\r\n    // !node?.textContent ||\r\n    // node.textContent.endsWith('\\n') ||\r\n    node?.textContent !== BOM ||\r\n    (node as HTMLElement)?.getAttribute?.('contenteditable') === 'false'\r\n  ) {\r\n    // if(!node || (node as HTMLElement).firstElementChild || node.textContent.endsWith('\\n')) {\r\n    if(!node || node.textContent !== BOM || (node as HTMLElement).firstElementChild) {\r\n      return 2;\r\n    } else if(node.nodeType === node.ELEMENT_NODE) {\r\n      return 1;\r\n    }/*  else if(node.nodeType === node.TEXT_NODE && !node.nodeValue) {\r\n      (node as CharacterData).insertData(0, BOM);\r\n    } */\r\n  }\r\n\r\n  return 0;\r\n}\r\n\r\nexport function insertCustomFillers(elements: Iterable<HTMLElement>) {\r\n  const check = (element: HTMLElement, node: ChildNode, method: 'before' | 'after') => {\r\n    const needed = isCustomFillerNeededBySiblingNode(node);\r\n    if(needed === 2) {\r\n      element[method](createCustomFiller());\r\n    } else if(needed === 1) {\r\n      node.appendChild(document.createTextNode(BOM));\r\n    }\r\n  };\r\n\r\n  for(const element of elements) {\r\n    const {previousSibling, nextSibling} = element;\r\n    check(element, previousSibling, 'before');\r\n    check(element, nextSibling, 'after');\r\n  }\r\n}\r\n\r\n(window as any).wrapRichText = wrapRichText;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type EventListenerBase from './eventListenerBase';\r\n\r\nexport type Listener = {\r\n  element: ListenerElement,\r\n  event: ListenerEvent,\r\n  callback: ListenerCallback,\r\n  options?: ListenerOptions,\r\n\r\n  onceFired?: true, // will be set only when options.once is set\r\n  onceCallback?: () => void,\r\n};\r\n\r\nexport type ListenerElement = Window | Document | HTMLElement | Element | EventListenerBase<any>;\r\nexport type ListenerEvent = string;\r\nexport type ListenerCallback = Function;\r\nexport type ListenerOptions = AddEventListenerOptions;\r\n\r\n/* const originalAddEventListener = HTMLElement.prototype.addEventListener;\r\nHTMLElement.prototype.addEventListener = function(this, name: string, callback: EventListenerOrEventListenerObject, options: AddEventListenerOptions) {\r\n  console.log('nu zdarova', name);\r\n  originalAddEventListener.call(this, name, callback, options);\r\n\r\n  if(options?.ls) {\r\n    return options.ls.addFromElement(this, name, callback as any, options);\r\n  }\r\n}; */\r\n\r\nexport default class ListenerSetter {\r\n  private listeners: Set<Listener> = new Set();\r\n\r\n  public add<T extends ListenerElement>(element: T): T['addEventListener'] {\r\n    return ((event: string, callback: Function, options: ListenerOptions) => {\r\n      const listener: Listener = {element, event, callback, options};\r\n      this.addManual(listener);\r\n      return listener;\r\n    }) as any;\r\n  }\r\n\r\n  /* public addFromElement<T extends ListenerElement>(element: T, event: ListenerEvent, callback: ListenerCallback, options: ListenerOptions) {\r\n    const listener: Listener = {element, event, callback, options};\r\n    this.addManual(listener);\r\n    return listener;\r\n  } */\r\n\r\n  public addManual(listener: Listener) {\r\n    // @ts-ignore\r\n    listener.element.addEventListener(listener.event, listener.callback, listener.options);\r\n\r\n    if(listener.options?.once) { // remove listener when its called\r\n      listener.onceCallback = () => {\r\n        this.remove(listener);\r\n        listener.onceFired = true;\r\n      };\r\n\r\n      // @ts-ignore\r\n      listener.element.addEventListener(listener.event, listener.onceCallback, listener.options);\r\n    }\r\n\r\n    this.listeners.add(listener);\r\n  }\r\n\r\n  public remove(listener: Listener) {\r\n    if(!listener.onceFired) {\r\n      // @ts-ignore\r\n      listener.element.removeEventListener(listener.event, listener.callback, listener.options);\r\n\r\n      if(listener.onceCallback) {\r\n        // @ts-ignore\r\n        listener.element.removeEventListener(listener.event, listener.onceCallback, listener.options);\r\n      }\r\n    }\r\n\r\n    this.listeners.delete(listener);\r\n  }\r\n\r\n  public removeManual<T extends ListenerElement>(\r\n    element: T,\r\n    event: ListenerEvent,\r\n    callback: ListenerCallback,\r\n    options?: ListenerOptions\r\n  ) {\r\n    let listener: Listener;\r\n    for(const _listener of this.listeners) {\r\n      if(_listener.element === element &&\r\n        _listener.event === event &&\r\n        _listener.callback === callback &&\r\n        _listener.options === options) {\r\n        listener = _listener;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if(listener) {\r\n      this.remove(listener);\r\n    }\r\n  }\r\n\r\n  public removeAll() {\r\n    this.listeners.forEach((listener) => {\r\n      this.remove(listener);\r\n    });\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport clamp from '../number/clamp';\r\nimport findUpAsChild from './findUpAsChild';\r\nimport whichChild from './whichChild';\r\n\r\nexport default function compareNodes(node1: ChildNode, node1Offset: number, node2: ChildNode, node2Offset: number) {\r\n  let diff: number;\r\n  if(node1 === node2) {\r\n    diff = node1Offset - node2Offset;\r\n  } else if(node1.parentElement === node2.parentElement) {\r\n    diff = whichChild(node1, true) - whichChild(node2, true);\r\n  } else {\r\n    const parents: HTMLElement[] = [];\r\n    let parentElement = node1.parentElement;\r\n    do {\r\n      parents.push(parentElement);\r\n    } while(parentElement = parentElement.parentElement);\r\n\r\n    parentElement = node2.parentElement;\r\n    do {\r\n      if(parents.includes(parentElement)) {\r\n        break;\r\n      }\r\n    } while(parentElement = parentElement.parentElement);\r\n\r\n    const commonAncestorContainer = parentElement;\r\n    // const range = document.createRange();\r\n    // range.setStart(node1, 0);\r\n    // range.setEnd(node2, node2.textContent.length);\r\n    // const {commonAncestorContainer} = range;\r\n    node1 = findUpAsChild(node1 as HTMLElement, commonAncestorContainer as HTMLElement);\r\n    node2 = findUpAsChild(node2 as HTMLElement, commonAncestorContainer as HTMLElement);\r\n    diff = whichChild(node1, true) - whichChild(node2, true);\r\n  }\r\n\r\n  return clamp(diff, -1, 1);\r\n}\r\n\r\n(window as any).compareNodes = compareNodes;\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {IS_FIREFOX} from '../../environment/userAgent';\r\nimport {logger} from '../../lib/logger';\r\nimport {isCustomFillerNeededBySiblingNode} from '../../lib/richTextProcessor/wrapRichText';\r\nimport ListenerSetter from '../listenerSetter';\r\nimport BOM from '../string/bom';\r\nimport compareNodes from './compareNodes';\r\nimport getCaretPosNew from './getCaretPosNew';\r\nimport placeCaretAtEnd from './placeCaretAtEnd';\r\nimport whichChild from './whichChild';\r\n\r\nconst NOT_ONLY_BOMS_REG_EXP = new RegExp(`[^${BOM}]`);\r\n\r\nexport const USING_BOMS = false;\r\n\r\nexport default class RichInputHandler {\r\n  private static INSTANCE: RichInputHandler;\r\n\r\n  private listenerSetter: ListenerSetter;\r\n\r\n  private lastNode: Node;\r\n  private lastOffset: number;\r\n  private savedRanges: WeakMap<HTMLElement, Range>;\r\n\r\n  private log: ReturnType<typeof logger>;\r\n\r\n  private inputCaptureCallbacks: Function[];\r\n\r\n  constructor() {\r\n    this.log = logger('RICH-INPUT');\r\n    this.listenerSetter = new ListenerSetter();\r\n    this.savedRanges = new WeakMap();\r\n\r\n    this.listenerSetter.add(document)('selectionchange', this.saveSelectionOnChange);\r\n    if(USING_BOMS) {\r\n      this.listenerSetter.add(document)('focusout', this.onFocusOut);\r\n      this.listenerSetter.add(document)('selectionchange', this.onSelectionChange);\r\n      this.listenerSetter.add(document)('beforeinput', this.onBeforeInput);\r\n      this.listenerSetter.add(document)('keydown', this.onKeyDown, {capture: true});\r\n\r\n      if(IS_FIREFOX) {\r\n        this.inputCaptureCallbacks = [];\r\n        this.listenerSetter.add(document)('input', () => {\r\n          this.inputCaptureCallbacks.forEach((callback) => callback());\r\n          this.inputCaptureCallbacks.length = 0;\r\n        }, {capture: true});\r\n      }\r\n    }\r\n  }\r\n\r\n  private get input() {\r\n    const selection = document.getSelection();\r\n    const {anchorNode: node} = selection;\r\n    if(!node) return;\r\n    return ((node as HTMLElement).closest ? node as HTMLElement : node.parentElement).closest<HTMLElement>('[contenteditable=\"true\"]');\r\n  }\r\n\r\n  private saveRangeForElement(element: HTMLElement) {\r\n    if(element && (element.isContentEditable || element.tagName === 'INPUT')) {\r\n      const selection = document.getSelection();\r\n      if(selection.rangeCount) {\r\n        this.savedRanges.set(element as HTMLElement, document.getSelection().getRangeAt(0));\r\n      }\r\n    }\r\n  }\r\n\r\n  private saveSelectionOnChange = (e: Event) => {\r\n    const element = document.activeElement as HTMLElement; // e.target as HTMLElement;\r\n    this.saveRangeForElement(element);\r\n  };\r\n\r\n  private onFocusOut = (e: FocusEvent) => {\r\n    this.lastNode = this.lastOffset = undefined;\r\n  };\r\n\r\n  private findPreviousSmthIndex(input: HTMLElement, node: ChildNode, something?: NodeListOf<Element>) {\r\n    // node = this.getFiller(node);\r\n    // const childNodes = Array.from(node.parentElement.childNodes);\r\n    // fillerIndex = childNodes.indexOf(node);\r\n    // let smthIndex = -1;\r\n    // for(let i = fillerIndex; i >= 0; --i) {\r\n    //   const node = childNodes[i];\r\n    //   if((node as HTMLElement)?.classList?.contains('input-something')) {\r\n    //     smthIndex = i;\r\n    //     break;\r\n    //   }\r\n    // }\r\n    // return smthIndex;\r\n\r\n    const elements = Array.from(something ?? input.querySelectorAll('.input-something'));\r\n    const index = elements.findIndex((element) => compareNodes(element, 0, node, 0) >= 0);\r\n    return index === -1 ? elements.length - 1 : Math.max(0, index - 1);\r\n  }\r\n\r\n  private superMove(\r\n    input: HTMLElement,\r\n    caret: ReturnType<RichInputHandler['getCaretPosN']>,\r\n    toLeft: boolean,\r\n    fromSelectionChange: boolean\r\n  ) {\r\n    const {node, offset, move} = caret;\r\n    const something = input.querySelectorAll('.input-something');\r\n    const smthIndex = this.findPreviousSmthIndex(input, node, something);\r\n    const r = document.createRange();\r\n    r[toLeft ? 'setEnd' : 'setStart'](node, offset);\r\n\r\n    if(fromSelectionChange) {\r\n      move(toLeft);\r\n    }\r\n\r\n    const c = this.getCaretPosN();\r\n    if(c.node?.nodeValue === BOM && (!fromSelectionChange || node === this.lastNode)) {\r\n      const idx = this.findPreviousSmthIndex(input, c.node, something);\r\n\r\n      let moved = !fromSelectionChange;\r\n\r\n      do {\r\n        const c = this.getCaretPosN();\r\n        const idxidx = this.findPreviousSmthIndex(input, c.node, something);\r\n        r[toLeft ? 'setStart' : 'setEnd'](c.node, c.offset);\r\n        const rangeString = r.toString();\r\n        const onlyBOMs = !NOT_ONLY_BOMS_REG_EXP.test(rangeString);\r\n        this.log('test cursor', rangeString, onlyBOMs, idx, idxidx);\r\n        if(\r\n          onlyBOMs &&\r\n          c.node?.nodeValue === BOM &&\r\n          idxidx === idx &&\r\n          // (idxidx > 1 || c.offset) &&\r\n          // (idxidx < (getFiller(c.node).parentElement.childNodes.length - 2) || c.offset < BOM.length)\r\n          (idxidx || c.offset) &&\r\n          (idxidx < (something.length - 1) || c.offset < BOM.length)\r\n        ) {\r\n          move(toLeft);\r\n          moved = true;\r\n        } else if(!moved) {\r\n          break;\r\n        } else {\r\n          if((!this.getFiller(node as HTMLElement).classList.contains('input-filler-text') && idx !== smthIndex) || c.offset === BOM.length) {\r\n            move(!toLeft);\r\n          }\r\n\r\n          break;\r\n        }\r\n      } while(true);\r\n    }\r\n  }\r\n\r\n  private onSelectionChange = (e: Event) => {\r\n    const {input} = this;\r\n    if(!input) {\r\n      this.setSelectionClassName(document.getSelection());\r\n      return;\r\n    }\r\n\r\n    // return;\r\n\r\n    // this.log('selectionchange', document.getSelection(), document.getSelection().rangeCount && document.getSelection().getRangeAt(0), getCaretPosN());\r\n    // let {node, offset} = getCaretPos(this.messageInput);\r\n\r\n    let caret = this.getCaretPosN();\r\n    do {\r\n      const {node, offset, selection, move} = caret;\r\n\r\n      const nodeValue = node?.nodeValue;\r\n      // if(!nodeValue?.includes(BOM)) {\r\n      if(nodeValue !== BOM || !this.lastNode) {\r\n        break;\r\n      }\r\n\r\n      // node = getFiller(node);\r\n\r\n      // const childIndex = whichChild(getFiller(node), true);\r\n      // let toLeft: boolean;\r\n      // // if(node === lastNode) toLeft = lastOffset >= offset;\r\n      // if(node === lastNode) toLeft = lastOffset > offset;\r\n      // else {\r\n      //   // toLeft = whichChild(getFiller(lastNode)) > childIndex;\r\n      //   toLeft = (lastNode.nodeValue === BOM ? whichChild(getFiller(lastNode), true) : whichChild(findUpAsChild(lastNode as any, getFiller(node).parentElement), true)) > childIndex;\r\n      // }\r\n\r\n      const toLeft = compareNodes(node, offset, this.lastNode as ChildNode, this.lastOffset) < 0;\r\n\r\n      // const childNodes = Array.from(node.parentElement.childNodes);\r\n      // if(toLeft) {\r\n      //   for(let i = childIndex; i >= 0; --i) {\r\n      //     const sibling = childNodes[i];\r\n      //     const {textContent} = sibling;\r\n      //     for()\r\n      //   }\r\n      // }\r\n\r\n      // {\r\n      //   if(toLeft === undefined) {\r\n      //     return;\r\n      //   }\r\n\r\n      //   const selection = window.getSelection();\r\n      //   selection.modify(selection.isCollapsed ? 'move' : 'extend', toLeft ? 'backward' : 'forward', 'character');\r\n      //   return;\r\n      // }\r\n\r\n      // const parent = getFiller(node);\r\n      if(toLeft !== undefined) {\r\n        // let newNode = toLeft ? parent.previousSibling : parent.nextSibling;\r\n        if(selection.isCollapsed) {\r\n          this.superMove(input, caret, toLeft, true);\r\n\r\n          // if(offset === BOM.length) {\r\n          //   newNode = toLeft ? newNode.nextSibling.nextSibling : parent.previousSibling.previousSibling;\r\n          // }\r\n\r\n          // setCaretAt(newNode);\r\n        } else {\r\n          selection.modify(selection.isCollapsed ? 'move' : 'extend', toLeft ? 'backward' : 'forward', 'character');\r\n          // const range = selection.getRangeAt(0);\r\n\r\n          // if(toLeft) {\r\n          //   newNode = parent.previousSibling.previousSibling.firstChild;\r\n          //   const value = newNode.nodeValue;\r\n          //   range.setStart(newNode, value?.length);\r\n          // } else {\r\n          //   newNode = parent.nextSibling.nextSibling.firstChild;\r\n          //   range.setEnd(newNode, 0);\r\n          // }\r\n        }\r\n      }\r\n\r\n      this.log('selectionchange',\r\n        node,\r\n        offset,\r\n        this.lastNode,\r\n        this.lastOffset,\r\n        node === this.lastNode,\r\n        whichChild(this.getFiller(node)),\r\n        whichChild(this.getFiller(this.lastNode)),\r\n        toLeft,\r\n        selection,\r\n        document.getSelection(),\r\n        document.getSelection().getRangeAt(0),\r\n        node?.parentNode,\r\n        this.lastNode?.parentNode\r\n      );\r\n\r\n      caret = this.getCaretPosN();\r\n      this.lastNode = node;\r\n      this.lastOffset = offset;\r\n\r\n      break;\r\n\r\n      // if(findPreviousSmthIndex(caret.node) !== smthIndex) {\r\n      //   break;\r\n      // }\r\n    } while(true);\r\n\r\n    this.lastNode = this.lastOffset = undefined;\r\n\r\n    // if(offset === BOM.length) {\r\n    //   setCaretAt(parent);\r\n    // } else {\r\n    //   setCaretAt(parent.nextSibling);\r\n    // }\r\n\r\n    this.setSelectionClassName(caret.selection, input);\r\n  };\r\n\r\n  public restoreSavedRange(input: HTMLElement) {\r\n    const range = this.getSavedRange(input);\r\n    if(!range) {\r\n      return false;\r\n    }\r\n\r\n    const selection = window.getSelection();\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n\r\n    return true;\r\n  }\r\n\r\n  public getSavedRange(input: HTMLElement) {\r\n    return this.savedRanges.get(input);\r\n  }\r\n\r\n  public makeFocused(input: HTMLElement) {\r\n    if(document.activeElement !== input && !this.restoreSavedRange(input)) {\r\n      placeCaretAtEnd(input, false, false);\r\n    }\r\n  }\r\n\r\n  private fixInsertedLineBreaks(input: HTMLElement) {\r\n    input.querySelectorAll('br').forEach((br) => {\r\n      br.classList.add('br-not-br');\r\n    });\r\n  }\r\n\r\n  private fixBuggedCaret() {\r\n    const selection = document.getSelection();\r\n    const range = selection.getRangeAt(0);\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n  }\r\n\r\n  public onBeforeInput = (e: Pick<InputEvent, 'inputType'>) => {\r\n    const {input, log} = this;\r\n    if(!input) {\r\n      return;\r\n    }\r\n\r\n    const addInputCallback = this.addInputCallback.bind(this, input);\r\n\r\n    const caretPos = this.getCaretPosN();\r\n    let {node, offset, selection, move} = caretPos;\r\n    log('beforeinput', e, node, offset, selection, caretPos);\r\n    this.lastNode = this.lastOffset = undefined;\r\n\r\n    if(e.inputType.startsWith('delete')) { // delete current BOM\r\n      addInputCallback(() => {\r\n        this.processEmptiedFillers(input);\r\n        this.removeExtraBOMs(input);\r\n        this.fixInsertedLineBreaks(input);\r\n      });\r\n\r\n      if(node?.nodeValue === BOM && selection.isCollapsed && e.inputType.includes('deleteContent')) {\r\n        const toLeft = e.inputType.includes('Backward');\r\n        const moveFirst = (offset === BOM.length && toLeft) || (!offset && !toLeft);\r\n        this.superMove(input, caretPos, toLeft, moveFirst);\r\n        // if((offset === BOM.length && toLeft) || (!offset && !toLeft)) {\r\n        //   move(toLeft);\r\n        // }\r\n\r\n        // addInputCallback(() => {\r\n        //   removePossibleBOMSiblingsByNode(getFiller(node));\r\n        // });\r\n\r\n        // if(node.parentNode.childNodes.length === 1) {\r\n        //   (node.parentNode as HTMLElement).remove();\r\n        //   move(e.inputType.includes('Backward') ? false : true);\r\n        // } else {\r\n        //   move(e.inputType.includes('Backward') ? true : false);\r\n        //   addInputCallback(() => {\r\n        //     move(e.inputType.includes('Backward') ? false : true);\r\n        //   });\r\n        // }\r\n\r\n        // for(let i = 0, length = BOM.length + (direction === 'backward' ? offset : BOM.length - offset); i < length; ++i) {\r\n        //   selection.modify('extend', direction, 'character');\r\n        // }\r\n\r\n        // selection.modify('extend', direction, 'character');\r\n        // selection.modify('extend', direction, 'character');\r\n\r\n        // selection.deleteFromDocument();\r\n        // e.preventDefault();\r\n      } else {\r\n        // const filler = getFiller(node);\r\n        // if(filler?.classList?.contains('input-filler-text')) {\r\n        //   const {previousSibling, nextSibling} = filler;\r\n        //   addInputCallback(() => {\r\n        //     if(!filler.isConnected) {\r\n        //       removePossibleBOMSiblings(previousSibling, nextSibling);\r\n        //     }\r\n        //     // removeExtraBOMs();\r\n        //     // processEmptiedFillers();\r\n        //   });\r\n        // }\r\n        // addInputCallback(() => {\r\n        //   this.fixInsertedLineBreaks(input);\r\n        // });\r\n      }\r\n    } else if(e.inputType.startsWith('insert')) { // clear current BOM\r\n      if((node as HTMLElement)?.classList?.contains('input-something')/*  || (node.textContent === BOM && offset === BOM.length) */) {\r\n        node = node.previousSibling.firstChild;\r\n        const range = selection.getRangeAt(0);\r\n        range.setStart(node, 0);\r\n        range.setEnd(node, 0);\r\n        range.collapse(true);\r\n        // selection.modify('move', 'backward', 'character');\r\n\r\n        const c = this.getCaretPosN();\r\n        node = c.node;\r\n        selection = c.selection;\r\n        offset = c.offset;\r\n      }\r\n      if(node && node.textContent === BOM && offset === BOM.length) {\r\n        // const range = selection.getRangeAt(0);\r\n        // range.setStart(node, 0);\r\n        // range.setEnd(node, 0);\r\n        // range.collapse(true);\r\n        selection.modify('move', 'backward', 'character');\r\n\r\n        const c = this.getCaretPosN();\r\n        node = c.node;\r\n        selection = c.selection;\r\n        offset = c.offset;\r\n      }\r\n      // if(node && node.textContent === BOM && offset === 0) {\r\n      //   selection.modify('move', 'forward', 'character');\r\n      //   offset = BOM.length;\r\n      // }\r\n\r\n      if(e.inputType === 'insertLineBreak' || true) {\r\n        // const appendix = 'X';\r\n        // const textNode = document.createTextNode(appendix);\r\n        // if(node.parentElement !== this.messageInput) node.parentElement.after(textNode);\r\n        // else node.after(textNode);\r\n        // selection.modify('move', 'forward', 'character');\r\n        // selection.modify('move', 'forward', 'character');\r\n        // addInputCallback(() => {\r\n        //   textNode.remove();\r\n        // });\r\n\r\n        /* if(node?.nodeValue === BOM) */ {\r\n          // const parent = node.parentElement;\r\n          // parent.contentEditable = 'false';\r\n          // addInputCallback(() => {\r\n          //   parent.contentEditable = 'inherit';\r\n          // });\r\n          // node.parentElement.remove();\r\n\r\n          // const textNode = document.createTextNode(appendix);\r\n          // if(node.parentElement !== this.messageInput) node.parentElement.after(textNode);\r\n          // else node.after(textNode);\r\n          // // selection.modify('move', 'forward', 'character');\r\n          // // selection.modify('move', 'forward', 'character');\r\n          // addInputCallback(() => {\r\n          //   textNode.remove();\r\n          // });\r\n\r\n          // fix case when focused somehow on span instead of text node\r\n          if(node && node.nodeType === node.ELEMENT_NODE) {\r\n            node = node.firstChild;\r\n            log.warn('fixing focus on span');\r\n          }\r\n\r\n          const isBOM = node?.nodeValue === BOM;\r\n          log('inserting line break', isBOM, node, `\"${node?.nodeValue}\"`, node?.parentElement ? Array.from(node.parentElement.childNodes).slice() : []);\r\n          if(isBOM) {\r\n            // (node as ChildNode).replaceWith(this.messageInput.querySelector('.lol'));\r\n\r\n            const parentElement = node.parentElement;\r\n            parentElement.classList.replace('input-filler', 'input-filler-text');\r\n            const childNodesLength = parentElement.childNodes.length;\r\n            addInputCallback(() => {\r\n              const newChildNodesLength = parentElement.childNodes.length;\r\n              if(newChildNodesLength > 1/*  && newChildNodesLength !== childNodesLength */) {\r\n                log('inserting line break, remove');\r\n                node = Array.from(parentElement.childNodes).find((node) => node.nodeValue === BOM);\r\n                (parentElement as any).t = node;\r\n                // node?.remove();\r\n\r\n                // const n = parentElement.firstChild;\r\n                // const range = selection.getRangeAt(0);\r\n                // range.setStart(n, n.nodeValue.length);\r\n                // range.setEnd(n, n.nodeValue.length);\r\n              } else if(node.nodeValue !== BOM) {\r\n                log('inserting line break, deleteData');\r\n                (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\r\n                // node = document.createTextNode(BOM);\r\n              }\r\n\r\n              this.fixInsertedLineBreaks(input);\r\n              // (parentElement as any).t = node;\r\n              // node.remove();\r\n            });\r\n            // addInputCallback(() => {\r\n            //   node.parentElement.classList.replace('input-filler', 'input-filler3');\r\n            //   const s = document.createElement('span');\r\n            //   s.style.display = 'none';\r\n            //   node.replaceWith(s);\r\n            //   s.prepend(node);\r\n            // });\r\n          } else if(e.inputType === 'insertLineBreak') {\r\n            addInputCallback(() => {\r\n              this.fixInsertedLineBreaks(input);\r\n            });\r\n            // const range = selection.getRangeAt(0);\r\n            // this.messageInput.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\r\n            //   el.contentEditable = 'inherit';\r\n            // });\r\n\r\n            // addInputCallback(() => {\r\n            //   this.messageInput.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\r\n            //     el.contentEditable = 'false';\r\n            //   });\r\n\r\n            //   selection.removeAllRanges();\r\n            //   selection.addRange(range);\r\n            // }, false);\r\n          }/*  else if(node &&\r\n            node.nodeType === node.TEXT_NODE &&\r\n            node.nodeValue.length === offset) {\r\n\r\n          } */\r\n\r\n          // if(e.inputType === 'insertLineBreak') {\r\n          //   e.preventDefault();\r\n          //   document.execCommand('insertHTML', false, '<span class=\"lol\">\\n</span>');\r\n\r\n          //   this.messageInputField.simulateInputEvent();\r\n          // }\r\n\r\n          // node.parentElement.replaceWith(node);\r\n          // selection.removeAllRanges();\r\n          // const range = new Range();\r\n          // range.setStart(node, 0);\r\n          // range.setEnd(node, node.nodeValue.length);\r\n          // selection.addRange(range);\r\n          // node.parentElement.classList.remove('input-filler');\r\n          // node.parentElement\r\n        }\r\n\r\n        // document.execCommand('insertHTML', false, '\\n');\r\n        // e.preventDefault();\r\n        // (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\r\n        // if(node?.nodeValue === BOM) {\r\n        //   addInputCallback(() => {\r\n        //     node.remove();\r\n        //   });\r\n        // }\r\n        // this.messageInputField.simulateInputEvent();\r\n\r\n        // this.messageInput.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\r\n        //   el.contentEditable = 'inherit';\r\n        // });\r\n        // addInputCallback(() => {\r\n        //   this.messageInput.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\r\n        //     el.contentEditable = 'false';\r\n        //   });\r\n        // });\r\n        return;\r\n      }\r\n\r\n      if(node?.nodeValue === BOM) {\r\n        // node.nodeValue = ''; // ! will move cursor forward\r\n        // addInputCallback(() => {\r\n        //   (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\r\n        // });\r\n\r\n        if(e.inputType === 'insertLineBreak') {\r\n          if(offset === BOM.length) {\r\n            selection.modify('move', 'backward', 'character');\r\n          }\r\n\r\n          // if(offset !== BOM.length) {\r\n          //   selection.modify('move', 'forward', 'character');\r\n          // }\r\n\r\n          addInputCallback(() => {\r\n            node.remove();\r\n            // (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\r\n            // selection.modify('move', 'forward', 'character');\r\n\r\n            setTimeout(() => {\r\n              selection.modify('move', 'forward', 'character');\r\n            }, 0);\r\n          });\r\n        }\r\n\r\n        // node.parentElement.replaceWith(node);\r\n\r\n        // node.parentElement.replaceWith(node);\r\n        if(e.inputType === 'insertLineBreak') {\r\n          // const previousParentSibling = node.parentNode.previousSibling;\r\n          // addInputCallback(() => {\r\n          //   if(previousParentSibling.nextSibling.nodeValue === '\\n') {\r\n          //     previousParentSibling.nextSibling.remove();\r\n\r\n          //     setTimeout(() => {\r\n          //       // selection.modify('move', 'forward', 'character');\r\n          //       // selection.modify('move', 'forward', 'character');\r\n          //     }, 0);\r\n          //   } else {\r\n          //     previousParentSibling.nextSibling.nodeValue = previousParentSibling.nextSibling.nodeValue.replace('\\n\\n', '\\n');\r\n          //   }\r\n          // });\r\n        } else {\r\n          // if(node.parentElement !== this.messageInput) {\r\n          //   node.parentElement.replaceWith(node);\r\n          // }\r\n\r\n          // setTimeout(() => {\r\n          //   this.log(JSON.stringify(node.parentElement.innerHTML));\r\n          //   node.nodeValue = node.nodeValue.replace(BOM, '');\r\n          //   // (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\r\n          //   this.log(JSON.stringify(node.parentElement.innerHTML));\r\n          // }, 1000);\r\n\r\n          addInputCallback(() => {\r\n            (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\r\n            if(!node.nodeValue) {\r\n              node.remove();\r\n            }\r\n\r\n            // selection.modify('move', 'forward', 'character');\r\n          });\r\n        }\r\n\r\n        if(selection.isCollapsed && false) {\r\n          node.parentElement.replaceWith(node);\r\n          // const textNode = document.createTextNode(BOM);\r\n          // (node.parentNode as any as ChildNode).after(textNode);\r\n          // setCaretAt(textNode.nextSibling);\r\n          // selection.modify('move', 'forward', 'character');\r\n          node.remove();\r\n          // (node as CharacterData).deleteData(node.nodeValue.indexOf(BOM), BOM.length);\r\n          // selection.modify('move', 'forward', 'character');\r\n          // selection.collapseToEnd();\r\n\r\n          // addInputCallback(() => {\r\n          //   (textNode as CharacterData).deleteData(textNode.nodeValue.indexOf(BOM), BOM.length);\r\n          //   node.parentElement.remove();\r\n          // });\r\n        }\r\n      } else if(e.inputType === 'insertLineBreak' &&\r\n        node &&\r\n        node.nodeType === node.TEXT_NODE &&\r\n        node.nodeValue.length === offset) {\r\n        log('inserting line break');\r\n        // const appendix = '\\x01';\r\n\r\n        input.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\r\n          el.contentEditable = 'inherit';\r\n        });\r\n        addInputCallback(() => {\r\n          input.querySelectorAll<HTMLElement>('.input-something').forEach((el) => {\r\n            el.contentEditable = 'false';\r\n          });\r\n        });\r\n\r\n        // const textNode = document.createTextNode(appendix);\r\n        // if(node.parentElement !== this.messageInput) node.parentElement.after(textNode);\r\n        // else node.after(textNode);\r\n        // // selection.modify('move', 'forward', 'character');\r\n        // addInputCallback(() => {\r\n        //   textNode.remove();\r\n        // });\r\n\r\n        // const offset = node.nodeValue.length;\r\n        // (node as CharacterData).insertData(offset, appendix);\r\n        // addInputCallback(() => {\r\n        //   selection.modify('move', 'forward', 'character');\r\n        //   (node as CharacterData).deleteData(node.nodeValue.indexOf(appendix), appendix.length);\r\n        //   if(!node.nodeValue) {\r\n        //     node.remove();\r\n        //   }\r\n        // });\r\n      }\r\n    } else if(e.inputType === 'historyUndo') { // have to remove extra BOMs\r\n      addInputCallback(() => {\r\n        this.processFilledFillers(input);\r\n        this.processEmptiedFillers(input);\r\n        this.removeExtraBOMs(input);\r\n        this.removeEmptyTextNodes(input);\r\n\r\n        // ! lol what, caret will be at the wrong position, have to set it to the same\r\n        this.fixBuggedCaret();\r\n\r\n        // lol\r\n        // this.messageInput.querySelectorAll('.has-text').forEach((el) => {\r\n        //   if(el.textContent === BOM) {\r\n        //     el.firstElementChild.replaceWith(el.firstElementChild.firstChild);\r\n        //     el.classList.replace('input-filler3', 'input-filler');\r\n        //   }\r\n        // });\r\n      });\r\n    } else if(e.inputType === 'historyRedo') {\r\n      // if(node?.nodeValue === BOM && offset === BOM.length) {\r\n      //   selection.modify('move', 'backward', 'character');\r\n      // }\r\n\r\n      addInputCallback(() => {\r\n        this.processFilledFillers(input);\r\n        this.processEmptiedFillers(input);\r\n\r\n        // fix contenteditable attribute\r\n        input.querySelectorAll<HTMLElement>('.input-something:not([contenteditable])').forEach((el) => {\r\n          el.contentEditable = 'false';\r\n        });\r\n\r\n        this.removeExtraBOMs(input);\r\n\r\n        // ! lol what, caret will be at the wrong position, have to set it to the same\r\n        this.fixBuggedCaret();\r\n      });\r\n    }\r\n  };\r\n\r\n  private onKeyDown = (e: KeyboardEvent) => {\r\n    const key = e.key;\r\n\r\n    // // have to ignore line up and down\r\n    if(key === 'ArrowDown' || key === 'ArrowUp') {\r\n      this.lastNode = this.lastOffset = undefined;\r\n    } else {\r\n      const {node, offset} = this.getCaretPosN();\r\n      this.lastNode = node/* getFiller(node) */, this.lastOffset = offset;\r\n      if(this.lastNode === this.input) {\r\n        this.lastNode = this.lastOffset = undefined;\r\n      }\r\n    }\r\n\r\n    this.log('keydown', this.lastNode, this.lastNode?.parentNode, this.lastOffset, this.getCaretPosN(), e);\r\n  };\r\n\r\n  private addInputCallback(input: HTMLElement, callback: () => void, capture = true) {\r\n    const newCallback = () => {\r\n      this.log('input modify callback');\r\n      callback();\r\n    };\r\n\r\n    if(capture && IS_FIREFOX) this.inputCaptureCallbacks.push(newCallback);\r\n    else this.listenerSetter.add(input)('input', newCallback, {once: true, capture});\r\n  }\r\n\r\n  public removeExtraBOMs(input: HTMLElement) {\r\n    const c = (sibling: ChildNode) => {\r\n      return (sibling as HTMLElement)?.classList?.contains('input-something');\r\n    };\r\n\r\n    input.querySelectorAll('.input-filler').forEach((el) => {\r\n      const {previousSibling, nextSibling} = el;\r\n      let needed = false;\r\n\r\n      // if(!(previousSibling as HTMLElement)?.classList?.contains('input-filler') && isCustomFillerNeededBySiblingNode(previousSibling)) {\r\n      if(!(nextSibling as HTMLElement)?.classList?.contains('input-filler') && isCustomFillerNeededBySiblingNode(nextSibling)) {\r\n        needed = c(previousSibling) || c(nextSibling);\r\n      }\r\n\r\n      if(!needed) {\r\n        this.log.warn('removing empty bom node', el);\r\n        el.remove();\r\n      }\r\n    });\r\n  }\r\n\r\n  private getFiller(node: Node) {\r\n    return node && node.nodeType === node.TEXT_NODE && node.parentElement !== this.input ? node.parentElement : node as HTMLElement;\r\n  }\r\n\r\n  private getCaretPosN() {\r\n    const ret = getCaretPosNew(this.input);\r\n    // const {node} = ret;\r\n    // if((node as HTMLElement)?.classList?.contains('input-something')) {\r\n    //   ret.node = node.previousSibling;\r\n    //   ret.offset = ret.node.textContent.length;\r\n    // }\r\n\r\n    return {...ret, move: this.move.bind(this, ret.selection)};\r\n  }\r\n\r\n  private removeEmptyTextNodes(input: HTMLElement) {\r\n    const {log} = this;\r\n    // let i = -1;\r\n    // remove empty text nodes\r\n    const treeWalker = document.createTreeWalker(\r\n      input,\r\n      NodeFilter.SHOW_TEXT,\r\n      {acceptNode: (node) => node.parentElement === input && !node.nodeValue/*  && !++i */ ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT}\r\n    );\r\n\r\n    let textNode: Text;\r\n    while(textNode = treeWalker.nextNode() as Text) {\r\n      log.warn('removing empty text node', textNode);\r\n      textNode.remove();\r\n    }\r\n  }\r\n\r\n  private removePossibleBOMSiblings(previousSibling: ChildNode, nextSibling: ChildNode) {\r\n    [previousSibling, nextSibling].forEach((sibling) => {\r\n      if((sibling as HTMLElement)?.classList?.contains('input-filler')) {\r\n        sibling.remove();\r\n      }\r\n    });\r\n  }\r\n\r\n  private removePossibleBOMSiblingsByNode(node: ChildNode) {\r\n    const {previousSibling, nextSibling} = node;\r\n    this.removePossibleBOMSiblings(previousSibling, nextSibling);\r\n  };\r\n\r\n  private processEmptiedFillers(input: HTMLElement) {\r\n    input.querySelectorAll<HTMLElement>('.input-filler-text').forEach((el) => {\r\n      this.removeExtraBOMs(el);\r\n\r\n      let cleanSiblings = true;\r\n      if(!el.textContent) {\r\n        el.classList.replace('input-filler-text', 'input-filler');\r\n\r\n        const textNode = Array.from(el.childNodes).find((node) => node.nodeType === node.TEXT_NODE);\r\n        if(textNode) {\r\n          (textNode as CharacterData).insertData(0, BOM);\r\n        } else if(((el as any).t as ChildNode)?.nodeValue) {\r\n          el.append((el as any).t);\r\n        } else {\r\n          el.append(document.createTextNode(BOM));\r\n        }\r\n      } else if(!NOT_ONLY_BOMS_REG_EXP.test(el.textContent) && !el.querySelector('.input-something')) {\r\n        el.classList.replace('input-filler-text', 'input-filler');\r\n      } else {\r\n        cleanSiblings = false;\r\n      }\r\n\r\n      if(cleanSiblings) {\r\n        this.removePossibleBOMSiblingsByNode(el);\r\n      }\r\n    });\r\n  }\r\n\r\n  private processFilledFillers(input: HTMLElement) {\r\n    // remove the BOM when changing to text\r\n    input.querySelectorAll('.input-filler').forEach((el) => {\r\n      if(el.textContent !== BOM) {\r\n        el.classList.replace('input-filler', 'input-filler-text');\r\n        const t = (el as any).t as ChildNode;\r\n        const bomNode = Array.from(el.childNodes).find((node) => node.nodeType === node.TEXT_NODE && node.nodeValue.includes(BOM));\r\n        if(bomNode && !t?.nodeValue) {\r\n          const idx = bomNode.nodeValue.indexOf(BOM);\r\n          if(idx !== -1) {\r\n            (bomNode as CharacterData).deleteData(idx, BOM.length);\r\n          }\r\n        }\r\n\r\n        // t?.remove();\r\n      }\r\n    });\r\n  }\r\n\r\n  private setSelectionClassName(selection: Selection, input?: HTMLElement) {\r\n    // Array.from(this.messageInput.querySelectorAll('.selection')).forEach((element) => {\r\n    //   element.classList.remove('selection');\r\n    // });\r\n\r\n    if(selection.rangeCount) {\r\n      const range = selection.getRangeAt(0);\r\n\r\n      if(input) {\r\n        Array.from(input.querySelectorAll('.input-selectable')).forEach((element) => {\r\n          element.classList.toggle('selection', !range.collapsed && range.intersectsNode(element));\r\n        });\r\n      } else {\r\n        Array.from(document.querySelectorAll('.input-selectable.selection')).forEach((element) => element.classList.remove('selection'));\r\n      }\r\n    }\r\n  }\r\n\r\n  private move(selection: Selection, left: boolean) {\r\n    const {focusNode: focusNodeBefore, focusOffset: focusOffsetBefore} = selection;\r\n    selection.modify('extend', left ? 'backward' : 'forward', 'character');\r\n    // if(offset === nodeValue.length) {\r\n    //   selection.modify('extend', !left ? 'backward' : 'forward', 'character');\r\n    // }\r\n    if(left) selection.collapseToStart();\r\n    else selection.collapseToEnd();\r\n    const {focusNode: focusNodeAfter, focusOffset: focusOffsetAfter} = selection;\r\n    this.log(\r\n      'moving cursor',\r\n      left,\r\n      focusNodeBefore,\r\n      focusNodeBefore.nodeType === focusNodeBefore.ELEMENT_NODE ? focusNodeBefore : focusNodeBefore.parentElement,\r\n      focusOffsetBefore,\r\n      focusNodeAfter,\r\n      focusNodeAfter.nodeType === focusNodeAfter.ELEMENT_NODE ? focusNodeAfter : focusNodeAfter.parentElement,\r\n      focusOffsetAfter\r\n    );\r\n  }\r\n\r\n  public prepareApplyingMarkdown() {\r\n    const {input} = this;\r\n\r\n    // do not wrap fillers into spans\r\n    const fillers = input.querySelectorAll<HTMLElement>('.input-filler');\r\n    // fillers.forEach((el) => {\r\n    //   el.contentEditable = 'false';\r\n    // });\r\n\r\n    const smths = input.querySelectorAll<HTMLElement>('.input-something');\r\n    smths.forEach((el) => {\r\n      el.contentEditable = 'inherit';\r\n    });\r\n\r\n    return () => {\r\n      fillers.forEach((el) => {\r\n        el.contentEditable = 'inherit';\r\n      });\r\n\r\n      smths.forEach((el) => {\r\n        el.contentEditable = 'false';\r\n      });\r\n\r\n      this.removeExtraBOMs(input);\r\n    };\r\n  }\r\n\r\n  public static getInstance() {\r\n    return this.INSTANCE ??= new RichInputHandler();\r\n  }\r\n}\r\n","// https://stackoverflow.com/a/6150060\r\nexport default function selectElementContents(el: HTMLElement) {\r\n  const range = document.createRange();\r\n  range.selectNodeContents(el);\r\n  const sel = window.getSelection();\r\n  sel.removeAllRanges();\r\n  sel.addRange(range);\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {PASS_CONFLICTING_ENTITIES, PASS_SINGLE_CONFLICTING_ENTITIES} from '.';\r\nimport {MessageEntity} from '../../layer';\r\n\r\nconst SINGLE_ENTITIES: Set<MessageEntity['_']> = new Set(['messageEntityPre', 'messageEntityCode']);\r\n\r\nexport default function findConflictingEntity(currentEntities: MessageEntity[], newEntity: MessageEntity) {\r\n  let singleEnd = -1;\r\n  return currentEntities.find((currentEntity) => {\r\n    if(SINGLE_ENTITIES.has(currentEntity._)) {\r\n      singleEnd = currentEntity.offset + currentEntity.length;\r\n    }\r\n\r\n    if(newEntity.offset < singleEnd && !PASS_SINGLE_CONFLICTING_ENTITIES.has(newEntity._)) {\r\n      return true;\r\n    }\r\n\r\n    const isConflictingTypes = newEntity._ === currentEntity._ ||\r\n      (!PASS_CONFLICTING_ENTITIES.has(newEntity._) && !PASS_CONFLICTING_ENTITIES.has(currentEntity._));\r\n\r\n    if(!isConflictingTypes) {\r\n      return false;\r\n    }\r\n\r\n    const isConflictingOffset = newEntity.offset >= currentEntity.offset &&\r\n      (newEntity.length + newEntity.offset) <= (currentEntity.length + currentEntity.offset);\r\n\r\n    return isConflictingOffset;\r\n  });\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {MessageEntity} from '../../layer';\r\nimport findConflictingEntity from './findConflictingEntity';\r\nimport sortEntities from './sortEntities';\r\n\r\nexport default function mergeEntities(currentEntities: MessageEntity[], newEntities: MessageEntity[]) {\r\n  const filtered = newEntities.filter((e) => {\r\n    return !findConflictingEntity(currentEntities, e);\r\n  });\r\n\r\n  currentEntities.push(...filtered);\r\n  sortEntities(currentEntities);\r\n  // currentEntities.sort((a, b) => a.offset - b.offset);\r\n  // currentEntities.sort((a, b) => (a.offset - b.offset) || (a._ === 'messageEntityCaret' && -1));\r\n\r\n  // * fix splitted emoji. messageEntityTextUrl can split the emoji if starts before its end (e.g. on fe0f)\r\n  // * have to fix even if emoji supported since it's being wrapped in span\r\n  // if(!IS_EMOJI_SUPPORTED) {\r\n  for(let i = 0; i < currentEntities.length; ++i) {\r\n    const entity = currentEntities[i];\r\n    if(entity._ === 'messageEntityEmoji') {\r\n      const nextEntity = currentEntities[i + 1];\r\n      if(nextEntity /* && nextEntity._ !== 'messageEntityCaret' */ && nextEntity.offset < (entity.offset + entity.length)) {\r\n        entity.length = nextEntity.offset - entity.offset;\r\n      }\r\n    }\r\n  }\r\n  // }\r\n\r\n  return currentEntities;\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type {AnimationItemGroup} from '../../components/animationIntersector';\r\nimport rootScope from '../rootScope';\r\nimport wrapRichText from './wrapRichText';\r\n\r\nexport default function wrapDraftText(text: string, options: Partial<{\r\n  wrappingForPeerId: PeerId,\r\n  animationGroup?: AnimationItemGroup\r\n}> & Parameters<typeof wrapRichText>[1] = {}) {\r\n  if(!text) {\r\n    return wrapRichText('');\r\n  }\r\n\r\n  let entities = options.entities;\r\n  if(entities && !rootScope.premium && options.wrappingForPeerId !== rootScope.myId) {\r\n    entities = entities.filter((entity) => entity._ !== 'messageEntityCustomEmoji');\r\n  }\r\n\r\n  const fragment = wrapRichText(text, {\r\n    ...options,\r\n    entities,\r\n    noLinks: true,\r\n    wrappingDraft: true,\r\n    passEntities: {\r\n      messageEntityTextUrl: true,\r\n      messageEntityMentionName: true\r\n    }\r\n  });\r\n\r\n  return fragment;\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport type CustomEmojiElement from '../lib/customEmoji/element';\r\nimport type {AnimationItemGroup} from './animationIntersector';\r\nimport {CustomEmojiRendererElement} from '../lib/customEmoji/renderer';\r\nimport cancelEvent from '../helpers/dom/cancelEvent';\r\nimport simulateEvent from '../helpers/dom/dispatchEvent';\r\nimport documentFragmentToHTML from '../helpers/dom/documentFragmentToHTML';\r\nimport findUpAttribute from '../helpers/dom/findUpAttribute';\r\nimport findUpTag from '../helpers/dom/findUpTag';\r\nimport getCaretPosNew from '../helpers/dom/getCaretPosNew';\r\nimport getRichValueWithCaret from '../helpers/dom/getRichValueWithCaret';\r\nimport isInputEmpty from '../helpers/dom/isInputEmpty';\r\nimport replaceContent from '../helpers/dom/replaceContent';\r\nimport RichInputHandler, {USING_BOMS} from '../helpers/dom/richInputHandler';\r\nimport selectElementContents from '../helpers/dom/selectElementContents';\r\nimport setInnerHTML, {setDirection} from '../helpers/dom/setInnerHTML';\r\nimport {MessageEntity} from '../layer';\r\nimport {i18n, LangPackKey, _i18n} from '../lib/langPack';\r\nimport {NULL_PEER_ID} from '../lib/mtproto/mtproto_config';\r\nimport mergeEntities from '../lib/richTextProcessor/mergeEntities';\r\nimport parseEntities from '../lib/richTextProcessor/parseEntities';\r\nimport wrapDraftText from '../lib/richTextProcessor/wrapDraftText';\r\nimport {createCustomFiller, insertCustomFillers} from '../lib/richTextProcessor/wrapRichText';\r\n\r\nexport async function insertRichTextAsHTML(input: HTMLElement, text: string, entities: MessageEntity[], wrappingForPeerId: PeerId) {\r\n  const loadPromises: Promise<any>[] = [];\r\n  const wrappingCustomEmoji = entities?.some((entity) => entity._ === 'messageEntityCustomEmoji');\r\n  const renderer = wrappingCustomEmoji ? createCustomEmojiRendererForInput() : undefined;\r\n  const fragment = wrapDraftText(text, {entities, wrappingForPeerId, loadPromises, customEmojiRenderer: renderer});\r\n  const something = fragment.querySelectorAll<HTMLElement>('[contenteditable=\"false\"]');\r\n  something.forEach((el) => {\r\n    el.contentEditable = 'inherit';\r\n    el.classList.add('pc');\r\n  });\r\n\r\n  loadPromises.length && await Promise.all(loadPromises);\r\n\r\n  fragment.querySelectorAll<HTMLElement>('.input-selectable').forEach((el) => {\r\n    el.prepend(createCustomFiller(true));\r\n  });\r\n\r\n  const richInputHandler = USING_BOMS ? RichInputHandler.getInstance() : undefined;\r\n  // const restore = richInputHandler.prepareApplyingMarkdown();\r\n\r\n  // fragment.querySelectorAll('.input-filler').forEach((el) => el.remove());\r\n\r\n  // const fillers = Array.from(input.querySelectorAll<HTMLElement>('.input-filler')).map((el) => {\r\n  //   el.contentEditable = 'false';\r\n  //   return el;\r\n  // });\r\n\r\n  const customEmojiElements = Array.from(fragment.querySelectorAll<HTMLImageElement>('.custom-emoji-placeholder')).map((el) => {\r\n    el.dataset.ces = '1';\r\n    return (el as any).customEmojiElement as CustomEmojiElement;\r\n  });\r\n\r\n  const html = documentFragmentToHTML(fragment);\r\n  renderer?.destroy();\r\n\r\n  // console.log(html);\r\n\r\n  const pre = getCaretPosNew(input);\r\n  // console.log('pre', pre);\r\n  let textNode: ChildNode, textNodeValue: string;\r\n  if(pre.node) {\r\n    // if(pre.node?.nodeValue === BOM && false) {\r\n    //   textNode = document.createTextNode(textNodeValue = BOM);\r\n    //   (pre.node.parentNode as any as ChildNode).after(textNode);\r\n    //   pre.selection.modify('extend', 'forward', 'character');\r\n    //   pre.selection.collapseToEnd();\r\n    // }\r\n  } else {\r\n    const range = document.createRange();\r\n    let node = input.lastChild;\r\n    if(!node) {\r\n      input.append(node /* = textNode */ = document.createTextNode(''));\r\n    }\r\n\r\n    range.setStartAfter(node);\r\n    range.collapse(true);\r\n    pre.selection.removeAllRanges();\r\n    pre.selection.addRange(range);\r\n  }\r\n\r\n  // const fragmentLastChild = fragment.lastChild;\r\n\r\n  // const s = document.createElement('span');\r\n  // (node as ChildNode).replaceWith(s);\r\n  // s.append(node);\r\n  input.addEventListener('input', cancelEvent, {capture: true, once: true, passive: false});\r\n  richInputHandler?.onBeforeInput({inputType: 'insertContent'});\r\n  window.document.execCommand('insertHTML', false, html);\r\n  Array.from(input.querySelectorAll<HTMLImageElement>('[data-ces]')).forEach((el, idx) => {\r\n    delete el.dataset.ces;\r\n    const customEmojiElement = customEmojiElements[idx];\r\n    (el as any).customEmojiElement = customEmojiElement;\r\n    customEmojiElement.placeholder = el;\r\n  });\r\n  // fillers.forEach((el) => {\r\n  //   el.contentEditable = 'inherit';\r\n  // });\r\n  input.querySelectorAll<HTMLElement>('.pc').forEach((el) => {\r\n    el.contentEditable = 'false';\r\n  });\r\n  if(textNode) {\r\n    const {nodeValue} = textNode;\r\n    if(nodeValue === textNodeValue) {\r\n      textNode.remove();\r\n    } else {\r\n      (textNode as CharacterData).replaceData(nodeValue.indexOf(textNodeValue), textNodeValue.length, '');\r\n    }\r\n  }\r\n  // restore();\r\n  richInputHandler?.removeExtraBOMs(input);\r\n  simulateEvent(input, 'input');\r\n\r\n  // if(textNode) {\r\n  //   const selection = document.getSelection();\r\n  //   const node = fragmentLastChild.nextSibling || fragmentLastChild;\r\n  //   const range = document.createRange();\r\n  //   range.setStartAfter(node);\r\n  //   range.collapse(true);\r\n  //   selection.removeAllRanges();\r\n  //   selection.addRange(range);\r\n  // }\r\n\r\n  // const after = getCaretPosNew(input);\r\n  // console.log('after', after);\r\n  // if(after.node?.nodeValue === BOM) {\r\n  //   const smth = findUpClassName(after.node.parentElement, 'input-something');\r\n  //   if(smth) {\r\n  //     const selection = document.getSelection();\r\n  //     const node = smth.nextSibling;\r\n  //     const range = document.createRange();\r\n  //     range.setStartAfter(node);\r\n  //     range.collapse(true);\r\n  //     selection.removeAllRanges();\r\n  //     selection.addRange(range);\r\n\r\n  //     // if(after.offset === 0) after.selection.modify('extend', 'forward', 'character');\r\n  //     // after.selection.modify('extend', 'forward', 'character');\r\n  //     // after.selection.collapseToEnd();\r\n  //   }\r\n  // }\r\n\r\n  // setCaretAt(fragmentLastChild.nextSibling);\r\n\r\n  // console.log('ASD');\r\n}\r\n\r\nlet init = () => {\r\n  document.addEventListener('paste', (e) => {\r\n    const input = findUpAttribute(e.target, 'contenteditable=\"true\"');\r\n    if(!input) {\r\n      return;\r\n    }\r\n\r\n    const noLinebreaks = !!input.dataset.noLinebreaks;\r\n    e.preventDefault();\r\n    let text: string, entities: MessageEntity[];\r\n\r\n    // @ts-ignore\r\n    let plainText: string = (e.originalEvent || e).clipboardData.getData('text/plain');\r\n    let usePlainText = true;\r\n\r\n    // @ts-ignore\r\n    let html: string = (e.originalEvent || e).clipboardData.getData('text/html') || plainText;\r\n\r\n    const filterEntity = (e: MessageEntity) => e._ === 'messageEntityEmoji' || (e._ === 'messageEntityLinebreak' && !noLinebreaks);\r\n    if(noLinebreaks) {\r\n      const regExp = /[\\r\\n]/g;\r\n      plainText = plainText.replace(regExp, '');\r\n      html = html.replace(regExp, '');\r\n    }\r\n\r\n    const peerId = (input.dataset.peerId || NULL_PEER_ID).toPeerId();\r\n    if(html.trim()) {\r\n      // console.log(html.replace(/ (style|class|id)=\".+?\"/g, ''));\r\n\r\n      html = html.replace(/<style([\\s\\S]*)<\\/style>/, '');\r\n      html = html.replace(/<!--([\\s\\S]*)-->/, '');\r\n      html = html.replace('<br class=\"Apple-interchange-newline\">', '');\r\n\r\n      const match = html.match(/<body>([\\s\\S]*)<\\/body>/);\r\n      if(match) {\r\n        html = match[1].trim();\r\n      }\r\n\r\n      // const s = cleanHTML(html, true) as NodeList;\r\n      // console.log(s);\r\n\r\n      const parser = new DOMParser();\r\n      const doc = parser.parseFromString(html, 'text/html');\r\n      const span = doc.body || document.createElement('body');\r\n\r\n      // const span: HTMLElement = document.createElement('span');\r\n      // span.innerHTML = html;\r\n      // span.append(...Array.from(s));\r\n\r\n      let curChild = span.firstChild;\r\n      while(curChild) { // * fix whitespace between elements like <p>asd</p>\\n<p>zxc</p>\r\n        const nextSibling = curChild.nextSibling;\r\n        if(curChild.nodeType === curChild.TEXT_NODE) {\r\n          if(!curChild.nodeValue.trim()) {\r\n            curChild.remove();\r\n          }\r\n        }\r\n\r\n        curChild = nextSibling;\r\n      }\r\n\r\n      const richValue = getRichValueWithCaret(span, true, false);\r\n\r\n      const canWrapCustomEmojis = !!peerId;\r\n      if(!canWrapCustomEmojis) {\r\n        richValue.entities = richValue.entities.filter((entity) => entity._ !== 'messageEntityCustomEmoji');\r\n      }\r\n\r\n      /* if(false) */ { // * fix extra new lines appearing from <p> (can have them from some sources, like macOS Terminal)\r\n        const lines = richValue.value.split('\\n');\r\n        let textLength = 0;\r\n        for(let lineIndex = 0; lineIndex < lines.length; ++lineIndex) {\r\n          const line = lines[lineIndex];\r\n          textLength += line.length;\r\n\r\n          const index = textLength;\r\n          if(plainText[index] !== '\\n' && lineIndex !== (lines.length - 1)) {\r\n            const nextLine = lines.splice(lineIndex + 1, 1)[0];\r\n            lines[lineIndex] = line + nextLine;\r\n\r\n            // fix entities\r\n            richValue.entities.forEach((entity) => {\r\n              if(entity.offset >= index) {\r\n                entity.offset -= 1;\r\n              }\r\n            });\r\n\r\n            textLength += nextLine.length;\r\n          }\r\n\r\n          textLength += 1;\r\n        }\r\n\r\n        const correctedText = lines.join('\\n');\r\n        richValue.value = correctedText;\r\n      }\r\n\r\n      const richTextLength = richValue.value.replace(/\\s/g, '').length;\r\n      const plainTextLength = plainText.replace(/\\s/g, '').length;\r\n      if(richTextLength === plainTextLength ||\r\n        richValue.entities.find((entity) => entity._ === 'messageEntityCustomEmoji')) {\r\n        text = richValue.value;\r\n        entities = richValue.entities;\r\n        usePlainText = false;\r\n\r\n        let entities2 = parseEntities(text);\r\n        entities2 = entities2.filter(filterEntity);\r\n        mergeEntities(entities, entities2);\r\n      }\r\n\r\n      // console.log('usePlainText', usePlainText);\r\n    }\r\n\r\n    if(usePlainText) {\r\n      text = plainText;\r\n      entities = parseEntities(text);\r\n      entities = entities.filter(filterEntity);\r\n    }\r\n\r\n    insertRichTextAsHTML(input, text, entities, peerId);\r\n  });\r\n\r\n  init = null;\r\n};\r\n\r\n// ! it doesn't respect symbols other than strongs\r\n/* const checkAndSetRTL = (input: HTMLElement) => {\r\n  //const isEmpty = isInputEmpty(input);\r\n  //console.log('input', isEmpty);\r\n\r\n  //const char = [...getRichValue(input)][0];\r\n  const char = (input instanceof HTMLInputElement ? input.value : input.innerText)[0];\r\n  let direction = 'ltr';\r\n  if(char && checkRTL(char)) {\r\n    direction = 'rtl';\r\n  }\r\n\r\n  //console.log('RTL', direction, char);\r\n\r\n  input.style.direction = direction;\r\n}; */\r\n\r\nexport enum InputState {\r\n  Neutral = 0,\r\n  Valid = 1,\r\n  Error = 2\r\n};\r\n\r\nexport type InputFieldOptions = {\r\n  placeholder?: LangPackKey,\r\n  placeholderAsElement?: boolean,\r\n  label?: LangPackKey,\r\n  labelOptions?: any[],\r\n  labelText?: string | DocumentFragment,\r\n  name?: string,\r\n  maxLength?: number,\r\n  showLengthOn?: number,\r\n  plainText?: true,\r\n  required?: boolean,\r\n  canBeEdited?: boolean,\r\n  validate?: () => boolean,\r\n  inputMode?: 'tel' | 'numeric',\r\n  withLinebreaks?: boolean,\r\n  autocomplete?: string,\r\n  withBorder?: boolean\r\n};\r\n\r\nfunction createCustomEmojiRendererForInput(textColor?: string, animationGroup?: AnimationItemGroup) {\r\n  const renderer = CustomEmojiRendererElement.create({\r\n    wrappingDraft: true,\r\n    isSelectable: true,\r\n    textColor: textColor || 'primary-text-color',\r\n    animationGroup\r\n  });\r\n\r\n  return renderer;\r\n}\r\n\r\nfunction processCustomEmojisInInput(input: HTMLElement) {\r\n  const customEmojiElements = Array.from(input.querySelectorAll<CustomEmojiElement | HTMLElement>('.custom-emoji, .custom-emoji-placeholder'));\r\n  let renderer = input.querySelector<CustomEmojiRendererElement>('.custom-emoji-renderer');\r\n  if(!renderer && customEmojiElements.length) {\r\n    renderer = createCustomEmojiRendererForInput(input.dataset.textColor, input.dataset.animationGroup as AnimationItemGroup);\r\n    input.prepend(renderer);\r\n  } else if(renderer && !customEmojiElements.length) {\r\n    renderer.remove();\r\n    return;\r\n  }\r\n\r\n  if(!renderer) {\r\n    return;\r\n  }\r\n\r\n  const customEmojis: Parameters<CustomEmojiRendererElement['add']>[0]['addCustomEmojis'] = new Map();\r\n  customEmojiElements.forEach((element) => {\r\n    const customEmojiElement: CustomEmojiElement = (element as CustomEmojiElement).loop !== undefined ? element as CustomEmojiElement : (element as any).customEmojiElement as CustomEmojiElement;\r\n    const {docId} = customEmojiElement;\r\n    let set = customEmojis.get(docId);\r\n    if(!set) {\r\n      customEmojis.set(docId, set = new Set());\r\n    }\r\n\r\n    set.add(customEmojiElement);\r\n  });\r\n\r\n  for(const [docId, customEmojiElements] of customEmojis) {\r\n    let hasSet = renderer.customEmojis.get(docId);\r\n    if(hasSet) {\r\n      for(const customEmojiElement of hasSet) {\r\n        if(!customEmojiElements.has(customEmojiElement)) {\r\n          customEmojiElement.destroy();\r\n        }\r\n      }\r\n    } else {\r\n      hasSet = new Set();\r\n    }\r\n\r\n    for(const customEmojiElement of customEmojiElements) {\r\n      if(!hasSet.has(customEmojiElement)) {\r\n        customEmojiElement.connectedCallback();\r\n      }\r\n    }\r\n  }\r\n\r\n  renderer.add({\r\n    addCustomEmojis: customEmojis,\r\n    lazyLoadQueue: false\r\n  });\r\n  renderer.forceRender();\r\n}\r\n\r\nexport default class InputField {\r\n  public container: HTMLElement;\r\n  public input: HTMLElement;\r\n  public label: HTMLLabelElement;\r\n  public placeholder: HTMLElement;\r\n\r\n  public originalValue: string;\r\n\r\n  public required: boolean;\r\n  public validate: () => boolean;\r\n\r\n  constructor(public options: InputFieldOptions = {}) {\r\n    this.container = document.createElement('div');\r\n    this.container.classList.add('input-field');\r\n\r\n    this.required = options.required;\r\n    this.validate = options.validate;\r\n\r\n    if(options.maxLength !== undefined && options.showLengthOn === undefined) {\r\n      options.showLengthOn = Math.min(40, Math.round(options.maxLength / 3));\r\n    }\r\n\r\n    const {placeholder, maxLength, showLengthOn, name, plainText, canBeEdited = true, autocomplete, withBorder} = options;\r\n    const label = options.label || options.labelText;\r\n\r\n    const onInputCallbacks: Array<() => void> = [];\r\n    let input: HTMLElement;\r\n    if(!plainText) {\r\n      if(init) {\r\n        init();\r\n      }\r\n\r\n      this.container.innerHTML = `<div class=\"input-field-input\"></div>`;\r\n\r\n      input = this.container.firstElementChild as HTMLElement;\r\n      input.contentEditable = '' + !!canBeEdited;\r\n      // const observer = new MutationObserver(() => {\r\n      //   //checkAndSetRTL(input);\r\n\r\n      //   if(processInput) {\r\n      //     processInput();\r\n      //   }\r\n      // });\r\n\r\n      RichInputHandler.getInstance();\r\n\r\n      input.addEventListener('mousedown', (e) => {\r\n        const selection = document.getSelection();\r\n        if(!selection.isCollapsed) {\r\n          return;\r\n        }\r\n\r\n        const placeholder = findUpTag(e.target, 'IMG');\r\n        if(!placeholder) {\r\n          return;\r\n        }\r\n\r\n        const rect = placeholder.getBoundingClientRect();\r\n        const centerX = rect.left + rect.width / 2;\r\n        const focusOnNext = e.clientX >= centerX;\r\n\r\n        const range = document.createRange();\r\n        range.setStartAfter(focusOnNext ? placeholder : placeholder.previousSibling ?? placeholder);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n      });\r\n\r\n      onInputCallbacks.push(() => {\r\n        // console.log('input');\r\n        // return;\r\n        // * because if delete all characters there will br left\r\n        const isEmpty = isInputEmpty(input);\r\n        if(isEmpty) {\r\n          // const textNode = Array.from(input.childNodes).find((node) => node.nodeType === node.TEXT_NODE) || document.createTextNode('');\r\n          input.replaceChildren();\r\n          // input.append(document.createTextNode('')); // need first text node to support history stack\r\n        }\r\n\r\n        this.setEmpty(isEmpty);\r\n\r\n        // const fillers = Array.from(input.querySelectorAll('.emoji-filler')) as HTMLElement[];\r\n        // fillers.forEach((filler) => {\r\n        //   const textContent = filler.textContent;\r\n        //   if(textContent === BOM) {\r\n        //     return;\r\n        //   }\r\n\r\n        //   if(textContent) {\r\n\r\n        //   } else {\r\n        //     let curChild = filler.firstChild;\r\n        //     while(curChild) {\r\n        //       curChild = curChild.nextSibling;\r\n        //     }\r\n        //   }\r\n\r\n        //   filler.classList.remove('emoji-filler');\r\n        // });\r\n\r\n        // Array.from(input.querySelectorAll('br, span:empty')).forEach((el) => {\r\n        //   const parentElement = el.parentElement;\r\n        //   (parentElement === input ? el : parentElement).remove();\r\n        // });\r\n        USING_BOMS && Array.from(input.querySelectorAll('br:not(.br-not-br)')).forEach((el) => {\r\n          // const parentElement = el.parentElement;\r\n          el.remove();\r\n          // if(!parentElement.children.length && !parentElement.textContent) {\r\n          //   parentElement.textContent = '';\r\n          // }\r\n        });\r\n\r\n        insertCustomFillers(Array.from(input.querySelectorAll('.input-something')));\r\n\r\n        processCustomEmojisInInput(input);\r\n\r\n        // .forEach((el) => el.remove());\r\n      });\r\n\r\n      // ! childList for paste first symbol\r\n      // observer.observe(input, {characterData: true, childList: true, subtree: true});\r\n    } else {\r\n      this.container.innerHTML = `\r\n      <input type=\"text\" ${name ? `name=\"${name}\"` : ''} autocomplete=\"${autocomplete ?? 'off'}\" ${label ? 'required=\"\"' : ''} class=\"input-field-input\">\r\n      `;\r\n\r\n      input = this.container.firstElementChild as HTMLElement;\r\n      // input.addEventListener('input', () => checkAndSetRTL(input));\r\n\r\n      onInputCallbacks.push(this.setEmpty);\r\n    }\r\n\r\n    setDirection(input);\r\n\r\n    if(options.inputMode) {\r\n      input.inputMode = options.inputMode;\r\n    }\r\n\r\n    if(placeholder) {\r\n      // if(options.placeholderAsElement) {\r\n      this.placeholder = document.createElement('span');\r\n      this.placeholder.classList.add('input-field-placeholder');\r\n      this.container.append(this.placeholder);\r\n      _i18n(this.placeholder, placeholder, undefined);\r\n      // } else {\r\n      //   _i18n(input, placeholder, undefined, 'placeholder');\r\n      // }\r\n    }\r\n\r\n    if(withBorder !== false && withBorder || label || placeholder) {\r\n      const border = document.createElement('div');\r\n      border.classList.add('input-field-border');\r\n      this.container.append(border);\r\n    }\r\n\r\n    if(label) {\r\n      this.label = document.createElement('label');\r\n      this.setLabel();\r\n      this.container.append(this.label);\r\n    }\r\n\r\n    if(maxLength) {\r\n      const labelEl = this.container.lastElementChild as HTMLLabelElement;\r\n      let showingLength = false;\r\n\r\n      const onInput = () => {\r\n        const wasError = input.classList.contains('error');\r\n        // * https://stackoverflow.com/a/54369605 #2 to count emoji as 1 symbol\r\n        const inputLength = plainText ? (input as HTMLInputElement).value.length : [...getRichValueWithCaret(input, false, false).value].length;\r\n        const diff = maxLength - inputLength;\r\n        const isError = diff < 0;\r\n        input.classList.toggle('error', isError);\r\n\r\n        // this.onLengthChange && this.onLengthChange(inputLength, isError);\r\n\r\n        if(isError || diff <= showLengthOn) {\r\n          this.setLabel();\r\n          labelEl.append(` (${maxLength - inputLength})`);\r\n          if(!showingLength) showingLength = true;\r\n        } else if((wasError && !isError) || showingLength) {\r\n          this.setLabel();\r\n          showingLength = false;\r\n        }\r\n      };\r\n\r\n      onInputCallbacks.push(onInput);\r\n    }\r\n\r\n    const noLinebreaks = !options.withLinebreaks;\r\n    if(noLinebreaks && !plainText) {\r\n      input.dataset.noLinebreaks = '1';\r\n      input.addEventListener('keypress', (e) => {\r\n        if(e.key === 'Enter') {\r\n          e.preventDefault();\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n\r\n    if(onInputCallbacks.length) {\r\n      input.addEventListener('input', () => {\r\n        onInputCallbacks.forEach((callback) => callback());\r\n      });\r\n    }\r\n\r\n    this.input = input;\r\n    this.setEmpty(true);\r\n  }\r\n\r\n  public select() {\r\n    if(!this.value) { // * avoid selecting whole empty field on iOS devices\r\n      return;\r\n    }\r\n\r\n    if(this.options.plainText) {\r\n      (this.input as HTMLInputElement).select(); // * select text\r\n    } else {\r\n      selectElementContents(this.input);\r\n    }\r\n  }\r\n\r\n  public setLabel() {\r\n    this.label.textContent = '';\r\n    if(this.options.labelText) {\r\n      setInnerHTML(this.label, this.options.labelText);\r\n    } else {\r\n      this.label.append(i18n(this.options.label, this.options.labelOptions));\r\n    }\r\n  }\r\n\r\n  get value(): string {\r\n    return this.options.plainText ? (this.input as HTMLInputElement).value : getRichValueWithCaret(this.input, false, false).value;\r\n    // return getRichValue(this.input);\r\n  }\r\n\r\n  set value(value: Parameters<typeof replaceContent>[1]) {\r\n    this.setValueSilently(value, true);\r\n    this.simulateInputEvent();\r\n  }\r\n\r\n  public simulateInputEvent() {\r\n    simulateEvent(this.input, 'input');\r\n  }\r\n\r\n  public setValueSilently(value: Parameters<typeof replaceContent>[1], fromSet?: boolean) {\r\n    if(this.options.plainText) {\r\n      (this.input as HTMLInputElement).value = value as string;\r\n    } else {\r\n      replaceContent(this.input, value);\r\n      processCustomEmojisInInput(this.input);\r\n    }\r\n\r\n    this.setEmpty();\r\n  }\r\n\r\n  private setEmpty = (empty = isInputEmpty(this.input)) => {\r\n    [this.input, this.placeholder].filter(Boolean).forEach((el) => {\r\n      el.classList.toggle('is-empty', empty);\r\n    });\r\n  };\r\n\r\n  public isChanged() {\r\n    return this.value !== this.originalValue;\r\n  }\r\n\r\n  public isValid() {\r\n    return !this.input.classList.contains('error') &&\r\n      (!this.validate || this.validate()) &&\r\n      (!this.required || !isInputEmpty(this.input));\r\n  }\r\n\r\n  public isValidToChange() {\r\n    return this.isValid() && this.isChanged();\r\n  }\r\n\r\n  public setDraftValue(value = '', silent?: boolean) {\r\n    let _value: Parameters<typeof replaceContent>[1] = value;\r\n    if(!this.options.plainText) {\r\n      _value = /* documentFragmentToHTML */(wrapDraftText(value));\r\n    }\r\n\r\n    if(silent) {\r\n      this.setValueSilently(_value, false);\r\n    } else {\r\n      this.value = _value;\r\n    }\r\n  }\r\n\r\n  public setOriginalValue(value: InputField['originalValue'] = '', silent?: boolean) {\r\n    this.originalValue = value;\r\n    this.setDraftValue(value, silent);\r\n  }\r\n\r\n  public setState(state: InputState, label?: LangPackKey) {\r\n    if(label) {\r\n      this.label.textContent = '';\r\n      this.label.append(i18n(label, this.options.labelOptions));\r\n    } else {\r\n      this.setLabel();\r\n    }\r\n\r\n    this.input.classList.toggle('error', !!(state & InputState.Error));\r\n    this.input.classList.toggle('valid', !!(state & InputState.Valid));\r\n  }\r\n\r\n  public setError(label?: LangPackKey) {\r\n    this.setState(InputState.Error, label);\r\n  }\r\n}\r\n","/*\r\n * https://github.com/morethanwords/tweb\r\n * Copyright (C) 2019-2021 Eduard Kuzmenko\r\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\r\n */\r\n\r\nimport {MessageEntity} from '../../layer';\r\nimport parseEntities from './parseEntities';\r\nimport wrapRichText from './wrapRichText';\r\n\r\nexport default function wrapEmojiText(text: string, isDraft = false, entities?: MessageEntity[]) {\r\n  if(!text) return wrapRichText('');\r\n\r\n  entities ??= parseEntities(text).filter((e) => e._ === 'messageEntityEmoji');\r\n  return wrapRichText(text, {entities, wrappingDraft: isDraft});\r\n}\r\n"],"file":"wrapEmojiText-d8c0235b.js"}