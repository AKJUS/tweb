import{dr as P,aB as A,ad as B,c as N,af as F,a1 as y,b as c,R as G,D as j,i as d,a0 as q,a3 as z,t as J,N as K,a,a4 as O}from"./index-Cdfnvns0.js";import{d as Q,a as U,c as V,B as W,P as X,I as Y}from"./appDialogsManager-Nq932Wtq.js";import"./page-DgC5qlX2.js";import"./avatar-BgUGnct1.js";import"./putPreloader-CF9NPU1N.js";import"./classNames-Ckgu1gJJ.js";import"./htmlToSpan-DhAls8qz.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./textToSvgURL-Cnw_Q8Rw.js";import"./iconTsx-CsEh1uvh.js";import"./fastBlur-Co-79rP4.js";import"./countryInputField-I1a9fPtf.js";import"./chatBackground-DQ6ZHuF_.js";import"./codeInputField-CbwwbXe9.js";const Z="_Container_1k29u_1",ee="_InnerContainer_1k29u_9",te="_hidden_1k29u_24",ne="_Header_1k29u_29",oe="_TitleContainer_1k29u_35",ie="_Title_1k29u_35",ae="_Subtitle_1k29u_47",re="_ScrollableContainer_1k29u_52",o={Container:Z,InnerContainer:ee,hidden:te,Header:ne,TitleContainer:oe,Title:ie,Subtitle:ae,ScrollableContainer:re},se=J("<div><div><div><div></div></div></div><div>"),Te=Q({name:"monoforum-drawer",component:(t,le,_)=>{const{appDialogsManager:v,AutonomousMonoforumThreadList:M,appSidebarLeft:C,apiManagerProxy:x,rootScope:D}=P(),u=()=>G.isAvailable("animations");U(t.element,o.Container);const f=A(()=>{const n=x.getChat(t.peerId.toChatId());if(n?._==="channel"&&n?.pFlags?.monoforum)return n;setTimeout(()=>{t?.onClose()},0)}),[h]=B(()=>D.managers.monoforumDialogsStorage.getDialogs({parentPeerId:t.peerId,limit:1})),g=u()&&!C.isCollapsed(),[w,$]=N(g);F(()=>{!f()||!g||u()&&K().then(()=>$(!1))});const i=V({peerId:t.peerId,appDialogsManager:v,AutonomousMonoforumThreadList:M});_.autonomousList=i,y(()=>{i.destroy()});const E=i.sortedList.list;v.setListClickListener({list:E,onFound:null,withContext:!0});function b(){t.element.remove()}async function r(){try{t.onClose?.()}catch{}if(!u())return b();C.isCollapsed()||$(!0),await j(200),b()}_.close=r,i.onEmpty=r;const I=n=>{n.target===t.element&&r()};return t.element.addEventListener("click",I),y(()=>t.element.removeEventListener("click",I)),c(z,{get when(){return f()},get children(){const n=se(),s=n.firstChild,l=s.firstChild,m=l.firstChild,S=s.nextSibling;return d(s,c(W,{class:"sidebar-close-button",icon:"close",noRipple:!0,onClick:r}),l),d(l,c(X,{get class(){return o.Title},get peerId(){return t.peerId}}),m),d(m,c(Y,{key:"ChannelDirectMessages.ThreadsCount",get args(){return[h()?h().count+"":"~"]}})),d(S,()=>i.scrollable.container),q(e=>{const T=o.InnerContainer,R={[o.hidden]:w()},k=`sidebar-header ${o.Header}`,L=o.TitleContainer,H=o.Subtitle,p=o.ScrollableContainer;return T!==e._v$&&a(n,e._v$=T),e._v$2=O(n,R,e._v$2),k!==e._v$3&&a(s,e._v$3=k),L!==e._v$4&&a(l,e._v$4=L),H!==e._v$5&&a(m,e._v$5=H),p!==e._v$6&&a(S,e._v$6=p),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),n}})}});export{Te as default};
//# sourceMappingURL=index-CrmyVd8v.js.map
