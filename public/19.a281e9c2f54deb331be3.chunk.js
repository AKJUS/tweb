(this.webpackJsonp=this.webpackJsonp||[]).push([[19,26,27],{45:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(4),s=a(18),r=a(9),o=a(32),u=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}u((n=n.apply(e,t||[])).next())}))};const l=new o.a("page-chats",!1,()=>(s.default.pushToState("authState",{_:"authStateSignedIn"}),Promise.resolve().then(a.bind(null,11)).then(e=>{e.default.dispatchEvent("im_mount")}),r.default.requestedServerLanguage||r.default.getCacheLangPack().then(e=>{e.local&&r.default.getLangPack(e.lang_code)}),Object(n.a)(),Object(i.a)().then(()=>new Promise(e=>{window.requestAnimationFrame(()=>{Promise.all([a.e(1),a.e(3),a.e(5),a.e(6),a.e(17)]).then(a.bind(null,84)).finally(()=>u(void 0,void 0,void 0,(function*(){e()})))})}))));t.default=l},64:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(9);class i{constructor(e){this.element=document.body.querySelector("."+e.className),this.container=document.createElement("div"),this.container.className="container center-align",this.imageDiv=document.createElement("div"),this.imageDiv.className="auth-image",this.title=document.createElement("h4"),e.titleLangKey&&this.title.append(Object(n.i18n)(e.titleLangKey)),this.subtitle=document.createElement("p"),this.subtitle.className="subtitle",e.subtitleLangKey&&this.subtitle.append(Object(n.i18n)(e.subtitleLangKey)),this.container.append(this.imageDiv,this.title,this.subtitle),e.withInputWrapper&&(this.inputWrapper=document.createElement("div"),this.inputWrapper.className="input-wrapper",this.container.append(this.inputWrapper)),this.element.append(this.container)}}},77:function(e,t,a){"use strict";a.r(t);var n=a(21),i=a(22),s=a(18),r=a(59),o=a(32),u=a(45),l=a(17),c=a(74),d=a(80),p=a(16),h=a(9),m=a(64),b=a(12),v=a(13),g=a(90),f=a(25),w=a(44);let y;const E=new o.a("page-password",!0,()=>{const e=new m.a({className:"page-password",withInputWrapper:!0,titleLangKey:"Login.Password.Title",subtitleLangKey:"Login.Password.Subtitle"}),t=Object(l.a)("btn-primary btn-color-primary"),a=new h.default.IntlElement({key:"Login.Next"});t.append(a.element);const s=new c.a({label:"LoginPassword",name:"password"});let o;y=s.input,e.inputWrapper.append(s.container,t);let E,_=()=>(o||(o=window.setInterval(_,1e4)),r.a.getState().then(e=>{E=e,E.hint?Object(f.a)(s.label,Object(g.a)(p.b.wrapEmojiText(E.hint))):s.setLabel()}));const L=e=>{if(e&&Object(b.a)(e),!y.value.length)return void y.classList.add("error");const i=Object(w.a)([y,t],!0);let l=y.value;a.update({key:"PleaseWait"});const c=Object(n.f)(t);r.a.check(l,E).then(e=>{switch(e._){case"auth.authorization":clearInterval(o),u.default.mount(),O&&O.remove();break;default:t.removeAttribute("disabled"),a.update({key:e._}),c.remove()}}).catch(e=>{i(),s.input.classList.add("error"),e.type,a.update({key:"PASSWORD_HASH_INVALID"}),y.select(),c.remove(),_()})};Object(v.b)(t,L),y.addEventListener("keypress",(function(e){if(this.classList.remove("error"),a.update({key:"Login.Next"}),"Enter"===e.key)return L()}));const S=i.b.isMobile?100:166,O=new d.a(s,S);return e.imageDiv.append(O.container),Promise.all([O.load(),_()])},null,()=>{y.focus(),s.default.pushToState("authState",{_:"authStatePassword"})});t.default=E},93:function(e,t,a){"use strict";a.r(t);var n=a(22),i=a(18),s=a(15),r=a(32),o=a(45),u=a(77),l=a(82),c=a(99),d=a(100),p=a(101),h=a(9),m=a(55),b=a(25),v=function(e,t,a,n){return new(a||(a=Promise))((function(i,s){function r(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}u((n=n.apply(e,t||[])).next())}))};let g,f=null,w=null,y=null;const E=new r.a("page-authCode",!0,()=>{const e=f.type.length,t=new p.a({label:"Code",name:Object(m.b)(),length:e,onFill:e=>{i(""+e)}});g=t.input,E.pageEl.querySelector(".input-wrapper").append(t.container);E.pageEl.querySelector(".phone-edit").addEventListener("click",(function(){return l.default.mount()}));const a=()=>{setTimeout(()=>{y.remove()},300)},i=e=>{g.setAttribute("disabled","true");const n={phone_number:f.phone_number,phone_code_hash:f.phone_code_hash,phone_code:e};s.a.invokeApi("auth.signIn",n,{ignoreErrors:!0}).then(e=>{switch(e._){case"auth.authorization":s.a.setUserAuth(e.user.id),o.default.mount(),a();break;case"auth.authorizationSignUpRequired":c.default.mount({phone_number:f.phone_number,phone_code_hash:f.phone_code_hash}),a()}}).catch(e=>v(void 0,void 0,void 0,(function*(){let a=!1;switch(e.type){case"SESSION_PASSWORD_NEEDED":a=!0,e.handled=!0,yield u.default.mount(),setTimeout(()=>{g.value=""},300);break;case"PHONE_CODE_EXPIRED":g.classList.add("error"),Object(b.a)(t.label,Object(h.i18n)("PHONE_CODE_EXPIRED"));break;case"PHONE_CODE_EMPTY":case"PHONE_CODE_INVALID":g.classList.add("error"),Object(b.a)(t.label,Object(h.i18n)("PHONE_CODE_INVALID"));break;default:t.label.innerText=e.type}a||t.select(),g.removeAttribute("disabled")})))},r=E.pageEl.querySelector(".auth-image"),w=n.b.isMobile?100:166,y=new d.a(t,w);return r.append(y.container),y.load()},e=>{if(f=e,w){g.value="";const e=document.createEvent("HTMLEvents");e.initEvent("input",!1,!0),g.dispatchEvent(e)}else w=E.pageEl.getElementsByClassName("phone")[0],y=E.pageEl.getElementsByClassName("sent-type")[0];let t,a;switch(w.innerText=f.phone_number,f.type._){case"auth.sentCodeTypeSms":t="Login.Code.SentSms";break;case"auth.sentCodeTypeApp":t="Login.Code.SentInApp";break;case"auth.sentCodeTypeCall":t="Login.Code.SentCall";break;default:t="Login.Code.SentUnknown",a=[f.type._]}Object(b.a)(y,Object(h.i18n)(t,a)),i.default.pushToState("authState",{_:"authStateAuthCode",sentCode:e})},()=>{g.focus()});t.default=E},99:function(e,t,a){"use strict";a.r(t);var n=a(17),i=a(28),s=a(21),r=a(86),o=a(18),u=a(9),l=a(15),c=a(16),d=a(64),p=a(32),h=a(45),m=a(2),b=a(25);let v=null;const g=new p.a("page-signUp",!0,()=>Promise.resolve().then(a.bind(null,53)).then(e=>{const t=new d.a({className:"page-signUp",withInputWrapper:!0,titleLangKey:"YourName",subtitleLangKey:"Login.Register.Subtitle"});t.imageDiv.classList.add("avatar-edit"),t.title.classList.add("fullName");const a=document.createElement("canvas");a.id="canvas-avatar",a.className="avatar-edit-canvas";const o=document.createElement("span");o.className="tgico tgico-cameraadd",t.imageDiv.append(a,o);const p=e.default;let g;t.imageDiv.addEventListener("click",()=>{(new r.a).open(a,e=>{g=e})});const f=e=>{const a=w.value||"",n=y.value||"",i=a||n?(a+" "+n).trim():"";i?Object(b.a)(t.title,c.b.wrapEmojiText(i)):Object(b.a)(t.title,Object(u.i18n)("YourName"))};const w=new i.b({label:"FirstName",maxLength:70}),y=new i.b({label:"LastName",maxLength:64}),E=Object(n.a)("btn-primary btn-color-primary"),_=new u.default.IntlElement({key:"StartMessaging"});return E.append(_.element),t.inputWrapper.append(w.container,y.container,E),w.input.addEventListener("input",f),y.input.addEventListener("input",f),E.addEventListener("click",(function(e){if(w.input.classList.contains("error")||y.input.classList.contains("error"))return!1;if(!w.value.length)return w.input.classList.add("error"),!1;this.disabled=!0;const t=w.value.trim(),a=y.value.trim(),n={phone_number:v.phone_number,phone_code_hash:v.phone_code_hash,first_name:t,last_name:a};_.update({key:"PleaseWait"});const i=Object(s.f)(this);l.a.invokeApi("auth.signUp",n).then(e=>{switch(e._){case"auth.authorization":l.a.setUserAuth(e.user.id),new Promise((e,t)=>{if(!g)return e();g().then(a=>{p.uploadProfilePhoto(a).then(e,t)},t)}).finally(()=>{h.default.mount()});break;default:_.update({key:e._}),this.removeAttribute("disabled"),i.remove()}}).catch(e=>{this.removeAttribute("disabled"),i.remove(),e.type,_.update({key:e.type})})})),Object(m.a)(),new Promise(e=>{window.requestAnimationFrame(e)})}),e=>{v=e,o.default.pushToState("authState",{_:"authStateSignUp",authCode:e})});t.default=g}}]);
//# sourceMappingURL=19.a281e9c2f54deb331be3.chunk.js.map