import{a as m,e as P,_ as w,g as y,i as E}from"./index-754f9c9f.js";import{L as N}from"./loginPage-4ce5cd90.js";import{P as I}from"./page-13ab4361.js";import{e as k,f as A,I as f,r as b,w as S}from"./lottieLoader-fd7499bf.js";import{B as F}from"./bytesCmp-af6e57f3.js";import{p as M}from"./putPreloader-7a17bbfb.js";let d=null;const U=async()=>{const e=new N({className:"page-signUp",withInputWrapper:!0,titleLangKey:"YourName",subtitleLangKey:"Login.Register.Subtitle"});e.imageDiv.classList.add("avatar-edit"),e.title.classList.add("fullName");const o=document.createElement("canvas");o.id="canvas-avatar",o.className="avatar-edit-canvas";const g=document.createElement("span");g.className="tgico tgico-cameraadd",e.imageDiv.append(o,g);let u;e.imageDiv.addEventListener("click",()=>{k.createPopup(A).open(o,a=>{u=a})});const h=a=>{const n=t.value||"",i=s.value||"",l=n||i?(n+" "+i).trim():"";l?b(e.title,S(l)):b(e.title,E("YourName"))},L=()=>new Promise((a,n)=>{if(!u)return a();u().then(i=>{m.managers.appProfileManager.uploadProfilePhoto(i).then(a,n)},n)}),t=new f({label:"FirstName",maxLength:70}),s=new f({label:"LastName",maxLength:64}),c=F("btn-primary btn-color-primary"),p=new P.IntlElement({key:"StartMessaging"});return c.append(p.element),e.inputWrapper.append(t.container,s.container,c),t.input.addEventListener("input",h),s.input.addEventListener("input",h),c.addEventListener("click",function(a){if(t.input.classList.contains("error")||s.input.classList.contains("error"))return!1;if(!t.value.length)return t.input.classList.add("error"),!1;this.disabled=!0;const n=t.value.trim(),i=s.value.trim(),l={phone_number:d.phone_number,phone_code_hash:d.phone_code_hash,first_name:n,last_name:i};p.update({key:"PleaseWait"});const v=M(this);m.managers.apiManager.invokeApi("auth.signUp",l).then(r=>{switch(r._){case"auth.authorization":m.managers.apiManager.setUser(r.user),L().finally(()=>{w(()=>import("./pageIm-ac332334.js"),["./pageIm-ac332334.js","./index-754f9c9f.js","./index-edf95275.css","./page-13ab4361.js"],import.meta.url).then(_=>{_.default.mount()})});break;default:p.update({key:r._}),this.removeAttribute("disabled"),v.remove();break}}).catch(r=>{switch(this.removeAttribute("disabled"),v.remove(),r.type){default:p.update({key:r.type});break}})}),y(),new Promise(a=>{window.requestAnimationFrame(a)})},K=new I("page-signUp",!0,U,e=>{d=e,m.managers.appStateManager.pushToState("authState",{_:"authStateSignUp",authCode:e})});export{K as default};
//# sourceMappingURL=pageSignUp-77203b91.js.map
